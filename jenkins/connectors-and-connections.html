<!DOCTYPE html><html lang="en">
<head>
<title>9 Connectors and Connections‣ Modelica® Language Specification version 3.6-dev</title>
<!--Generated on Sat May  1 12:45:50 2021 by LaTeXML (version 0.8.5) http://dlmf.nist.gov/LaTeXML/.-->
<!--Document created on May 1, 2021.-->

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="LaTeXML.css" type="text/css">
<link rel="stylesheet" href="ltx-report.css" type="text/css">
<link rel="stylesheet" href="ltx-listings.css" type="text/css">
<link rel="stylesheet" href="css/MLS.css" type="text/css">
<link rel="stylesheet" href="css/MLS-navbar-left.css" type="text/css">
<script src="LaTeXML-maybeMathjax.js" type="text/javascript"></script>
<link rel="up" href="MLS.html" title="Modelica® Language Specification version 3.6-dev">
<link rel="start" href="MLS.html" title="Modelica® Language Specification version 3.6-dev">
<link rel="prev" href="equations.html" title="Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev">
<link rel="next" href="arrays.html" title="Chapter 10 Arrays ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="preface.html" title="Preface ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="introduction1.html" title="Chapter 1 Introduction ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="lexical-structure.html" title="Chapter 2 Lexical Structure ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="operators-and-expressions.html" title="Chapter 3 Operators and Expressions ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="class-predefined-types-and-declarations.html" title="Chapter 4 Classes, Predefined Types, and Declarations ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="scoping-name-lookup-and-flattening.html" title="Chapter 5 Scoping, Name Lookup, and Flattening ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="interface-or-type-relationships.html" title="Chapter 6 Interface or Type Relationships ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="inheritance-modification-and-redeclaration.html" title="Chapter 7 Inheritance, Modification, and Redeclaration ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="equations.html" title="Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="arrays.html" title="Chapter 10 Arrays ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="statements-and-algorithm-sections.html" title="Chapter 11 Statements and Algorithm Sections ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="functions.html" title="Chapter 12 Functions ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="packages.html" title="Chapter 13 Packages ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="overloaded-operators.html" title="Chapter 14 Overloaded Operators ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="stream-connectors.html" title="Chapter 15 Stream Connectors ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="synchronous-language-elements.html" title="Chapter 16 Synchronous Language Elements ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="state-machines.html" title="Chapter 17 State Machines ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="annotations.html" title="Chapter 18 Annotations ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="unit-expressions.html" title="Chapter 19 Unit Expressions ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="the-modelica-standard-library.html" title="Chapter 20 The Modelica Standard Library ‣ Modelica® Language Specification version 3.6-dev">
<link rel="appendix" href="modelica-concrete-syntax.html" title="Appendix A Modelica Concrete Syntax ‣ Modelica® Language Specification version 3.6-dev">
<link rel="appendix" href="modelica-dae-representation.html" title="Appendix B Modelica DAE Representation ‣ Modelica® Language Specification version 3.6-dev">
<link rel="appendix" href="derivation-of-stream-equations.html" title="Appendix C Derivation of Stream Equations ‣ Modelica® Language Specification version 3.6-dev">
<link rel="appendix" href="modelica-revision-history.html" title="Appendix D Modelica Revision History ‣ Modelica® Language Specification version 3.6-dev">
<link rel="bibliography" href="bib.html" title="References ‣ Modelica® Language Specification version 3.6-dev">
<link rel="index" href="idx.html" title="Index ‣ Modelica® Language Specification version 3.6-dev">
<meta name="keywords" lang="en" content="Connections.branch, Connections.isRoot, Connections.potentialRoot, Connections.root, Connections.rooted, connect, connector, definite, definite root node, equalityConstraint, equation, expandable, expandable connector, flow, in expandable connector, inside connector, non-expandable connector, optional spanning-tree edge, outside connector, overconstrained equation operator, overdetermined, potential, potential root node, record, required spanning-tree edge, root node, sizeless array component, type">
</head>
<body>
<nav class="ltx_page_navbar"><a href="MLS.html" title="Modelica® Language Specification version 3.6-dev" class="ltx_ref" rel="start"><span class="ltx_text ltx_ref_title">Modelica<sup class="ltx_sup">®</sup> Language Specification version 3.6-dev</span></a>
<div class="ltx_TOC">
<ul class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="preface.html" title="Preface ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title">Preface</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="introduction1.html" title="Chapter 1 Introduction ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1 </span>Introduction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="lexical-structure.html" title="Chapter 2 Lexical Structure ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2 </span>Lexical Structure</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="operators-and-expressions.html" title="Chapter 3 Operators and Expressions ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3 </span>Operators and Expressions</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="class-predefined-types-and-declarations.html" title="Chapter 4 Classes, Predefined Types, and Declarations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4 </span>Classes, Predefined Types, and Declarations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="scoping-name-lookup-and-flattening.html" title="Chapter 5 Scoping, Name Lookup, and Flattening ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5 </span>Scoping, Name Lookup, and Flattening</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="interface-or-type-relationships.html" title="Chapter 6 Interface or Type Relationships ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">6 </span>Interface or Type Relationships</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="inheritance-modification-and-redeclaration.html" title="Chapter 7 Inheritance, Modification, and Redeclaration ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7 </span>Inheritance, Modification, and Redeclaration</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="equations.html" title="Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8 </span>Equations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter ltx_ref_self">
<span class="ltx_ref ltx_ref_self"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9 </span>Connectors and Connections</span></span>
<ul class="ltx_toclist ltx_toclist_chapter">
<li class="ltx_tocentry ltx_tocentry_section">
<a href="#connect-equations-and-connectors" title="9.1 Connect-Equations and Connectors ‣ Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9.1 </span>Connect-Equations and Connectors</span></a>
<ul class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#connection-sets" title="9.1.1 Connection Sets ‣ 9.1 Connect-Equations and Connectors ‣ Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9.1.1 </span>Connection Sets</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#inside-and-outside-connectors" title="9.1.2 Inside and Outside Connectors ‣ 9.1 Connect-Equations and Connectors ‣ Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9.1.2 </span>Inside and Outside Connectors</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#expandable-connectors" title="9.1.3 Expandable Connectors ‣ 9.1 Connect-Equations and Connectors ‣ Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9.1.3 </span>Expandable Connectors</span></a></li>
</ul>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a href="#generation-of-connection-equations" title="9.2 Generation of Connection Equations ‣ Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9.2 </span>Generation of Connection Equations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a href="#restrictions-of-connections-and-connectors" title="9.3 Restrictions of Connections and Connectors ‣ Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9.3 </span>Restrictions of Connections and Connectors</span></a>
<ul class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#balancing-restriction-and-size-of-connectors" title="9.3.1 Balancing Restriction and Size of Connectors ‣ 9.3 Restrictions of Connections and Connectors ‣ Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9.3.1 </span>Balancing Restriction and Size of Connectors</span></a></li>
</ul>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a href="#equation-operators-for-overconstrained-connection-based-equation-systems1" title="9.4 Equation Operators for Overconstrained Connection-Based Equation Systems ‣ Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9.4 </span>Equation Operators for Overconstrained Connection-Based Equation Systems</span></a>
<ul class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#overconstrained-equation-operators-for-connection-graphs" title="9.4.1 Overconstrained Equation Operators for Connection Graphs ‣ 9.4 Equation Operators for Overconstrained Connection-Based Equation Systems ‣ Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9.4.1 </span>Overconstrained Equation Operators for Connection Graphs</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#converting-the-connection-graph-into-trees-and-generating-connection-equations" title="9.4.2 Converting the Connection Graph into Trees and Generating Connection Equations ‣ 9.4 Equation Operators for Overconstrained Connection-Based Equation Systems ‣ Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9.4.2 </span>Converting the Connection Graph into Trees and Generating Connection Equations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a href="#examples-of-overconstrained-connection-graphs" title="9.4.3 Examples of Overconstrained Connection Graphs ‣ 9.4 Equation Operators for Overconstrained Connection-Based Equation Systems ‣ Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9.4.3 </span>Examples of Overconstrained Connection Graphs</span></a>
<ul class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a href="#an-overdetermined-connector-for-power-systems" title="9.4.3.1 An Overdetermined Connector for Power Systems ‣ 9.4.3 Examples of Overconstrained Connection Graphs ‣ 9.4 Equation Operators for Overconstrained Connection-Based Equation Systems ‣ Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9.4.3.1 </span>An Overdetermined Connector for Power Systems</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a href="#an-overdetermined-connector-for-3-dimensional-mechanical-systems" title="9.4.3.2 An Overdetermined Connector for 3-dimensional Mechanical Systems ‣ 9.4.3 Examples of Overconstrained Connection Graphs ‣ 9.4 Equation Operators for Overconstrained Connection-Based Equation Systems ‣ Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9.4.3.2 </span>An Overdetermined Connector for 3-dimensional Mechanical Systems</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="arrays.html" title="Chapter 10 Arrays ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">10 </span>Arrays</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="statements-and-algorithm-sections.html" title="Chapter 11 Statements and Algorithm Sections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">11 </span>Statements and Algorithm Sections</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="functions.html" title="Chapter 12 Functions ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">12 </span>Functions</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="packages.html" title="Chapter 13 Packages ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">13 </span>Packages</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="overloaded-operators.html" title="Chapter 14 Overloaded Operators ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">14 </span>Overloaded Operators</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="stream-connectors.html" title="Chapter 15 Stream Connectors ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">15 </span>Stream Connectors</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="synchronous-language-elements.html" title="Chapter 16 Synchronous Language Elements ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">16 </span>Synchronous Language Elements</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="state-machines.html" title="Chapter 17 State Machines ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">17 </span>State Machines</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="annotations.html" title="Chapter 18 Annotations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">18 </span>Annotations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="unit-expressions.html" title="Chapter 19 Unit Expressions ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">19 </span>Unit Expressions</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="the-modelica-standard-library.html" title="Chapter 20 The Modelica Standard Library ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">20 </span>The Modelica Standard Library</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="modelica-concrete-syntax.html" title="Appendix A Modelica Concrete Syntax ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A </span>Modelica Concrete Syntax</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="modelica-dae-representation.html" title="Appendix B Modelica DAE Representation ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">B </span>Modelica DAE Representation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="derivation-of-stream-equations.html" title="Appendix C Derivation of Stream Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C </span>Derivation of Stream Equations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="modelica-revision-history.html" title="Appendix D Modelica Revision History ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">D </span>Modelica Revision History</span></a></li>
<li class="ltx_tocentry ltx_tocentry_bibliography"><a href="bib.html" title="References ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title">References</span></a></li>
<li class="ltx_tocentry ltx_tocentry_index"><a href="idx.html" title="Index ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title">Index</span></a></li>
</ul>
</div>
</nav>
<div class="ltx_page_main">
<header class="ltx_page_header">
<div>
<a href="MLS.html" title="Modelica® Language Specification version 3.6-dev" class="ltx_ref" rel="up"><span class="ltx_text ltx_ref_title">Modelica<sup class="ltx_sup">®</sup> Language Specification version 3.6-dev</span></a><a href="equations.html" title="Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref" rel="prev"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8 </span>Equations</span></a><a href="arrays.html" title="Chapter 10 Arrays ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref" rel="next"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">10 </span>Arrays</span></a>
</div></header>
<div class="ltx_page_content">
<section class="ltx_chapter" lang="en">
<h1 class="ltx_title ltx_title_chapter">
<span class="ltx_tag ltx_tag_chapter">Chapter 9 </span>Connectors and Connections</h1>
<div class="ltx_dates">(May 1, 2021)</div>

<div id="p1" class="ltx_para">
<p class="ltx_p">This chapter covers connectors, connect-equations, and connections.</p>
</div>
<div id="p2" class="ltx_para">
<p class="ltx_p">Connectors and connect-equations are designed so that different components can be connected graphically
with well-defined semantics. However, the graphical part is optional and found in <a href="annotations.html" title="Chapter 18 Annotations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">chapter</span> <span class="ltx_text ltx_ref_tag">18</span></a>.</p>
</div>
<section id="connect-equations-and-connectors" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">9.1 </span>Connect-Equations and Connectors</h2>

<div id="S1.p1" class="ltx_para">
<p class="ltx_p">Connections between objects are introduced by connect-equations in the equation part of a class.
A connect-equation has the following syntax:</p>
<div class="ltx_listing ltx_lst_language_grammar ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,Y29ubmVjdChjb21wb25lbnQtcmVmZXJlbmNlLCBjb21wb25lbnQtcmVmZXJlbmNlKTs=">⬇</a></div>
<div id="lstnumberx1776" class="ltx_listingline">
<span class="ltx_text ltx_lst_keyword" style="color:#003378;">connect</span>(<span class="ltx_text ltx_lst_identifier ltx_font_italic">component-reference</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier ltx_font_italic">component-reference</span>);
</div>
</div>
</div>
<div id="S1.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">A <em class="ltx_emph ltx_font_upright">connector</em> is an instance of a <span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_bold ltx_font_upright" style="color:#003378;background-color:#FFFFFF;">connector</span> class.</span>]</p>
</div>
<div id="S1.p3" class="ltx_para">
<p class="ltx_p">The connect-equation construct takes two references to connectors, each of which is either of the following forms:</p>
<ul id="S1.I1" class="ltx_itemize">
<li id="S1.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i1.p1" class="ltx_para">
<p class="ltx_p"><math id="S1.I1.i1.p1.m1" class="ltx_Math" alttext="c_{1}.c_{2}\ldots{}c_{n}" display="inline"><mrow><msub><mi>c</mi><mn>1</mn></msub><mo>.</mo><mrow><msub><mi>c</mi><mn>2</mn></msub><mo>⁢</mo><mi mathvariant="normal">…</mi><mo>⁢</mo><msub><mi>c</mi><mi>n</mi></msub></mrow></mrow></math>,
where <math id="S1.I1.i1.p1.m2" class="ltx_Math" alttext="c_{1}" display="inline"><msub><mi>c</mi><mn>1</mn></msub></math> is a connector of the class,
<math id="S1.I1.i1.p1.m3" class="ltx_Math" alttext="n" display="inline"><mi>n</mi></math><math id="S1.I1.i1.p1.m4" class="ltx_Math" alttext="\geq" display="inline"><mo>≥</mo></math>1 and <math id="S1.I1.i1.p1.m5" class="ltx_Math" alttext="c_{i+1}" display="inline"><msub><mi>c</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub></math> is a connector element of
<math id="S1.I1.i1.p1.m6" class="ltx_Math" alttext="c_{i}" display="inline"><msub><mi>c</mi><mi>i</mi></msub></math> for <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">i</span>=1:(<span class="ltx_text ltx_lst_identifier">n</span>-1)</span>.</p>
</div>
</li>
<li id="S1.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i2.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">m</span>.<span class="ltx_text ltx_lst_identifier">c</span></span>, where <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">m</span> is a non-connector element in the class and <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">c</span> is a
connector element of <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">m</span>.</p>
</div>
</li>
</ul>
</div>
<div id="S1.p4" class="ltx_para">
<p class="ltx_p">There may optionally be array subscripts on any of the components; the
array subscripts shall be parameter expressions or the special operator
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">:</span>. If the connect construct references array of connectors, the
array dimensions must match, and each corresponding pair of elements
from the arrays is connected as a pair of scalar connectors.</p>
</div>
<div id="S1.p5" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Example:
Array usage:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ICBjb25uZWN0b3IgSW5Qb3J0ID0gaW5wdXQgUmVhbDsKICBjb25uZWN0b3IgT3V0UG9ydCA9IG91dHB1dCBSZWFsOwogIGJsb2NrIE1hdHJpeEdhaW4KICAgIGlucHV0IEluUG9ydCB1W3NpemUoQSwyKV07CiAgICBvdXRwdXQgT3V0UG9ydCB5W3NpemUoQSwxKV07CiAgICBwYXJhbWV0ZXIgUmVhbCBBWzosOl0gPSBbMV07CiAgZXF1YXRpb24KICAgIHk9QSp1OwogIGVuZCBNYXRyaXhHYWluOwogIE1vZGVsaWNhLkJsb2Nrcy5Tb3VyY2VzLlNpbmUgc2luU291cmNlWzVdOwogIE1hdHJpeEdhaW4gZ2FpbiAoQSA9IDUqaWRlbnRpdHkoNSkpOwogIE1hdHJpeEdhaW4gZ2FpbjIoQSA9IG9uZXMoMiw1KSk7CiAgT3V0UG9ydCB4WzJdOwplcXVhdGlvbgogIGNvbm5lY3Qoc2luU291cmNlLnksIGdhaW4udSk7IC8vIExlZ2FsCiAgY29ubmVjdChnYWluLnksIGdhaW4yLnUpOyAvLyBMZWdhbAogIGNvbm5lY3QoZ2FpbjIueSwgeCk7IC8vIExlZ2Fs">⬇</a></div>
<div id="lstnumberx1777" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">connector</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">InPort</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">input</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span>;
</div>
<div id="lstnumberx1778" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">connector</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">OutPort</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">output</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span>;
</div>
<div id="lstnumberx1779" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">block</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">MatrixGain</span>
</div>
<div id="lstnumberx1780" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">input</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">InPort</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">u</span>[<span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">size</span>(<span class="ltx_text ltx_lst_identifier">A</span>,2)];
</div>
<div id="lstnumberx1781" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">output</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">OutPort</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">y</span>[<span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">size</span>(<span class="ltx_text ltx_lst_identifier">A</span>,1)];
</div>
<div id="lstnumberx1782" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">parameter</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">A</span>[:,:]<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span>[1];
</div>
<div id="lstnumberx1783" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx1784" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_identifier">y</span>=<span class="ltx_text ltx_lst_identifier">A</span>*<span class="ltx_text ltx_lst_identifier">u</span>;
</div>
<div id="lstnumberx1785" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">MatrixGain</span>;
</div>
<div id="lstnumberx1786" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Blocks</span>.<span class="ltx_text ltx_lst_identifier">Sources</span>.<span class="ltx_text ltx_lst_identifier">Sine</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">sinSource</span>[5];
</div>
<div id="lstnumberx1787" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">MatrixGain</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">gain</span><span class="ltx_text ltx_lst_space"> </span>(<span class="ltx_text ltx_lst_identifier">A</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span>5*<span class="ltx_text ltx_lst_identifier">identity</span>(5));
</div>
<div id="lstnumberx1788" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">MatrixGain</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">gain2</span>(<span class="ltx_text ltx_lst_identifier">A</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">ones</span>(2,5));
</div>
<div id="lstnumberx1789" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">OutPort</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">x</span>[2];
</div>
<div id="lstnumberx1790" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx1791" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">connect</span>(<span class="ltx_text ltx_lst_identifier">sinSource</span>.<span class="ltx_text ltx_lst_identifier">y</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">gain</span>.<span class="ltx_text ltx_lst_identifier">u</span>);<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>Legal</span>
</div>
<div id="lstnumberx1792" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">connect</span>(<span class="ltx_text ltx_lst_identifier">gain</span>.<span class="ltx_text ltx_lst_identifier">y</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">gain2</span>.<span class="ltx_text ltx_lst_identifier">u</span>);<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>Legal</span>
</div>
<div id="lstnumberx1793" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">connect</span>(<span class="ltx_text ltx_lst_identifier">gain2</span>.<span class="ltx_text ltx_lst_identifier">y</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">x</span>);<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>Legal</span>
</div>
</div>
<p class="ltx_p">]</p>
</div>
<div id="S1.p6" class="ltx_para">
<p class="ltx_p">The three main tasks are to:</p>
<ul id="S1.I2" class="ltx_itemize">
<li id="S1.I2.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I2.i1.p1" class="ltx_para">
<p class="ltx_p">Elaborate expandable connectors.</p>
</div>
</li>
<li id="S1.I2.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I2.i2.p1" class="ltx_para">
<p class="ltx_p">Build connection sets from connect-equations.</p>
</div>
</li>
<li id="S1.I2.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I2.i3.p1" class="ltx_para">
<p class="ltx_p">Generate equations for the complete model.</p>
</div>
</li>
</ul>
</div>
<section id="connection-sets" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">9.1.1 </span>Connection Sets</h3>

<div id="S1.SS1.p1" class="ltx_para">
<p class="ltx_p">A connection set is a set of variables connected by means of
connect-equations. A connection set shall contain either only flow
variables or only non-flow variables.</p>
</div>
</section>
<section id="inside-and-outside-connectors" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">9.1.2 </span>Inside and Outside Connectors</h3>

<div id="S1.SS2.p1" class="ltx_para">
<p class="ltx_p">In an element instance <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">M</span>, each connector element of <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">M</span> is called an <em class="ltx_emph ltx_font_italic">outside connector</em> with respect to <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">M</span>.
Any other connector elements that is hierarchically inside <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">M</span>, but not in one of the outside connectors of <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">M</span>, is called an <em class="ltx_emph ltx_font_italic">inside connector</em> with respect to <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">M</span>.
This is done before resolving <span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_bold" style="color:#003378;background-color:#FFFFFF;">outer</span> elements to corresponding <span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_bold" style="color:#003378;background-color:#FFFFFF;">inner</span> ones.</p>
</div>
<div id="S1.SS2.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Example:</span></p>
</div>
<figure id="F1" class="ltx_figure"><object type="image/svg+xml" data="media/innerouterconnector.svg" id="F1.g1" class="ltx_graphics ltx_centering" alt="Example for inside and outside connectors."></object>
<figcaption class="ltx_caption ltx_font_italic"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text ltx_font_upright">Figure 9.1</span>: </span>Example for inside and outside connectors.</figcaption>
</figure>
<div id="S1.SS2.p3" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">The figure visualizes the following <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="color:#003378;background-color:#FFFFFF;">connect</span> equations to the connector <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">c</span> in the models <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">m</span><math id="S1.SS2.p3.m1" class="ltx_Math" alttext="i" display="inline"><mi>i</mi></math>.
Consider the following <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="color:#003378;background-color:#FFFFFF;">connect</span> equations found in the model for component <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">m0</span>:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,Y29ubmVjdChtMS5jLCBtMy5jKTsgLy8gbTEuYyBhbmQgbTMuYyBhcmUgaW5zaWRlIGNvbm5lY3RvcnMKY29ubmVjdChtMi5jLCBtMy5jKTsgLy8gbTIuYyBhbmQgbTMuYyBhcmUgaW5zaWRlIGNvbm5lY3RvcnM=">⬇</a></div>
<div id="lstnumberx1794" class="ltx_listingline">
<span class="ltx_text ltx_lst_keyword" style="color:#003378;">connect</span>(<span class="ltx_text ltx_lst_identifier">m1</span>.<span class="ltx_text ltx_lst_identifier">c</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">m3</span>.<span class="ltx_text ltx_lst_identifier">c</span>);<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>m1.c<span class="ltx_text ltx_lst_space"> </span>and<span class="ltx_text ltx_lst_space"> </span>m3.c<span class="ltx_text ltx_lst_space"> </span>are<span class="ltx_text ltx_lst_space"> </span>inside<span class="ltx_text ltx_lst_space"> </span>connectors</span>
</div>
<div id="lstnumberx1795" class="ltx_listingline">
<span class="ltx_text ltx_lst_keyword" style="color:#003378;">connect</span>(<span class="ltx_text ltx_lst_identifier">m2</span>.<span class="ltx_text ltx_lst_identifier">c</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">m3</span>.<span class="ltx_text ltx_lst_identifier">c</span>);<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>m2.c<span class="ltx_text ltx_lst_space"> </span>and<span class="ltx_text ltx_lst_space"> </span>m3.c<span class="ltx_text ltx_lst_space"> </span>are<span class="ltx_text ltx_lst_space"> </span>inside<span class="ltx_text ltx_lst_space"> </span>connectors</span>
</div>
</div>
<p class="ltx_p"><span class="ltx_text ltx_font_italic">and in the model for component <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">m3</span> (<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">c</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">x</span></span></span> is a sub-connector inside <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">c</span>):</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,Y29ubmVjdChjLCBtNC5jKTsgICAvLyBjIGlzIGFuIG91dHNpZGUgY29ubmVjdG9yLCBtNC5jIGlzIGFuIGluc2lkZSBjb25uZWN0b3IKY29ubmVjdChjLngsIG01LmMpOyAvLyBjLnggaXMgYW4gb3V0c2lkZSBjb25uZWN0b3IsIG01LmMgaXMgYW4gaW5zaWRlIGNvbm5lY3Rvcgpjb25uZWN0KGMsIGQpOyAgICAgIC8vIGMgaXMgYW4gb3V0c2lkZSBjb25uZWN0b3IsIGQgaXMgYW4gb3V0c2lkZSBjb25uZWN0b3I=">⬇</a></div>
<div id="lstnumberx1796" class="ltx_listingline">
<span class="ltx_text ltx_lst_keyword" style="color:#003378;">connect</span>(<span class="ltx_text ltx_lst_identifier">c</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">m4</span>.<span class="ltx_text ltx_lst_identifier">c</span>);<span class="ltx_text ltx_lst_space">   </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>c<span class="ltx_text ltx_lst_space"> </span>is<span class="ltx_text ltx_lst_space"> </span>an<span class="ltx_text ltx_lst_space"> </span>outside<span class="ltx_text ltx_lst_space"> </span>connector,<span class="ltx_text ltx_lst_space"> </span>m4.c<span class="ltx_text ltx_lst_space"> </span>is<span class="ltx_text ltx_lst_space"> </span>an<span class="ltx_text ltx_lst_space"> </span>inside<span class="ltx_text ltx_lst_space"> </span>connector</span>
</div>
<div id="lstnumberx1797" class="ltx_listingline">
<span class="ltx_text ltx_lst_keyword" style="color:#003378;">connect</span>(<span class="ltx_text ltx_lst_identifier">c</span>.<span class="ltx_text ltx_lst_identifier">x</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">m5</span>.<span class="ltx_text ltx_lst_identifier">c</span>);<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>c.x<span class="ltx_text ltx_lst_space"> </span>is<span class="ltx_text ltx_lst_space"> </span>an<span class="ltx_text ltx_lst_space"> </span>outside<span class="ltx_text ltx_lst_space"> </span>connector,<span class="ltx_text ltx_lst_space"> </span>m5.c<span class="ltx_text ltx_lst_space"> </span>is<span class="ltx_text ltx_lst_space"> </span>an<span class="ltx_text ltx_lst_space"> </span>inside<span class="ltx_text ltx_lst_space"> </span>connector</span>
</div>
<div id="lstnumberx1798" class="ltx_listingline">
<span class="ltx_text ltx_lst_keyword" style="color:#003378;">connect</span>(<span class="ltx_text ltx_lst_identifier">c</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">d</span>);<span class="ltx_text ltx_lst_space">      </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>c<span class="ltx_text ltx_lst_space"> </span>is<span class="ltx_text ltx_lst_space"> </span>an<span class="ltx_text ltx_lst_space"> </span>outside<span class="ltx_text ltx_lst_space"> </span>connector,<span class="ltx_text ltx_lst_space"> </span>d<span class="ltx_text ltx_lst_space"> </span>is<span class="ltx_text ltx_lst_space"> </span>an<span class="ltx_text ltx_lst_space"> </span>outside<span class="ltx_text ltx_lst_space"> </span>connector</span>
</div>
</div>
<p class="ltx_p"><span class="ltx_text ltx_font_italic">and in the model for component <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">m6</span>:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,Y29ubmVjdChkLCBtNy5jKTsgICAvLyBkIGlzIGFuIG91dHNpZGUgY29ubmVjdG9yLCBtNy5jIGlzIGFuIGluc2lkZSBjb25uZWN0b3I=">⬇</a></div>
<div id="lstnumberx1799" class="ltx_listingline">
<span class="ltx_text ltx_lst_keyword" style="color:#003378;">connect</span>(<span class="ltx_text ltx_lst_identifier">d</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">m7</span>.<span class="ltx_text ltx_lst_identifier">c</span>);<span class="ltx_text ltx_lst_space">   </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>d<span class="ltx_text ltx_lst_space"> </span>is<span class="ltx_text ltx_lst_space"> </span>an<span class="ltx_text ltx_lst_space"> </span>outside<span class="ltx_text ltx_lst_space"> </span>connector,<span class="ltx_text ltx_lst_space"> </span>m7.c<span class="ltx_text ltx_lst_space"> </span>is<span class="ltx_text ltx_lst_space"> </span>an<span class="ltx_text ltx_lst_space"> </span>inside<span class="ltx_text ltx_lst_space"> </span>connector</span>
</div>
</div>
<p class="ltx_p">]</p>
</div>
</section>
<section id="expandable-connectors" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">9.1.3 </span>Expandable Connectors</h3>

<div id="S1.SS3.p1" class="ltx_para">
<p class="ltx_p">If the <span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_bold" style="color:#003378;background-color:#FFFFFF;">expandable</span> qualifier is present on a connector definition, all instances of that connector are referred to as <em class="ltx_emph ltx_font_italic">expandable connectors</em>.
Instances of connectors that do not possess this qualifier will be referred to as <em class="ltx_emph ltx_font_italic">non-expandable connectors</em>.</p>
</div>
<div id="S1.SS3.p2" class="ltx_para">
<p class="ltx_p">Before generating connection equations non-parameter scalar variables and non-parameter array elements declared in expandable connectors are marked as only being
potentially present. A non-parameter array element may be declared with array dimensions <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">:</span> indicating that the size is unknown (note that the size of
such a dimension cannot be determined using <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">size</span>, see <a href="arrays.html#array-dimension-and-size-functions" title="10.3.1 Array Dimension and Size Functions ‣ 10.3 Built-in Array Functions ‣ Chapter 10 Arrays ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">10.3.1</span></a>). This applies to both variables of simple types,
and variables of structured types.</p>
</div>
<div id="S1.SS3.p3" class="ltx_para">
<p class="ltx_p">Then connections containing expandable connectors are elaborated:</p>
<ul id="S1.I3" class="ltx_itemize">
<li id="S1.I3.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I3.i1.p1" class="ltx_para">
<p class="ltx_p">One connector in the connect equation must reference a declared
component, and if the other connector is an undeclared element in a
declared expandable connector it is handled as follows (elements that
are only potentially present are not seen as declared):
</p>
<ul id="S1.I3.i1.I1" class="ltx_itemize">
<li id="S1.I3.i1.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold">–</span></span> 
<div id="S1.I3.i1.I1.i1.p1" class="ltx_para">
<p class="ltx_p">The expandable connector instance is automatically augmented with a
new component having the used name and corresponding type.</p>
</div>
</li>
<li id="S1.I3.i1.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold">–</span></span> 
<div id="S1.I3.i1.I1.i2.p1" class="ltx_para">
<p class="ltx_p">If the undeclared component is subscripted, an array variable is created, and a connection to the specific array element is performed. Introducing elements in an array gives an array with at least the specified elements, other elements are either not created or have a default value (i.e. as if they were only potentially present, and the same note regarding the use of <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">size</span> also applies here).</p>
</div>
</li>
<li id="S1.I3.i1.I1.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold">–</span></span> 
<div id="S1.I3.i1.I1.i3.p1" class="ltx_para">
<p class="ltx_p">If the variable on the other side of the connect-equation is <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">input</span> or <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">output</span> the new component will be either <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">input</span> or <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">output</span> to satisfy the restrictions in <a href="#restrictions-of-connections-and-connectors" title="9.3 Restrictions of Connections and Connectors ‣ Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">9.3</span></a> for a non-expandable connector.</p>
</div>
<div id="S1.I3.i1.I1.i3.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">If the existing side refers to an inside connector (i.e. a connector of a component) the new variable will copy its causality, i.e. <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="color:#003378;background-color:#FFFFFF;">input</span> if <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="color:#003378;background-color:#FFFFFF;">input</span> and <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="color:#003378;background-color:#FFFFFF;">output</span> if <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="color:#003378;background-color:#FFFFFF;">output</span>, since the expandable connector must be an outside connector.</span>]</p>
</div>
<div id="S1.I3.i1.I1.i3.p3" class="ltx_para">
<p class="ltx_p">For an array the <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">input</span>/<span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">output</span> property can be deduced separately for each array element.</p>
</div>
</li>
</ul>
</div>
</li>
<li id="S1.I3.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I3.i2.p1" class="ltx_para">
<p class="ltx_p">When two expandable connectors are connected, each is augmented with the variables that are only declared in the other expandable connector (the new variables are neither <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">input</span> nor <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">output</span>). This is repeated until all connected expandable connector instances have matching variables.</p>
</div>
<div id="S1.I3.i2.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">I.e. each of the connector instances is expanded to be the union of all connector variables.</span>]</p>
</div>
</li>
<li id="S1.I3.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I3.i3.p1" class="ltx_para">
<p class="ltx_p">The variables introduced in the elaboration follow additional rules for generating connection sets (given in <a href="#generation-of-connection-equations" title="9.2 Generation of Connection Equations ‣ Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">9.2</span></a>).</p>
</div>
</li>
<li id="S1.I3.i4" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I3.i4.p1" class="ltx_para">
<p class="ltx_p">If a variable appears as an <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">input</span> in one expandable connector, it should appear as a non-<span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">input</span> in at least one other expandable connector instance in the same augmentation set. An augmentation set is defined as the set of connected expandable connector instances that through the elaboration will have matching variables.
</p>
</div>
<div id="S1.I3.i4.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Example:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ZXhwYW5kYWJsZSBjb25uZWN0b3IgRW5naW5lQnVzCmVuZCBFbmdpbmVCdXM7CgpibG9jayBTZW5zb3IKICBSZWFsT3V0cHV0IHNwZWVkOyAvLyBPdXRwdXQsIGkuZS4sIG5vbi1pbnB1dAplbmQgU2Vuc29yOwpibG9jayBBY3R1YXRvcgogIFJlYWxJbnB1dCBzcGVlZDsgLy8gSW5wdXQKZW5kIEFjdHVhdG9yOwoKbW9kZWwgRW5naW5lCiAgRW5naW5lQnVzIGJ1czsKICBTZW5zb3Igc2Vuc29yOwogIEFjdHVhdG9yIGFjdHVhdG9yOwplcXVhdGlvbgogIGNvbm5lY3QoYnVzLnNwZWVkLCBzZW5zb3Iuc3BlZWQpOyAvLyBzZW5zb3Iuc3BlZWQgaXMgdGhlIG5vbi1pbnB1dAogIGNvbm5lY3QoYnVzLnNwZWVkLCBhY3R1YXRvci5zcGVlZCk7CmVuZCBFbmdpbmU7">⬇</a></div>
<div id="lstnumberx1800" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">expandable</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">connector</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">EngineBus</span>
</div>
<div id="lstnumberx1801" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">EngineBus</span>;
</div>
<div id="lstnumberx1802" class="ltx_listingline">
</div>
<div id="lstnumberx1803" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">block</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Sensor</span>
</div>
<div id="lstnumberx1804" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">RealOutput</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">speed</span>;<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>Output,<span class="ltx_text ltx_lst_space"> </span>i.e.,<span class="ltx_text ltx_lst_space"> </span>non-input</span>
</div>
<div id="lstnumberx1805" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Sensor</span>;
</div>
<div id="lstnumberx1806" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">block</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Actuator</span>
</div>
<div id="lstnumberx1807" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">RealInput</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">speed</span>;<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>Input</span>
</div>
<div id="lstnumberx1808" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Actuator</span>;
</div>
<div id="lstnumberx1809" class="ltx_listingline">
</div>
<div id="lstnumberx1810" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">model</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Engine</span>
</div>
<div id="lstnumberx1811" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">EngineBus</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">bus</span>;
</div>
<div id="lstnumberx1812" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">Sensor</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">sensor</span>;
</div>
<div id="lstnumberx1813" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">Actuator</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">actuator</span>;
</div>
<div id="lstnumberx1814" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx1815" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">connect</span>(<span class="ltx_text ltx_lst_identifier">bus</span>.<span class="ltx_text ltx_lst_identifier">speed</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">sensor</span>.<span class="ltx_text ltx_lst_identifier">speed</span>);<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>sensor.speed<span class="ltx_text ltx_lst_space"> </span>is<span class="ltx_text ltx_lst_space"> </span>the<span class="ltx_text ltx_lst_space"> </span>non-input</span>
</div>
<div id="lstnumberx1816" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">connect</span>(<span class="ltx_text ltx_lst_identifier">bus</span>.<span class="ltx_text ltx_lst_identifier">speed</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">actuator</span>.<span class="ltx_text ltx_lst_identifier">speed</span>);
</div>
<div id="lstnumberx1817" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Engine</span>;
</div>
</div>
<p class="ltx_p">]</p>
</div>
</li>
<li id="S1.I3.i5" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I3.i5.p1" class="ltx_para">
<p class="ltx_p">All components in an expandable connector are seen as connector
instances even if they are not declared as such.</p>
</div>
<div id="S1.I3.i5.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">I.e. it is possible to connect to e.g. a <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="color:#543D08;background-color:#FFFFFF;">Real</span> variable.</span>]</p>
</div>
<div id="S1.I3.i5.p3" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Example:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ZXhwYW5kYWJsZSBjb25uZWN0b3IgRW5naW5lQnVzIC8vIGhhcyBwcmVkZWZpbmVkIHNpZ25hbHMKICBpbXBvcnQgTW9kZWxpY2EuVW5pdHMuU0k7CiAgU0kuQW5ndWxhclZlbG9jaXR5IHNwZWVkOwogIFNJLlRlbXBlcmF0dXJlIFQ7CmVuZCBFbmdpbmVCdXM7CgpibG9jayBTZW5zb3IKIFJlYWxPdXRwdXQgc3BlZWQ7CmVuZCBTZW5zb3I7Cgptb2RlbCBFbmdpbmUKICBFbmdpbmVCdXMgYnVzOwogIFNlbnNvciBzZW5zb3I7CmVxdWF0aW9uCiAgY29ubmVjdChidXMuc3BlZWQsIHNlbnNvci5zcGVlZCk7CiAgLy8gY29ubmVjdGlvbiB0byBub24tY29ubmVjdG9yIHNwZWVkIGlzIHBvc3NpYmxlCiAgLy8gaW4gZXhwYW5kYWJsZSBjb25uZWN0b3JzCmVuZCBFbmdpbmU7">⬇</a></div>
<div id="lstnumberx1818" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">expandable</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">connector</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">EngineBus</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>has<span class="ltx_text ltx_lst_space"> </span>predefined<span class="ltx_text ltx_lst_space"> </span>signals</span>
</div>
<div id="lstnumberx1819" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">import</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Units</span>.<span class="ltx_text ltx_lst_identifier">SI</span>;
</div>
<div id="lstnumberx1820" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">SI</span>.<span class="ltx_text ltx_lst_identifier">AngularVelocity</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">speed</span>;
</div>
<div id="lstnumberx1821" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">SI</span>.<span class="ltx_text ltx_lst_identifier">Temperature</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">T</span>;
</div>
<div id="lstnumberx1822" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">EngineBus</span>;
</div>
<div id="lstnumberx1823" class="ltx_listingline">
</div>
<div id="lstnumberx1824" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">block</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Sensor</span>
</div>
<div id="lstnumberx1825" class="ltx_listingline">
<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">RealOutput</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">speed</span>;
</div>
<div id="lstnumberx1826" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Sensor</span>;
</div>
<div id="lstnumberx1827" class="ltx_listingline">
</div>
<div id="lstnumberx1828" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">model</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Engine</span>
</div>
<div id="lstnumberx1829" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">EngineBus</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">bus</span>;
</div>
<div id="lstnumberx1830" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">Sensor</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">sensor</span>;
</div>
<div id="lstnumberx1831" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx1832" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">connect</span>(<span class="ltx_text ltx_lst_identifier">bus</span>.<span class="ltx_text ltx_lst_identifier">speed</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">sensor</span>.<span class="ltx_text ltx_lst_identifier">speed</span>);
</div>
<div id="lstnumberx1833" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>connection<span class="ltx_text ltx_lst_space"> </span>to<span class="ltx_text ltx_lst_space"> </span>non-connector<span class="ltx_text ltx_lst_space"> </span>speed<span class="ltx_text ltx_lst_space"> </span>is<span class="ltx_text ltx_lst_space"> </span>possible</span>
</div>
<div id="lstnumberx1834" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>in<span class="ltx_text ltx_lst_space"> </span>expandable<span class="ltx_text ltx_lst_space"> </span>connectors</span>
</div>
<div id="lstnumberx1835" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Engine</span>;
</div>
</div>
<p class="ltx_p">]</p>
</div>
</li>
<li id="S1.I3.i6" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I3.i6.p1" class="ltx_para">
<p class="ltx_p">An expandable connector shall not contain a component declared with the prefix <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">flow</span>, but may contain non-expandable connector components with <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">flow</span> components.</p>
</div>
<div id="S1.I3.i6.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Example:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,aW1wb3J0IEludGVyZmFjZXM9TW9kZWxpY2EuRWxlY3RyaWNhbC5BbmFsb2cuSW50ZXJmYWNlczsKZXhwYW5kYWJsZSBjb25uZWN0b3IgRWxlY3RyaWNhbEJ1cwogIEludGVyZmFjZXMuUG9zaXRpdmVQaW4gcDEyLCBuMTI7IC8vIE9LCiAgZmxvdyBNb2RlbGljYS5Vbml0cy5TSS5DdXJyZW50IGk7IC8vIEVycm9yCmVuZCBFbGVjdHJpY2FsQnVzOwoKbW9kZWwgQmF0dGVyeQogIEludGVyZmFjZXMuUG9zaXRpdmVQaW4gcDQyLCBuNDI7CiAgRWxlY3RyaWNhbEJ1cyBidXM7CmVxdWF0aW9uCiAgY29ubmVjdChwNDIsIGJ1cy5wNDIpOyAvLyBBZGRzIG5ldyBlbGVjdHJpY2FsIHBpbgogIGNvbm5lY3QobjQyLCBidXMubjQyKTsgLy8gQWRkcyBhbm90aGVyIHBpbgplbmQgQmF0dGVyeTs=">⬇</a></div>
<div id="lstnumberx1836" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">import</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Interfaces</span>=<span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Electrical</span>.<span class="ltx_text ltx_lst_identifier">Analog</span>.<span class="ltx_text ltx_lst_identifier">Interfaces</span>;
</div>
<div id="lstnumberx1837" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">expandable</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">connector</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">ElectricalBus</span>
</div>
<div id="lstnumberx1838" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">Interfaces</span>.<span class="ltx_text ltx_lst_identifier">PositivePin</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">p12</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">n12</span>;<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>OK</span>
</div>
<div id="lstnumberx1839" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">flow</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Units</span>.<span class="ltx_text ltx_lst_identifier">SI</span>.<span class="ltx_text ltx_lst_identifier">Current</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">i</span>;<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>Error</span>
</div>
<div id="lstnumberx1840" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">ElectricalBus</span>;
</div>
<div id="lstnumberx1841" class="ltx_listingline">
</div>
<div id="lstnumberx1842" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">model</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Battery</span>
</div>
<div id="lstnumberx1843" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">Interfaces</span>.<span class="ltx_text ltx_lst_identifier">PositivePin</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">p42</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">n42</span>;
</div>
<div id="lstnumberx1844" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">ElectricalBus</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">bus</span>;
</div>
<div id="lstnumberx1845" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx1846" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">connect</span>(<span class="ltx_text ltx_lst_identifier">p42</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">bus</span>.<span class="ltx_text ltx_lst_identifier">p42</span>);<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>Adds<span class="ltx_text ltx_lst_space"> </span>new<span class="ltx_text ltx_lst_space"> </span>electrical<span class="ltx_text ltx_lst_space"> </span>pin</span>
</div>
<div id="lstnumberx1847" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">connect</span>(<span class="ltx_text ltx_lst_identifier">n42</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">bus</span>.<span class="ltx_text ltx_lst_identifier">n42</span>);<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>Adds<span class="ltx_text ltx_lst_space"> </span>another<span class="ltx_text ltx_lst_space"> </span>pin</span>
</div>
<div id="lstnumberx1848" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Battery</span>;
</div>
</div>
<p class="ltx_p">]</p>
</div>
</li>
<li id="S1.I3.i7" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I3.i7.p1" class="ltx_para">
<p class="ltx_p">expandable connectors can only be connected to other expandable connectors.</p>
</div>
</li>
</ul>
</div>
<div id="S1.SS3.p4" class="ltx_para">
<p class="ltx_p">If a connect equation references a potentially present variable, or variable element, in an expandable connector the variable or variable element is marked as being present, and due to the
paragraphs above it is possible to deduce whether the bus variable shall be treated as input, or shall be treated as output in the connect equation. That <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">input</span> or <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">output</span>
prefix is added if no <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">input</span>/<span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">output</span> prefix is present on the declaration.</p>
</div>
<div id="S1.SS3.p5" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Example:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ZXhwYW5kYWJsZSBjb25uZWN0b3IgRW1wdHlCdXMKZW5kIEVtcHR5QnVzOwoKbW9kZWwgQ29udHJvbGxlcgogIEVtcHR5QnVzIGJ1czE7CiAgRW1wdHlCdXMgYnVzMjsKICBSZWFsSW5wdXQgc3BlZWQ7CmVxdWF0aW9uCiAgY29ubmVjdChzcGVlZCwgYnVzMS5zcGVlZCk7IC8vIE9LOyBvbmx5IG9uZSB1bmRlY2xhcmVkIGFuZCBub3Qgc3Vic2NyaXB0ZWQuCiAgY29ubmVjdChidXMxLnByZXNzdXJlLCBidXMyLnByZXNzdXJlKTsgLy8gRXJyb3I7IGJvdGggdW5kZWNsYXJlZC4KICBjb25uZWN0KHNwZWVkLCBidXMyLnNwZWVkWzJdKTsgLy8gSW50cm9kdWNlcyBzcGVlZCBhcnJheSAod2l0aCBlbGVtZW50IFsyXSkuCmVuZCBDb250cm9sbGVyOw==">⬇</a></div>
<div id="lstnumberx1849" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">expandable</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">connector</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">EmptyBus</span>
</div>
<div id="lstnumberx1850" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">EmptyBus</span>;
</div>
<div id="lstnumberx1851" class="ltx_listingline">
</div>
<div id="lstnumberx1852" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">model</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Controller</span>
</div>
<div id="lstnumberx1853" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">EmptyBus</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">bus1</span>;
</div>
<div id="lstnumberx1854" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">EmptyBus</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">bus2</span>;
</div>
<div id="lstnumberx1855" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">RealInput</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">speed</span>;
</div>
<div id="lstnumberx1856" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx1857" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">connect</span>(<span class="ltx_text ltx_lst_identifier">speed</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">bus1</span>.<span class="ltx_text ltx_lst_identifier">speed</span>);<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>OK;<span class="ltx_text ltx_lst_space"> </span>only<span class="ltx_text ltx_lst_space"> </span>one<span class="ltx_text ltx_lst_space"> </span>undeclared<span class="ltx_text ltx_lst_space"> </span>and<span class="ltx_text ltx_lst_space"> </span>not<span class="ltx_text ltx_lst_space"> </span>subscripted.</span>
</div>
<div id="lstnumberx1858" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">connect</span>(<span class="ltx_text ltx_lst_identifier">bus1</span>.<span class="ltx_text ltx_lst_identifier">pressure</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">bus2</span>.<span class="ltx_text ltx_lst_identifier">pressure</span>);<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>Error;<span class="ltx_text ltx_lst_space"> </span>both<span class="ltx_text ltx_lst_space"> </span>undeclared.</span>
</div>
<div id="lstnumberx1859" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">connect</span>(<span class="ltx_text ltx_lst_identifier">speed</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">bus2</span>.<span class="ltx_text ltx_lst_identifier">speed</span>[2]);<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>Introduces<span class="ltx_text ltx_lst_space"> </span>speed<span class="ltx_text ltx_lst_space"> </span>array<span class="ltx_text ltx_lst_space"> </span>(with<span class="ltx_text ltx_lst_space"> </span>element<span class="ltx_text ltx_lst_space"> </span>[2]).</span>
</div>
<div id="lstnumberx1860" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Controller</span>;
</div>
</div>
<p class="ltx_p">]</p>
</div>
<div id="S1.SS3.p6" class="ltx_para">
<p class="ltx_p">An expandable connector array component for which <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">size</span> is not defined (see <a href="arrays.html#array-dimension-and-size-functions" title="10.3.1 Array Dimension and Size Functions ‣ 10.3 Built-in Array Functions ‣ Chapter 10 Arrays ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">10.3.1</span></a>) is referred to as a <em class="ltx_emph ltx_font_italic">sizeless array component</em>.
Such a component shall not be used without subscripts, and the subscripts must slice the array so that the sizeless dimensions are removed.</p>
</div>
<div id="S1.SS3.p7" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Example:
Valid and invalid uses of sizeless array components:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ZXhwYW5kYWJsZSBjb25uZWN0b3IgRW5naW5lQnVzCmVuZCBFbmdpbmVCdXM7CgpibG9jayBTZW5zb3IKICBSZWFsT3V0cHV0IHNwZWVkOwplbmQgU2Vuc29yOwoKbW9kZWwgRW5naW5lCiAgcGFyYW1ldGVyIEludGVnZXIgbiA9IDE7CiAgRW5naW5lQnVzIGJ1czsKICBTZW5zb3Igc2Vuc29yOwogIFJlYWxPdXRwdXQgc2Vuc29yU3BlZWRzWzpdOwplcXVhdGlvbgogIC8qIENvbW1lbnRzIGJlbG93IHJlZmVyIHRvIHRoZSB1c2Ugb2Ygc2l6ZWxlc3MgYXJyYXkgYnVzLnNwZWVkLiAqLwogIGNvbm5lY3QoYnVzLnNwZWVkW25dLCBzZW5zb3Iuc3BlZWQpIDsgLy8gT0s7IHN1YnNjcmlwdCB0byBzY2FsYXIgY29tcG9uZW50LgogIGNvbm5lY3QoYnVzLnNwZWVkLCBzZW5zb3JTcGVlZHMpOyAvLyBFcnJvcjsgbWlzc2luZyBzdWJzY3JpcHRzLgpwdWJsaWMKICBSZWFsIHNbOl0gPSBidXMuc3BlZWQ7IC8vIEVycm9yOyBtaXNzaW5nIHN1YnNjcmlwdHMuCiAgUmVhbCBzWzJdID0gYnVzLnNwZWVkW3sxLCAzfV07IC8vIE9LOyBzdWJzY3JpcHQgc2VsZWN0cyBmaXhlZCBzaXplIHN1Yi1hcnJheS4KZW5kIEVuZ2luZTs=">⬇</a></div>
<div id="lstnumberx1861" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">expandable</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">connector</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">EngineBus</span>
</div>
<div id="lstnumberx1862" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">EngineBus</span>;
</div>
<div id="lstnumberx1863" class="ltx_listingline">
</div>
<div id="lstnumberx1864" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">block</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Sensor</span>
</div>
<div id="lstnumberx1865" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">RealOutput</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">speed</span>;
</div>
<div id="lstnumberx1866" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Sensor</span>;
</div>
<div id="lstnumberx1867" class="ltx_listingline">
</div>
<div id="lstnumberx1868" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">model</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Engine</span>
</div>
<div id="lstnumberx1869" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">parameter</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">n</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span>1;
</div>
<div id="lstnumberx1870" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">EngineBus</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">bus</span>;
</div>
<div id="lstnumberx1871" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">Sensor</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">sensor</span>;
</div>
<div id="lstnumberx1872" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">RealOutput</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">sensorSpeeds</span>[:];
</div>
<div id="lstnumberx1873" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx1874" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">/*<span class="ltx_text ltx_lst_space"> </span>Comments<span class="ltx_text ltx_lst_space"> </span>below<span class="ltx_text ltx_lst_space"> </span>refer<span class="ltx_text ltx_lst_space"> </span>to<span class="ltx_text ltx_lst_space"> </span>the<span class="ltx_text ltx_lst_space"> </span>use<span class="ltx_text ltx_lst_space"> </span>of<span class="ltx_text ltx_lst_space"> </span>sizeless<span class="ltx_text ltx_lst_space"> </span>array<span class="ltx_text ltx_lst_space"> </span>bus.speed.<span class="ltx_text ltx_lst_space"> </span>*/</span>
</div>
<div id="lstnumberx1875" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">connect</span>(<span class="ltx_text ltx_lst_identifier">bus</span>.<span class="ltx_text ltx_lst_identifier">speed</span>[<span class="ltx_text ltx_lst_identifier">n</span>],<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">sensor</span>.<span class="ltx_text ltx_lst_identifier">speed</span>)<span class="ltx_text ltx_lst_space"> </span>;<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>OK;<span class="ltx_text ltx_lst_space"> </span>subscript<span class="ltx_text ltx_lst_space"> </span>to<span class="ltx_text ltx_lst_space"> </span>scalar<span class="ltx_text ltx_lst_space"> </span>component.</span>
</div>
<div id="lstnumberx1876" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">connect</span>(<span class="ltx_text ltx_lst_identifier">bus</span>.<span class="ltx_text ltx_lst_identifier">speed</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">sensorSpeeds</span>);<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>Error;<span class="ltx_text ltx_lst_space"> </span>missing<span class="ltx_text ltx_lst_space"> </span>subscripts.</span>
</div>
<div id="lstnumberx1877" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">public</span>
</div>
<div id="lstnumberx1878" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">s</span>[:]<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">bus</span>.<span class="ltx_text ltx_lst_identifier">speed</span>;<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>Error;<span class="ltx_text ltx_lst_space"> </span>missing<span class="ltx_text ltx_lst_space"> </span>subscripts.</span>
</div>
<div id="lstnumberx1879" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">s</span>[2]<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">bus</span>.<span class="ltx_text ltx_lst_identifier">speed</span>[{1,<span class="ltx_text ltx_lst_space"> </span>3}];<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>OK;<span class="ltx_text ltx_lst_space"> </span>subscript<span class="ltx_text ltx_lst_space"> </span>selects<span class="ltx_text ltx_lst_space"> </span>fixed<span class="ltx_text ltx_lst_space"> </span>size<span class="ltx_text ltx_lst_space"> </span>sub-array.</span>
</div>
<div id="lstnumberx1880" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Engine</span>;
</div>
</div>
<p class="ltx_p">]</p>
</div>
<div id="S1.SS3.p8" class="ltx_para">
<p class="ltx_p">After this elaboration the expandable connectors are treated as normal
connector instances, and the connections as normal connections, and all
potentially present variables and array elements that are not actually
present are undefined. It is an error if there
are expressions referring to potentially present variables or array
elements that are not actually present or non-declared variables. This
elaboration implies that expandable connectors can be connected even if
they do not contain the same components.</p>
</div>
<div id="S1.SS3.p9" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">A tool may remove undefined variables in an expandable connector, or set them to the default value, e.g. zero for <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="color:#543D08;background-color:#FFFFFF;">Real</span> variables.</span>]</p>
</div>
<div id="S1.SS3.p10" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Expressions can only “read” variables from the bus that
are actually declared and present in the connector, in order that the
types of the variables can be determined in the local scope.</span>]</p>
</div>
<div id="S1.SS3.p11" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Note that the introduction of variables, as described above, is
conceptual and does not necessarily impact the flattening hierarchy in
any way. Furthermore, it is important to note that these elaboration
rules must consider:
</span></p>
<ol id="S1.I4" class="ltx_enumerate">
<li id="S1.I4.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span> 
<div id="S1.I4.i1.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">Expandable connectors nested hierarchically. This means that
both outside and inside connectors must be included at every level of
the hierarchy in this elaboration process.</span></p>
</div>
</li>
<li id="S1.I4.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span> 
<div id="S1.I4.i2.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">When processing an expandable connector that possesses the
</span><span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_bold" style="color:#003378;background-color:#FFFFFF;">inner</span><span class="ltx_text ltx_font_italic"> scope qualifier, all outer instances must also be taken into
account during elaboration.</span></p>
</div>
</li>
</ol>
<p class="ltx_p">]</p>
</div>
<div id="S1.SS3.p12" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Example:
Engine system with sensors, controllers, actuator and plant that
exchange information via a bus (i.e. via expandable connectors):</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,aW1wb3J0IE1vZGVsaWNhLlVuaXRzLlNJOwppbXBvcnQgTW9kZWxpY2EuQmxvY2tzLkludGVyZmFjZXMuUmVhbElucHV0OwovLyBQbGFudCBTaWRlCm1vZGVsIFNwYXJrUGx1ZwogIFJlYWxJbnB1dCBzcGFya19hZHZhbmNlOwogICRcbGRvdHMkCmVuZCBTcGFya1BsdWc7CgpleHBhbmRhYmxlIGNvbm5lY3RvciBFbmdpbmVCdXMKICAvLyBObyBtaW5pbWFsIHNldAplbmQgRW5naW5lQnVzOwoKZXhwYW5kYWJsZSBjb25uZWN0b3IgQ3lsaW5kZXJCdXMKICBSZWFsIHNwYXJrX2FkdmFuY2U7CmVuZCBDeWxpbmRlckJ1czsKCm1vZGVsIEN5bGluZGVyCiAgQ3lsaW5kZXJCdXMgY3lsaW5kZXJfYnVzOwogIFNwYXJrUGx1ZyBzcGFya19wbHVnOwogICRcbGRvdHMkCmVxdWF0aW9uCiAgY29ubmVjdChzcGFya19wbHVnLnNwYXJrX2FkdmFuY2UsCiAgY3lsaW5kZXJfYnVzLnNwYXJrX2FkdmFuY2UpOwplbmQgQ3lsaW5kZXI7Cgptb2RlbCBJNAogIEVuZ2luZUJ1cyBlbmdpbmVfYnVzOwogIE1vZGVsaWNhLk1lY2hhbmljcy5Sb3RhdGlvbmFsLlNlbnNvcnMuU3BlZWRTZW5zb3Igc3BlZWRfc2Vuc29yOwogIE1vZGVsaWNhLlRoZXJtYWwuSGVhdFRyYW5zZmVyLlNlbnNvcnMuVGVtcGVyYXR1cmVTZW5zb3IgdGVtcF9zZW5zb3I7CiAgcGFyYW1ldGVyIEludGVnZXIgbkN5bGluZGVyID0gNCAiTnVtYmVyIG9mIGN5bGluZGVycyI7CiAgQ3lsaW5kZXIgY3lsaW5kZXJbbkN5bGluZGVyXTsKZXF1YXRpb24KICAvLyBhZGRzIGVuZ2luZV9zcGVlZCAoYXMgb3V0cHV0KQogIGNvbm5lY3Qoc3BlZWRfc2Vuc29yLncsIGVuZ2luZV9idXMuZW5naW5lX3NwZWVkKTsKICAvLyBhZGRzIGVuZ2luZV90ZW1wIChhcyBvdXRwdXQpCiAgY29ubmVjdCh0ZW1wX3NlbnNvci5ULCBlbmdpbmVfYnVzLmVuZ2luZV90ZW1wKTsKICAvLyBhZGRzIGN5bGluZGVyX2J1czEgKGEgbmVzdGVkIGJ1cykKICBmb3IgaSBpbiAxOm5DeWxpbmRlciBsb29wCiAgICBjb25uZWN0KGN5bGluZGVyW2ldLmN5bGluZGVyX2J1cywKICAgIGVuZ2luZV9idXMuY3lsaW5kZXJfYnVzW2ldKTsKICBlbmQgZm9yOwplbmQgSTQ7">⬇</a></div>
<div id="lstnumberx1881" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">import</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Units</span>.<span class="ltx_text ltx_lst_identifier">SI</span>;
</div>
<div id="lstnumberx1882" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">import</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Blocks</span>.<span class="ltx_text ltx_lst_identifier">Interfaces</span>.<span class="ltx_text ltx_lst_identifier">RealInput</span>;
</div>
<div id="lstnumberx1883" class="ltx_listingline">
<span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>Plant<span class="ltx_text ltx_lst_space"> </span>Side</span>
</div>
<div id="lstnumberx1884" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">model</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">SparkPlug</span>
</div>
<div id="lstnumberx1885" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">RealInput</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">spark_advance</span>;
</div>
<div id="lstnumberx1886" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><math id="lstnumberx1886.m1" class="ltx_Math" alttext="\ldots" display="inline"><mi mathbackground="#FFFFFF" mathvariant="normal">…</mi></math>
</div>
<div id="lstnumberx1887" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">SparkPlug</span>;
</div>
<div id="lstnumberx1888" class="ltx_listingline">
</div>
<div id="lstnumberx1889" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">expandable</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">connector</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">EngineBus</span>
</div>
<div id="lstnumberx1890" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>No<span class="ltx_text ltx_lst_space"> </span>minimal<span class="ltx_text ltx_lst_space"> </span>set</span>
</div>
<div id="lstnumberx1891" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">EngineBus</span>;
</div>
<div id="lstnumberx1892" class="ltx_listingline">
</div>
<div id="lstnumberx1893" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">expandable</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">connector</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">CylinderBus</span>
</div>
<div id="lstnumberx1894" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">spark_advance</span>;
</div>
<div id="lstnumberx1895" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">CylinderBus</span>;
</div>
<div id="lstnumberx1896" class="ltx_listingline">
</div>
<div id="lstnumberx1897" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">model</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Cylinder</span>
</div>
<div id="lstnumberx1898" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">CylinderBus</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">cylinder_bus</span>;
</div>
<div id="lstnumberx1899" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">SparkPlug</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">spark_plug</span>;
</div>
<div id="lstnumberx1900" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><math id="lstnumberx1900.m1" class="ltx_Math" alttext="\ldots" display="inline"><mi mathbackground="#FFFFFF" mathvariant="normal">…</mi></math>
</div>
<div id="lstnumberx1901" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx1902" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">connect</span>(<span class="ltx_text ltx_lst_identifier">spark_plug</span>.<span class="ltx_text ltx_lst_identifier">spark_advance</span>,
</div>
<div id="lstnumberx1903" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">cylinder_bus</span>.<span class="ltx_text ltx_lst_identifier">spark_advance</span>);
</div>
<div id="lstnumberx1904" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Cylinder</span>;
</div>
<div id="lstnumberx1905" class="ltx_listingline">
</div>
<div id="lstnumberx1906" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">model</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">I4</span>
</div>
<div id="lstnumberx1907" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">EngineBus</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">engine_bus</span>;
</div>
<div id="lstnumberx1908" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Mechanics</span>.<span class="ltx_text ltx_lst_identifier">Rotational</span>.<span class="ltx_text ltx_lst_identifier">Sensors</span>.<span class="ltx_text ltx_lst_identifier">SpeedSensor</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">speed_sensor</span>;
</div>
<div id="lstnumberx1909" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Thermal</span>.<span class="ltx_text ltx_lst_identifier">HeatTransfer</span>.<span class="ltx_text ltx_lst_identifier">Sensors</span>.<span class="ltx_text ltx_lst_identifier">TemperatureSensor</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">temp_sensor</span>;
</div>
<div id="lstnumberx1910" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">parameter</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">nCylinder</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span>4<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#000000;">"Number<span class="ltx_text ltx_lst_space"> </span>of<span class="ltx_text ltx_lst_space"> </span>cylinders"</span>;
</div>
<div id="lstnumberx1911" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">Cylinder</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">cylinder</span>[<span class="ltx_text ltx_lst_identifier">nCylinder</span>];
</div>
<div id="lstnumberx1912" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx1913" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>adds<span class="ltx_text ltx_lst_space"> </span>engine_speed<span class="ltx_text ltx_lst_space"> </span>(as<span class="ltx_text ltx_lst_space"> </span>output)</span>
</div>
<div id="lstnumberx1914" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">connect</span>(<span class="ltx_text ltx_lst_identifier">speed_sensor</span>.<span class="ltx_text ltx_lst_identifier">w</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">engine_bus</span>.<span class="ltx_text ltx_lst_identifier">engine_speed</span>);
</div>
<div id="lstnumberx1915" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>adds<span class="ltx_text ltx_lst_space"> </span>engine_temp<span class="ltx_text ltx_lst_space"> </span>(as<span class="ltx_text ltx_lst_space"> </span>output)</span>
</div>
<div id="lstnumberx1916" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">connect</span>(<span class="ltx_text ltx_lst_identifier">temp_sensor</span>.<span class="ltx_text ltx_lst_identifier">T</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">engine_bus</span>.<span class="ltx_text ltx_lst_identifier">engine_temp</span>);
</div>
<div id="lstnumberx1917" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>adds<span class="ltx_text ltx_lst_space"> </span>cylinder_bus1<span class="ltx_text ltx_lst_space"> </span>(a<span class="ltx_text ltx_lst_space"> </span>nested<span class="ltx_text ltx_lst_space"> </span>bus)</span>
</div>
<div id="lstnumberx1918" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">for</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">i</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">in</span><span class="ltx_text ltx_lst_space"> </span>1:<span class="ltx_text ltx_lst_identifier">nCylinder</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">loop</span>
</div>
<div id="lstnumberx1919" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">connect</span>(<span class="ltx_text ltx_lst_identifier">cylinder</span>[<span class="ltx_text ltx_lst_identifier">i</span>].<span class="ltx_text ltx_lst_identifier">cylinder_bus</span>,
</div>
<div id="lstnumberx1920" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_identifier">engine_bus</span>.<span class="ltx_text ltx_lst_identifier">cylinder_bus</span>[<span class="ltx_text ltx_lst_identifier">i</span>]);
</div>
<div id="lstnumberx1921" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">for</span>;
</div>
<div id="lstnumberx1922" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">I4</span>;
</div>
</div>
<p class="ltx_p"><span class="ltx_text ltx_font_italic">Due to the above connection, conceptually a connector consisting
of the union of all connectors is introduced.</span></p>
</div>
<div id="S1.SS3.p13" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">The <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">engine_bus</span> contains the following variable declarations:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,UmVhbE91dHB1dCBlbmdpbmVfc3BlZWQ7ClJlYWxPdXRwdXQgZW5naW5lX3RlbXA7CkN5bGluZGVyQnVzIGN5bGluZGVyX2J1c1sxXTsKQ3lsaW5kZXJCdXMgY3lsaW5kZXJfYnVzWzJdOwpDeWxpbmRlckJ1cyBjeWxpbmRlcl9idXNbM107CkN5bGluZGVyQnVzIGN5bGluZGVyX2J1c1s0XTs=">⬇</a></div>
<div id="lstnumberx1923" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier">RealOutput</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">engine_speed</span>;
</div>
<div id="lstnumberx1924" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier">RealOutput</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">engine_temp</span>;
</div>
<div id="lstnumberx1925" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier">CylinderBus</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">cylinder_bus</span>[1];
</div>
<div id="lstnumberx1926" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier">CylinderBus</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">cylinder_bus</span>[2];
</div>
<div id="lstnumberx1927" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier">CylinderBus</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">cylinder_bus</span>[3];
</div>
<div id="lstnumberx1928" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier">CylinderBus</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">cylinder_bus</span>[4];
</div>
</div>
<p class="ltx_p">]</p>
</div>
</section>
</section>
<section id="generation-of-connection-equations" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">9.2 </span>Generation of Connection Equations</h2>

<div id="S2.p1" class="ltx_para">
<p class="ltx_p">When generating connection equations, <span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_bold" style="color:#003378;background-color:#FFFFFF;">outer</span> elements are resolved to the
corresponding <span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_bold" style="color:#003378;background-color:#FFFFFF;">inner</span> elements in the instance hierarchy (see instance
hierarchy name lookup <a href="scoping-name-lookup-and-flattening.html#instance-hierarchy-name-lookup-of-inner-declarations" title="5.4 Instance Hierarchy Name Lookup of Inner Declarations ‣ Chapter 5 Scoping, Name Lookup, and Flattening ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">5.4</span></a>). The arguments to each <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">connect</span>-equation are
resolved to two connector elements.</p>
</div>
<div id="S2.p2" class="ltx_para">
<p class="ltx_p">For every use of the <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">connect</span>-equation</p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,Y29ubmVjdChhLCBiKTs=">⬇</a></div>
<div id="lstnumberx1929" class="ltx_listingline">
<span class="ltx_text ltx_lst_keyword" style="color:#003378;">connect</span>(<span class="ltx_text ltx_lst_identifier">a</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">b</span>);
</div>
</div>
<p class="ltx_p">the primitive components of <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">a</span> and <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">b</span> form a connection set, together with an indication of whether they are from an inside or an outside connector. The primitive elements are
of simple types or of types defined as <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">operator</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">record</span></span> (i.e. a component of an <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">operator</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">record</span></span> type is not split into sub-components). The elements of the connection sets
are tuples of primitive variables together with an indication of inside or outside; if the same tuple belongs to two connection sets those two sets are merged, until every tuple is only present in
one set. Composite connector types are broken down into primitive components. The <span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_bold" style="color:#003378;background-color:#FFFFFF;">outer</span> components are handled by mapping the objects to the corresponding <span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_bold" style="color:#003378;background-color:#FFFFFF;">inner</span> components,
and the inside indication is not influenced. The outer connectors are handled by mapping the objects to the corresponding inner connectors, and they are always treated as outside connectors.</p>
</div>
<div id="S2.p3" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Rationale: The inside/outside as part of the connection sets
ensure that connections from different hierarchical levels are treated
separately. Connection sets are formed from the primitive elements and
not from the connectors; this handles connections to parts of
hierarchical connectors and also makes it easier to generate equations
directly from the connection sets. All variables in one connection set
will either be flow variables or non-flow variables due to restriction
on connect-equations. The mapping from an <span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_bold ltx_font_upright" style="color:#003378;background-color:#FFFFFF;">outer</span> to an <span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_bold ltx_font_upright" style="color:#003378;background-color:#FFFFFF;">inner</span>
element must occur before merging the sets in order to get one
zero-sum equation, and ensures that the equations for the <span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_bold ltx_font_upright" style="color:#003378;background-color:#FFFFFF;">outer</span>
elements are all given for one side of the connector, and the
<span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_bold ltx_font_upright" style="color:#003378;background-color:#FFFFFF;">inner</span> element can define the other side.</span>]</p>
</div>
<div id="S2.p4" class="ltx_para">
<p class="ltx_p">The following connection sets with just one member are also present (and
merged):</p>
<ul id="S2.I1" class="ltx_itemize">
<li id="S2.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S2.I1.i1.p1" class="ltx_para">
<p class="ltx_p">Each primitive flow variable as inside connector.</p>
</div>
</li>
<li id="S2.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S2.I1.i2.p1" class="ltx_para">
<p class="ltx_p">Each flow variable <em class="ltx_emph ltx_font_italic">added</em> during augmentation of expandable
connectors, both as inside and as outside.</p>
</div>
<div id="S2.I1.i2.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Note that the flow variable is not directly in the expandable connector, but in a connector inside the expandable connector.</span>]</p>
</div>
</li>
</ul>
</div>
<div id="S2.p5" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Rationale: If these variables are not connected they will
generate a set comprised only of this element, and thus they will be
implicitly set to zero (see below). If connected, this set will be
merged and adding this at the start has no impact.</span>]</p>
</div>
<div id="S2.p6" class="ltx_para">
<p class="ltx_p">Each connection set is used to generate equations for potential and flow
(zero-sum) variables of the form
</p>
<ul id="S2.I2" class="ltx_itemize">
<li id="S2.I2.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S2.I2.i1.p1" class="ltx_para">
<p class="ltx_p"><math id="S2.I2.i1.p1.m1" class="ltx_Math" alttext="a_{1}=a_{2}=\ldots=a_{n}" display="inline"><mrow><msub><mi>a</mi><mn>1</mn></msub><mo>=</mo><msub><mi>a</mi><mn>2</mn></msub><mo>=</mo><mi mathvariant="normal">…</mi><mo>=</mo><msub><mi>a</mi><mi>n</mi></msub></mrow></math> (neither flow nor stream variables)</p>
</div>
</li>
<li id="S2.I2.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S2.I2.i2.p1" class="ltx_para">
<p class="ltx_p"><math id="S2.I2.i2.p1.m1" class="ltx_Math" alttext="z_{1}+z_{2}+(-z_{3})+\ldots+z_{n}=\mathbf{0}" display="inline"><mrow><mrow><msub><mi>z</mi><mn>1</mn></msub><mo>+</mo><msub><mi>z</mi><mn>2</mn></msub><mo>+</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mi>z</mi><mn>3</mn></msub></mrow><mo stretchy="false">)</mo></mrow><mo>+</mo><mi mathvariant="normal">…</mi><mo>+</mo><msub><mi>z</mi><mi>n</mi></msub></mrow><mo>=</mo><mn>𝟎</mn></mrow></math> (flow variables)</p>
</div>
</li>
</ul>
</div>
<div id="S2.p7" class="ltx_para">
<p class="ltx_p">The bold-face <math id="S2.p7.m1" class="ltx_Math" alttext="\mathbf{0}" display="inline"><mn>𝟎</mn></math> represents an array or scalar zero of
appropriate dimensions (i.e. the same size as <math id="S2.p7.m2" class="ltx_Math" alttext="z" display="inline"><mi>z</mi></math>).</p>
</div>
<div id="S2.p8" class="ltx_para">
<p class="ltx_p">For an <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">operator</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">record</span></span> type this uses the operator <span class="ltx_text ltx_lst_language_modelica_short ltx_lst_string ltx_lstlisting" style="color:#000000;background-color:#FFFFFF;">’0’</span> – which must be defined in the operator record – and all of the flow variables for the <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">operator</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">record</span></span>
must be of the same <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">operator</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">record</span></span> type. This implies that in order to have flow variables of an <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">operator</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">record</span></span> type the <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">operator</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">record</span></span> must define addition,
negation, and <span class="ltx_text ltx_lst_language_modelica_short ltx_lst_string ltx_lstlisting" style="color:#000000;background-color:#FFFFFF;">’0’</span>; and these operations should define an additive group.</p>
</div>
<div id="S2.p9" class="ltx_para">
<p class="ltx_p">In order to generate equations for flow variables (using the <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">flow</span> prefix), the sign used for the connector variable <math id="S2.p9.m1" class="ltx_Math" alttext="z_{i}" display="inline"><msub><mi>z</mi><mi>i</mi></msub></math> above is +1 for inside connectors and -1 for outside connectors (<math id="S2.p9.m2" class="ltx_Math" alttext="z_{3}" display="inline"><msub><mi>z</mi><mn>3</mn></msub></math> in the example above).</p>
</div>
<div id="S2.p10" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Example:
Simple example:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,bW9kZWwgQ2lyY3VpdAogIEdyb3VuZCBncm91bmQ7CiAgTG9hZCBsb2FkOwogIFJlc2lzdG9yIHJlc2lzdG9yOwplcXVhdGlvbgogIGNvbm5lY3QobG9hZC5wICwgZ3JvdW5kLnApOwogIGNvbm5lY3QocmVzaXN0b3IucCwgZ3JvdW5kLnApOwplbmQgQ2lyY3VpdDsKCm1vZGVsIExvYWQKICBleHRlbmRzIFR3b1BpbjsKICBSZXNpc3RvciByZXNpc3RvcjsKZXF1YXRpb24KICBjb25uZWN0KHAsIHJlc2lzdG9yLnApOwogIGNvbm5lY3QocmVzaXN0b3Iubiwgbik7CmVuZCBMb2FkOw==">⬇</a></div>
<div id="lstnumberx1930" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">model</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Circuit</span>
</div>
<div id="lstnumberx1931" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">Ground</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">ground</span>;
</div>
<div id="lstnumberx1932" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">Load</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">load</span>;
</div>
<div id="lstnumberx1933" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">Resistor</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">resistor</span>;
</div>
<div id="lstnumberx1934" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx1935" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">connect</span>(<span class="ltx_text ltx_lst_identifier">load</span>.<span class="ltx_text ltx_lst_identifier">p</span><span class="ltx_text ltx_lst_space"> </span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">ground</span>.<span class="ltx_text ltx_lst_identifier">p</span>);
</div>
<div id="lstnumberx1936" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">connect</span>(<span class="ltx_text ltx_lst_identifier">resistor</span>.<span class="ltx_text ltx_lst_identifier">p</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">ground</span>.<span class="ltx_text ltx_lst_identifier">p</span>);
</div>
<div id="lstnumberx1937" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Circuit</span>;
</div>
<div id="lstnumberx1938" class="ltx_listingline">
</div>
<div id="lstnumberx1939" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">model</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Load</span>
</div>
<div id="lstnumberx1940" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">extends</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">TwoPin</span>;
</div>
<div id="lstnumberx1941" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">Resistor</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">resistor</span>;
</div>
<div id="lstnumberx1942" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx1943" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">connect</span>(<span class="ltx_text ltx_lst_identifier">p</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">resistor</span>.<span class="ltx_text ltx_lst_identifier">p</span>);
</div>
<div id="lstnumberx1944" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">connect</span>(<span class="ltx_text ltx_lst_identifier">resistor</span>.<span class="ltx_text ltx_lst_identifier">n</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">n</span>);
</div>
<div id="lstnumberx1945" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Load</span>;
</div>
</div>
<p class="ltx_p"><span class="ltx_text ltx_font_italic">The connection sets are before merging (note that one part of the load and resistor is not connected):</span></p>
</div>
<div id="S2.p11" class="ltx_para">
<p class="ltx_p">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">ground</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">resistor</span>.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">resistor</span>.<span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">resistor</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">resistor</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">resistor</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, inside&gt;, &lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">ground</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">resistor</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">v</span></span></span>, inside&gt;, &lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">ground</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">v</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, inside&gt;, &lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">ground</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">v</span></span></span>, inside&gt;, &lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">ground</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">v</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, outside&gt;, &lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">resistor</span>.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">v</span></span></span>, outside&gt;, &lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">resistor</span>.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">v</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, outside&gt;, &lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">resistor</span>.<span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">v</span></span></span>, outside&gt;, &lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">resistor</span>.<span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">v</span></span></span>, inside&gt;</span>}<span class="ltx_text ltx_font_italic"></span></p>
</div>
<div id="S2.p12" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">After merging this gives:</span></p>
</div>
<div id="S2.p13" class="ltx_para">
<p class="ltx_p">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, outside&gt;, &lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">resistor</span>.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">v</span></span></span>, outside&gt;, &lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">resistor</span>.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">v</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, outside&gt;, &lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">resistor</span>.<span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">v</span></span></span>, outside&gt;, &lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">resistor</span>.<span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">v</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, inside&gt;, &lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">ground</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, inside&gt;, &lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">resistor</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">v</span></span></span>, inside&gt;, &lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">ground</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">v</span></span></span>, inside&gt;, &lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">resistor</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">v</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">resistor</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, inside&gt;</span>}<span class="ltx_text ltx_font_italic"></span></p>
</div>
<div id="S2.p14" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">And thus the equations:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,bG9hZC5wLnYgPSBsb2FkLnJlc2lzdG9yLnAudjsKbG9hZC5uLnYgPSBsb2FkLnJlc2lzdG9yLm4udjsKbG9hZC5wLnYgPSBncm91bmQucC52Owpsb2FkLnAudiA9IHJlc2lzdG9yLnAudjsKMCA9ICgtbG9hZC5wLmkpICsgbG9hZC5yZXNpc3Rvci5wLmk7CjAgPSAoLWxvYWQubi5pKSArIGxvYWQucmVzaXN0b3Iubi5pOwowID0gbG9hZC5wLmkgKyBncm91bmQucC5pICsgcmVzaXN0b3IucC5pOwowID0gbG9hZC5uLmk7CjAgPSByZXNpc3Rvci5uLmk7">⬇</a></div>
<div id="lstnumberx1946" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier">load</span>.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">v</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">load</span>.<span class="ltx_text ltx_lst_identifier">resistor</span>.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">v</span>;
</div>
<div id="lstnumberx1947" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier">load</span>.<span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">v</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">load</span>.<span class="ltx_text ltx_lst_identifier">resistor</span>.<span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">v</span>;
</div>
<div id="lstnumberx1948" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier">load</span>.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">v</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">ground</span>.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">v</span>;
</div>
<div id="lstnumberx1949" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier">load</span>.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">v</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">resistor</span>.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">v</span>;
</div>
<div id="lstnumberx1950" class="ltx_listingline">0<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span>(-<span class="ltx_text ltx_lst_identifier">load</span>.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span>)<span class="ltx_text ltx_lst_space"> </span>+<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">load</span>.<span class="ltx_text ltx_lst_identifier">resistor</span>.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span>;
</div>
<div id="lstnumberx1951" class="ltx_listingline">0<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span>(-<span class="ltx_text ltx_lst_identifier">load</span>.<span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">i</span>)<span class="ltx_text ltx_lst_space"> </span>+<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">load</span>.<span class="ltx_text ltx_lst_identifier">resistor</span>.<span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">i</span>;
</div>
<div id="lstnumberx1952" class="ltx_listingline">0<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">load</span>.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span><span class="ltx_text ltx_lst_space"> </span>+<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">ground</span>.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span><span class="ltx_text ltx_lst_space"> </span>+<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">resistor</span>.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span>;
</div>
<div id="lstnumberx1953" class="ltx_listingline">0<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">load</span>.<span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">i</span>;
</div>
<div id="lstnumberx1954" class="ltx_listingline">0<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">resistor</span>.<span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">i</span>;
</div>
</div>
<p class="ltx_p">]</p>
</div>
<div id="S2.p15" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Example:
Outer component example:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,bW9kZWwgQ2lyY3VpdAogIEdyb3VuZCBncm91bmQ7CiAgTG9hZCBsb2FkOwogIGlubmVyIFJlc2lzdG9yIHJlc2lzdG9yOwplcXVhdGlvbgogIGNvbm5lY3QobG9hZC5wLCBncm91bmQucCk7CmVuZCBDaXJjdWl0OwoKbW9kZWwgTG9hZAogIGV4dGVuZHMgVHdvUGluOwogIG91dGVyIFJlc2lzdG9yIHJlc2lzdG9yOwplcXVhdGlvbgogIGNvbm5lY3QocCwgcmVzaXN0b3IucCk7CiAgY29ubmVjdChyZXNpc3Rvci5uLCBuKTsKZW5kIExvYWQ7">⬇</a></div>
<div id="lstnumberx1955" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">model</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Circuit</span>
</div>
<div id="lstnumberx1956" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">Ground</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">ground</span>;
</div>
<div id="lstnumberx1957" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">Load</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">load</span>;
</div>
<div id="lstnumberx1958" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">inner</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Resistor</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">resistor</span>;
</div>
<div id="lstnumberx1959" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx1960" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">connect</span>(<span class="ltx_text ltx_lst_identifier">load</span>.<span class="ltx_text ltx_lst_identifier">p</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">ground</span>.<span class="ltx_text ltx_lst_identifier">p</span>);
</div>
<div id="lstnumberx1961" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Circuit</span>;
</div>
<div id="lstnumberx1962" class="ltx_listingline">
</div>
<div id="lstnumberx1963" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">model</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Load</span>
</div>
<div id="lstnumberx1964" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">extends</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">TwoPin</span>;
</div>
<div id="lstnumberx1965" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">outer</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Resistor</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">resistor</span>;
</div>
<div id="lstnumberx1966" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx1967" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">connect</span>(<span class="ltx_text ltx_lst_identifier">p</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">resistor</span>.<span class="ltx_text ltx_lst_identifier">p</span>);
</div>
<div id="lstnumberx1968" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">connect</span>(<span class="ltx_text ltx_lst_identifier">resistor</span>.<span class="ltx_text ltx_lst_identifier">n</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">n</span>);
</div>
<div id="lstnumberx1969" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Load</span>;
</div>
</div>
<p class="ltx_p"><span class="ltx_text ltx_font_italic">The connection sets are before merging (note that one part of the load and resistor is not connected):</span></p>
</div>
<div id="S2.p16" class="ltx_para">
<p class="ltx_p">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">ground</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">resistor</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">resistor</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, inside&gt;, &lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">ground</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">v</span></span></span>, inside&gt;, &lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">ground</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">v</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, outside&gt;, &lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">resistor</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">v</span></span></span>, outside&gt;, &lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">resistor</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">v</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, outside&gt;, &lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">resistor</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">v</span></span></span>, outside&gt;, &lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">resistor</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">v</span></span></span>, inside&gt;</span>}<span class="ltx_text ltx_font_italic"></span></p>
</div>
<div id="S2.p17" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">After merging this gives:</span></p>
</div>
<div id="S2.p18" class="ltx_para">
<p class="ltx_p">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, outside&gt;, &lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">resistor</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">v</span></span></span>, outside&gt;, &lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">resistor</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">v</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, outside&gt;, &lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">resistor</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">v</span></span></span>, outside&gt;, &lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">resistor</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">v</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, inside&gt;, &lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">ground</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">v</span></span></span>, inside&gt;, &lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">ground</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">v</span></span></span>, inside&gt;</span>}
<br class="ltx_break">{<span class="ltx_text ltx_font_italic">&lt;<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">load</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">i</span></span></span>, inside&gt;</span>}<span class="ltx_text ltx_font_italic"></span></p>
</div>
<div id="S2.p19" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">And thus the equations:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,bG9hZC5wLnYgPSByZXNpc3Rvci5wLnY7CmxvYWQubi52ID0gcmVzaXN0b3Iubi52Owpsb2FkLnAudiA9IGdyb3VuZC5wLnY7CjAgPSAoLWxvYWQucC5pKSArIHJlc2lzdG9yLnAuaTsKMCA9ICgtbG9hZC5uLmkpICsgcmVzaXN0b3Iubi5pOwowID0gbG9hZC5wLmkgKyBncm91bmQucC5pOwowID0gbG9hZC5uLmk7">⬇</a></div>
<div id="lstnumberx1970" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier">load</span>.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">v</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">resistor</span>.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">v</span>;
</div>
<div id="lstnumberx1971" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier">load</span>.<span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">v</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">resistor</span>.<span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">v</span>;
</div>
<div id="lstnumberx1972" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier">load</span>.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">v</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">ground</span>.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">v</span>;
</div>
<div id="lstnumberx1973" class="ltx_listingline">0<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span>(-<span class="ltx_text ltx_lst_identifier">load</span>.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span>)<span class="ltx_text ltx_lst_space"> </span>+<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">resistor</span>.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span>;
</div>
<div id="lstnumberx1974" class="ltx_listingline">0<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span>(-<span class="ltx_text ltx_lst_identifier">load</span>.<span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">i</span>)<span class="ltx_text ltx_lst_space"> </span>+<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">resistor</span>.<span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">i</span>;
</div>
<div id="lstnumberx1975" class="ltx_listingline">0<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">load</span>.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span><span class="ltx_text ltx_lst_space"> </span>+<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">ground</span>.<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span>;
</div>
<div id="lstnumberx1976" class="ltx_listingline">0<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">load</span>.<span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">i</span>;
</div>
</div>
</div>
<div id="S2.p20" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">This corresponds to a direct connection of the resistor.</span>]</p>
</div>
</section>
<section id="restrictions-of-connections-and-connectors" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">9.3 </span>Restrictions of Connections and Connectors</h2>

<div id="S3.p1" class="ltx_para">
<ul id="S3.I1" class="ltx_itemize">
<li id="S3.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I1.i1.p1" class="ltx_para">
<p class="ltx_p">The connect-equations (and the special functions for overdetermined connectors) can only be used in equations, and shall not be used inside if-equations with conditions that are not parameter expressions, or in when-equations.</p>
</div>
<div id="S3.I1.i1.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">For-equations always have parameter expressions for the array expression.</span>]</p>
</div>
</li>
<li id="S3.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I1.i2.p1" class="ltx_para">
<p class="ltx_p">A connector component shall not be declared with the prefix <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">parameter</span> or <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">constant</span>. In the connect-equation the primitive components may only connect parameter variables to parameter variables and constant variables to constant variables.</p>
</div>
</li>
<li id="S3.I1.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I1.i3.p1" class="ltx_para">
<p class="ltx_p">The connect-equation construct only accepts forms of connector
references as specified in <a href="#connect-equations-and-connectors" title="9.1 Connect-Equations and Connectors ‣ Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">9.1</span></a>.</p>
</div>
</li>
<li id="S3.I1.i4" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I1.i4.p1" class="ltx_para">
<p class="ltx_p">In a connect-equation the two connectors must have the same named
component elements with the same dimensions; recursively down to the
primitive components. The primitive components with the same name are
matched and belong to the same connection set.</p>
</div>
</li>
<li id="S3.I1.i5" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I1.i5.p1" class="ltx_para">
<p class="ltx_p">The matched primitive components of the two connectors must have the same primitive types, and flow variables may only connect to other flow variables, stream variables only to other stream variables, and causal variables (<span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">input</span>/<span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">output</span>) only to causal variables (<span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">input</span>/<span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">output</span>).</p>
</div>
</li>
<li id="S3.I1.i6" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I1.i6.p1" class="ltx_para">
<p class="ltx_p">A connection set of causal variables (<span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">input</span>/<span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">output</span>) may at most
contain variables from one inside <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">output</span> connector (for state-machines extended as specified in <a href="state-machines.html#merging-connections-to-multiple-outputs" title="17.3.6 Merging Connections to Multiple Outputs ‣ 17.3 State Machine Semantics ‣ Chapter 17 State Machines ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">17.3.6</span></a>) or one public
outside <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">input</span> connector.</p>
</div>
<div id="S3.I1.i6.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">I.e., a connection set may at most contain one source of a signal.</span>]</p>
</div>
</li>
<li id="S3.I1.i7" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I1.i7.p1" class="ltx_para">
<p class="ltx_p">At least one of the following must hold for a connection set
containing causal variables generated for a non-partial model or
block:</p>
<ol id="S3.I1.i7.I1" class="ltx_enumerate">
<li id="S3.I1.i7.I0.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span> 
<div id="S3.I1.i7.I0.i1.p1" class="ltx_para">
<p class="ltx_p">the connection set includes variables from an outside public
expandable connector,</p>
</div>
</li>
<li id="S3.I1.i7.I0.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span> 
<div id="S3.I1.i7.I0.i2.p1" class="ltx_para">
<p class="ltx_p">the set contains variables from protected
outside connectors,</p>
</div>
</li>
<li id="S3.I1.i7.I0.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">3.</span> 
<div id="S3.I1.i7.I0.i3.p1" class="ltx_para">
<p class="ltx_p">it contains variables from one inside <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">output</span>
connector, or</p>
</div>
</li>
<li id="S3.I1.i7.I0.i4" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">4.</span> 
<div id="S3.I1.i7.I0.i4.p1" class="ltx_para">
<p class="ltx_p">from one public outside <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">input</span> connector, or
</p>
</div>
</li>
<li id="enum:exc-conn-case" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">5.</span> 
<div id="S3.I1.i7.I0.i5.p1" class="ltx_para">
<p class="ltx_p">the set is comprised solely of one variable from one inside <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">input</span>
connector that is not part of an expandable connector.</p>
</div>
</li>
</ol>
</div>
<div id="S3.I1.i7.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">I.e., a connection set must – unless the model or block is partial – contain one source of a signal (<a href="#enum:exc-conn-case" title="item 5 ‣ 7th item ‣ 9.3 Restrictions of Connections and Connectors ‣ Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">item</span> <span class="ltx_text ltx_ref_tag">5</span></a>
covers the case where a connector of a component is left unconnected and the source given textually).</span>]</p>
</div>
</li>
<li id="S3.I1.i8" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I1.i8.p1" class="ltx_para">
<p class="ltx_p">Variables from a protected outside connector must be part of a
connection set containing at least one inside connector or one
declared public outside connector (i.e. it shall not be an implicitly
defined part of an expandable connector).</p>
</div>
<div id="S3.I1.i8.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Otherwise it would not be possible to deduce the causality for the expandable connector element.</span>]</p>
</div>
</li>
<li id="S3.I1.i9" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I1.i9.p1" class="ltx_para">
<p class="ltx_p">In a connection set all variables having non-empty quantity attribute
must have the same quantity attribute.</p>
</div>
</li>
<li id="S3.I1.i10" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I1.i10.p1" class="ltx_para">
<p class="ltx_p">A <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">connect</span> equation shall not (directly or indirectly) connect two
connectors of <span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_bold" style="color:#003378;background-color:#FFFFFF;">outer</span> elements.</p>
</div>
<div id="S3.I1.i10.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Indirectly is similar to them being part of the same connection set. However, connections to <span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_bold ltx_font_upright" style="color:#003378;background-color:#FFFFFF;">outer</span> elements are “moved up” before forming
connection sets. Otherwise the connection sets could contain redundant information breaking the equation count for locally balanced models and blocks.</span>]</p>
</div>
</li>
<li id="S3.I1.i11" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I1.i11.p1" class="ltx_para">
<p class="ltx_p">Subscripts in a connector reference shall be parameter expressions or
the special operator <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">:</span>.</p>
</div>
</li>
<li id="S3.I1.i12" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I1.i12.p1" class="ltx_para">
<p class="ltx_p">Constants or parameters in connected components yield the appropriate
assert statements to check that they have the same value; connections
are not generated.</p>
</div>
</li>
<li id="S3.I1.i13" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I1.i13.p1" class="ltx_para">
<p class="ltx_p">For conditional connectors, see <a href="class-predefined-types-and-declarations.html#conditional-component-declaration" title="4.4.5 Conditional Component Declaration ‣ 4.4 Component Declarations ‣ Chapter 4 Classes, Predefined Types, and Declarations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">4.4.5</span></a>.</p>
</div>
</li>
</ul>
</div>
<section id="balancing-restriction-and-size-of-connectors" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">9.3.1 </span>Balancing Restriction and Size of Connectors</h3>

<div id="S3.SS1.p1" class="ltx_para">
<p class="ltx_p">For each non-partial non-expandable connector class the number of flow variables shall
be equal to the number of variables that are neither <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">parameter</span>,
<span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">constant</span>, <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">input</span>, <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">output</span>, <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">stream</span>
nor <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">flow</span>. The <em class="ltx_emph ltx_font_italic">number of variables</em> is
the number of all elements in the connector class after expanding all
records and arrays to a set of scalars of primitive types. The number of
variables of an overdetermined type or record class (see <a href="#overconstrained-equation-operators-for-connection-graphs" title="9.4.1 Overconstrained Equation Operators for Connection Graphs ‣ 9.4 Equation Operators for Overconstrained Connection-Based Equation Systems ‣ Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">9.4.1</span></a>)
is the size of the output argument of the corresponding
<span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">equalityConstraint</span>() function.</p>
</div>
<div id="S3.SS1.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Expandable connector classes are excluded from this, since their component declarations are only a form of constraint.</span>]</p>
</div>
<div id="S3.SS1.p3" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Example:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,Y29ubmVjdG9yIFBpbiAvLyBhIHBoeXNpY2FsIGNvbm5lY3RvciBvZgogIE1vZGVsaWNhLkVsZWN0cmljYWwuQW5hbG9nCiAgUmVhbCB2OwogIGZsb3cgUmVhbCBpOwplbmQgUGluOwoKY29ubmVjdG9yIFBsdWcgLy8gYSBoaWVyYXJjaGljYWwgY29ubmVjdG9yIG9mCiAgTW9kZWxpY2EuRWxlY3RyaWNhbC5NdWx0aVBoYXNlCiAgcGFyYW1ldGVyIEludGVnZXIgbT0zOwogIFBpbiBwW21dOwplbmQgUGx1ZzsKCmNvbm5lY3RvciBJbnB1dFJlYWwgPSBpbnB1dCBSZWFsOyAvLyBBIGNhdXNhbCBpbnB1dCBjb25uZWN0b3IKY29ubmVjdG9yIE91dHB1dFJlYWwgPSBvdXRwdXQgUmVhbDsgLy8gQSBjYXVzYWwgb3V0cHV0IGNvbm5lY3RvcgoKY29ubmVjdG9yIEZyYW1lX0lsbGVnYWwKICBNb2RlbGljYS5Vbml0cy5TSS5Qb3NpdGlvbiByMFszXSAiUG9zaXRpb24gdmVjdG9yIG9mIGZyYW1lIG9yaWdpbiI7CiAgUmVhbCBTWzMsIDNdICJSb3RhdGlvbiBtYXRyaXggb2YgZnJhbWUiOwogIE1vZGVsaWNhLlVuaXRzLlNJLlZlbG9jaXR5IHZbM10gIkFicy4gdmVsb2NpdHkgb2YgZnJhbWUgb3JpZ2luIjsKICBNb2RlbGljYS5Vbml0cy5TSS5Bbmd1bGFyVmVsb2NpdHkgd1szXSAiQWJzLiBhbmd1bGFyIHZlbG9jaXR5IG9mIGZyYW1lIjsKICBNb2RlbGljYS5Vbml0cy5TSS5BY2NlbGVyYXRpb24gYVszXSAiQWJzLiBhY2MuIG9mIGZyYW1lIG9yaWdpbiI7CiAgTW9kZWxpY2EuVW5pdHMuU0kuQW5ndWxhckFjY2VsZXJhdGlvbiB6WzNdICJBYnMuIGFuZ3VsYXIgYWNjLiBvZiBmcmFtZSI7CiAgZmxvdyBNb2RlbGljYS5Vbml0cy5TSS5Gb3JjZSBmWzNdICJDdXQgZm9yY2UiOwogIGZsb3cgTW9kZWxpY2EuVW5pdHMuU0kuVG9ycXVlIHRbM10gIkN1dCB0b3JxdWUiOwplbmQgRnJhbWVfSWxsZWdhbDs=">⬇</a></div>
<div id="lstnumberx1977" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">connector</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Pin</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>a<span class="ltx_text ltx_lst_space"> </span>physical<span class="ltx_text ltx_lst_space"> </span>connector<span class="ltx_text ltx_lst_space"> </span>of</span>
</div>
<div id="lstnumberx1978" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Electrical</span>.<span class="ltx_text ltx_lst_identifier">Analog</span>
</div>
<div id="lstnumberx1979" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">v</span>;
</div>
<div id="lstnumberx1980" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">flow</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">i</span>;
</div>
<div id="lstnumberx1981" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Pin</span>;
</div>
<div id="lstnumberx1982" class="ltx_listingline">
</div>
<div id="lstnumberx1983" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">connector</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Plug</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>a<span class="ltx_text ltx_lst_space"> </span>hierarchical<span class="ltx_text ltx_lst_space"> </span>connector<span class="ltx_text ltx_lst_space"> </span>of</span>
</div>
<div id="lstnumberx1984" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Electrical</span>.<span class="ltx_text ltx_lst_identifier">MultiPhase</span>
</div>
<div id="lstnumberx1985" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">parameter</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">m</span>=3;
</div>
<div id="lstnumberx1986" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">Pin</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">p</span>[<span class="ltx_text ltx_lst_identifier">m</span>];
</div>
<div id="lstnumberx1987" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Plug</span>;
</div>
<div id="lstnumberx1988" class="ltx_listingline">
</div>
<div id="lstnumberx1989" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">connector</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">InputReal</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">input</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span>;<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>A<span class="ltx_text ltx_lst_space"> </span>causal<span class="ltx_text ltx_lst_space"> </span>input<span class="ltx_text ltx_lst_space"> </span>connector</span>
</div>
<div id="lstnumberx1990" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">connector</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">OutputReal</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">output</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span>;<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>A<span class="ltx_text ltx_lst_space"> </span>causal<span class="ltx_text ltx_lst_space"> </span>output<span class="ltx_text ltx_lst_space"> </span>connector</span>
</div>
<div id="lstnumberx1991" class="ltx_listingline">
</div>
<div id="lstnumberx1992" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">connector</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Frame_Illegal</span>
</div>
<div id="lstnumberx1993" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Units</span>.<span class="ltx_text ltx_lst_identifier">SI</span>.<span class="ltx_text ltx_lst_identifier">Position</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">r0</span>[3]<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#000000;">"Position<span class="ltx_text ltx_lst_space"> </span>vector<span class="ltx_text ltx_lst_space"> </span>of<span class="ltx_text ltx_lst_space"> </span>frame<span class="ltx_text ltx_lst_space"> </span>origin"</span>;
</div>
<div id="lstnumberx1994" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">S</span>[3,<span class="ltx_text ltx_lst_space"> </span>3]<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#000000;">"Rotation<span class="ltx_text ltx_lst_space"> </span>matrix<span class="ltx_text ltx_lst_space"> </span>of<span class="ltx_text ltx_lst_space"> </span>frame"</span>;
</div>
<div id="lstnumberx1995" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Units</span>.<span class="ltx_text ltx_lst_identifier">SI</span>.<span class="ltx_text ltx_lst_identifier">Velocity</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">v</span>[3]<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#000000;">"Abs.<span class="ltx_text ltx_lst_space"> </span>velocity<span class="ltx_text ltx_lst_space"> </span>of<span class="ltx_text ltx_lst_space"> </span>frame<span class="ltx_text ltx_lst_space"> </span>origin"</span>;
</div>
<div id="lstnumberx1996" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Units</span>.<span class="ltx_text ltx_lst_identifier">SI</span>.<span class="ltx_text ltx_lst_identifier">AngularVelocity</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">w</span>[3]<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#000000;">"Abs.<span class="ltx_text ltx_lst_space"> </span>angular<span class="ltx_text ltx_lst_space"> </span>velocity<span class="ltx_text ltx_lst_space"> </span>of<span class="ltx_text ltx_lst_space"> </span>frame"</span>;
</div>
<div id="lstnumberx1997" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Units</span>.<span class="ltx_text ltx_lst_identifier">SI</span>.<span class="ltx_text ltx_lst_identifier">Acceleration</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">a</span>[3]<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#000000;">"Abs.<span class="ltx_text ltx_lst_space"> </span>acc.<span class="ltx_text ltx_lst_space"> </span>of<span class="ltx_text ltx_lst_space"> </span>frame<span class="ltx_text ltx_lst_space"> </span>origin"</span>;
</div>
<div id="lstnumberx1998" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Units</span>.<span class="ltx_text ltx_lst_identifier">SI</span>.<span class="ltx_text ltx_lst_identifier">AngularAcceleration</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">z</span>[3]<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#000000;">"Abs.<span class="ltx_text ltx_lst_space"> </span>angular<span class="ltx_text ltx_lst_space"> </span>acc.<span class="ltx_text ltx_lst_space"> </span>of<span class="ltx_text ltx_lst_space"> </span>frame"</span>;
</div>
<div id="lstnumberx1999" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">flow</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Units</span>.<span class="ltx_text ltx_lst_identifier">SI</span>.<span class="ltx_text ltx_lst_identifier">Force</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">f</span>[3]<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#000000;">"Cut<span class="ltx_text ltx_lst_space"> </span>force"</span>;
</div>
<div id="lstnumberx2000" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">flow</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Units</span>.<span class="ltx_text ltx_lst_identifier">SI</span>.<span class="ltx_text ltx_lst_identifier">Torque</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">t</span>[3]<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#000000;">"Cut<span class="ltx_text ltx_lst_space"> </span>torque"</span>;
</div>
<div id="lstnumberx2001" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Frame_Illegal</span>;
</div>
</div>
</div>
<div id="S3.SS1.p4" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">The <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">Frame_Illegal</span> connector (intended to be used in a simple multi-body package without over-determined connectors) is illegal since the number of flow and non-flow variables do not match. The solution is to create two connector classes, where two 3-vectors (e.g., <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">a</span> and <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">z</span>) are acausal <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="color:#543D08;background-color:#FFFFFF;">Real</span> and the other variables are matching pairs of <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="color:#003378;background-color:#FFFFFF;">input</span> and <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="color:#003378;background-color:#FFFFFF;">output</span>. This ensures that the models can only be connected in a tree-structure or require a “loop-breaker” joint for every closed kinematic loop:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,Y29ubmVjdG9yIEZyYW1lX2EgImNvcnJlY3QgY29ubmVjdG9yIgogIGlucHV0IE1vZGVsaWNhLlVuaXRzLlNJLlBvc2l0aW9uIHIwWzNdOwogIGlucHV0IFJlYWwgU1szLCAzXTsKICBpbnB1dCBNb2RlbGljYS5Vbml0cy5TSS5WZWxvY2l0eSB2WzNdOwogIGlucHV0IE1vZGVsaWNhLlVuaXRzLlNJLkFuZ3VsYXJWZWxvY2l0eSB3WzNdOwogIE1vZGVsaWNhLlVuaXRzLlNJLkFjY2VsZXJhdGlvbiBhWzNdOwogIE1vZGVsaWNhLlVuaXRzLlNJLkFuZ3VsYXJBY2NlbGVyYXRpb24gelszXTsKICBmbG93IE1vZGVsaWNhLlVuaXRzLlNJLkZvcmNlIGZbM107CiAgZmxvdyBNb2RlbGljYS5Vbml0cy5TSS5Ub3JxdWUgdFszXTsKZW5kIEZyYW1lX2E7Cgpjb25uZWN0b3IgRnJhbWVfYiAiY29ycmVjdCBjb25uZWN0b3IiCiAgb3V0cHV0IE1vZGVsaWNhLlVuaXRzLlNJLlBvc2l0aW9uIHIwWzNdOwogIG91dHB1dCBSZWFsIFNbMywgM107CiAgb3V0cHV0IE1vZGVsaWNhLlVuaXRzLlNJLlZlbG9jaXR5IHZbM107CiAgb3V0cHV0IE1vZGVsaWNhLlVuaXRzLlNJLkFuZ3VsYXJWZWxvY2l0eSB3WzNdOwogIE1vZGVsaWNhLlVuaXRzLlNJLkFjY2VsZXJhdGlvbiBhWzNdOwogIE1vZGVsaWNhLlVuaXRzLlNJLkFuZ3VsYXJBY2NlbGVyYXRpb24gelszXTsKICBmbG93IE1vZGVsaWNhLlVuaXRzLlNJLkZvcmNlIGZbM107CiAgZmxvdyBNb2RlbGljYS5Vbml0cy5TSS5Ub3JxdWUgdFszXTsKZW5kIEZyYW1lX2I7">⬇</a></div>
<div id="lstnumberx2002" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">connector</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Frame_a</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#000000;">"correct<span class="ltx_text ltx_lst_space"> </span>connector"</span>
</div>
<div id="lstnumberx2003" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">input</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Units</span>.<span class="ltx_text ltx_lst_identifier">SI</span>.<span class="ltx_text ltx_lst_identifier">Position</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">r0</span>[3];
</div>
<div id="lstnumberx2004" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">input</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">S</span>[3,<span class="ltx_text ltx_lst_space"> </span>3];
</div>
<div id="lstnumberx2005" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">input</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Units</span>.<span class="ltx_text ltx_lst_identifier">SI</span>.<span class="ltx_text ltx_lst_identifier">Velocity</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">v</span>[3];
</div>
<div id="lstnumberx2006" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">input</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Units</span>.<span class="ltx_text ltx_lst_identifier">SI</span>.<span class="ltx_text ltx_lst_identifier">AngularVelocity</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">w</span>[3];
</div>
<div id="lstnumberx2007" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Units</span>.<span class="ltx_text ltx_lst_identifier">SI</span>.<span class="ltx_text ltx_lst_identifier">Acceleration</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">a</span>[3];
</div>
<div id="lstnumberx2008" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Units</span>.<span class="ltx_text ltx_lst_identifier">SI</span>.<span class="ltx_text ltx_lst_identifier">AngularAcceleration</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">z</span>[3];
</div>
<div id="lstnumberx2009" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">flow</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Units</span>.<span class="ltx_text ltx_lst_identifier">SI</span>.<span class="ltx_text ltx_lst_identifier">Force</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">f</span>[3];
</div>
<div id="lstnumberx2010" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">flow</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Units</span>.<span class="ltx_text ltx_lst_identifier">SI</span>.<span class="ltx_text ltx_lst_identifier">Torque</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">t</span>[3];
</div>
<div id="lstnumberx2011" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Frame_a</span>;
</div>
<div id="lstnumberx2012" class="ltx_listingline">
</div>
<div id="lstnumberx2013" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">connector</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Frame_b</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#000000;">"correct<span class="ltx_text ltx_lst_space"> </span>connector"</span>
</div>
<div id="lstnumberx2014" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">output</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Units</span>.<span class="ltx_text ltx_lst_identifier">SI</span>.<span class="ltx_text ltx_lst_identifier">Position</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">r0</span>[3];
</div>
<div id="lstnumberx2015" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">output</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">S</span>[3,<span class="ltx_text ltx_lst_space"> </span>3];
</div>
<div id="lstnumberx2016" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">output</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Units</span>.<span class="ltx_text ltx_lst_identifier">SI</span>.<span class="ltx_text ltx_lst_identifier">Velocity</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">v</span>[3];
</div>
<div id="lstnumberx2017" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">output</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Units</span>.<span class="ltx_text ltx_lst_identifier">SI</span>.<span class="ltx_text ltx_lst_identifier">AngularVelocity</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">w</span>[3];
</div>
<div id="lstnumberx2018" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Units</span>.<span class="ltx_text ltx_lst_identifier">SI</span>.<span class="ltx_text ltx_lst_identifier">Acceleration</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">a</span>[3];
</div>
<div id="lstnumberx2019" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Units</span>.<span class="ltx_text ltx_lst_identifier">SI</span>.<span class="ltx_text ltx_lst_identifier">AngularAcceleration</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">z</span>[3];
</div>
<div id="lstnumberx2020" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">flow</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Units</span>.<span class="ltx_text ltx_lst_identifier">SI</span>.<span class="ltx_text ltx_lst_identifier">Force</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">f</span>[3];
</div>
<div id="lstnumberx2021" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">flow</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Units</span>.<span class="ltx_text ltx_lst_identifier">SI</span>.<span class="ltx_text ltx_lst_identifier">Torque</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">t</span>[3];
</div>
<div id="lstnumberx2022" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Frame_b</span>;
</div>
</div>
</div>
<div id="S3.SS1.p5" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">The subsequent connectors <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">Plug_Expanded</span> and <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">PlugExpanded2</span>
are correct, but <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">Plug_Expanded_Illegal</span> is illegal since
the number of non-flow and flow variables is different if <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">n</span> and <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">m</span> are different. It is not clear how a tool can detect in
general that connectors such as <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">Plug_Expanded_Illegal</span> are
illegal. However, it is always possible to detect this defect after
actual values of parameters and constants are provided in the simulation
model.</span></p>
</div>
<div id="S3.SS1.p6" class="ltx_para">
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,Y29ubmVjdG9yIFBsdWdfRXhwYW5kZWQgImNvcnJlY3QgY29ubmVjdG9yIgogIHBhcmFtZXRlciBJbnRlZ2VyIG09MzsKICBSZWFsIHZbbV07CiAgZmxvdyBSZWFsIGlbbV07CmVuZCBQbHVnX0V4cGFuZGVkOwoKY29ubmVjdG9yIFBsdWdfRXhwYW5kZWQyICJjb3JyZWN0IGNvbm5lY3RvciIKICBwYXJhbWV0ZXIgSW50ZWdlciBtPTM7CiAgZmluYWwgcGFyYW1ldGVyIEludGVnZXIgbj1tOwogIFJlYWwgdlttXTsKICBmbG93IFJlYWwgaVtuXTsKZW5kIFBsdWdfRXhwYW5kZWQyOwoKY29ubmVjdG9yIFBsdWdfRXhwYW5kZWRfSWxsZWdhbCAiY29ubmVjdG9yIGlzIGlsbGVnYWwiCiAgcGFyYW1ldGVyIEludGVnZXIgbT0zOwogIHBhcmFtZXRlciBJbnRlZ2VyIG49bTsKICBSZWFsIHZbbV07CiAgZmxvdyBSZWFsIGlbbl07CmVuZCBQbHVnX0V4cGFuZGVkX0lsbGVnYWw7">⬇</a></div>
<div id="lstnumberx2023" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">connector</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Plug_Expanded</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#000000;">"correct<span class="ltx_text ltx_lst_space"> </span>connector"</span>
</div>
<div id="lstnumberx2024" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">parameter</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">m</span>=3;
</div>
<div id="lstnumberx2025" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">v</span>[<span class="ltx_text ltx_lst_identifier">m</span>];
</div>
<div id="lstnumberx2026" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">flow</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">i</span>[<span class="ltx_text ltx_lst_identifier">m</span>];
</div>
<div id="lstnumberx2027" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Plug_Expanded</span>;
</div>
<div id="lstnumberx2028" class="ltx_listingline">
</div>
<div id="lstnumberx2029" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">connector</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Plug_Expanded2</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#000000;">"correct<span class="ltx_text ltx_lst_space"> </span>connector"</span>
</div>
<div id="lstnumberx2030" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">parameter</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">m</span>=3;
</div>
<div id="lstnumberx2031" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">final</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">parameter</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">n</span>=<span class="ltx_text ltx_lst_identifier">m</span>;
</div>
<div id="lstnumberx2032" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">v</span>[<span class="ltx_text ltx_lst_identifier">m</span>];
</div>
<div id="lstnumberx2033" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">flow</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">i</span>[<span class="ltx_text ltx_lst_identifier">n</span>];
</div>
<div id="lstnumberx2034" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Plug_Expanded2</span>;
</div>
<div id="lstnumberx2035" class="ltx_listingline">
</div>
<div id="lstnumberx2036" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">connector</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Plug_Expanded_Illegal</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#000000;">"connector<span class="ltx_text ltx_lst_space"> </span>is<span class="ltx_text ltx_lst_space"> </span>illegal"</span>
</div>
<div id="lstnumberx2037" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">parameter</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">m</span>=3;
</div>
<div id="lstnumberx2038" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">parameter</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">n</span>=<span class="ltx_text ltx_lst_identifier">m</span>;
</div>
<div id="lstnumberx2039" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">v</span>[<span class="ltx_text ltx_lst_identifier">m</span>];
</div>
<div id="lstnumberx2040" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">flow</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">i</span>[<span class="ltx_text ltx_lst_identifier">n</span>];
</div>
<div id="lstnumberx2041" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Plug_Expanded_Illegal</span>;
</div>
</div>
<p class="ltx_p">]</p>
</div>
</section>
</section>
<section id="equation-operators-for-overconstrained-connection-based-equation-systems1" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">9.4 </span>Equation Operators for Overconstrained Connection-Based Equation Systems</h2>

<div id="S4.p1" class="ltx_para">
<p class="ltx_p">There is a special problem regarding equation systems resulting from
<em class="ltx_emph ltx_font_italic">loops</em> in connection graphs where the connectors contain
<em class="ltx_emph ltx_font_italic">non-flow</em> (i.e., potential) variables <em class="ltx_emph ltx_font_italic">dependent</em> on each
other. When a loop structure occurs in such a graph, the resulting
equation system will be <em class="ltx_emph ltx_font_italic">overconstrained</em>, i.e., have more
equations than variables, since there are implicit constraints between
certain non-flow variables in the connector in addition to the
connection equations around the loop. At the current state-of-the-art,
it is not possible to automatically eliminate the unneeded equations
from the resulting equation system without additional information from
the model designer.</p>
</div>
<div id="S4.p2" class="ltx_para">
<p class="ltx_p">This section describes a set of equation operators for such
overconstrained connection-based equation systems, that makes it
possible for the model designer to specify enough information in the
model to allow a Modelica environment to automatically remove the
superfluous equations.</p>
</div>
<div id="S4.p3" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Connectors may contain redundant variables. For example, the
orientation between two coordinate systems in <math id="S4.p3.m1" class="ltx_Math" alttext="3" display="inline"><mn mathvariant="normal">3</mn></math> dimensions can be
described by <math id="S4.p3.m2" class="ltx_Math" alttext="3" display="inline"><mn mathvariant="normal">3</mn></math> independent variables. However, every description of
orientation with <math id="S4.p3.m3" class="ltx_Math" alttext="3" display="inline"><mn mathvariant="normal">3</mn></math> variables has at least one singularity in the region
where the variables are defined. It is therefore not possible to declare
only <math id="S4.p3.m4" class="ltx_Math" alttext="3" display="inline"><mn mathvariant="normal">3</mn></math> variables in a connector. Instead <math id="S4.p3.m5" class="ltx_Math" alttext="n" display="inline"><mi>n</mi></math> variables (<math id="S4.p3.m6" class="ltx_Math" alttext="n&gt;3" display="inline"><mrow><mi>n</mi><mo mathvariant="normal">&gt;</mo><mn mathvariant="normal">3</mn></mrow></math>) have to be used. These variables are no longer independent from each
other and there are <math id="S4.p3.m7" class="ltx_Math" alttext="n-3" display="inline"><mrow><mi>n</mi><mo mathvariant="normal">-</mo><mn mathvariant="normal">3</mn></mrow></math> constraint equations that have to be fulfilled.
A proper description of a redundant set of variables with constraint
equations does no longer have a singularity. A model that has loops in
the connection structure formed by components and connectors with
redundant variables, may lead to a differential algebraic equation
system that has more equations than unknown variables. The superfluous
equations are usually consistent with the rest of the equations, i.e., a
unique mathematical solution exists. Such models cannot be treated with
the currently known symbolic transformation methods. To overcome this
situation, operators are defined in order that a Modelica translator can
remove the superfluous equations. This is performed by replacing the
equality equations of non-flow variables from connection sets by a
reduced number of equations in certain situations.</span></p>
</div>
<div id="S4.p4" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">This section handles a certain class of overdetermined systems due
to connectors that have a redundant set of variables. There are other
causes of overdetermined systems, e.g., explicit zero-sum equations for
flow variables, that are not handled by the method described below.</span>]</p>
</div>
<section id="overconstrained-equation-operators-for-connection-graphs" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">9.4.1 </span>Overconstrained Equation Operators for Connection Graphs</h3>

<div id="S4.SS1.p1" class="ltx_para">
<p class="ltx_p">A type or record declaration may have an optional definition of function <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">equalityConstraint</span> that shall have the following prototype:
</p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,dHlwZSBUeXBlIC8vIG92ZXJkZXRlcm1pbmVkIHR5cGUKICBleHRlbmRzICRcbGFuZ2xlJCRcbWJveHtcZW1waHtiYXNlIHR5cGV9fSQkXHJhbmdsZSQ7CiAgZnVuY3Rpb24gZXF1YWxpdHlDb25zdHJhaW50IC8vIG5vbi1yZWR1bmRhbnQgZXF1YWxpdHkKICAgIGlucHV0IFR5cGUgVDE7CiAgICBpbnB1dCBUeXBlIFQyOwogICAgb3V0cHV0IFJlYWwgcmVzaWR1ZVskbiRdOwogIGFsZ29yaXRobQogICAgcmVzaWR1ZSA6PSAkXGxkb3RzJDsKICBlbmQgZXF1YWxpdHlDb25zdHJhaW50OwplbmQgVHlwZTsKCnJlY29yZCBSZWNvcmQKICAkXGxhbmdsZSQkXG1ib3h7XGVtcGh7ZGVjbGFyYXRpb24gb2YgcmVjb3JkIGZpZWxkc319JCRccmFuZ2xlJDsKICBmdW5jdGlvbiBlcXVhbGl0eUNvbnN0cmFpbnQgLy8gbm9uLXJlZHVuZGFudCBlcXVhbGl0eQogICAgaW5wdXQgUmVjb3JkIFIxOwogICAgaW5wdXQgUmVjb3JkIFIyOwogICAgb3V0cHV0IFJlYWwgcmVzaWR1ZVskbiRdOwogIGFsZ29yaXRobQogICAgcmVzaWR1ZSA6PSAkXGxkb3RzJDsKICBlbmQgZXF1YWxpdHlDb25zdHJhaW50OwplbmQgUmVjb3JkOw==">⬇</a></div>
<div id="lstnumberx2042" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">type</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Type</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>overdetermined<span class="ltx_text ltx_lst_space"> </span>type</span>
</div>
<div id="lstnumberx2043" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">extends</span><span class="ltx_text ltx_lst_space"> </span><math id="lstnumberx2043.m1" class="ltx_Math" alttext="\langle" display="inline"><mo mathbackground="#FFFFFF" stretchy="false">⟨</mo></math><span class="ltx_text ltx_markedasmath"><em class="ltx_emph ltx_font_italic">base type</em></span><math id="lstnumberx2043.m3" class="ltx_Math" alttext="\rangle" display="inline"><mo mathbackground="#FFFFFF" stretchy="false">⟩</mo></math>;
</div>
<div id="lstnumberx2044" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">function</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">equalityConstraint</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>non-redundant<span class="ltx_text ltx_lst_space"> </span>equality</span>
</div>
<div id="lstnumberx2045" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">input</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Type</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">T1</span>;
</div>
<div id="lstnumberx2046" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">input</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Type</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">T2</span>;
</div>
<div id="lstnumberx2047" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">output</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">residue</span>[<math id="lstnumberx2047.m1" class="ltx_Math" alttext="n" display="inline"><mi mathbackground="#FFFFFF">n</mi></math>];
</div>
<div id="lstnumberx2048" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">algorithm</span>
</div>
<div id="lstnumberx2049" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_identifier">residue</span><span class="ltx_text ltx_lst_space"> </span>:=<span class="ltx_text ltx_lst_space"> </span><math id="lstnumberx2049.m1" class="ltx_Math" alttext="\ldots" display="inline"><mi mathbackground="#FFFFFF" mathvariant="normal">…</mi></math>;
</div>
<div id="lstnumberx2050" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">equalityConstraint</span>;
</div>
<div id="lstnumberx2051" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Type</span>;
</div>
<div id="lstnumberx2052" class="ltx_listingline">
</div>
<div id="lstnumberx2053" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">record</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Record</span>
</div>
<div id="lstnumberx2054" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><math id="lstnumberx2054.m1" class="ltx_Math" alttext="\langle" display="inline"><mo mathbackground="#FFFFFF" stretchy="false">⟨</mo></math><span class="ltx_text ltx_markedasmath"><em class="ltx_emph ltx_font_italic">declaration of record fields</em></span><math id="lstnumberx2054.m3" class="ltx_Math" alttext="\rangle" display="inline"><mo mathbackground="#FFFFFF" stretchy="false">⟩</mo></math>;
</div>
<div id="lstnumberx2055" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">function</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">equalityConstraint</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>non-redundant<span class="ltx_text ltx_lst_space"> </span>equality</span>
</div>
<div id="lstnumberx2056" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">input</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Record</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">R1</span>;
</div>
<div id="lstnumberx2057" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">input</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Record</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">R2</span>;
</div>
<div id="lstnumberx2058" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">output</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">residue</span>[<math id="lstnumberx2058.m1" class="ltx_Math" alttext="n" display="inline"><mi mathbackground="#FFFFFF">n</mi></math>];
</div>
<div id="lstnumberx2059" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">algorithm</span>
</div>
<div id="lstnumberx2060" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_identifier">residue</span><span class="ltx_text ltx_lst_space"> </span>:=<span class="ltx_text ltx_lst_space"> </span><math id="lstnumberx2060.m1" class="ltx_Math" alttext="\ldots" display="inline"><mi mathbackground="#FFFFFF" mathvariant="normal">…</mi></math>;
</div>
<div id="lstnumberx2061" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">equalityConstraint</span>;
</div>
<div id="lstnumberx2062" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Record</span>;
</div>
</div>
<p class="ltx_p">The array dimension <math id="S4.SS1.p1.m1" class="ltx_Math" alttext="n" display="inline"><mi>n</mi></math> of <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">residue</span> shall be a constant <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">Integer</span> expression that can be evaluated during translation, with <math id="S4.SS1.p1.m2" class="ltx_Math" alttext="n\geq 0" display="inline"><mrow><mi>n</mi><mo>≥</mo><mn>0</mn></mrow></math>.
The <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">equalityConstraint</span> expresses the equality between the two type instances <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">T1</span> and <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">T2</span> or the record instances <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">R1</span> and <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">R2</span>, respectively, as the <math id="S4.SS1.p1.m3" class="ltx_Math" alttext="n" display="inline"><mi>n</mi></math> non-redundant equation residuals returned in <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">residue</span>.
That is, the set of <math id="S4.SS1.p1.m4" class="ltx_Math" alttext="n" display="inline"><mi>n</mi></math> non-redundant equations stating that <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">R1</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">R2</span></span> is given by the equation (<span class="ltx_text ltx_lstlisting"></span> represents a vector of zeros of appropriate size):</p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ICBSZWNvcmQgUjEsIFIyOwplcXVhdGlvbgogIDAgPSBSZWNvcmQuZXF1YWxpdHlDb25zdHJhaW50KFIxLCBSMik7">⬇</a></div>
<div id="lstnumberx2063" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">Record</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">R1</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">R2</span>;
</div>
<div id="lstnumberx2064" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx2065" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span>0<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Record</span>.<span class="ltx_text ltx_lst_identifier">equalityConstraint</span>(<span class="ltx_text ltx_lst_identifier">R1</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">R2</span>);
</div>
</div>
</div>
<div id="S4.SS1.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">If the elements of a record <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">Record</span> are not independent from each other, the equation <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">R1</span><span class="ltx_text ltx_lst_space ltx_font_upright"> </span><span class="ltx_text ltx_font_upright">=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">R2</span></span></span> contains redundant equations.</span>]</p>
</div>
<div id="S4.SS1.p3" class="ltx_para">
<p class="ltx_p">A type class with an <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">equalityConstraint</span> function declaration is called <em class="ltx_emph ltx_font_italic">overdetermined type</em>.
A record class with an <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">equalityConstraint</span> function definition is called <em class="ltx_emph ltx_font_italic">overdetermined record</em>.
A connector that contains instances of overdetermined type and/or record classes is called <em class="ltx_emph ltx_font_italic">overdetermined connector</em>.
An overdetermined type or record may neither have flow components nor may be used as a type of flow components.
If an array is used as argument to any of the <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">Connections</span>.*</span> functions it is treated as one unit – unlike <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">connect</span>, there is no special treatment of this case, compare <a href="#connect-equations-and-connectors" title="9.1 Connect-Equations and Connectors ‣ Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">9.1</span></a>.</p>
</div>
<div id="S4.SS1.p4" class="ltx_para">
<p class="ltx_p">Every instance of an overdetermined type or record in an overdetermined
connector is a node in a virtual connection graph that is used to
determine when the standard equation <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">R1</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">R2</span></span> or when the equation
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">0<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">equalityConstraint</span>(<span class="ltx_text ltx_lst_identifier">R1</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">R2</span>)</span> has to be used for the generation of
<span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">connect</span> equations. The edges of the virtual connection graph are
implicitly defined by <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">connect</span> and explicitly by
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">Connections</span>.<span class="ltx_text ltx_lst_identifier">branch</span></span> statements, see table below. <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">Connections</span> is a
built-in package in global scope containing built-in operators.
Additionally, corresponding nodes of the virtual connection graph have
to be defined as roots or as potential roots with functions
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">Connections</span>.<span class="ltx_text ltx_lst_identifier">root</span></span> and <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">Connections</span>.<span class="ltx_text ltx_lst_identifier">potentialRoot</span></span>, respectively.</p>
</div>
<div id="S4.SS1.p5" class="ltx_para">
<p class="ltx_p">The overconstrained equation operators for connection graphs are listed below. Here, <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">A</span> and <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">B</span> are connector instances that may be hierarchically structured, e.g., <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">A</span> may be an abbreviation for <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">EnginePort</span>.<span class="ltx_text ltx_lst_identifier">Frame</span></span>.</p>
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr class="ltx_tr">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_r ltx_border_t"><span class="ltx_text ltx_font_italic">Expression</span></th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_t"><span class="ltx_text ltx_font_italic">Description</span></th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_t"><span class="ltx_text ltx_font_italic">Details</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr">
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_tt"><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keyword" style="color:#003378;">connect</span>(<span class="ltx_text ltx_lst_identifier">A</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">B</span>)</span></td>
<td class="ltx_td ltx_align_left ltx_border_tt">Optional spanning-tree edge</td>
<td class="ltx_td ltx_align_left ltx_border_tt"><a href="#modelica:optional-spanning-tree-edge" title="Operator 9.1 connect ‣ 9.4.1 Overconstrained Equation Operators for Connection Graphs ‣ 9.4 Equation Operators for Overconstrained Connection-Based Equation Systems ‣ Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Operator</span> <span class="ltx_text ltx_ref_tag">9.1</span></a></td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_left ltx_border_r"><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">Connections</span>.<span class="ltx_text ltx_lst_identifier">branch</span>(<span class="ltx_text ltx_lst_identifier">A</span>.<span class="ltx_text ltx_lst_identifier">R</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">B</span>.<span class="ltx_text ltx_lst_identifier">R</span>)</span></td>
<td class="ltx_td ltx_align_left">Required spanning-tree edge</td>
<td class="ltx_td ltx_align_left"><a href="#modelica:Connections.branch" title="Operator 9.2 Connections.branch ‣ 9.4.1 Overconstrained Equation Operators for Connection Graphs ‣ 9.4 Equation Operators for Overconstrained Connection-Based Equation Systems ‣ Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Operator</span> <span class="ltx_text ltx_ref_tag">9.2</span></a></td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_left ltx_border_r"><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">Connections</span>.<span class="ltx_text ltx_lst_identifier">root</span>(<span class="ltx_text ltx_lst_identifier">A</span>.<span class="ltx_text ltx_lst_identifier">R</span>)</span></td>
<td class="ltx_td ltx_align_left">Definite root node</td>
<td class="ltx_td ltx_align_left"><a href="#modelica:Connections.root" title="Operator 9.3 Connections.root ‣ 9.4.1 Overconstrained Equation Operators for Connection Graphs ‣ 9.4 Equation Operators for Overconstrained Connection-Based Equation Systems ‣ Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Operator</span> <span class="ltx_text ltx_ref_tag">9.3</span></a></td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_left ltx_border_r"><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">Connections</span>.<span class="ltx_text ltx_lst_identifier">potentialRoot</span>(<span class="ltx_text ltx_lst_identifier">A</span>.<span class="ltx_text ltx_lst_identifier">R</span>,<span class="ltx_text ltx_lst_space"> </span><math id="S4.SS1.p5.m1" class="ltx_Math" alttext="\ldots" display="inline"><mi mathbackground="#FFFFFF" mathvariant="normal">…</mi></math>)</span></td>
<td class="ltx_td ltx_align_left">Potential root node</td>
<td class="ltx_td ltx_align_left"><a href="#modelica:Connections.potentialRoot" title="Operator 9.4 Connections.potentialRoot ‣ 9.4.1 Overconstrained Equation Operators for Connection Graphs ‣ 9.4 Equation Operators for Overconstrained Connection-Based Equation Systems ‣ Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Operator</span> <span class="ltx_text ltx_ref_tag">9.4</span></a></td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_left ltx_border_r"><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">Connections</span>.<span class="ltx_text ltx_lst_identifier">isRoot</span>(<span class="ltx_text ltx_lst_identifier">A</span>.<span class="ltx_text ltx_lst_identifier">R</span>)</span></td>
<td class="ltx_td ltx_align_left">Predicate for being selected as root</td>
<td class="ltx_td ltx_align_left"><a href="#modelica:Connections.isRoot" title="Operator 9.5 Connections.isRoot ‣ 9.4.1 Overconstrained Equation Operators for Connection Graphs ‣ 9.4 Equation Operators for Overconstrained Connection-Based Equation Systems ‣ Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Operator</span> <span class="ltx_text ltx_ref_tag">9.5</span></a></td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_left ltx_border_b ltx_border_r"><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">Connections</span>.<span class="ltx_text ltx_lst_identifier">rooted</span>(<span class="ltx_text ltx_lst_identifier">A</span>.<span class="ltx_text ltx_lst_identifier">R</span>)</span></td>
<td class="ltx_td ltx_align_left ltx_border_b">Predicate for being closer to root</td>
<td class="ltx_td ltx_align_left ltx_border_b"><a href="#modelica:Connections.rooted" title="Operator 9.6 Connections.rooted ‣ 9.4.1 Overconstrained Equation Operators for Connection Graphs ‣ 9.4 Equation Operators for Overconstrained Connection-Based Equation Systems ‣ Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Operator</span> <span class="ltx_text ltx_ref_tag">9.6</span></a></td>
</tr>
</tbody>
</table>
</div>
<div id="modelica:optional-spanning-tree-edge" class="ltx_theorem ltx_theorem_operatordefinition">
<h6 class="ltx_title ltx_runin ltx_font_bold ltx_title_theorem">Operator 9.1 connect
<br class="ltx_break">
</h6>
<div id="Thmoperatordefinition1.p1" class="ltx_para">
<div class="ltx_listing ltx_lst_language_modelica_synopsis ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,Y29ubmVjdChBLCBCKQ==">⬇</a></div>
<div id="lstnumberx2066" class="ltx_listingline">
<span class="ltx_text ltx_lst_keyword" style="color:#003378;">connect</span>(<span class="ltx_text ltx_lst_identifier">A</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">B</span>)
</div>
</div>
<ul class="ltx_itemize">
<li id="S4.I1.ix1" class="ltx_item" style="list-style-type:none;">
<div id="S4.I1.ix1.p1" class="ltx_para">
<p class="ltx_p">Defines <em class="ltx_emph ltx_font_italic">optional spanning-tree edge</em> from the overdetermined type or record instances in connector instance <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">A</span> to the corresponding overdetermined type or record instances in connector instance <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">B</span> for a virtual connection graph.
The types of the corresponding overdetermined type or record instances shall be the same.</p>
</div>
</li>
</ul>
</div>
</div>
<div id="modelica:Connections.branch" class="ltx_theorem ltx_theorem_operatordefinition">
<h6 class="ltx_title ltx_runin ltx_font_bold ltx_title_theorem">Operator 9.2 Connections.branch
<br class="ltx_break">
</h6>
<div id="Thmoperatordefinition2.p1" class="ltx_para">
<div class="ltx_listing ltx_lst_language_modelica_synopsis ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,Q29ubmVjdGlvbnMuYnJhbmNoKEEuUiwgQi5SKQ==">⬇</a></div>
<div id="lstnumberx2067" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier">Connections</span>.<span class="ltx_text ltx_lst_identifier">branch</span>(<span class="ltx_text ltx_lst_identifier">A</span>.<span class="ltx_text ltx_lst_identifier">R</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">B</span>.<span class="ltx_text ltx_lst_identifier">R</span>)
</div>
</div>
<ul class="ltx_itemize">
<li id="S4.I2.ix1" class="ltx_item" style="list-style-type:none;">
<div id="S4.I2.ix1.p1" class="ltx_para">
<p class="ltx_p">Defines a <em class="ltx_emph ltx_font_italic">required spanning-tree edge</em> from the overdetermined type or record instance <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">R</span> in connector instance <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">A</span> to the corresponding overdetermined type or record instance <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">R</span> in connector instance <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">B</span> for a virtual connection graph.
This function can be used at all places where a <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">connect</span> statement is allowed.</p>
</div>
<div id="S4.I2.ix1.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">E.g., it is not allowed to use this function in a when-clause.
This definition shall be used if in a model with connectors <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">A</span> and <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">B</span> the overdetermined records <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">A</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">R</span></span></span> and <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">B</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">R</span></span></span> are algebraically coupled in the model, e.g., due to <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">B</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">R</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">f</span>(<span class="ltx_text ltx_lst_identifier">A</span>.<span class="ltx_text ltx_lst_identifier">R</span>,<span class="ltx_text ltx_lst_space"> </span><math id="S4.I2.ix1.p2.m1" class="ltx_Math" alttext="\langle" display="inline"><mo mathbackground="#FFFFFF" mathvariant="normal" stretchy="false">⟨</mo></math><span class="ltx_text ltx_markedasmath"><em class="ltx_emph ltx_font_italic">other unknowns</em></span><math id="S4.I2.ix1.p2.m3" class="ltx_Math" alttext="\rangle" display="inline"><mo mathbackground="#FFFFFF" mathvariant="normal" stretchy="false">⟩</mo></math>)</span></span>.</span>]</p>
</div>
</li>
</ul>
</div>
</div>
<div id="modelica:Connections.root" class="ltx_theorem ltx_theorem_operatordefinition">
<h6 class="ltx_title ltx_runin ltx_font_bold ltx_title_theorem">Operator 9.3 Connections.root
<br class="ltx_break">
</h6>
<div id="Thmoperatordefinition3.p1" class="ltx_para">
<div class="ltx_listing ltx_lst_language_modelica_synopsis ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,Q29ubmVjdGlvbnMucm9vdChBLlIp">⬇</a></div>
<div id="lstnumberx2068" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier">Connections</span>.<span class="ltx_text ltx_lst_identifier">root</span>(<span class="ltx_text ltx_lst_identifier">A</span>.<span class="ltx_text ltx_lst_identifier">R</span>)
</div>
</div>
<ul class="ltx_itemize">
<li id="S4.I3.ix1" class="ltx_item" style="list-style-type:none;">
<div id="S4.I3.ix1.p1" class="ltx_para">
<p class="ltx_p">The overdetermined type or record instance <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">R</span> in connector instance <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">A</span> is a (definite) <em class="ltx_emph ltx_font_italic">root node</em> in a virtual connection graph.</p>
</div>
<div id="S4.I3.ix1.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">This definition shall be used if in a model with connector <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">A</span> the overdetermined record <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">A</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">R</span></span></span> is (consistently) assigned, e.g., from a parameter expressions.</span>]</p>
</div>
</li>
</ul>
</div>
</div>
<div id="modelica:Connections.potentialRoot" class="ltx_theorem ltx_theorem_operatordefinition">
<h6 class="ltx_title ltx_runin ltx_font_bold ltx_title_theorem">Operator 9.4 Connections.potentialRoot
<br class="ltx_break">
</h6>
<div id="Thmoperatordefinition4.p1" class="ltx_para">
<div class="ltx_listing ltx_lst_language_modelica_synopsis ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,Q29ubmVjdGlvbnMucG90ZW50aWFsUm9vdChBLlIpCkNvbm5lY3Rpb25zLnBvdGVudGlhbFJvb3QoQS5SLCBwcmlvcml0eT0kcCQp">⬇</a></div>
<div id="lstnumberx2069" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier">Connections</span>.<span class="ltx_text ltx_lst_identifier">potentialRoot</span>(<span class="ltx_text ltx_lst_identifier">A</span>.<span class="ltx_text ltx_lst_identifier">R</span>)
</div>
<div id="lstnumberx2070" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier">Connections</span>.<span class="ltx_text ltx_lst_identifier">potentialRoot</span>(<span class="ltx_text ltx_lst_identifier">A</span>.<span class="ltx_text ltx_lst_identifier">R</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">priority</span>=<math id="lstnumberx2070.m1" class="ltx_Math" alttext="p" display="inline"><mi mathbackground="#FFFFFF">p</mi></math>)
</div>
</div>
<ul class="ltx_itemize">
<li id="S4.I4.ix1" class="ltx_item" style="list-style-type:none;">
<div id="S4.I4.ix1.p1" class="ltx_para">
<p class="ltx_p">The overdetermined type or record instance <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">R</span> in connector instance <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">A</span> is a <em class="ltx_emph ltx_font_italic">potential root node</em> in a virtual connection graph with priority <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">p</span> (<math id="S4.I4.ix1.p1.m1" class="ltx_Math" alttext="p\geq 0" display="inline"><mrow><mi>p</mi><mo>≥</mo><mn>0</mn></mrow></math>).
If no second argument is provided, the priority is zero. <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">p</span> shall be a parameter expression of type <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">Integer</span>.
In a virtual connection subgraph without a <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">Connections</span>.<span class="ltx_text ltx_lst_identifier">root</span></span> definition, one of the potential roots with the lowest priority number is selected as root.</p>
</div>
<div id="S4.I4.ix1.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">This definition may be used if in a model with connector <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">A</span> the overdetermined record <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">A</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">R</span></span></span> appears differentiated – <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keyword ltx_font_upright" style="color:#003378;">der</span><span class="ltx_text ltx_font_upright">(<span class="ltx_text ltx_lst_identifier">A</span>.<span class="ltx_text ltx_lst_identifier">R</span>)</span></span> – together with the <em class="ltx_emph ltx_font_upright">constraint equations</em> of <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">A</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">R</span></span></span>, i.e., a non-redundant subset of <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">A</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">R</span></span></span> maybe used as states.</span>]</p>
</div>
</li>
</ul>
</div>
</div>
<div id="modelica:Connections.isRoot" class="ltx_theorem ltx_theorem_operatordefinition">
<h6 class="ltx_title ltx_runin ltx_font_bold ltx_title_theorem">Operator 9.5 Connections.isRoot
<br class="ltx_break">
</h6>
<div id="Thmoperatordefinition5.p1" class="ltx_para">
<div class="ltx_listing ltx_lst_language_modelica_synopsis ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,Q29ubmVjdGlvbnMuaXNSb290KEEuUik=">⬇</a></div>
<div id="lstnumberx2071" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier">Connections</span>.<span class="ltx_text ltx_lst_identifier">isRoot</span>(<span class="ltx_text ltx_lst_identifier">A</span>.<span class="ltx_text ltx_lst_identifier">R</span>)
</div>
</div>
<ul class="ltx_itemize">
<li id="S4.I5.ix1" class="ltx_item" style="list-style-type:none;">
<div id="S4.I5.ix1.p1" class="ltx_para">
<p class="ltx_p">Returns true, if the overdetermined type or record instance <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">R</span> in connector instance <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">A</span> is selected as a root in the virtual connection graph.</p>
</div>
</li>
</ul>
</div>
</div>
<div id="modelica:Connections.rooted" class="ltx_theorem ltx_theorem_operatordefinition">
<h6 class="ltx_title ltx_runin ltx_font_bold ltx_title_theorem">Operator 9.6 Connections.rooted
<br class="ltx_break">
</h6>
<div id="Thmoperatordefinition6.p1" class="ltx_para">
<div class="ltx_listing ltx_lst_language_modelica_synopsis ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,Q29ubmVjdGlvbnMucm9vdGVkKEEuUikKcm9vdGVkKEEuUikgLy8gZGVwcmVjYXRlZCE=">⬇</a></div>
<div id="lstnumberx2072" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier">Connections</span>.<span class="ltx_text ltx_lst_identifier">rooted</span>(<span class="ltx_text ltx_lst_identifier">A</span>.<span class="ltx_text ltx_lst_identifier">R</span>)
</div>
<div id="lstnumberx2073" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier">rooted</span>(<span class="ltx_text ltx_lst_identifier">A</span>.<span class="ltx_text ltx_lst_identifier">R</span>)<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>deprecated!</span>
</div>
</div>
<ul class="ltx_itemize">
<li id="S4.I6.ix1" class="ltx_item" style="list-style-type:none;">
<div id="S4.I6.ix1.p1" class="ltx_para">
<p class="ltx_p">If the operator <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">Connections</span>.<span class="ltx_text ltx_lst_identifier">rooted</span>(<span class="ltx_text ltx_lst_identifier">A</span>.<span class="ltx_text ltx_lst_identifier">R</span>)</span> is used, or the equivalent but deprecated operator <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">rooted</span>(<span class="ltx_text ltx_lst_identifier">A</span>.<span class="ltx_text ltx_lst_identifier">R</span>)</span>, then there must be exactly one statement <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">Connections</span>.<span class="ltx_text ltx_lst_identifier">branch</span>(<span class="ltx_text ltx_lst_identifier">A</span>.<span class="ltx_text ltx_lst_identifier">R</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">B</span>.<span class="ltx_text ltx_lst_identifier">R</span>)</span> involving <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">A</span>.<span class="ltx_text ltx_lst_identifier">R</span></span> (the argument of <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">Connections</span>.<span class="ltx_text ltx_lst_identifier">rooted</span></span> must be the first argument of <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">Connections</span>.<span class="ltx_text ltx_lst_identifier">branch</span></span>). In that case <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">Connections</span>.<span class="ltx_text ltx_lst_identifier">rooted</span>(<span class="ltx_text ltx_lst_identifier">A</span>.<span class="ltx_text ltx_lst_identifier">R</span>)</span> returns true, if <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">A</span>.<span class="ltx_text ltx_lst_identifier">R</span></span> is closer to the root of the spanning tree than <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">B</span>.<span class="ltx_text ltx_lst_identifier">R</span></span>; otherwise false is returned.</p>
</div>
<div id="S4.I6.ix1.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">This operator can be used to avoid equation systems by providing analytic inverses, see <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">Modelica</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">Mechanics</span>.<span class="ltx_text ltx_lst_identifier">MultiBody</span>.<span class="ltx_text ltx_lst_identifier">Parts</span>.<span class="ltx_text ltx_lst_identifier">FixedRotation</span></span></span>.</span>]</p>
</div>
</li>
</ul>
</div>
</div>
<div id="S4.SS1.p6" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Note, that <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">Connections</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">branch</span></span></span>, <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">Connections</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">root</span></span></span>,
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">Connections</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">potentialRoot</span></span></span> do not generate equations. They only
generate nodes and edges in the virtual graph for analysis purposes.</span>]</p>
</div>
</section>
<section id="converting-the-connection-graph-into-trees-and-generating-connection-equations" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">9.4.2 </span>Converting the Connection Graph into Trees and Generating Connection Equations</h3>

<div id="S4.SS2.p1" class="ltx_para">
<p class="ltx_p">Before <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">connect</span> equations are generated, the virtual connection
graph is transformed into a set of spanning trees by removing optional spanning tree edges
from the graph. This is performed in the following way:</p>
<ol id="S4.I7" class="ltx_enumerate">
<li id="S4.I7.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span> 
<div id="S4.I7.i1.p1" class="ltx_para">
<p class="ltx_p">Every root node defined via the <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">Connections</span>.<span class="ltx_text ltx_lst_identifier">root</span></span> statement is
a definite root of one spanning tree.</p>
</div>
</li>
<li id="S4.I7.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span> 
<div id="S4.I7.i2.p1" class="ltx_para">
<p class="ltx_p">The virtual connection graph may consist of sets of subgraphs that are
not connected together. Every subgraph in this set shall have at least
one root node or one potential root node in a simulation model. If a
graph of this set does not contain any root node, then one potential
root node in this subgraph that has the lowest priority number is
selected to be the root of that subgraph. The selection can be
inquired in a class with function <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">Connections</span>.<span class="ltx_text ltx_lst_identifier">isRoot</span></span>, see table
above.</p>
</div>
</li>
<li id="S4.I7.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">3.</span> 
<div id="S4.I7.i3.p1" class="ltx_para">
<p class="ltx_p">If there are n selected roots in a subgraph, then optional spanning-tree edges
have to be removed such that the result shall be a set of n spanning
trees with the selected root nodes as roots.</p>
</div>
</li>
</ol>
</div>
<div id="S4.SS2.p2" class="ltx_para">
<p class="ltx_p">After this analysis, the connection equations are generated in the
following way:</p>
<ol id="S4.I8" class="ltx_enumerate">
<li id="S4.I8.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span> 
<div id="S4.I8.i1.p1" class="ltx_para">
<p class="ltx_p">For every optional spanning-tree edge (i.e., a <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keyword" style="color:#003378;">connect</span>(<span class="ltx_text ltx_lst_identifier">A</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">B</span>)</span>
equation), in one of the spanning trees, the connection
equations are generated according to <a href="#generation-of-connection-equations" title="9.2 Generation of Connection Equations ‣ Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">9.2</span></a>.</p>
</div>
</li>
<li id="S4.I8.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span> 
<div id="S4.I8.i2.p1" class="ltx_para">
<p class="ltx_p">For every optional spanning-tree edge not in any of the spanning trees, the
connection equations are generated according to <a href="#generation-of-connection-equations" title="9.2 Generation of Connection Equations ‣ Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">9.2</span></a>, except
for overdetermined type or record instances R. Here the equations
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">0<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">R</span>.<span class="ltx_text ltx_lst_identifier">equalityConstraint</span>(<span class="ltx_text ltx_lst_identifier">A</span>.<span class="ltx_text ltx_lst_identifier">R</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">B</span>.<span class="ltx_text ltx_lst_identifier">R</span>)</span> are generated instead
of <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">A</span>.<span class="ltx_text ltx_lst_identifier">R</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">B</span>.<span class="ltx_text ltx_lst_identifier">R</span></span>.</p>
</div>
</li>
</ol>
</div>
</section>
<section id="examples-of-overconstrained-connection-graphs" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">9.4.3 </span>Examples of Overconstrained Connection Graphs</h3>

<div id="S4.SS3.p1" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Example:</span></p>
</div>
<figure id="F2" class="ltx_figure"><object type="image/svg+xml" data="media/overdetermined.svg" id="F2.g1" class="ltx_graphics ltx_centering" alt="Example of a virtual connection graph."></object>
<figcaption class="ltx_caption ltx_font_italic"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text ltx_font_upright">Figure 9.2</span>: </span>Example of a virtual connection graph.</figcaption>
</figure>
<div id="S4.SS3.p2" class="ltx_para">
<p class="ltx_p">]</p>
</div>
<section id="an-overdetermined-connector-for-power-systems" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">9.4.3.1 </span>An Overdetermined Connector for Power Systems</h4>

<div id="S4.SS3.SSS1.p1" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">An overdetermined connector for power systems based on the
transformation theory of Park may be defined as:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,dHlwZSBBQ19BbmdsZSAiQW5nbGUgb2Ygc291cmNlLCBlLmcuLCByb3RvciBvZiBnZW5lcmF0b3IiCiAgZXh0ZW5kcyBNb2RlbGljYS5Vbml0cy5TSS5BbmdsZTsgLy8gQUNfQW5nbGUgaXMgYSBSZWFsIG51bWJlcgogIC8vIHdpdGggdW5pdCA9ICJyYWQiCiAgZnVuY3Rpb24gZXF1YWxpdHlDb25zdHJhaW50CiAgICBpbnB1dCBBQ19BbmdsZSB0aGV0YTE7CiAgICBpbnB1dCBBQ19BbmdsZSB0aGV0YTI7CiAgICBvdXRwdXQgUmVhbCByZXNpZHVlWzBdICJObyBjb25zdHJhaW50cyI7CiAgYWxnb3JpdGhtCiAgICAvKiBtYWtlIHN1cmUgdGhhdCB0aGV0YTEgYW5kIHRoZXRhMiBmcm9tIGpvaW5pbmcgZWRnZXMgYXJlIGlkZW50aWNhbCAqLwogICAgYXNzZXJ0KGFicyh0aGV0YTEgLSB0aGV0YTIpIDwgMS5lLTEwLCAiQ29uc2lzdGVudCBhbmdsZXMiKTsKICBlbmQgZXF1YWxpdHlDb25zdHJhaW50OwplbmQgQUNfQW5nbGU7Cgpjb25uZWN0b3IgQUNfUGx1ZyAiMy1waGFzZSBhbHRlcm5hdGluZyBjdXJyZW50IGNvbm5lY3RvciIKICBpbXBvcnQgTW9kZWxpY2EuVW5pdHMuU0k7CiAgQUNfQW5nbGUgdGhldGE7CiAgU0kuVm9sdGFnZSB2WzNdICJWb2x0YWdlcyByZXNvbHZlZCBpbiBBQ19BbmdsZSBmcmFtZSI7CiAgZmxvdyBTSS5DdXJyZW50IGlbM10gIkN1cnJlbnRzIHJlc29sdmVkIGluIEFDX0FuZ2xlIGZyYW1lIjsKZW5kIEFDX1BsdWc7">⬇</a></div>
<div id="lstnumberx2074" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">type</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">AC_Angle</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#000000;">"Angle<span class="ltx_text ltx_lst_space"> </span>of<span class="ltx_text ltx_lst_space"> </span>source,<span class="ltx_text ltx_lst_space"> </span>e.g.,<span class="ltx_text ltx_lst_space"> </span>rotor<span class="ltx_text ltx_lst_space"> </span>of<span class="ltx_text ltx_lst_space"> </span>generator"</span>
</div>
<div id="lstnumberx2075" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">extends</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Units</span>.<span class="ltx_text ltx_lst_identifier">SI</span>.<span class="ltx_text ltx_lst_identifier">Angle</span>;<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>AC_Angle<span class="ltx_text ltx_lst_space"> </span>is<span class="ltx_text ltx_lst_space"> </span>a<span class="ltx_text ltx_lst_space"> </span>Real<span class="ltx_text ltx_lst_space"> </span>number</span>
</div>
<div id="lstnumberx2076" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>with<span class="ltx_text ltx_lst_space"> </span>unit<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span>"rad"</span>
</div>
<div id="lstnumberx2077" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">function</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">equalityConstraint</span>
</div>
<div id="lstnumberx2078" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">input</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">AC_Angle</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">theta1</span>;
</div>
<div id="lstnumberx2079" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">input</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">AC_Angle</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">theta2</span>;
</div>
<div id="lstnumberx2080" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">output</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">residue</span>[0]<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#000000;">"No<span class="ltx_text ltx_lst_space"> </span>constraints"</span>;
</div>
<div id="lstnumberx2081" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">algorithm</span>
</div>
<div id="lstnumberx2082" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">/*<span class="ltx_text ltx_lst_space"> </span>make<span class="ltx_text ltx_lst_space"> </span>sure<span class="ltx_text ltx_lst_space"> </span>that<span class="ltx_text ltx_lst_space"> </span>theta1<span class="ltx_text ltx_lst_space"> </span>and<span class="ltx_text ltx_lst_space"> </span>theta2<span class="ltx_text ltx_lst_space"> </span>from<span class="ltx_text ltx_lst_space"> </span>joining<span class="ltx_text ltx_lst_space"> </span>edges<span class="ltx_text ltx_lst_space"> </span>are<span class="ltx_text ltx_lst_space"> </span>identical<span class="ltx_text ltx_lst_space"> </span>*/</span>
</div>
<div id="lstnumberx2083" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">assert</span>(<span class="ltx_text ltx_lst_identifier">abs</span>(<span class="ltx_text ltx_lst_identifier">theta1</span><span class="ltx_text ltx_lst_space"> </span>-<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">theta2</span>)<span class="ltx_text ltx_lst_space"> </span>&lt;<span class="ltx_text ltx_lst_space"> </span>1.<span class="ltx_text ltx_lst_identifier">e</span>-10,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#000000;">"Consistent<span class="ltx_text ltx_lst_space"> </span>angles"</span>);
</div>
<div id="lstnumberx2084" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">equalityConstraint</span>;
</div>
<div id="lstnumberx2085" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">AC_Angle</span>;
</div>
<div id="lstnumberx2086" class="ltx_listingline">
</div>
<div id="lstnumberx2087" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">connector</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">AC_Plug</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#000000;">"3-phase<span class="ltx_text ltx_lst_space"> </span>alternating<span class="ltx_text ltx_lst_space"> </span>current<span class="ltx_text ltx_lst_space"> </span>connector"</span>
</div>
<div id="lstnumberx2088" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">import</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Units</span>.<span class="ltx_text ltx_lst_identifier">SI</span>;
</div>
<div id="lstnumberx2089" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">AC_Angle</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">theta</span>;
</div>
<div id="lstnumberx2090" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">SI</span>.<span class="ltx_text ltx_lst_identifier">Voltage</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">v</span>[3]<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#000000;">"Voltages<span class="ltx_text ltx_lst_space"> </span>resolved<span class="ltx_text ltx_lst_space"> </span>in<span class="ltx_text ltx_lst_space"> </span>AC_Angle<span class="ltx_text ltx_lst_space"> </span>frame"</span>;
</div>
<div id="lstnumberx2091" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">flow</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">SI</span>.<span class="ltx_text ltx_lst_identifier">Current</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">i</span>[3]<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#000000;">"Currents<span class="ltx_text ltx_lst_space"> </span>resolved<span class="ltx_text ltx_lst_space"> </span>in<span class="ltx_text ltx_lst_space"> </span>AC_Angle<span class="ltx_text ltx_lst_space"> </span>frame"</span>;
</div>
<div id="lstnumberx2092" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">AC_Plug</span>;
</div>
</div>
<p class="ltx_p"><span class="ltx_text ltx_font_italic">The currents and voltages in the connector are defined relatively
to the harmonic, high-frequency signal of a power source that is
essentially described by angle theta of the rotor of the source. This
allows much faster simulations, since the basic high frequency signal of
the power source is not part of the differential equations. For example,
when the source and the rest of the line operates with constant
frequency (= nominal case), then <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">AC_Plug</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">v</span></span></span> and <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">AC_Plug</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">i</span></span></span>
are constant. In this case a variable step integrator can select
large time steps. An element, such as a 3-phase inductor, may be
implemented as:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,bW9kZWwgQUNfSW5kdWN0b3IKICBwYXJhbWV0ZXIgUmVhbCBYWzMsM10sIFlbMywzXTsgLy8gY29tcG9uZW50IGNvbnN0YW50cwogIEFDX1BsdWcgcDsKICBBQ19QbHVnIG47CiAgUmVhbCBvbWVnYTsKZXF1YXRpb24KICBDb25uZWN0aW9ucy5icmFuY2gocC50aGV0YSxuLnRoZXRhKTsgLy9lZGdlIGluIHZpcnR1YWwgZ3JhcGgKICAvLyBzaW5jZSBuLnRoZXRhID0gcC50aGV0YQogIG4udGhldGEgPSBwLnRoZXRhOyAvLyBwYXNzIGFuZ2xlIHRoZXRhIGJldHdlZW4gcGx1Z3MKICBvbWVnYSA9IGRlcihwLnRoZXRhKTsgLy8gZnJlcXVlbmN5IG9mIHNvdXJjZQogIHplcm9zKDMpID0gcC5pICsgbi5pOwogIFgqZGVyKHAuaSkgKyBvbWVnYSpZKnAuaSA9IHAudiAtIG4udjsKZW5kIEFDX0luZHVjdG9y">⬇</a></div>
<div id="lstnumberx2093" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">model</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">AC_Inductor</span>
</div>
<div id="lstnumberx2094" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">parameter</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">X</span>[3,3],<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Y</span>[3,3];<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>component<span class="ltx_text ltx_lst_space"> </span>constants</span>
</div>
<div id="lstnumberx2095" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">AC_Plug</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">p</span>;
</div>
<div id="lstnumberx2096" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">AC_Plug</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">n</span>;
</div>
<div id="lstnumberx2097" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">omega</span>;
</div>
<div id="lstnumberx2098" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx2099" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">Connections</span>.<span class="ltx_text ltx_lst_identifier">branch</span>(<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">theta</span>,<span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">theta</span>);<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//edge<span class="ltx_text ltx_lst_space"> </span>in<span class="ltx_text ltx_lst_space"> </span>virtual<span class="ltx_text ltx_lst_space"> </span>graph</span>
</div>
<div id="lstnumberx2100" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>since<span class="ltx_text ltx_lst_space"> </span>n.theta<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span>p.theta</span>
</div>
<div id="lstnumberx2101" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">theta</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">theta</span>;<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>pass<span class="ltx_text ltx_lst_space"> </span>angle<span class="ltx_text ltx_lst_space"> </span>theta<span class="ltx_text ltx_lst_space"> </span>between<span class="ltx_text ltx_lst_space"> </span>plugs</span>
</div>
<div id="lstnumberx2102" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">omega</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">der</span>(<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">theta</span>);<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>frequency<span class="ltx_text ltx_lst_space"> </span>of<span class="ltx_text ltx_lst_space"> </span>source</span>
</div>
<div id="lstnumberx2103" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">zeros</span>(3)<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span><span class="ltx_text ltx_lst_space"> </span>+<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">i</span>;
</div>
<div id="lstnumberx2104" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">X</span>*<span class="ltx_text ltx_lst_keyword" style="color:#003378;">der</span>(<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span>)<span class="ltx_text ltx_lst_space"> </span>+<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">omega</span>*<span class="ltx_text ltx_lst_identifier">Y</span>*<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">i</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">v</span><span class="ltx_text ltx_lst_space"> </span>-<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">n</span>.<span class="ltx_text ltx_lst_identifier">v</span>;
</div>
<div id="lstnumberx2105" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">AC_Inductor</span>
</div>
</div>
<p class="ltx_p"><span class="ltx_text ltx_font_italic">At the place where the source frequency, i.e., essentially
variable theta, is defined, a <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">Connections</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">root</span></span></span> must be present:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ICBBQ19QbHVnIHA7CmVxdWF0aW9uCiAgQ29ubmVjdGlvbnMucm9vdChwLnRoZXRhKTsKICBkZXIocC50aGV0YSkgPSAyKk1vZGVsaWNhLkNvbnN0YW50cy5waSo1MCAvLyA1MCBIejs=">⬇</a></div>
<div id="lstnumberx2106" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">AC_Plug</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">p</span>;
</div>
<div id="lstnumberx2107" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx2108" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">Connections</span>.<span class="ltx_text ltx_lst_identifier">root</span>(<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">theta</span>);
</div>
<div id="lstnumberx2109" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">der</span>(<span class="ltx_text ltx_lst_identifier">p</span>.<span class="ltx_text ltx_lst_identifier">theta</span>)<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span>2*<span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Constants</span>.<span class="ltx_text ltx_lst_identifier">pi</span>*50<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>50<span class="ltx_text ltx_lst_space"> </span>Hz;</span>
</div>
</div>
<p class="ltx_p"><span class="ltx_text ltx_font_italic">The graph analysis performed with the virtual connection graph
identifies the connectors, where the <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">AC_Angle</span> needs not to be
passed between components, in order to avoid redundant equations.</span>]</p>
</div>
</section>
<section id="an-overdetermined-connector-for-3-dimensional-mechanical-systems" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">9.4.3.2 </span>An Overdetermined Connector for 3-dimensional Mechanical Systems</h4>

<div id="S4.SS3.SSS2.p1" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">An overdetermined connector for 3-dimensional mechanical systems
may be defined as:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,dHlwZSBUcmFuc2Zvcm1hdGlvbk1hdHJpeCA9IFJlYWxbMywzXTsKdHlwZSBPcmllbnRhdGlvbiAiT3JpZW50YXRpb24gZnJvbSBmcmFtZSAxIHRvIGZyYW1lIDIiCiAgZXh0ZW5kcyBUcmFuc2Zvcm1hdGlvbk1hdHJpeDsKICBmdW5jdGlvbiBlcXVhbGl0eUNvbnN0cmFpbnQKICAgIGlucHV0IE9yaWVudGF0aW9uIFIxICJSb3RhdGlvbiBmcm9tIGluZXJ0aWFsIGZyYW1lIHRvIGZyYW1lIDEiOwogICAgaW5wdXQgT3JpZW50YXRpb24gUjIgIlJvdGF0aW9uIGZyb20gaW5lcnRpYWwgZnJhbWUgdG8gZnJhbWUgMiI7CiAgICBvdXRwdXQgUmVhbCByZXNpZHVlWzNdOwogICAgcHJvdGVjdGVkCiAgICBPcmllbnRhdGlvbiBSX3JlbCAiUmVsYXRpdmUgUm90YXRpb24gZnJvbSBmcmFtZSAxIHRvIGZyYW1lIDIiOwogIGFsZ29yaXRobQogICAgUl9yZWwgOj0gUjIqdHJhbnNwb3NlKFIxKTsKICAgIC8qCiAgICAgIElmIGZyYW1lXzEgYW5kIGZyYW1lXzIgYXJlIGlkZW50aWNhbCwgUl9yZWwgbXVzdCBiZQogICAgICB0aGUgdW5pdCBtYXRyaXguIElmIHRoZXkgYXJlIGNsb3NlIHRvZ2V0aGVyLCBSX3JlbCBjYW4gYmUKICAgICAgbGluZWFyaXplZCB5aWVsZGluZzoKICAgICAgICBSX3JlbCA9IFsgMSwgcGhpMywgLXBoaTI7CiAgICAgICAgLXBoaTMsIDEsIHBoaTE7CiAgICAgICAgcGhpMiwgLXBoaTEsIDEgXTsKICAgICAgd2hlcmUgcGhpMSwgcGhpMiwgcGhpMyBhcmUgdGhlIHNtYWxsIHJvdGF0aW9uIGFuZ2xlcyBhcm91bmQKICAgICAgYXhpcyB4LCB5LCB6IG9mIGZyYW1lIDEgdG8gcm90YXRlIGZyYW1lIDEgaW50byBmcmFtZSAyLgogICAgICBUaGUgYXRhbjIgaXMgdXNlZCB0byBoYW5kbGUgbGFyZ2Ugcm90YXRpb24gYW5nbGVzLCBidXQgZG9lcyBub3QKICAgICAgbW9kaWZ5IHRoZSByZXN1bHQgZm9yIHNtYWxsIGFuZ2xlcy4KICAgICovCiAgICByZXNpZHVlIDo9IHsgTW9kZWxpY2EuTWF0aC5hdGFuMihSX3JlbFsyLCAzXSwgUl9yZWxbMSwgMV0pLAogICAgTW9kZWxpY2EuTWF0aC5hdGFuMihSX3JlbFszLCAxXSwgUl9yZWxbMiwgMl0pLAogICAgTW9kZWxpY2EuTWF0aC5hdGFuMihSX3JlbFsxLCAyXSwgUl9yZWxbMywgM10pfTsKICBlbmQgZXF1YWxpdHlDb25zdHJhaW50OwplbmQgT3JpZW50YXRpb247Cgpjb25uZWN0b3IgRnJhbWUgIjMtZGltZW5zaW9uYWwgbWVjaGFuaWNhbCBjb25uZWN0b3IiCiAgaW1wb3J0IE1vZGVsaWNhLlVuaXRzLlNJOwogIFNJLlBvc2l0aW9uIHJbM10gIlZlY3RvciBmcm9tIGluZXJ0aWFsIGZyYW1lIHRvIEZyYW1lIjsKICBPcmllbnRhdGlvbiBSICJPcmllbnRhdGlvbiBmcm9tIGluZXJ0aWFsIGZyYW1lIHRvIEZyYW1lIjsKICBmbG93IFNJLkZvcmNlIGZbM10gIkN1dC1mb3JjZSByZXNvbHZlZCBpbiBGcmFtZSI7CiAgZmxvdyBTSS5Ub3JxdWUgdFszXSAiQ3V0LXRvcnF1ZSByZXNvbHZlZCBpbiBGcmFtZSI7CmVuZCBGcmFtZTs=">⬇</a></div>
<div id="lstnumberx2110" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">type</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">TransformationMatrix</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span>[3,3];
</div>
<div id="lstnumberx2111" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">type</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Orientation</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#000000;">"Orientation<span class="ltx_text ltx_lst_space"> </span>from<span class="ltx_text ltx_lst_space"> </span>frame<span class="ltx_text ltx_lst_space"> </span>1<span class="ltx_text ltx_lst_space"> </span>to<span class="ltx_text ltx_lst_space"> </span>frame<span class="ltx_text ltx_lst_space"> </span>2"</span>
</div>
<div id="lstnumberx2112" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">extends</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">TransformationMatrix</span>;
</div>
<div id="lstnumberx2113" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">function</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">equalityConstraint</span>
</div>
<div id="lstnumberx2114" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">input</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Orientation</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">R1</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#000000;">"Rotation<span class="ltx_text ltx_lst_space"> </span>from<span class="ltx_text ltx_lst_space"> </span>inertial<span class="ltx_text ltx_lst_space"> </span>frame<span class="ltx_text ltx_lst_space"> </span>to<span class="ltx_text ltx_lst_space"> </span>frame<span class="ltx_text ltx_lst_space"> </span>1"</span>;
</div>
<div id="lstnumberx2115" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">input</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Orientation</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">R2</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#000000;">"Rotation<span class="ltx_text ltx_lst_space"> </span>from<span class="ltx_text ltx_lst_space"> </span>inertial<span class="ltx_text ltx_lst_space"> </span>frame<span class="ltx_text ltx_lst_space"> </span>to<span class="ltx_text ltx_lst_space"> </span>frame<span class="ltx_text ltx_lst_space"> </span>2"</span>;
</div>
<div id="lstnumberx2116" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">output</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">residue</span>[3];
</div>
<div id="lstnumberx2117" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">protected</span>
</div>
<div id="lstnumberx2118" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_identifier">Orientation</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">R_rel</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#000000;">"Relative<span class="ltx_text ltx_lst_space"> </span>Rotation<span class="ltx_text ltx_lst_space"> </span>from<span class="ltx_text ltx_lst_space"> </span>frame<span class="ltx_text ltx_lst_space"> </span>1<span class="ltx_text ltx_lst_space"> </span>to<span class="ltx_text ltx_lst_space"> </span>frame<span class="ltx_text ltx_lst_space"> </span>2"</span>;
</div>
<div id="lstnumberx2119" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">algorithm</span>
</div>
<div id="lstnumberx2120" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_identifier">R_rel</span><span class="ltx_text ltx_lst_space"> </span>:=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">R2</span>*<span class="ltx_text ltx_lst_identifier">transpose</span>(<span class="ltx_text ltx_lst_identifier">R1</span>);
</div>
<div id="lstnumberx2121" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">/*</span>
</div>
<div id="lstnumberx2122" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;">      </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">If</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">frame_1</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">and</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">frame_2</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">are</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">identical,</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">R_rel</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">must</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">be</span>
</div>
<div id="lstnumberx2123" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;">      </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">the</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">unit</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">matrix.</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">If</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">they</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">are</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">close</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">together,</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">R_rel</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">can</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">be</span>
</div>
<div id="lstnumberx2124" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;">      </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">linearized</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">yielding:</span>
</div>
<div id="lstnumberx2125" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;">        </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">R_rel</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">=</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">[</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">1,</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">phi3,</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">-phi2;</span>
</div>
<div id="lstnumberx2126" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;">        </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">-phi3,</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">1,</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">phi1;</span>
</div>
<div id="lstnumberx2127" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;">        </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">phi2,</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">-phi1,</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">1</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">];</span>
</div>
<div id="lstnumberx2128" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;">      </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">where</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">phi1,</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">phi2,</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">phi3</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">are</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">the</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">small</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">rotation</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">angles</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">around</span>
</div>
<div id="lstnumberx2129" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;">      </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">axis</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">x,</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">y,</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">z</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">of</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">frame</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">1</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">to</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">rotate</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">frame</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">1</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">into</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">frame</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">2.</span>
</div>
<div id="lstnumberx2130" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;">      </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">The</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">atan2</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">is</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">used</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">to</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">handle</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">large</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">rotation</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">angles,</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">but</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">does</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">not</span>
</div>
<div id="lstnumberx2131" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;">      </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">modify</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">the</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">result</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">for</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">small</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;"> </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">angles.</span>
</div>
<div id="lstnumberx2132" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_sansserif" style="color:#127500;">    </span><span class="ltx_text ltx_font_sansserif" style="color:#127500;">*/</span>
</div>
<div id="lstnumberx2133" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_identifier">residue</span><span class="ltx_text ltx_lst_space"> </span>:=<span class="ltx_text ltx_lst_space"> </span>{<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Math</span>.<span class="ltx_text ltx_lst_identifier">atan2</span>(<span class="ltx_text ltx_lst_identifier">R_rel</span>[2,<span class="ltx_text ltx_lst_space"> </span>3],<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">R_rel</span>[1,<span class="ltx_text ltx_lst_space"> </span>1]),
</div>
<div id="lstnumberx2134" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Math</span>.<span class="ltx_text ltx_lst_identifier">atan2</span>(<span class="ltx_text ltx_lst_identifier">R_rel</span>[3,<span class="ltx_text ltx_lst_space"> </span>1],<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">R_rel</span>[2,<span class="ltx_text ltx_lst_space"> </span>2]),
</div>
<div id="lstnumberx2135" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Math</span>.<span class="ltx_text ltx_lst_identifier">atan2</span>(<span class="ltx_text ltx_lst_identifier">R_rel</span>[1,<span class="ltx_text ltx_lst_space"> </span>2],<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">R_rel</span>[3,<span class="ltx_text ltx_lst_space"> </span>3])};
</div>
<div id="lstnumberx2136" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">equalityConstraint</span>;
</div>
<div id="lstnumberx2137" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Orientation</span>;
</div>
<div id="lstnumberx2138" class="ltx_listingline">
</div>
<div id="lstnumberx2139" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">connector</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Frame</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#000000;">"3-dimensional<span class="ltx_text ltx_lst_space"> </span>mechanical<span class="ltx_text ltx_lst_space"> </span>connector"</span>
</div>
<div id="lstnumberx2140" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">import</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Units</span>.<span class="ltx_text ltx_lst_identifier">SI</span>;
</div>
<div id="lstnumberx2141" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">SI</span>.<span class="ltx_text ltx_lst_identifier">Position</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">r</span>[3]<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#000000;">"Vector<span class="ltx_text ltx_lst_space"> </span>from<span class="ltx_text ltx_lst_space"> </span>inertial<span class="ltx_text ltx_lst_space"> </span>frame<span class="ltx_text ltx_lst_space"> </span>to<span class="ltx_text ltx_lst_space"> </span>Frame"</span>;
</div>
<div id="lstnumberx2142" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">Orientation</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">R</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#000000;">"Orientation<span class="ltx_text ltx_lst_space"> </span>from<span class="ltx_text ltx_lst_space"> </span>inertial<span class="ltx_text ltx_lst_space"> </span>frame<span class="ltx_text ltx_lst_space"> </span>to<span class="ltx_text ltx_lst_space"> </span>Frame"</span>;
</div>
<div id="lstnumberx2143" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">flow</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">SI</span>.<span class="ltx_text ltx_lst_identifier">Force</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">f</span>[3]<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#000000;">"Cut-force<span class="ltx_text ltx_lst_space"> </span>resolved<span class="ltx_text ltx_lst_space"> </span>in<span class="ltx_text ltx_lst_space"> </span>Frame"</span>;
</div>
<div id="lstnumberx2144" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">flow</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">SI</span>.<span class="ltx_text ltx_lst_identifier">Torque</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">t</span>[3]<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#000000;">"Cut-torque<span class="ltx_text ltx_lst_space"> </span>resolved<span class="ltx_text ltx_lst_space"> </span>in<span class="ltx_text ltx_lst_space"> </span>Frame"</span>;
</div>
<div id="lstnumberx2145" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Frame</span>;
</div>
</div>
<p class="ltx_p"><span class="ltx_text ltx_font_italic">A fixed translation from a frame <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">A</span> to a frame <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">B</span> may be defined as:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,bW9kZWwgRml4ZWRUcmFuc2xhdGlvbgogIHBhcmFtZXRlciBNb2RlbGljYS5Vbml0cy5TSS5Qb3NpdGlvbiByWzNdOwogIEZyYW1lIGZyYW1lX2EsIGZyYW1lX2I7CmVxdWF0aW9uCiAgQ29ubmVjdGlvbnMuYnJhbmNoKGZyYW1lX2EuUiwgZnJhbWVfYi5SKTsKICBmcmFtZV9iLnIgPSBmcmFtZV9hLnIgKyB0cmFuc3Bvc2UoZnJhbWVfYS5SKSpyOwogIGZyYW1lX2IuUiA9IGZyYW1lX2EuUjsKICB6ZXJvcygzKSA9IGZyYW1lX2EuZiArIGZyYW1lX2IuZjsKICB6ZXJvcygzKSA9IGZyYW1lX2EudCArIGZyYW1lX2IudCArIGNyb3NzKHIsIGZyYW1lX2IuZik7CmVuZCBGaXhlZFRyYW5zbGF0aW9uOw==">⬇</a></div>
<div id="lstnumberx2146" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">model</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">FixedTranslation</span>
</div>
<div id="lstnumberx2147" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">parameter</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Modelica</span>.<span class="ltx_text ltx_lst_identifier">Units</span>.<span class="ltx_text ltx_lst_identifier">SI</span>.<span class="ltx_text ltx_lst_identifier">Position</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">r</span>[3];
</div>
<div id="lstnumberx2148" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">Frame</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">frame_a</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">frame_b</span>;
</div>
<div id="lstnumberx2149" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx2150" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">Connections</span>.<span class="ltx_text ltx_lst_identifier">branch</span>(<span class="ltx_text ltx_lst_identifier">frame_a</span>.<span class="ltx_text ltx_lst_identifier">R</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">frame_b</span>.<span class="ltx_text ltx_lst_identifier">R</span>);
</div>
<div id="lstnumberx2151" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">frame_b</span>.<span class="ltx_text ltx_lst_identifier">r</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">frame_a</span>.<span class="ltx_text ltx_lst_identifier">r</span><span class="ltx_text ltx_lst_space"> </span>+<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">transpose</span>(<span class="ltx_text ltx_lst_identifier">frame_a</span>.<span class="ltx_text ltx_lst_identifier">R</span>)*<span class="ltx_text ltx_lst_identifier">r</span>;
</div>
<div id="lstnumberx2152" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">frame_b</span>.<span class="ltx_text ltx_lst_identifier">R</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">frame_a</span>.<span class="ltx_text ltx_lst_identifier">R</span>;
</div>
<div id="lstnumberx2153" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">zeros</span>(3)<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">frame_a</span>.<span class="ltx_text ltx_lst_identifier">f</span><span class="ltx_text ltx_lst_space"> </span>+<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">frame_b</span>.<span class="ltx_text ltx_lst_identifier">f</span>;
</div>
<div id="lstnumberx2154" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">zeros</span>(3)<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">frame_a</span>.<span class="ltx_text ltx_lst_identifier">t</span><span class="ltx_text ltx_lst_space"> </span>+<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">frame_b</span>.<span class="ltx_text ltx_lst_identifier">t</span><span class="ltx_text ltx_lst_space"> </span>+<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">cross</span>(<span class="ltx_text ltx_lst_identifier">r</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">frame_b</span>.<span class="ltx_text ltx_lst_identifier">f</span>);
</div>
<div id="lstnumberx2155" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">FixedTranslation</span>;
</div>
</div>
<p class="ltx_p"><span class="ltx_text ltx_font_italic">Since the transformation matrix <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">frame_a</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">R</span></span></span> is algebraically
coupled with <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">frame_b</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">R</span></span></span>, an edge in the virtual connection graph
has to be defined. At the inertial system, the orientation is
consistently initialized and therefore the orientation in the inertial
system connector has to be defined as root:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,bW9kZWwgSW5lcnRpYWxTeXN0ZW0KICBGcmFtZSBmcmFtZV9iOwplcXVhdGlvbgogIENvbm5lY3Rpb25zLnJvb3QoZnJhbWVfYi5SKTsKICBmcmFtZV9iLnIgPSB6ZXJvcygzKTsKICBmcmFtZV9iLlIgPSBpZGVudGl0eSgzKTsKZW5kIEluZXJ0aWFsU3lzdGVtOw==">⬇</a></div>
<div id="lstnumberx2156" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">model</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">InertialSystem</span>
</div>
<div id="lstnumberx2157" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">Frame</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">frame_b</span>;
</div>
<div id="lstnumberx2158" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx2159" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">Connections</span>.<span class="ltx_text ltx_lst_identifier">root</span>(<span class="ltx_text ltx_lst_identifier">frame_b</span>.<span class="ltx_text ltx_lst_identifier">R</span>);
</div>
<div id="lstnumberx2160" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">frame_b</span>.<span class="ltx_text ltx_lst_identifier">r</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">zeros</span>(3);
</div>
<div id="lstnumberx2161" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">frame_b</span>.<span class="ltx_text ltx_lst_identifier">R</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">identity</span>(3);
</div>
<div id="lstnumberx2162" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">InertialSystem</span>;
</div>
</div>
<p class="ltx_p">]</p>
</div>
</section>
</section>
</section>
</section>
</div>
<footer class="ltx_page_footer">
<div>
<a href="equations.html" title="Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref" rel="prev"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8 </span>Equations</span></a><a href="bib.html" title="References ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref" rel="bibliography"><span class="ltx_text ltx_ref_title">References</span></a><a href="idx.html" title="Index ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref" rel="index"><span class="ltx_text ltx_ref_title">Index</span></a><a href="arrays.html" title="Chapter 10 Arrays ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref" rel="next"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">10 </span>Arrays</span></a>
</div>
<div class="ltx_page_logo">Generated  on Sat May  1 12:45:50 2021 by <a href="http://dlmf.nist.gov/LaTeXML/">LaTeXML <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg==" alt="[LOGO]"></a>
</div></footer>
</div>
</body>
</html>
