<!DOCTYPE html><html lang="en">
<head>
<title>8 Equations‣ Modelica® Language Specification version 3.6-dev</title>
<!--Generated on Sat May  1 12:45:50 2021 by LaTeXML (version 0.8.5) http://dlmf.nist.gov/LaTeXML/.-->
<!--Document created on May 1, 2021.-->

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="LaTeXML.css" type="text/css">
<link rel="stylesheet" href="ltx-report.css" type="text/css">
<link rel="stylesheet" href="ltx-listings.css" type="text/css">
<link rel="stylesheet" href="css/MLS.css" type="text/css">
<link rel="stylesheet" href="css/MLS-navbar-left.css" type="text/css">
<script src="LaTeXML-maybeMathjax.js" type="text/javascript"></script>
<link rel="up" href="MLS.html" title="Modelica® Language Specification version 3.6-dev">
<link rel="start" href="MLS.html" title="Modelica® Language Specification version 3.6-dev">
<link rel="prev" href="inheritance-modification-and-redeclaration.html" title="Chapter 7 Inheritance, Modification, and Redeclaration ‣ Modelica® Language Specification version 3.6-dev">
<link rel="next" href="connectors-and-connections.html" title="Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="preface.html" title="Preface ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="introduction1.html" title="Chapter 1 Introduction ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="lexical-structure.html" title="Chapter 2 Lexical Structure ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="operators-and-expressions.html" title="Chapter 3 Operators and Expressions ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="class-predefined-types-and-declarations.html" title="Chapter 4 Classes, Predefined Types, and Declarations ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="scoping-name-lookup-and-flattening.html" title="Chapter 5 Scoping, Name Lookup, and Flattening ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="interface-or-type-relationships.html" title="Chapter 6 Interface or Type Relationships ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="inheritance-modification-and-redeclaration.html" title="Chapter 7 Inheritance, Modification, and Redeclaration ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="connectors-and-connections.html" title="Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="arrays.html" title="Chapter 10 Arrays ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="statements-and-algorithm-sections.html" title="Chapter 11 Statements and Algorithm Sections ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="functions.html" title="Chapter 12 Functions ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="packages.html" title="Chapter 13 Packages ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="overloaded-operators.html" title="Chapter 14 Overloaded Operators ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="stream-connectors.html" title="Chapter 15 Stream Connectors ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="synchronous-language-elements.html" title="Chapter 16 Synchronous Language Elements ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="state-machines.html" title="Chapter 17 State Machines ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="annotations.html" title="Chapter 18 Annotations ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="unit-expressions.html" title="Chapter 19 Unit Expressions ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="the-modelica-standard-library.html" title="Chapter 20 The Modelica Standard Library ‣ Modelica® Language Specification version 3.6-dev">
<link rel="appendix" href="modelica-concrete-syntax.html" title="Appendix A Modelica Concrete Syntax ‣ Modelica® Language Specification version 3.6-dev">
<link rel="appendix" href="modelica-dae-representation.html" title="Appendix B Modelica DAE Representation ‣ Modelica® Language Specification version 3.6-dev">
<link rel="appendix" href="derivation-of-stream-equations.html" title="Appendix C Derivation of Stream Equations ‣ Modelica® Language Specification version 3.6-dev">
<link rel="appendix" href="modelica-revision-history.html" title="Appendix D Modelica Revision History ‣ Modelica® Language Specification version 3.6-dev">
<link rel="bibliography" href="bib.html" title="References ‣ Modelica® Language Specification version 3.6-dev">
<link rel="index" href="idx.html" title="Index ‣ Modelica® Language Specification version 3.6-dev">
<meta name="keywords" lang="en" content="assert, binding equation, declaration equation, else, elseif, elsewhen, equation, event, for, for-equation, if, if-equation, in, initial algorithm, initial equation, initialization problem, loop, modification equation, perfect matching rule, single assignment rule, terminate, then, when, when-equation">
</head>
<body>
<nav class="ltx_page_navbar"><a href="MLS.html" title="Modelica® Language Specification version 3.6-dev" class="ltx_ref" rel="start"><span class="ltx_text ltx_ref_title">Modelica<sup class="ltx_sup">®</sup> Language Specification version 3.6-dev</span></a>
<div class="ltx_TOC">
<ul class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="preface.html" title="Preface ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title">Preface</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="introduction1.html" title="Chapter 1 Introduction ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1 </span>Introduction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="lexical-structure.html" title="Chapter 2 Lexical Structure ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2 </span>Lexical Structure</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="operators-and-expressions.html" title="Chapter 3 Operators and Expressions ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3 </span>Operators and Expressions</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="class-predefined-types-and-declarations.html" title="Chapter 4 Classes, Predefined Types, and Declarations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4 </span>Classes, Predefined Types, and Declarations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="scoping-name-lookup-and-flattening.html" title="Chapter 5 Scoping, Name Lookup, and Flattening ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5 </span>Scoping, Name Lookup, and Flattening</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="interface-or-type-relationships.html" title="Chapter 6 Interface or Type Relationships ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">6 </span>Interface or Type Relationships</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="inheritance-modification-and-redeclaration.html" title="Chapter 7 Inheritance, Modification, and Redeclaration ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7 </span>Inheritance, Modification, and Redeclaration</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter ltx_ref_self">
<span class="ltx_ref ltx_ref_self"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8 </span>Equations</span></span>
<ul class="ltx_toclist ltx_toclist_chapter">
<li class="ltx_tocentry ltx_tocentry_section"><a href="#equation-categories" title="8.1 Equation Categories ‣ Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8.1 </span>Equation Categories</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a href="#flattening-and-lookup-in-equations" title="8.2 Flattening and Lookup in Equations ‣ Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8.2 </span>Flattening and Lookup in Equations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a href="#equations-in-equation-sections" title="8.3 Equations in Equation Sections ‣ Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8.3 </span>Equations in Equation Sections</span></a>
<ul class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#simple-equality-equations" title="8.3.1 Simple Equality Equations ‣ 8.3 Equations in Equation Sections ‣ Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8.3.1 </span>Simple Equality Equations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a href="#for-equations-repetitive-equation-structures" title="8.3.2 For-Equations – Repetitive Equation Structures ‣ 8.3 Equations in Equation Sections ‣ Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8.3.2 </span>For-Equations – Repetitive Equation Structures</span></a>
<ul class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a href="#explicit-iteration-ranges-of-for-equations" title="8.3.2.1 Explicit Iteration Ranges of For-Equations ‣ 8.3.2 For-Equations – Repetitive Equation Structures ‣ 8.3 Equations in Equation Sections ‣ Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8.3.2.1 </span>Explicit Iteration Ranges of For-Equations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a href="#implicit-iteration-ranges-of-for-equations" title="8.3.2.2 Implicit Iteration Ranges of For-Equations ‣ 8.3.2 For-Equations – Repetitive Equation Structures ‣ 8.3 Equations in Equation Sections ‣ Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8.3.2.2 </span>Implicit Iteration Ranges of For-Equations</span></a></li>
</ul>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#connect-equations" title="8.3.3 Connect-Equations ‣ 8.3 Equations in Equation Sections ‣ Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8.3.3 </span>Connect-Equations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#if-equations" title="8.3.4 If-Equations ‣ 8.3 Equations in Equation Sections ‣ Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8.3.4 </span>If-Equations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a href="#when-equations" title="8.3.5 When-Equations ‣ 8.3 Equations in Equation Sections ‣ Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8.3.5 </span>When-Equations</span></a>
<ul class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a href="#defining-when-equations-by-if-expressions-in-equality-equations" title="8.3.5.1 Defining When-Equations by If-Expressions in Equality Equations ‣ 8.3.5 When-Equations ‣ 8.3 Equations in Equation Sections ‣ Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8.3.5.1 </span>Defining When-Equations by If-Expressions in Equality Equations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a href="#restrictions-on-where-a-when-equation-may-occur" title="8.3.5.2 Restrictions on Where a When-Equation may Occur ‣ 8.3.5 When-Equations ‣ 8.3 Equations in Equation Sections ‣ Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8.3.5.2 </span>Restrictions on Where a When-Equation may Occur</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a href="#restrictions-on-equations-within-when-equations" title="8.3.5.3 Restrictions on Equations within When-Equations ‣ 8.3.5 When-Equations ‣ 8.3 Equations in Equation Sections ‣ Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8.3.5.3 </span>Restrictions on Equations within When-Equations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a href="#application-of-the-single-assignment-rule-to-when-equations" title="8.3.5.4 Application of the Single-assignment Rule to When-Equations ‣ 8.3.5 When-Equations ‣ 8.3 Equations in Equation Sections ‣ Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8.3.5.4 </span>Application of the Single-assignment Rule to When-Equations</span></a></li>
</ul>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#reinit" title="8.3.6 reinit ‣ 8.3 Equations in Equation Sections ‣ Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8.3.6 </span>reinit</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#assert" title="8.3.7 assert ‣ 8.3 Equations in Equation Sections ‣ Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8.3.7 </span>assert</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#terminate" title="8.3.8 terminate ‣ 8.3 Equations in Equation Sections ‣ Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8.3.8 </span>terminate</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#equation-operators-for-overconstrained-connection-based-equation-systems" title="8.3.9 Equation Operators for Overconstrained Connection-Based Equation Systems ‣ 8.3 Equations in Equation Sections ‣ Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8.3.9 </span>Equation Operators for Overconstrained Connection-Based Equation Systems</span></a></li>
</ul>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a href="#synchronous-data-flow-principle-and-single-assignment-rule" title="8.4 Synchronous Data-flow Principle and Single Assignment Rule ‣ Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8.4 </span>Synchronous Data-flow Principle and Single Assignment Rule</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a href="#events-and-synchronization" title="8.5 Events and Synchronization ‣ Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8.5 </span>Events and Synchronization</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a href="#initialization-initial-equation-and-initial-algorithm" title="8.6 Initialization, initial equation, and initial algorithm ‣ Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8.6 </span>Initialization, initial equation, and initial algorithm</span></a>
<ul class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#the-number-of-equations-needed-for-initialization" title="8.6.1 The Number of Equations Needed for Initialization ‣ 8.6 Initialization, initial equation, and initial algorithm ‣ Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8.6.1 </span>The Number of Equations Needed for Initialization</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#recommended-selection-of-start-values" title="8.6.2 Recommended selection of start-values ‣ 8.6 Initialization, initial equation, and initial algorithm ‣ Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8.6.2 </span>Recommended selection of start-values</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="connectors-and-connections.html" title="Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9 </span>Connectors and Connections</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="arrays.html" title="Chapter 10 Arrays ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">10 </span>Arrays</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="statements-and-algorithm-sections.html" title="Chapter 11 Statements and Algorithm Sections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">11 </span>Statements and Algorithm Sections</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="functions.html" title="Chapter 12 Functions ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">12 </span>Functions</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="packages.html" title="Chapter 13 Packages ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">13 </span>Packages</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="overloaded-operators.html" title="Chapter 14 Overloaded Operators ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">14 </span>Overloaded Operators</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="stream-connectors.html" title="Chapter 15 Stream Connectors ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">15 </span>Stream Connectors</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="synchronous-language-elements.html" title="Chapter 16 Synchronous Language Elements ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">16 </span>Synchronous Language Elements</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="state-machines.html" title="Chapter 17 State Machines ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">17 </span>State Machines</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="annotations.html" title="Chapter 18 Annotations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">18 </span>Annotations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="unit-expressions.html" title="Chapter 19 Unit Expressions ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">19 </span>Unit Expressions</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="the-modelica-standard-library.html" title="Chapter 20 The Modelica Standard Library ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">20 </span>The Modelica Standard Library</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="modelica-concrete-syntax.html" title="Appendix A Modelica Concrete Syntax ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A </span>Modelica Concrete Syntax</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="modelica-dae-representation.html" title="Appendix B Modelica DAE Representation ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">B </span>Modelica DAE Representation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="derivation-of-stream-equations.html" title="Appendix C Derivation of Stream Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C </span>Derivation of Stream Equations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="modelica-revision-history.html" title="Appendix D Modelica Revision History ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">D </span>Modelica Revision History</span></a></li>
<li class="ltx_tocentry ltx_tocentry_bibliography"><a href="bib.html" title="References ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title">References</span></a></li>
<li class="ltx_tocentry ltx_tocentry_index"><a href="idx.html" title="Index ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title">Index</span></a></li>
</ul>
</div>
</nav>
<div class="ltx_page_main">
<header class="ltx_page_header">
<div>
<a href="MLS.html" title="Modelica® Language Specification version 3.6-dev" class="ltx_ref" rel="up"><span class="ltx_text ltx_ref_title">Modelica<sup class="ltx_sup">®</sup> Language Specification version 3.6-dev</span></a><a href="inheritance-modification-and-redeclaration.html" title="Chapter 7 Inheritance, Modification, and Redeclaration ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref" rel="prev"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7 </span>Inheritance, Modification, and Redeclaration</span></a><a href="connectors-and-connections.html" title="Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref" rel="next"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9 </span>Connectors and Connections</span></a>
</div></header>
<div class="ltx_page_content">
<section class="ltx_chapter" lang="en">
<h1 class="ltx_title ltx_title_chapter">
<span class="ltx_tag ltx_tag_chapter">Chapter 8 </span>Equations</h1>
<div class="ltx_dates">(May 1, 2021)</div>

<div id="p1" class="ltx_para">
<p class="ltx_p">An <em class="ltx_emph ltx_font_italic">equation</em> is part of a class definition.
A scalar equation relates scalar variables, i.e., constrains the values that these variables can take simultaneously.
When <math id="p1.m1" class="ltx_Math" alttext="n" display="inline"><mi>n</mi></math>-1 variables of an equation containing <math id="p1.m2" class="ltx_Math" alttext="n" display="inline"><mi>n</mi></math> variables are known, the value of the <math id="p1.m3" class="ltx_Math" alttext="n" display="inline"><mi>n</mi></math>th variable can be inferred (solved for).
In contrast to an algorithm section, there is no order between the equations in an equation section and they can be solved separately.</p>
</div>
<section id="equation-categories" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">8.1 </span>Equation Categories</h2>

<div id="S1.p1" class="ltx_para">
<p class="ltx_p">Equations in Modelica can be classified into different categories depending on the syntactic context in which they occur:</p>
<ul id="S1.I1" class="ltx_itemize">
<li id="S1.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i1.p1" class="ltx_para">
<p class="ltx_p">Normal equality equations occurring in equation sections, including connect-equations and other equation types of special syntactic form (<a href="#equations-in-equation-sections" title="8.3 Equations in Equation Sections ‣ Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">8.3</span></a>).</p>
</div>
</li>
<li id="S1.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i2.p1" class="ltx_para">
<p class="ltx_p">Declaration equations, which are part of variable, parameter, or constant declarations (<a href="class-predefined-types-and-declarations.html#declaration-equations" title="4.4.2.1 Declaration Equations ‣ 4.4.2 Component Declaration Static Semantics ‣ 4.4 Component Declarations ‣ Chapter 4 Classes, Predefined Types, and Declarations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">4.4.2.1</span></a>).</p>
</div>
</li>
<li id="S1.I1.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i3.p1" class="ltx_para">
<p class="ltx_p">Modification equations, which are commonly used to modify attributes of classes (<a href="inheritance-modification-and-redeclaration.html#modifications" title="7.2 Modifications ‣ Chapter 7 Inheritance, Modification, and Redeclaration ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">7.2</span></a>).</p>
</div>
</li>
<li id="S1.I1.i4" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i4.p1" class="ltx_para">
<p class="ltx_p"><em class="ltx_emph ltx_font_italic">Binding equations</em>, which include both declaration equations and element modification for the value of the variable itself.
These are considered equations when appearing outside functions, and then a component with a binding equation has its value bound to some expression.
(Binding equations can also appear in functions, see <a href="functions.html#initialization-and-binding-equations-of-components-in-functions" title="12.4.4 Initialization and Binding Equations of Components in Functions ‣ 12.4 Function Call ‣ Chapter 12 Functions ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">12.4.4</span></a>.)</p>
</div>
</li>
<li id="S1.I1.i5" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i5.p1" class="ltx_para">
<p class="ltx_p"><em class="ltx_emph ltx_font_italic">Initial equations</em>, which are used to express equations for solving initialization problems (<a href="#initialization-initial-equation-and-initial-algorithm" title="8.6 Initialization, initial equation, and initial algorithm ‣ Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">8.6</span></a>).</p>
</div>
</li>
</ul>
</div>
</section>
<section id="flattening-and-lookup-in-equations" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">8.2 </span>Flattening and Lookup in Equations</h2>

<div id="S2.p1" class="ltx_para">
<p class="ltx_p">A flattened equation is identical to the corresponding nonflattened
equation.</p>
</div>
<div id="S2.p2" class="ltx_para">
<p class="ltx_p">Names in an equation shall be found by looking up in the partially
flattened enclosing class of the equation.</p>
</div>
</section>
<section id="equations-in-equation-sections" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">8.3 </span>Equations in Equation Sections</h2>

<div id="S3.p1" class="ltx_para">
<p class="ltx_p">An equation section is comprised of the keyword <span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_bold" style="color:#003378;background-color:#FFFFFF;">equation</span> followed by a sequence of equations.
The formal syntax is as follows:</p>
<div class="ltx_listing ltx_lst_language_grammar ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ZXF1YXRpb24tc2VjdGlvbiA6CiAgIFsgaW5pdGlhbCBdIGVxdWF0aW9uIHsgZXF1YXRpb24gIjsiIH0=">⬇</a></div>
<div id="lstnumberx1530" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier ltx_font_italic">equation-section</span><span class="ltx_text ltx_lst_space"> </span>:
</div>
<div id="lstnumberx1531" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">   </span>[<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">initial</span><span class="ltx_text ltx_lst_space"> </span>]<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span><span class="ltx_text ltx_lst_space"> </span>{<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#003378;">";"</span><span class="ltx_text ltx_lst_space"> </span>}
</div>
</div>
</div>
<div id="S3.p2" class="ltx_para">
<p class="ltx_p">The following kinds of equations may occur in equation sections. The
syntax is defined as follows:</p>
<div class="ltx_listing ltx_lst_language_grammar ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ZXF1YXRpb24gOgooIHNpbXBsZS1leHByZXNzaW9uICI9IiBleHByZXNzaW9uCiAgIHwgaWYtZXF1YXRpb24KICAgfCBmb3ItZXF1YXRpb24KICAgfCBjb25uZWN0LWNsYXVzZQogICB8IHdoZW4tZXF1YXRpb24KICAgfCBjb21wb25lbnQtcmVmZXJlbmNlIGZ1bmN0aW9uLWNhbGwtYXJncyApCiAgIGNvbW1lbnQ=">⬇</a></div>
<div id="lstnumberx1532" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span><span class="ltx_text ltx_lst_space"> </span>:
</div>
<div id="lstnumberx1533" class="ltx_listingline">(<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier ltx_font_italic">simple-expression</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#003378;">"="</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier ltx_font_italic">expression</span>
</div>
<div id="lstnumberx1534" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">   </span>|<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier ltx_font_italic">if-equation</span>
</div>
<div id="lstnumberx1535" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">   </span>|<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier ltx_font_italic">for-equation</span>
</div>
<div id="lstnumberx1536" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">   </span>|<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier ltx_font_italic">connect-clause</span>
</div>
<div id="lstnumberx1537" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">   </span>|<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier ltx_font_italic">when-equation</span>
</div>
<div id="lstnumberx1538" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">   </span>|<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier ltx_font_italic">component-reference</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier ltx_font_italic">function-call-args</span><span class="ltx_text ltx_lst_space"> </span>)
</div>
<div id="lstnumberx1539" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">   </span><span class="ltx_text ltx_lst_identifier ltx_font_italic">comment</span>
</div>
</div>
<p class="ltx_p">No statements are allowed in equation sections, including the assignment
statement using the := operator.</p>
</div>
<section id="simple-equality-equations" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">8.3.1 </span>Simple Equality Equations</h3>

<div id="S3.SS1.p1" class="ltx_para">
<p class="ltx_p">Simple equality equations are the traditional kinds of equations known
from mathematics that express an equality relation between two
expressions. There are two syntactic forms of such equations in
Modelica. The first form below is <em class="ltx_emph ltx_font_italic">equality</em> equations between two
expressions, whereas the second form is used when calling a function
with <em class="ltx_emph ltx_font_italic">several</em> results. The syntax for simple equality equations is
as follows:</p>
<div class="ltx_listing ltx_lst_language_grammar ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,c2ltcGxlLWV4cHJlc3Npb24gIj0iIGV4cHJlc3Npb24=">⬇</a></div>
<div id="lstnumberx1540" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier ltx_font_italic">simple-expression</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#003378;">"="</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier ltx_font_italic">expression</span>
</div>
</div>
<p class="ltx_p">The types of the left-hand-side and the right-hand-side of an equation
need to be compatible in the same way as two arguments of binary
operators (<a href="interface-or-type-relationships.html#type-compatible-expressions" title="6.7 Type Compatible Expressions ‣ Chapter 6 Interface or Type Relationships ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">6.7</span></a>).</p>
</div>
<div id="S3.SS1.p2" class="ltx_para">
<p class="ltx_p">Three examples:</p>
<ul id="S3.I1" class="ltx_itemize">
<li id="S3.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I1.i1.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">simple_expr1</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">expr2</span>;</span></p>
</div>
</li>
<li id="S3.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I1.i2.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">(<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">pred</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">alt1</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">alt2</span>)<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">expr2</span>;</span></p>
</div>
</li>
<li id="S3.I1.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I1.i3.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">(<span class="ltx_text ltx_lst_identifier">out1</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">out2</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">out3</span>)<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">function_name</span>(<span class="ltx_text ltx_lst_identifier">inexpr1</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">inexpr2</span>);</span></p>
</div>
</li>
</ul>
</div>
<div id="S3.SS1.p3" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Note: According to the grammar the if-then-else expression in
the second example needs to be enclosed in parentheses to avoid parsing
ambiguities. Also compare with <a href="statements-and-algorithm-sections.html#assignments-from-called-functions-with-multiple-results" title="11.2.1.1 Assignments from Called Functions with Multiple Results ‣ 11.2.1 Simple Assignment Statements ‣ 11.2 Statements ‣ Chapter 11 Statements and Algorithm Sections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">11.2.1.1</span></a> about calling
functions with several results in assignment statements.</span>]</p>
</div>
</section>
<section id="for-equations-repetitive-equation-structures" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">8.3.2 </span>For-Equations – Repetitive Equation Structures</h3>

<div id="S3.SS2.p1" class="ltx_para">
<p class="ltx_p">The syntax of a for-equation is as follows:</p>
<div class="ltx_listing ltx_lst_language_grammar ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,Zm9yIGZvci1pbmRpY2VzIGxvb3AKICAgeyBlcXVhdGlvbiAiOyIgfQogICBlbmQgZm9yICI7Ig==">⬇</a></div>
<div id="lstnumberx1541" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">for</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier ltx_font_italic">for-indices</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">loop</span>
</div>
<div id="lstnumberx1542" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">   </span>{<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#003378;">";"</span><span class="ltx_text ltx_lst_space"> </span>}
</div>
<div id="lstnumberx1543" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">   </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">for</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#003378;">";"</span>
</div>
</div>
</div>
<div id="S3.SS2.p2" class="ltx_para">
<p class="ltx_p">For-equations may optionally use several iterators (for-indices), see <a href="statements-and-algorithm-sections.html#nested-for-loops-and-reduction-expressions-with-multiple-iterators" title="11.2.2.3 Nested For-Loops and Reduction Expressions with Multiple Iterators ‣ 11.2.2 For-statement ‣ 11.2 Statements ‣ Chapter 11 Statements and Algorithm Sections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">11.2.2.3</span></a> for more information:</p>
<div class="ltx_listing ltx_lst_language_grammar ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,Zm9yLWluZGljZXM6CiAgIGZvci1pbmRleCB7IiwiIGZvci1pbmRleH0KCmZvci1pbmRleDoKICAgSURFTlQgWyBpbiBleHByZXNzaW9uIF0=">⬇</a></div>
<div id="lstnumberx1544" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier ltx_font_italic">for-indices</span>:
</div>
<div id="lstnumberx1545" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">   </span><span class="ltx_text ltx_lst_identifier ltx_font_italic">for-index</span><span class="ltx_text ltx_lst_space"> </span>{<span class="ltx_text ltx_lst_string" style="color:#003378;">","</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier ltx_font_italic">for-index</span>}
</div>
<div id="lstnumberx1546" class="ltx_listingline">
</div>
<div id="lstnumberx1547" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier ltx_font_italic">for-index</span>:
</div>
<div id="lstnumberx1548" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">   </span><span class="ltx_text ltx_lst_identifier ltx_font_italic">IDENT</span><span class="ltx_text ltx_lst_space"> </span>[<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">in</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier ltx_font_italic">expression</span><span class="ltx_text ltx_lst_space"> </span>]
</div>
</div>
</div>
<div id="S3.SS2.p3" class="ltx_para">
<p class="ltx_p">The following is one example of a prefix of a for-equation:</p>
<div class="ltx_listing ltx_lst_language_grammar ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,Zm9yIElERU5UIGluIGV4cHJlc3Npb24gbG9vcA==">⬇</a></div>
<div id="lstnumberx1549" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">for</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier ltx_font_italic">IDENT</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">in</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier ltx_font_italic">expression</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">loop</span>
</div>
</div>
</div>
<section id="explicit-iteration-ranges-of-for-equations" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">8.3.2.1 </span>Explicit Iteration Ranges of For-Equations</h4>

<div id="S3.SS2.SSS1.p1" class="ltx_para">
<p class="ltx_p">The <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">expression</span> of a for-equation shall be a vector expression, where more general array expressions are treated as vector of vectors or vector of matrices. It is evaluated once for each for-equation, and is evaluated in the scope immediately enclosing the for-equation. The expression of a for-equation shall be a parameter expression. The iteration range of a for-equation can also be specified as <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">Boolean</span> or as an enumeration type, see <a href="statements-and-algorithm-sections.html#types-as-iteration-ranges" title="11.2.2.2 Types as Iteration Ranges ‣ 11.2.2 For-statement ‣ 11.2 Statements ‣ Chapter 11 Statements and Algorithm Sections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">11.2.2.2</span></a> for more information. The loop-variable (<span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">IDENT</span>) is in scope inside the loop-construct and shall not be assigned to. For each element of the evaluated vector expression, in the normal order, the loop-variable gets the value of that element and that is used to evaluate the body of the for-loop.</p>
</div>
<div id="S3.SS2.SSS1.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Example:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,Zm9yIGkgaW4gMSA6IDEwIGxvb3AgICAgICAgICAgIC8vIGkgdGFrZXMgdGhlIHZhbHVlcyAxLCAyLCAzLCAkXGxkb3RzJCwgMTAKZm9yIHIgaW4gMS4wIDogMS41IDogNS41IGxvb3AgIC8vIHIgdGFrZXMgdGhlIHZhbHVlcyAxLjAsIDIuNSwgNC4wLCA1LjUKZm9yIGkgaW4gezEsIDMsIDYsIDd9IGxvb3AgICAgIC8vIGkgdGFrZXMgdGhlIHZhbHVlcyAxLCAzLCA2LCA3CmZvciBpIGluIFR3b0VudW1zIGxvb3AgICAgICAgICAvLyBpIHRha2VzIHRoZSB2YWx1ZXMgVHdvRW51bXMub25lLCBUd29FbnVtcy50d28KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvciBUd29FbnVtcyA9IGVudW1lcmF0aW9uKG9uZSx0d28p">⬇</a></div>
<div id="lstnumberx1550" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">for</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">i</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">in</span><span class="ltx_text ltx_lst_space"> </span>1<span class="ltx_text ltx_lst_space"> </span>:<span class="ltx_text ltx_lst_space"> </span>10<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">loop</span><span class="ltx_text ltx_lst_space">           </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>i<span class="ltx_text ltx_lst_space"> </span>takes<span class="ltx_text ltx_lst_space"> </span>the<span class="ltx_text ltx_lst_space"> </span>values<span class="ltx_text ltx_lst_space"> </span>1,<span class="ltx_text ltx_lst_space"> </span>2,<span class="ltx_text ltx_lst_space"> </span>3,<span class="ltx_text ltx_lst_space"> </span><math id="lstnumberx1550.m1" class="ltx_Math" alttext="\ldots" display="inline"><mi mathbackground="#FFFFFF" mathcolor="#127500" mathvariant="normal">…</mi></math>,<span class="ltx_text ltx_lst_space"> </span>10</span>
</div>
<div id="lstnumberx1551" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">for</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">r</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">in</span><span class="ltx_text ltx_lst_space"> </span>1.0<span class="ltx_text ltx_lst_space"> </span>:<span class="ltx_text ltx_lst_space"> </span>1.5<span class="ltx_text ltx_lst_space"> </span>:<span class="ltx_text ltx_lst_space"> </span>5.5<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">loop</span><span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>r<span class="ltx_text ltx_lst_space"> </span>takes<span class="ltx_text ltx_lst_space"> </span>the<span class="ltx_text ltx_lst_space"> </span>values<span class="ltx_text ltx_lst_space"> </span>1.0,<span class="ltx_text ltx_lst_space"> </span>2.5,<span class="ltx_text ltx_lst_space"> </span>4.0,<span class="ltx_text ltx_lst_space"> </span>5.5</span>
</div>
<div id="lstnumberx1552" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">for</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">i</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">in</span><span class="ltx_text ltx_lst_space"> </span>{1,<span class="ltx_text ltx_lst_space"> </span>3,<span class="ltx_text ltx_lst_space"> </span>6,<span class="ltx_text ltx_lst_space"> </span>7}<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">loop</span><span class="ltx_text ltx_lst_space">     </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>i<span class="ltx_text ltx_lst_space"> </span>takes<span class="ltx_text ltx_lst_space"> </span>the<span class="ltx_text ltx_lst_space"> </span>values<span class="ltx_text ltx_lst_space"> </span>1,<span class="ltx_text ltx_lst_space"> </span>3,<span class="ltx_text ltx_lst_space"> </span>6,<span class="ltx_text ltx_lst_space"> </span>7</span>
</div>
<div id="lstnumberx1553" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">for</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">i</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">in</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">TwoEnums</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">loop</span><span class="ltx_text ltx_lst_space">         </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>i<span class="ltx_text ltx_lst_space"> </span>takes<span class="ltx_text ltx_lst_space"> </span>the<span class="ltx_text ltx_lst_space"> </span>values<span class="ltx_text ltx_lst_space"> </span>TwoEnums.one,<span class="ltx_text ltx_lst_space"> </span>TwoEnums.two</span>
</div>
<div id="lstnumberx1554" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">                               </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>for<span class="ltx_text ltx_lst_space"> </span>TwoEnums<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span>enumeration(one,two)</span>
</div>
</div>
</div>
<div id="S3.SS2.SSS1.p3" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">The loop-variable may hide other variables as in the following example. Using another name for the loop-variable is, however, strongly recommended.</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ICBjb25zdGFudCBJbnRlZ2VyIGogPSA0OwogIFJlYWwgeFtqXQplcXVhdGlvbgogIGZvciBqIGluIDE6aiBsb29wICAvLyBUaGUgbG9vcC12YXJpYWJsZSBqIHRha2VzIHRoZSB2YWx1ZXMgMSwyLDMsNAogICAgeFtqXSA9IGo7ICAgICAgICAvLyBVc2VzIHRoZSBsb29wLXZhcmlhYmxlIGoKICBlbmQgZm9yOw==">⬇</a></div>
<div id="lstnumberx1555" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">constant</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">j</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span>4;
</div>
<div id="lstnumberx1556" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">x</span>[<span class="ltx_text ltx_lst_identifier">j</span>]
</div>
<div id="lstnumberx1557" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx1558" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">for</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">j</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">in</span><span class="ltx_text ltx_lst_space"> </span>1:<span class="ltx_text ltx_lst_identifier">j</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">loop</span><span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>The<span class="ltx_text ltx_lst_space"> </span>loop-variable<span class="ltx_text ltx_lst_space"> </span>j<span class="ltx_text ltx_lst_space"> </span>takes<span class="ltx_text ltx_lst_space"> </span>the<span class="ltx_text ltx_lst_space"> </span>values<span class="ltx_text ltx_lst_space"> </span>1,2,3,4</span>
</div>
<div id="lstnumberx1559" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_identifier">x</span>[<span class="ltx_text ltx_lst_identifier">j</span>]<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">j</span>;<span class="ltx_text ltx_lst_space">        </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>Uses<span class="ltx_text ltx_lst_space"> </span>the<span class="ltx_text ltx_lst_space"> </span>loop-variable<span class="ltx_text ltx_lst_space"> </span>j</span>
</div>
<div id="lstnumberx1560" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">for</span>;
</div>
</div>
<p class="ltx_p">]</p>
</div>
</section>
<section id="implicit-iteration-ranges-of-for-equations" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">8.3.2.2 </span>Implicit Iteration Ranges of For-Equations</h4>

<div id="S3.SS2.SSS2.p1" class="ltx_para">
<p class="ltx_p">The iteration range of a loop-variable may sometimes be inferred from its use as an array index. See <a href="statements-and-algorithm-sections.html#implicit-iteration-ranges" title="11.2.2.1 Implicit Iteration Ranges ‣ 11.2.2 For-statement ‣ 11.2 Statements ‣ Chapter 11 Statements and Algorithm Sections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">11.2.2.1</span></a> for more information.</p>
</div>
<div id="S3.SS2.SSS2.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Example:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ICBSZWFsIHhbbl0seVtuXTsKZm9yIGkgbG9vcCAgICAgICAgICAvLyBTYW1lIGFzOiAgZm9yIGkgaW4gMTpzaXplKHggLDEpIGxvb3AKICB4W2ldID0gMip5W2ldOwplbmQgZm9yOw==">⬇</a></div>
<div id="lstnumberx1561" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">x</span>[<span class="ltx_text ltx_lst_identifier">n</span>],<span class="ltx_text ltx_lst_identifier">y</span>[<span class="ltx_text ltx_lst_identifier">n</span>];
</div>
<div id="lstnumberx1562" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">for</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">i</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">loop</span><span class="ltx_text ltx_lst_space">          </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>Same<span class="ltx_text ltx_lst_space"> </span>as:<span class="ltx_text ltx_lst_space">  </span>for<span class="ltx_text ltx_lst_space"> </span>i<span class="ltx_text ltx_lst_space"> </span>in<span class="ltx_text ltx_lst_space"> </span>1:size(x<span class="ltx_text ltx_lst_space"> </span>,1)<span class="ltx_text ltx_lst_space"> </span>loop</span>
</div>
<div id="lstnumberx1563" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">x</span>[<span class="ltx_text ltx_lst_identifier">i</span>]<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span>2*<span class="ltx_text ltx_lst_identifier">y</span>[<span class="ltx_text ltx_lst_identifier">i</span>];
</div>
<div id="lstnumberx1564" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">for</span>;
</div>
</div>
<p class="ltx_p">]</p>
</div>
</section>
</section>
<section id="connect-equations" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">8.3.3 </span>Connect-Equations</h3>

<div id="S3.SS3.p1" class="ltx_para">
<p class="ltx_p">A connect-equation has the following syntax:</p>
<div class="ltx_listing ltx_lst_language_grammar ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,Y29ubmVjdCAiKCIgY29tcG9uZW50LXJlZmVyZW5jZSAiLCIgY29tcG9uZW50LXJlZmVyZW5jZSAiKSIgIjsi">⬇</a></div>
<div id="lstnumberx1565" class="ltx_listingline">
<span class="ltx_text ltx_lst_keyword" style="color:#003378;">connect</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#003378;">"("</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier ltx_font_italic">component-reference</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#003378;">","</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier ltx_font_italic">component-reference</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#003378;">")"</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#003378;">";"</span>
</div>
</div>
</div>
<div id="S3.SS3.p2" class="ltx_para">
<p class="ltx_p">These can be placed inside for-equations and if-equations; provided the indices of the for-loop and conditions of the if-clause are parameter expressions that do not depend on <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">cardinality</span>, <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">rooted</span>, <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">Connections</span>.<span class="ltx_text ltx_lst_identifier">rooted</span></span>, or <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">Connections</span>.<span class="ltx_text ltx_lst_identifier">isRoot</span></span>. The for-equations/if-equations are expanded. Connect-equations are described in detail in <a href="connectors-and-connections.html#connect-equations-and-connectors" title="9.1 Connect-Equations and Connectors ‣ Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">9.1</span></a>.</p>
</div>
<div id="S3.SS3.p3" class="ltx_para">
<p class="ltx_p">The same restrictions apply to <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">Connections</span>.<span class="ltx_text ltx_lst_identifier">branch</span></span>, <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">Connections</span>.<span class="ltx_text ltx_lst_identifier">root</span></span>, and <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">Connections</span>.<span class="ltx_text ltx_lst_identifier">potentialRoot</span></span>; which after expansion are handled according to <a href="connectors-and-connections.html#equation-operators-for-overconstrained-connection-based-equation-systems1" title="9.4 Equation Operators for Overconstrained Connection-Based Equation Systems ‣ Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">9.4</span></a>.</p>
</div>
</section>
<section id="if-equations" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">8.3.4 </span>If-Equations</h3>

<div id="S3.SS4.p1" class="ltx_para">
<p class="ltx_p">If-equations have the following syntax:</p>
<div class="ltx_listing ltx_lst_language_grammar ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,aWYgZXhwcmVzc2lvbiB0aGVuCiAgIHsgZXF1YXRpb24gIjsiIH0KeyBlbHNlaWYgZXhwcmVzc2lvbiB0aGVuCiAgIHsgZXF1YXRpb24gIjsiIH0gICAgfQpbIGVsc2UKICAgeyBlcXVhdGlvbiAiOyIgfQpdCmVuZCBpZiAiOyI=">⬇</a></div>
<div id="lstnumberx1566" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier ltx_font_italic">expression</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx1567" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">   </span>{<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#003378;">";"</span><span class="ltx_text ltx_lst_space"> </span>}
</div>
<div id="lstnumberx1568" class="ltx_listingline">{<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">elseif</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier ltx_font_italic">expression</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx1569" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">   </span>{<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#003378;">";"</span><span class="ltx_text ltx_lst_space"> </span>}<span class="ltx_text ltx_lst_space">    </span>}
</div>
<div id="lstnumberx1570" class="ltx_listingline">[<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">else</span>
</div>
<div id="lstnumberx1571" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">   </span>{<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#003378;">";"</span><span class="ltx_text ltx_lst_space"> </span>}
</div>
<div id="lstnumberx1572" class="ltx_listingline">]
</div>
<div id="lstnumberx1573" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#003378;">";"</span>
</div>
</div>
</div>
<div id="S3.SS4.p2" class="ltx_para">
<p class="ltx_p">The <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">expression</span> of an if- or elseif-clause must be a scalar <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">Boolean</span> expression. One if-clause, and zero or more elseif-clauses, and an optional else-clause together form a list of branches. One or zero of the bodies of these if-, elseif- and else-clauses is selected, by evaluating the conditions of the if- and elseif-clauses sequentially until a condition that evaluates to true is found. If none of the conditions evaluate to true the body of the else-clause is selected (if an else-clause exists, otherwise no body is selected). In an equation section, the equations in the body are seen as equations that must be satisfied. The bodies that are not selected have no effect on that model evaluation.</p>
</div>
<div id="S3.SS4.p3" class="ltx_para">
<p class="ltx_p">If-equations in equation sections which do not have exclusively
parameter expressions as switching conditions shall have the same number
of equations in each branch (a missing else is counted as zero equations
and the number of equations is defined after expanding the equations to
scalar equations).</p>
</div>
<div id="S3.SS4.p4" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">If this condition is violated, the single assignment rule would not hold, because the number of equations may change during simulation
although the number of unknowns remains the same.</span>]</p>
</div>
</section>
<section id="when-equations" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">8.3.5 </span>When-Equations</h3>

<div id="S3.SS5.p1" class="ltx_para">
<p class="ltx_p">When-equations have the following syntax:</p>
<div class="ltx_listing ltx_lst_language_grammar ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,d2hlbiBleHByZXNzaW9uIHRoZW4KICAgeyBlcXVhdGlvbiAiOyIgfQp7IGVsc2V3aGVuIGV4cHJlc3Npb24gdGhlbgogICB7IGVxdWF0aW9uICI7IiB9IH0KZW5kIHdoZW4gIjsi">⬇</a></div>
<div id="lstnumberx1574" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier ltx_font_italic">expression</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx1575" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">   </span>{<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#003378;">";"</span><span class="ltx_text ltx_lst_space"> </span>}
</div>
<div id="lstnumberx1576" class="ltx_listingline">{<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">elsewhen</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier ltx_font_italic">expression</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx1577" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">   </span>{<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#003378;">";"</span><span class="ltx_text ltx_lst_space"> </span>}<span class="ltx_text ltx_lst_space"> </span>}
</div>
<div id="lstnumberx1578" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#003378;">";"</span>
</div>
</div>
</div>
<div id="S3.SS5.p2" class="ltx_para">
<p class="ltx_p">The <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">expression</span> of a when-equation shall be a discrete-time <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">Boolean</span> scalar or vector expression.
The equations within a when-equation are activated only at the instant when the scalar expression or any of the elements of the vector expression becomes true.</p>
</div>
<div id="S3.SS5.p3" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Example:
The order between the equations in a when-equation does not matter, e.g.</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ZXF1YXRpb24KICB3aGVuIHggPiAyIHRoZW4KICAgIHkzID0gMip4ICt5MSt5MjsgLy8gT3JkZXIgb2YgeTEgYW5kIHkzIGVxdWF0aW9ucyBkb2VzIG5vdCBtYXR0ZXIKICAgIHkxID0gc2luKHgpOwogIGVuZCB3aGVuOwogIHkyID0gc2luKHkxKTs=">⬇</a></div>
<div id="lstnumberx1579" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx1580" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">x</span><span class="ltx_text ltx_lst_space"> </span>&gt;<span class="ltx_text ltx_lst_space"> </span>2<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx1581" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_identifier">y3</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span>2*<span class="ltx_text ltx_lst_identifier">x</span><span class="ltx_text ltx_lst_space"> </span>+<span class="ltx_text ltx_lst_identifier">y1</span>+<span class="ltx_text ltx_lst_identifier">y2</span>;<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>Order<span class="ltx_text ltx_lst_space"> </span>of<span class="ltx_text ltx_lst_space"> </span>y1<span class="ltx_text ltx_lst_space"> </span>and<span class="ltx_text ltx_lst_space"> </span>y3<span class="ltx_text ltx_lst_space"> </span>equations<span class="ltx_text ltx_lst_space"> </span>does<span class="ltx_text ltx_lst_space"> </span>not<span class="ltx_text ltx_lst_space"> </span>matter</span>
</div>
<div id="lstnumberx1582" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_identifier">y1</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">sin</span>(<span class="ltx_text ltx_lst_identifier">x</span>);
</div>
<div id="lstnumberx1583" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span>;
</div>
<div id="lstnumberx1584" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">y2</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">sin</span>(<span class="ltx_text ltx_lst_identifier">y1</span>);
</div>
</div>
<p class="ltx_p">]</p>
</div>
<section id="defining-when-equations-by-if-expressions-in-equality-equations" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">8.3.5.1 </span>Defining When-Equations by If-Expressions in Equality Equations</h4>

<div id="S3.SS5.SSS1.p1" class="ltx_para">
<p class="ltx_p">A when-equation:</p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ZXF1YXRpb24KICB3aGVuIHggPiAyIHRoZW4KICAgIHYxID0gZXhwcjE7CiAgICB2MiA9IGV4cHIyOwogIGVuZCB3aGVuOw==">⬇</a></div>
<div id="lstnumberx1585" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx1586" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">x</span><span class="ltx_text ltx_lst_space"> </span>&gt;<span class="ltx_text ltx_lst_space"> </span>2<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx1587" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_identifier">v1</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">expr1</span>;
</div>
<div id="lstnumberx1588" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_identifier">v2</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">expr2</span>;
</div>
<div id="lstnumberx1589" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span>;
</div>
</div>
<p class="ltx_p">is conceptually equivalent to the following equations containing special if-expressions
</p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ICAvLyBOb3QgY29ycmVjdCBNb2RlbGljYQogIEJvb2xlYW4gYihzdGFydCA9IHguc3RhcnQgPiAyKTsKZXF1YXRpb24KICBiICA9IHggPiAyOwogIHYxID0gaWYgZWRnZShiKSB0aGVuIGV4cHIxIGVsc2UgcHJlKHYxKTsKICB2MiA9IGlmIGVkZ2UoYikgdGhlbiBleHByMiBlbHNlIHByZSh2Mik7">⬇</a></div>
<div id="lstnumberx1590" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>Not<span class="ltx_text ltx_lst_space"> </span>correct<span class="ltx_text ltx_lst_space"> </span>Modelica</span>
</div>
<div id="lstnumberx1591" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Boolean</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">b</span>(<span class="ltx_text ltx_lst_identifier">start</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">x</span>.<span class="ltx_text ltx_lst_identifier">start</span><span class="ltx_text ltx_lst_space"> </span>&gt;<span class="ltx_text ltx_lst_space"> </span>2);
</div>
<div id="lstnumberx1592" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx1593" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">b</span><span class="ltx_text ltx_lst_space">  </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">x</span><span class="ltx_text ltx_lst_space"> </span>&gt;<span class="ltx_text ltx_lst_space"> </span>2;
</div>
<div id="lstnumberx1594" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">v1</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">edge</span>(<span class="ltx_text ltx_lst_identifier">b</span>)<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">expr1</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">pre</span>(<span class="ltx_text ltx_lst_identifier">v1</span>);
</div>
<div id="lstnumberx1595" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">v2</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">edge</span>(<span class="ltx_text ltx_lst_identifier">b</span>)<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">expr2</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">pre</span>(<span class="ltx_text ltx_lst_identifier">v2</span>);
</div>
</div>
</div>
<div id="S3.SS5.SSS1.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">The equivalence is conceptual since <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords3 ltx_font_upright" style="color:#543D08;">pre</span><span class="ltx_text ltx_font_upright">(<math id="S3.SS5.SSS1.p2.m1" class="ltx_Math" alttext="\ldots" display="inline"><mi mathbackground="#FFFFFF" mathvariant="normal">…</mi></math>)</span></span> of a non discrete-time <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="color:#543D08;background-color:#FFFFFF;">Real</span> variable or expression can only be used within a when-clause. Example:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ICAvKiBkaXNjcmV0ZSAqLyBSZWFsIHg7CiAgaW5wdXQgUmVhbCB1OwogIG91dHB1dCBSZWFsIHk7CmVxdWF0aW9uCiAgd2hlbiBzYW1wbGUoKSB0aGVuCiAgICB4ID0gYSAqIHByZSh4KSArIGIgKiBwcmUodSk7CiAgZW5kIHdoZW47CiAgeSA9IHg7">⬇</a></div>
<div id="lstnumberx1596" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">/*<span class="ltx_text ltx_lst_space"> </span>discrete<span class="ltx_text ltx_lst_space"> </span>*/</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">x</span>;
</div>
<div id="lstnumberx1597" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">input</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">u</span>;
</div>
<div id="lstnumberx1598" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">output</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">y</span>;
</div>
<div id="lstnumberx1599" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx1600" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">sample</span>()<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx1601" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_identifier">x</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">a</span><span class="ltx_text ltx_lst_space"> </span>*<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">pre</span>(<span class="ltx_text ltx_lst_identifier">x</span>)<span class="ltx_text ltx_lst_space"> </span>+<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">b</span><span class="ltx_text ltx_lst_space"> </span>*<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">pre</span>(<span class="ltx_text ltx_lst_identifier">u</span>);
</div>
<div id="lstnumberx1602" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span>;
</div>
<div id="lstnumberx1603" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">y</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">x</span>;
</div>
</div>
</div>
<div id="S3.SS5.SSS1.p3" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">Here, <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">x</span> is a discrete-time variable (whether it is declared with the <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="color:#003378;background-color:#FFFFFF;">discrete</span> prefix or not), but <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">u</span> and <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">y</span> cannot be discrete-time variables
(since they are not assigned in when-clauses). However, <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords3 ltx_font_upright" style="color:#543D08;">pre</span><span class="ltx_text ltx_font_upright">(<span class="ltx_text ltx_lst_identifier">u</span>)</span></span> is legal within the when-clause, since the body of the when-clause is only evaluated at events, and thus all expressions
are discrete-time expressions.</span>]</p>
</div>
<div id="S3.SS5.SSS1.p4" class="ltx_para">
<p class="ltx_p">The start-values of the introduced <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">Boolean</span> variables are defined by the taking the start-value of the when-condition, as above where <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">b</span> is a parameter
variable. The start-value of the special functions <span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_bold" style="color:#003378;background-color:#FFFFFF;">initial</span>, <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">terminal</span>, and <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">sample</span> is <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">false</span>.</p>
</div>
</section>
<section id="restrictions-on-where-a-when-equation-may-occur" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">8.3.5.2 </span>Restrictions on Where a When-Equation may Occur</h4>

<div id="S3.SS5.SSS2.p1" class="ltx_para">
<ul id="S3.I2" class="ltx_itemize">
<li id="S3.I2.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I2.i1.p1" class="ltx_para">
<p class="ltx_p">When-equations shall not occur inside initial equations.</p>
</div>
</li>
<li id="S3.I2.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I2.i2.p1" class="ltx_para">
<p class="ltx_p">When-equations cannot be nested.</p>
</div>
</li>
<li id="S3.I2.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I2.i3.p1" class="ltx_para">
<p class="ltx_p">When-equations can only occur within if-equations and for-equations if
the controlling expressions are exclusively parameter expressions.</p>
</div>
</li>
</ul>
</div>
<div id="S3.SS5.SSS2.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Example:
The following when-equation is invalid:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,d2hlbiB4ID4gMiB0aGVuCiAgd2hlbiB5MSA+IDMgdGhlbgogICAgeTIgPSBzaW4oeCk7CiAgZW5kIHdoZW47CmVuZCB3aGVuOw==">⬇</a></div>
<div id="lstnumberx1604" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">x</span><span class="ltx_text ltx_lst_space"> </span>&gt;<span class="ltx_text ltx_lst_space"> </span>2<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx1605" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">y1</span><span class="ltx_text ltx_lst_space"> </span>&gt;<span class="ltx_text ltx_lst_space"> </span>3<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx1606" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_identifier">y2</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">sin</span>(<span class="ltx_text ltx_lst_identifier">x</span>);
</div>
<div id="lstnumberx1607" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span>;
</div>
<div id="lstnumberx1608" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span>;
</div>
</div>
<p class="ltx_p">]</p>
</div>
</section>
<section id="restrictions-on-equations-within-when-equations" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">8.3.5.3 </span>Restrictions on Equations within When-Equations</h4>

<div id="S3.SS5.SSS3.p1" class="ltx_para">
<p class="ltx_p">The equations within the when-equation must have one of the following forms:</p>
<ul id="S3.I3" class="ltx_itemize">
<li id="S3.I3.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I3.i1.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">v</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">expr</span>;</span></p>
</div>
</li>
<li id="S3.I3.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I3.i2.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">(<span class="ltx_text ltx_lst_identifier">out1</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">out2</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">out3</span>,<span class="ltx_text ltx_lst_space"> </span><math id="S3.I3.i2.p1.m1" class="ltx_Math" alttext="\ldots" display="inline"><mi mathbackground="#FFFFFF" mathvariant="normal">…</mi></math>)<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">function_call_name</span>(<span class="ltx_text ltx_lst_identifier">in1</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">in2</span>,<span class="ltx_text ltx_lst_space"> </span><math id="S3.I3.i2.p1.m2" class="ltx_Math" alttext="\ldots" display="inline"><mi mathbackground="#FFFFFF" mathvariant="normal">…</mi></math>);</span></p>
</div>
</li>
<li id="S3.I3.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I3.i3.p1" class="ltx_para">
<p class="ltx_p">Operators <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">assert</span>, <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">terminate</span>, <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">reinit</span>.</p>
</div>
</li>
<li id="S3.I3.i4" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I3.i4.p1" class="ltx_para">
<p class="ltx_p">For- and if-equations if the equations within the for- and if-equations satisfy these requirements.</p>
</div>
</li>
<li id="S3.I3.i5" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I3.i5.p1" class="ltx_para">
<p class="ltx_p">The different branches of <span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_bold" style="color:#003378;background-color:#FFFFFF;">when</span>/<span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_bold" style="color:#003378;background-color:#FFFFFF;">elsewhen</span> must have the same set of component references on the left-hand side.</p>
</div>
</li>
<li id="S3.I3.i6" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I3.i6.p1" class="ltx_para">
<p class="ltx_p">The branches of an if-then-else clause inside when-equations must have the same set of component references on the left-hand side, unless the if-then-else have exclusively parameter expressions as switching conditions.</p>
</div>
</li>
</ul>
</div>
<div id="S3.SS5.SSS3.p2" class="ltx_para">
<p class="ltx_p">Any left hand side reference, (<span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">v</span>, <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">out1</span>, …), in a when-clause must
be a component reference, and any indices must be parameter expressions.</p>
</div>
<div id="S3.SS5.SSS3.p3" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">The needed restrictions on equations within a when-equation becomes apparent with the following example:
</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ICBSZWFsIHgsIHk7CmVxdWF0aW9uCiAgeCArIHkgPSA1OwogIHdoZW4gY29uZGl0aW9uIHRoZW4KICAgIDIgKiB4ICsgeSA9IDc7IC8vIGVycm9yOiBub3QgdmFsaWQgTW9kZWxpY2EKICBlbmQgd2hlbjs=">⬇</a></div>
<div id="lstnumberx1609" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">x</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">y</span>;
</div>
<div id="lstnumberx1610" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx1611" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">x</span><span class="ltx_text ltx_lst_space"> </span>+<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">y</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span>5;
</div>
<div id="lstnumberx1612" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">condition</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx1613" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span>2<span class="ltx_text ltx_lst_space"> </span>*<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">x</span><span class="ltx_text ltx_lst_space"> </span>+<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">y</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span>7;<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>error:<span class="ltx_text ltx_lst_space"> </span>not<span class="ltx_text ltx_lst_space"> </span>valid<span class="ltx_text ltx_lst_space"> </span>Modelica</span>
</div>
<div id="lstnumberx1614" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span>;
</div>
</div>
</div>
<div id="S3.SS5.SSS3.p4" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">When the equations of the when-equation are not activated it is not clear which variable to hold constant, either <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">x</span> or <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">y</span>.
A corrected version of this example is:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ICBSZWFsIHgseTsKZXF1YXRpb24KICB4ICsgeSA9IDU7CiAgd2hlbiBjb25kaXRpb24gdGhlbgogICAgeSA9IDcgLSAyICogeDsgLy8gZmluZQogIGVuZCB3aGVuOw==">⬇</a></div>
<div id="lstnumberx1615" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">x</span>,<span class="ltx_text ltx_lst_identifier">y</span>;
</div>
<div id="lstnumberx1616" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx1617" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">x</span><span class="ltx_text ltx_lst_space"> </span>+<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">y</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span>5;
</div>
<div id="lstnumberx1618" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">condition</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx1619" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_identifier">y</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span>7<span class="ltx_text ltx_lst_space"> </span>-<span class="ltx_text ltx_lst_space"> </span>2<span class="ltx_text ltx_lst_space"> </span>*<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">x</span>;<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>fine</span>
</div>
<div id="lstnumberx1620" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span>;
</div>
</div>
<p class="ltx_p"><span class="ltx_text ltx_font_italic">Here, variable <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">y</span> is held constant when the when-equation is
deactivated and <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">x</span> is computed from the first equation using the
value of <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">y</span> from the previous event instant.</span>]</p>
</div>
<div id="S3.SS5.SSS3.p5" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Example:
The restrictions for if-equations mean that both of the following variants are illegal:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ICBSZWFsIHgsIHk7CmVxdWF0aW9uCiAgaWYgdGltZSA8IDEgdGhlbgogICAgd2hlbiBzYW1wbGUoMSwgMikgdGhlbgogICAgICB4ID0gdGltZTsKICAgIGVuZCB3aGVuOwogIGVsc2UKICAgIHdoZW4gc2FtcGxlKDEsIDMpIHRoZW4KICAgICAgeSA9IHRpbWU7CiAgICBlbmQgd2hlbjsKICBlbmQgaWY7CgogIHdoZW4gc2FtcGxlKDEsIDIpIHRoZW4KICAgIGlmIHRpbWUgPCAxIHRoZW4KICAgICAgeSA9IHRpbWU7CiAgICBlbHNlCiAgICAgIHggPSB0aW1lOwogICAgZW5kIGlmOwogIGVuZCB3aGVuOw==">⬇</a></div>
<div id="lstnumberx1621" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">x</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">y</span>;
</div>
<div id="lstnumberx1622" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx1623" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">time</span><span class="ltx_text ltx_lst_space"> </span>&lt;<span class="ltx_text ltx_lst_space"> </span>1<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx1624" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">sample</span>(1,<span class="ltx_text ltx_lst_space"> </span>2)<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx1625" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">      </span><span class="ltx_text ltx_lst_identifier">x</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">time</span>;
</div>
<div id="lstnumberx1626" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span>;
</div>
<div id="lstnumberx1627" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">else</span>
</div>
<div id="lstnumberx1628" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">sample</span>(1,<span class="ltx_text ltx_lst_space"> </span>3)<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx1629" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">      </span><span class="ltx_text ltx_lst_identifier">y</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">time</span>;
</div>
<div id="lstnumberx1630" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span>;
</div>
<div id="lstnumberx1631" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">if</span>;
</div>
<div id="lstnumberx1632" class="ltx_listingline">
</div>
<div id="lstnumberx1633" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">sample</span>(1,<span class="ltx_text ltx_lst_space"> </span>2)<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx1634" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">time</span><span class="ltx_text ltx_lst_space"> </span>&lt;<span class="ltx_text ltx_lst_space"> </span>1<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx1635" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">      </span><span class="ltx_text ltx_lst_identifier">y</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">time</span>;
</div>
<div id="lstnumberx1636" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">else</span>
</div>
<div id="lstnumberx1637" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">      </span><span class="ltx_text ltx_lst_identifier">x</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">time</span>;
</div>
<div id="lstnumberx1638" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">if</span>;
</div>
<div id="lstnumberx1639" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span>;
</div>
</div>
<p class="ltx_p"><span class="ltx_text ltx_font_italic">whereas the restriction to parameter-expression is intended to allow:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ICBwYXJhbWV0ZXIgQm9vbGVhbiBiID0gdHJ1ZTsKICBwYXJhbWV0ZXIgSW50ZWdlciBuID0gMzsKICBSZWFsIHhbbl07CmVxdWF0aW9uCiAgaWYgYiB0aGVuCiAgICBmb3IgaSBpbiAxIDogbiBsb29wCiAgICAgIHdoZW4gc2FtcGxlKGksIGkpIHRoZW4KICAgICAgICB4W2ldID0gdGltZTsKICAgICAgZW5kIHdoZW47CiAgICBlbmQgZm9yOwogIGVuZCBpZjs=">⬇</a></div>
<div id="lstnumberx1640" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">parameter</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Boolean</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">b</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">true</span>;
</div>
<div id="lstnumberx1641" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">parameter</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">n</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span>3;
</div>
<div id="lstnumberx1642" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">x</span>[<span class="ltx_text ltx_lst_identifier">n</span>];
</div>
<div id="lstnumberx1643" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx1644" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">b</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx1645" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">for</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">i</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">in</span><span class="ltx_text ltx_lst_space"> </span>1<span class="ltx_text ltx_lst_space"> </span>:<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">n</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">loop</span>
</div>
<div id="lstnumberx1646" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">      </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">sample</span>(<span class="ltx_text ltx_lst_identifier">i</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">i</span>)<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx1647" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">        </span><span class="ltx_text ltx_lst_identifier">x</span>[<span class="ltx_text ltx_lst_identifier">i</span>]<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">time</span>;
</div>
<div id="lstnumberx1648" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">      </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span>;
</div>
<div id="lstnumberx1649" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">for</span>;
</div>
<div id="lstnumberx1650" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">if</span>;
</div>
</div>
<p class="ltx_p">]</p>
</div>
</section>
<section id="application-of-the-single-assignment-rule-to-when-equations" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">8.3.5.4 </span>Application of the Single-assignment Rule to When-Equations</h4>

<div id="S3.SS5.SSS4.p1" class="ltx_para">
<p class="ltx_p">The Modelica single-assignment rule (<a href="#synchronous-data-flow-principle-and-single-assignment-rule" title="8.4 Synchronous Data-flow Principle and Single Assignment Rule ‣ Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">8.4</span></a>) has implications for
when-equations:</p>
<ul id="S3.I4" class="ltx_itemize">
<li id="S3.I4.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I4.i1.p1" class="ltx_para">
<p class="ltx_p">Two when-equations shall <em class="ltx_emph ltx_font_italic">not</em> define the same variable.</p>
</div>
<div id="S3.I4.i1.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Without this rule this may actually happen for the erroneous
model <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">DoubleWhenConflict</span> below, since there are two equations
(<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">close</span><span class="ltx_text ltx_lst_space ltx_font_upright"> </span><span class="ltx_text ltx_font_upright">=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">true</span>;<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">close</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">false</span>;</span></span>) defining the same variable
<span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">close</span>. A conflict between the equations will occur if both
conditions would become <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="color:#003378;background-color:#FFFFFF;">true</span> at the same time instant.</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,bW9kZWwgRG91YmxlV2hlbkNvbmZsaWN0CiAgQm9vbGVhbiBjbG9zZTsgICAvLyBFcnJvbmVvdXMgbW9kZWw6IGNsb3NlIGRlZmluZWQgYnkgdHdvIGVxdWF0aW9ucyEKZXF1YXRpb24KICAkXGxkb3RzJAogIHdoZW4gY29uZGl0aW9uMSB0aGVuCiAgICAkXGxkb3RzJAogICAgY2xvc2UgPSB0cnVlOwogIGVuZCB3aGVuOwogIHdoZW4gY29uZGl0aW9uMiB0aGVuCiAgICBjbG9zZSA9IGZhbHNlOwogIGVuZCB3aGVuOwogICRcbGRvdHMkCmVuZCBEb3VibGVXaGVuQ29uZmxpY3Q7">⬇</a></div>
<div id="lstnumberx1651" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">model</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">DoubleWhenConflict</span>
</div>
<div id="lstnumberx1652" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Boolean</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">close</span>;<span class="ltx_text ltx_lst_space">   </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>Erroneous<span class="ltx_text ltx_lst_space"> </span>model:<span class="ltx_text ltx_lst_space"> </span>close<span class="ltx_text ltx_lst_space"> </span>defined<span class="ltx_text ltx_lst_space"> </span>by<span class="ltx_text ltx_lst_space"> </span>two<span class="ltx_text ltx_lst_space"> </span>equations!</span>
</div>
<div id="lstnumberx1653" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx1654" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><math id="lstnumberx1654.m1" class="ltx_Math" alttext="\ldots" display="inline"><mi mathbackground="#FFFFFF" mathvariant="normal">…</mi></math>
</div>
<div id="lstnumberx1655" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">condition1</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx1656" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><math id="lstnumberx1656.m1" class="ltx_Math" alttext="\ldots" display="inline"><mi mathbackground="#FFFFFF" mathvariant="normal">…</mi></math>
</div>
<div id="lstnumberx1657" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_identifier">close</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">true</span>;
</div>
<div id="lstnumberx1658" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span>;
</div>
<div id="lstnumberx1659" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">condition2</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx1660" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_identifier">close</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">false</span>;
</div>
<div id="lstnumberx1661" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span>;
</div>
<div id="lstnumberx1662" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><math id="lstnumberx1662.m1" class="ltx_Math" alttext="\ldots" display="inline"><mi mathbackground="#FFFFFF" mathvariant="normal">…</mi></math>
</div>
<div id="lstnumberx1663" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">DoubleWhenConflict</span>;
</div>
</div>
</div>
<div id="S3.I4.i1.p3" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">One way to resolve the conflict would be to give one of the two
when-equations higher priority. This is possible by rewriting the
when-equation using <span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_bold ltx_font_upright" style="color:#003378;background-color:#FFFFFF;">elsewhen</span>, as in the <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">WhenPriority</span> model
below or using the statement version of the when-construct, see <a href="statements-and-algorithm-sections.html#when-statements" title="11.2.7 When-Statements ‣ 11.2 Statements ‣ Chapter 11 Statements and Algorithm Sections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">11.2.7</span></a>.</span>]</p>
</div>
</li>
<li id="S3.I4.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I4.i2.p1" class="ltx_para">
<p class="ltx_p">When-equations involving elsewhen-parts can be used to resolve
assignment conflicts since the first of the when/elsewhen parts are
given higher priority than later ones:</p>
</div>
<div id="S3.I4.i2.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Below it is well defined what happens if both conditions
become <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="color:#003378;background-color:#FFFFFF;">true</span> at the same time instant since <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">condition1</span> with
associated conditional equations has a higher priority than <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">condition2</span>.</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,bW9kZWwgV2hlblByaW9yaXR5CiAgQm9vbGVhbiBjbG9zZTsgICAvLyBDb3JyZWN0IG1vZGVsOiBjbG9zZSBkZWZpbmVkIGJ5IHR3byBlcXVhdGlvbnMhCmFsZ29yaXRobQogICRcbGRvdHMkCiAgd2hlbiBjb25kaXRpb24xIHRoZW4KICAgIGNsb3NlID0gdHJ1ZTsKICBlbHNld2hlbiBjb25kaXRpb24yIHRoZW4KICAgIGNsb3NlID0gZmFsc2U7CiAgZW5kIHdoZW47CiAgJFxsZG90cyQKZW5kIFdoZW5Qcmlvcml0eTs=">⬇</a></div>
<div id="lstnumberx1664" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">model</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">WhenPriority</span>
</div>
<div id="lstnumberx1665" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Boolean</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">close</span>;<span class="ltx_text ltx_lst_space">   </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>Correct<span class="ltx_text ltx_lst_space"> </span>model:<span class="ltx_text ltx_lst_space"> </span>close<span class="ltx_text ltx_lst_space"> </span>defined<span class="ltx_text ltx_lst_space"> </span>by<span class="ltx_text ltx_lst_space"> </span>two<span class="ltx_text ltx_lst_space"> </span>equations!</span>
</div>
<div id="lstnumberx1666" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">algorithm</span>
</div>
<div id="lstnumberx1667" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><math id="lstnumberx1667.m1" class="ltx_Math" alttext="\ldots" display="inline"><mi mathbackground="#FFFFFF" mathvariant="normal">…</mi></math>
</div>
<div id="lstnumberx1668" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">condition1</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx1669" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_identifier">close</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">true</span>;
</div>
<div id="lstnumberx1670" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">elsewhen</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">condition2</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx1671" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_identifier">close</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">false</span>;
</div>
<div id="lstnumberx1672" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span>;
</div>
<div id="lstnumberx1673" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><math id="lstnumberx1673.m1" class="ltx_Math" alttext="\ldots" display="inline"><mi mathbackground="#FFFFFF" mathvariant="normal">…</mi></math>
</div>
<div id="lstnumberx1674" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">WhenPriority</span>;
</div>
</div>
<p class="ltx_p">]</p>
</div>
</li>
</ul>
</div>
</section>
</section>
<section id="reinit" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">8.3.6 </span>reinit</h3>

<div id="S3.SS6.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">reinit</span> can only be used in the body of a when-equation. It has the following syntax:</p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,cmVpbml0KHgsIGV4cHIpOw==">⬇</a></div>
<div id="lstnumberx1675" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">reinit</span>(<span class="ltx_text ltx_lst_identifier">x</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">expr</span>);
</div>
</div>
</div>
<div id="S3.SS6.p2" class="ltx_para">
<p class="ltx_p">The operator reinitializes <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">x</span> with <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">expr</span> at an event instant. <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">x</span> is a <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">Real</span> variable (or an array of <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">Real</span> variables) that must be selected as a state (resp., states), i.e. <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">reinit</span> on <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">x</span> implies <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">stateSelect</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">StateSelect</span>.<span class="ltx_text ltx_lst_identifier">always</span></span> on <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">x</span>. <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">expr</span> needs to be type-compatible with <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">x</span>. <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">reinit</span> can for the same variable (resp. array of variables) only be applied (either as an individual variable or as part of an array of variables) in one equation (having <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">reinit</span> of the same variable in when and else-when of the same variable is allowed). In case of <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">reinit</span> active during initialization (due to when initial), see <a href="#initialization-initial-equation-and-initial-algorithm" title="8.6 Initialization, initial equation, and initial algorithm ‣ Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">8.6</span></a>.</p>
</div>
<div id="S3.SS6.p3" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">reinit</span> does not break the single assignment rule, because <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">reinit</span>(<span class="ltx_text ltx_lst_identifier">x</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">expr</span>)</span> in equations evaluates <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">expr</span> to a value,
then at the end of the current event iteration step it assigns this value to <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">x</span> (this copying from values to reinitialized state(s) is
done after all other evaluations of the model and before copying <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">x</span> to <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">pre</span>(<span class="ltx_text ltx_lst_identifier">x</span>)</span>).</p>
</div>
<div id="S3.SS6.p4" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Example:
If a higher index system is present, i.e., constraints between
state variables, some state variables need to be redefined to non-state
variables. During simulation, non-state variables should be chosen in
such a way that variables with an applied <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="color:#543D08;background-color:#FFFFFF;">reinit</span> are
selected as states at least when the corresponding when-clauses become
active. If this is not possible, an error occurs, since otherwise
<span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="color:#543D08;background-color:#FFFFFF;">reinit</span> would be applied to a non-state variable.</span></p>
</div>
<div id="S3.SS6.p5" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">Example for the usage of <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="color:#543D08;background-color:#FFFFFF;">reinit</span> (bouncing ball):</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ZGVyKGgpID0gdjsKZGVyKHYpID0gaWYgZmx5aW5nIHRoZW4gLWcgZWxzZSAwOwpmbHlpbmcgPSBub3QgKGggPD0gMCBhbmQgdiA8PSAwKTsKd2hlbiBoIDwgMCB0aGVuCiAgcmVpbml0KHYsIC1lICogcHJlKHYpKTsKZW5kIHdoZW4=">⬇</a></div>
<div id="lstnumberx1676" class="ltx_listingline">
<span class="ltx_text ltx_lst_keyword" style="color:#003378;">der</span>(<span class="ltx_text ltx_lst_identifier">h</span>)<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">v</span>;
</div>
<div id="lstnumberx1677" class="ltx_listingline">
<span class="ltx_text ltx_lst_keyword" style="color:#003378;">der</span>(<span class="ltx_text ltx_lst_identifier">v</span>)<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">flying</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space"> </span>-<span class="ltx_text ltx_lst_identifier">g</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space"> </span>0;
</div>
<div id="lstnumberx1678" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier">flying</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">not</span><span class="ltx_text ltx_lst_space"> </span>(<span class="ltx_text ltx_lst_identifier">h</span><span class="ltx_text ltx_lst_space"> </span>&lt;=<span class="ltx_text ltx_lst_space"> </span>0<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">and</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">v</span><span class="ltx_text ltx_lst_space"> </span>&lt;=<span class="ltx_text ltx_lst_space"> </span>0);
</div>
<div id="lstnumberx1679" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">h</span><span class="ltx_text ltx_lst_space"> </span>&lt;<span class="ltx_text ltx_lst_space"> </span>0<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx1680" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">reinit</span>(<span class="ltx_text ltx_lst_identifier">v</span>,<span class="ltx_text ltx_lst_space"> </span>-<span class="ltx_text ltx_lst_identifier">e</span><span class="ltx_text ltx_lst_space"> </span>*<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">pre</span>(<span class="ltx_text ltx_lst_identifier">v</span>));
</div>
<div id="lstnumberx1681" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span>
</div>
</div>
<p class="ltx_p">]</p>
</div>
</section>
<section id="assert" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">8.3.7 </span>assert</h3>

<div id="S3.SS7.p1" class="ltx_para">
<p class="ltx_p">An equation or statement of one of the following forms is an assertion:</p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,YXNzZXJ0KGNvbmRpdGlvbiwgbWVzc2FnZSk7IC8vIFVzZXMgbGV2ZWw9QXNzZXJ0aW9uTGV2ZWwuZXJyb3IKYXNzZXJ0KGNvbmRpdGlvbiwgbWVzc2FnZSwgYXNzZXJ0aW9uTGV2ZWwpOwphc3NlcnQoY29uZGl0aW9uLCBtZXNzYWdlLCBsZXZlbCA9IGFzc2VydGlvbkxldmVsKTs=">⬇</a></div>
<div id="lstnumberx1682" class="ltx_listingline">
<span class="ltx_text ltx_lst_keyword" style="color:#003378;">assert</span>(<span class="ltx_text ltx_lst_identifier">condition</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">message</span>);<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>Uses<span class="ltx_text ltx_lst_space"> </span>level=AssertionLevel.error</span>
</div>
<div id="lstnumberx1683" class="ltx_listingline">
<span class="ltx_text ltx_lst_keyword" style="color:#003378;">assert</span>(<span class="ltx_text ltx_lst_identifier">condition</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">message</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">assertionLevel</span>);
</div>
<div id="lstnumberx1684" class="ltx_listingline">
<span class="ltx_text ltx_lst_keyword" style="color:#003378;">assert</span>(<span class="ltx_text ltx_lst_identifier">condition</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">message</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">level</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">assertionLevel</span>);
</div>
</div>
<p class="ltx_p">Here, <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">condition</span> is a <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">Boolean</span> expression, <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">message</span> is a <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">String</span> expression, and <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">assertionLevel</span> is an optional parameter expression of the built-in enumeration type <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">AssertionLevel</span>.
It can be used in equation sections or algorithm sections.</p>
</div>
<div id="S3.SS7.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">This means that <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="color:#003378;background-color:#FFFFFF;">assert</span> can be called as if it were a function with three formal parameters, the third formal parameter has the name <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">level</span> and the default value <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">AssertionLevel</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">error</span></span></span>.</span>]</p>
</div>
<div id="S3.SS7.p3" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">A parameter expression is required for <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">level</span> since it shall be evaluated at compile time.</span>]</p>
</div>
<div id="S3.SS7.p4" class="ltx_para">
<p class="ltx_p">If the <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">condition</span> of an assertion is true, <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">message</span> is not evaluated and the procedure call is ignored.
If the <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">condition</span> evaluates to false, different actions are taken depending on the <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">level</span> input:</p>
<ul id="S3.I5" class="ltx_itemize">
<li id="S3.I5.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I5.i1.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">level</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">AssertionLevel</span>.<span class="ltx_text ltx_lst_identifier">error</span></span>:
The current evaluation is aborted.
The simulation may continue with another evaluation.
If the simulation is aborted, <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">message</span> indicates the cause of the error.</p>
</div>
<div id="S3.I5.i1.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Ways to continue simulation with another evaluation include using a shorter step-size, or changing the values of iterationvariables.</span>]</p>
</div>
<div id="S3.I5.i1.p3" class="ltx_para">
<p class="ltx_p">Failed assertions take precedence over successful termination, such that if the model first triggers the end of successful analysis by reaching the stop-time or explicitly with <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">terminate</span>, but the evaluation with <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">terminal</span>()=<span class="ltx_text ltx_lst_keyword" style="color:#003378;">true</span></span> triggers an assert, the analysis failed.</p>
</div>
</li>
<li id="S3.I5.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I5.i2.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">level</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">AssertionLevel</span>.<span class="ltx_text ltx_lst_identifier">warning</span></span>:
The current evaluation is not aborted.
<span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">message</span> indicates the cause of the warning.</p>
</div>
<div id="S3.I5.i2.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">It is recommended to report the warning only once when the condition becomes false, and it is reported that the condition is no longer violated when the condition returns to true.
The <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="color:#003378;background-color:#FFFFFF;">assert</span> statement shall have no influence on the behavior of the model.
For example, by evaluating the condition and reporting the message only after accepted integrator steps.
<span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">condition</span> needs to be implicitly treated with <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="color:#543D08;background-color:#FFFFFF;">noEvent</span> since otherwise events might be triggered that can lead to slightly changed simulation results.</span>]</p>
</div>
</li>
</ul>
</div>
<div id="S3.SS7.p5" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">The <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">AssertionLevel</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">error</span></span></span> case can be used to avoid evaluating a
model outside its limits of validity; for instance, a function to
compute the saturated liquid temperature cannot be called with a
pressure lower than the triple point value.</span></p>
</div>
<div id="S3.SS7.p6" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">The <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">AssertionLevel</span><span class="ltx_text ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">warning</span></span></span> case can be used when the boundary of
validity is not hard: for instance, a fluid property model based on a
polynomial interpolation curve might give accurate results between
temperatures of 250 K and 400 K, but still give reasonable results in
the range 200 K and 500 K. When the temperature gets out of the smaller
interval, but still stays in the largest one, the user should be warned,
but the simulation should continue without any further action. The
corresponding code would be:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,YXNzZXJ0KFQgPiAyNTAgYW5kIFQgPCA0MDAsICJNZWRpdW0gbW9kZWwgb3V0c2lkZSBmdWxsIGFjY3VyYWN5IHJhbmdlIiwgQXNzZXJ0aW9uTGV2ZWwud2FybmluZyk7CmFzc2VydChUID4gMjAwIGFuZCBUIDwgNTAwLCAiTWVkaXVtIG1vZGVsIG91dHNpZGUgZmVhc2libGUgcmVnaW9uIik7">⬇</a></div>
<div id="lstnumberx1685" class="ltx_listingline">
<span class="ltx_text ltx_lst_keyword" style="color:#003378;">assert</span>(<span class="ltx_text ltx_lst_identifier">T</span><span class="ltx_text ltx_lst_space"> </span>&gt;<span class="ltx_text ltx_lst_space"> </span>250<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">and</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">T</span><span class="ltx_text ltx_lst_space"> </span>&lt;<span class="ltx_text ltx_lst_space"> </span>400,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#000000;">"Medium<span class="ltx_text ltx_lst_space"> </span>model<span class="ltx_text ltx_lst_space"> </span>outside<span class="ltx_text ltx_lst_space"> </span>full<span class="ltx_text ltx_lst_space"> </span>accuracy<span class="ltx_text ltx_lst_space"> </span>range"</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">AssertionLevel</span>.<span class="ltx_text ltx_lst_identifier">warning</span>);
</div>
<div id="lstnumberx1686" class="ltx_listingline">
<span class="ltx_text ltx_lst_keyword" style="color:#003378;">assert</span>(<span class="ltx_text ltx_lst_identifier">T</span><span class="ltx_text ltx_lst_space"> </span>&gt;<span class="ltx_text ltx_lst_space"> </span>200<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">and</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">T</span><span class="ltx_text ltx_lst_space"> </span>&lt;<span class="ltx_text ltx_lst_space"> </span>500,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#000000;">"Medium<span class="ltx_text ltx_lst_space"> </span>model<span class="ltx_text ltx_lst_space"> </span>outside<span class="ltx_text ltx_lst_space"> </span>feasible<span class="ltx_text ltx_lst_space"> </span>region"</span>);
</div>
</div>
<p class="ltx_p">]</p>
</div>
</section>
<section id="terminate" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">8.3.8 </span>terminate</h3>

<div id="S3.SS8.p1" class="ltx_para">
<p class="ltx_p">The <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">terminate</span> equation or statement (using function syntax) successfully terminates the analysis which was carried out, see also <a href="#assert" title="8.3.7 assert ‣ 8.3 Equations in Equation Sections ‣ Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">8.3.7</span></a>.
The termination is not immediate at the place where it is defined since not all variable results might be available that are necessary for a successful stop.
Instead, the termination actually takes place when the current integrator step is successfully finalized or at an event instant after the event handling has been completed before restarting the integration.</p>
</div>
<div id="S3.SS8.p2" class="ltx_para">
<p class="ltx_p">The <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">terminate</span> statement has a string argument indicating the reason for the success.</p>
</div>
<div id="S3.SS8.p3" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Example:
The intention of the <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="color:#003378;background-color:#FFFFFF;">terminate</span> statement is to give more complex stopping criteria than a fixed point in time:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,bW9kZWwgVGhyb3dpbmdCYWxsCiAgUmVhbCB4KHN0YXJ0PTApOwogIFJlYWwgeShzdGFydD0xKTsKZXF1YXRpb24KICBkZXIoeCkgPSAkXGxkb3RzJDsKICBkZXIoeSkgPSAkXGxkb3RzJDsKYWxnb3JpdGhtCiAgd2hlbiB5IDwgMCB0aGVuCiAgICB0ZXJtaW5hdGUoIlRoZSBiYWxsIHRvdWNoZXMgdGhlIGdyb3VuZCIpOwogIGVuZCB3aGVuOwplbmQgVGhyb3dpbmdCYWxsOw==">⬇</a></div>
<div id="lstnumberx1687" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">model</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">ThrowingBall</span>
</div>
<div id="lstnumberx1688" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">x</span>(<span class="ltx_text ltx_lst_identifier">start</span>=0);
</div>
<div id="lstnumberx1689" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">y</span>(<span class="ltx_text ltx_lst_identifier">start</span>=1);
</div>
<div id="lstnumberx1690" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx1691" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">der</span>(<span class="ltx_text ltx_lst_identifier">x</span>)<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><math id="lstnumberx1691.m1" class="ltx_Math" alttext="\ldots" display="inline"><mi mathbackground="#FFFFFF" mathvariant="normal">…</mi></math>;
</div>
<div id="lstnumberx1692" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">der</span>(<span class="ltx_text ltx_lst_identifier">y</span>)<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><math id="lstnumberx1692.m1" class="ltx_Math" alttext="\ldots" display="inline"><mi mathbackground="#FFFFFF" mathvariant="normal">…</mi></math>;
</div>
<div id="lstnumberx1693" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">algorithm</span>
</div>
<div id="lstnumberx1694" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">y</span><span class="ltx_text ltx_lst_space"> </span>&lt;<span class="ltx_text ltx_lst_space"> </span>0<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx1695" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">terminate</span>(<span class="ltx_text ltx_lst_string" style="color:#000000;">"The<span class="ltx_text ltx_lst_space"> </span>ball<span class="ltx_text ltx_lst_space"> </span>touches<span class="ltx_text ltx_lst_space"> </span>the<span class="ltx_text ltx_lst_space"> </span>ground"</span>);
</div>
<div id="lstnumberx1696" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span>;
</div>
<div id="lstnumberx1697" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">ThrowingBall</span>;
</div>
</div>
<p class="ltx_p">]</p>
</div>
</section>
<section id="equation-operators-for-overconstrained-connection-based-equation-systems" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">8.3.9 </span>Equation Operators for Overconstrained Connection-Based Equation Systems</h3>

<div id="S3.SS9.p1" class="ltx_para">
<p class="ltx_p">See <a href="connectors-and-connections.html#equation-operators-for-overconstrained-connection-based-equation-systems1" title="9.4 Equation Operators for Overconstrained Connection-Based Equation Systems ‣ Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">9.4</span></a> for a description of this topic.</p>
</div>
</section>
</section>
<section id="synchronous-data-flow-principle-and-single-assignment-rule" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">8.4 </span>Synchronous Data-flow Principle and Single Assignment Rule</h2>

<div id="S4.p1" class="ltx_para">
<p class="ltx_p">Modelica is based on the synchronous data flow principle and the single
assignment rule, which are defined in the following way:</p>
<ol id="S4.I1" class="ltx_enumerate">
<li id="S4.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span> 
<div id="S4.I1.i1.p1" class="ltx_para">
<p class="ltx_p">Discrete-time variables keep their values until these variables are explicitly changed.
Differentiated variables have <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keyword" style="color:#003378;">der</span>(<span class="ltx_text ltx_lst_identifier">x</span>)</span> corresponding to the time-derivative of <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">x</span>,
and <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">x</span> is continuous, except when <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">reinit</span> is triggered, see <a href="#reinit" title="8.3.6 reinit ‣ 8.3 Equations in Equation Sections ‣ Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">8.3.6</span></a>.
Variable values can be accessed at any time instant during continuous integration and at event instants.</p>
</div>
</li>
<li id="S4.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span> 
<div id="S4.I1.i2.p1" class="ltx_para">
<p class="ltx_p">At every time instant, during continuous integration and at event instants,
the equations express relations between variables which have to be fulfilled concurrently.</p>
</div>
</li>
<li id="S4.I1.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">3.</span> 
<div id="S4.I1.i3.p1" class="ltx_para">
<p class="ltx_p">Computation and communication at an event instant does not take time.</p>
</div>
<div id="S4.I1.i3.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">If computation or communication time has to be simulated, this property has to be explicitly modeled.</span>]</p>
</div>
</li>
<li id="S4.I1.i4" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">4.</span> 
<div id="S4.I1.i4.p1" class="ltx_para">
<p class="ltx_p">There must exist a perfect matching of variables to equations after flattening, where a variable can only
be matched to equations that can contribute to solving for the variable
(<em class="ltx_emph ltx_font_italic">perfect matching rule</em> – previously called <em class="ltx_emph ltx_font_italic">single assignment rule</em>); see also globally balanced <a href="class-predefined-types-and-declarations.html#balanced-models" title="4.7 Balanced Models ‣ Chapter 4 Classes, Predefined Types, and Declarations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">4.7</span></a>.</p>
</div>
</li>
</ol>
</div>
</section>
<section id="events-and-synchronization" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">8.5 </span>Events and Synchronization</h2>

<div id="S5.p1" class="ltx_para">
<p class="ltx_p">An <em class="ltx_emph ltx_font_italic">event</em> is something that occurs instantaneously at a specific time or when a specific condition occurs.
Events are for example defined by the condition occurring in a when-clause, if-clause, or if-expression.
</p>
</div>
<div id="S5.p2" class="ltx_para">
<p class="ltx_p">The integration is halted and an event occurs whenever an event
generation expression, e.g. <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">x</span><span class="ltx_text ltx_lst_space"> </span>&gt;<span class="ltx_text ltx_lst_space"> </span>2</span> o or <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">floor</span>(<span class="ltx_text ltx_lst_identifier">x</span>)</span>, changes
its value. An event generating expression has an internal buffer, and
the value of the expression can only be changed at event instants. If
the evaluated expression is inconsistent with the buffer, that will
trigger an event and the buffer will be updated with a new value at the
event instant. During continuous integration event generation expression
has the constant value of the expression from the last event instant.</p>
</div>
<div id="S5.p3" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">A root finding mechanism is needed which determines a small time interval in which the expression changes its value; the event occurs
at the right side of this interval.</span>]</p>
</div>
<div id="S5.p4" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Example:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,eSA9IGlmIHUgPiB1TWF4IHRoZW4gdU1heCBlbHNlIGlmIHUgPCB1TWluIHRoZW4gdU1pbiBlbHNlIHU7">⬇</a></div>
<div id="lstnumberx1698" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier">y</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">u</span><span class="ltx_text ltx_lst_space"> </span>&gt;<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">uMax</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">uMax</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">u</span><span class="ltx_text ltx_lst_space"> </span>&lt;<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">uMin</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">uMin</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">u</span>;
</div>
</div>
</div>
<div id="S5.p5" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">During continuous integration always the same if-branch is
evaluated. The integration is halted whenever <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">u</span><span class="ltx_text ltx_font_upright">-<span class="ltx_text ltx_lst_identifier">uMax</span></span></span> or <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">u</span><span class="ltx_text ltx_font_upright">-<span class="ltx_text ltx_lst_identifier">uMin</span></span></span>
crosses zero. At the event instant, the correct if-branch is
selected and the integration is restarted.</span></p>
</div>
<div id="S5.p6" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">Numerical integration methods of order <math id="S5.p6.m1" class="ltx_Math" alttext="n" display="inline"><mi>n</mi></math> (<math id="S5.p6.m2" class="ltx_Math" alttext="n\geq 1" display="inline"><mrow><mi>n</mi><mo mathvariant="normal">≥</mo><mn mathvariant="normal">1</mn></mrow></math>) require continuous model equations which are differentiable up to order <math id="S5.p6.m3" class="ltx_Math" alttext="n" display="inline"><mi>n</mi></math>. This requirement can be fulfilled if <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="color:#543D08;background-color:#FFFFFF;">Real</span> elementary relations are not treated literally but as defined above, because discontinuous changes can only occur at event instants and no longer during continuous integration.</span>]</p>
</div>
<div id="S5.p7" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">It is a quality of implementation issue that the following special relations</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,dGltZSA+PSBkaXNjcmV0ZSBleHByZXNzaW9uCnRpbWUgPCBkaXNjcmV0ZSBleHByZXNzaW9u">⬇</a></div>
<div id="lstnumberx1699" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier">time</span><span class="ltx_text ltx_lst_space"> </span>&gt;=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">discrete</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">expression</span>
</div>
<div id="lstnumberx1700" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier">time</span><span class="ltx_text ltx_lst_space"> </span>&lt;<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">discrete</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">expression</span>
</div>
</div>
<p class="ltx_p"><span class="ltx_text ltx_font_italic">trigger a time event at <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">time</span> = <em class="ltx_emph ltx_font_upright">discrete expression</em>, i.e., the
event instant is known in advance and no iteration is needed to find the
exact event instant.</span>]</p>
</div>
<div id="S5.p8" class="ltx_para">
<p class="ltx_p">Relations are taken literally also during continuous integration, if the relation or the expression in which the relation is present, are the argument of <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">noEvent</span>. <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">smooth</span> also allows relations used as argument to be taken literally. The <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">noEvent</span> feature is propagated to all subrelations in the scope of the <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">noEvent</span> application. For <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">smooth</span> the liberty to not allow literal evaluation is propagated to all subrelations, but the smoothness property itself is not propagated.</p>
</div>
<div id="S5.p9" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Example:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,eCA9IGlmIG5vRXZlbnQodSA+IHVNYXgpIHRoZW4gdU1heCBlbHNlaWYgbm9FdmVudCh1IDwgdU1pbikgdGhlbiB1TWluIGVsc2UgdTsKeSA9IG5vRXZlbnQoICBpZiB1ID4gdU1heCB0aGVuIHVNYXggZWxzZWlmIHUgPCB1TWluIHRoZW4gdU1pbiBlbHNlIHUpOwp6ID0gc21vb3RoKDAsIGlmIHUgPiB1TWF4IHRoZW4gdU1heCBlbHNlaWYgdSA8IHVNaW4gdGhlbiB1TWluIGVsc2UgdSk7">⬇</a></div>
<div id="lstnumberx1701" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier">x</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">noEvent</span>(<span class="ltx_text ltx_lst_identifier">u</span><span class="ltx_text ltx_lst_space"> </span>&gt;<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">uMax</span>)<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">uMax</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">elseif</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">noEvent</span>(<span class="ltx_text ltx_lst_identifier">u</span><span class="ltx_text ltx_lst_space"> </span>&lt;<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">uMin</span>)<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">uMin</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">u</span>;
</div>
<div id="lstnumberx1702" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier">y</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">noEvent</span>(<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">u</span><span class="ltx_text ltx_lst_space"> </span>&gt;<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">uMax</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">uMax</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">elseif</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">u</span><span class="ltx_text ltx_lst_space"> </span>&lt;<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">uMin</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">uMin</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">u</span>);
</div>
<div id="lstnumberx1703" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier">z</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">smooth</span>(0,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">u</span><span class="ltx_text ltx_lst_space"> </span>&gt;<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">uMax</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">uMax</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">elseif</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">u</span><span class="ltx_text ltx_lst_space"> </span>&lt;<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">uMin</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">uMin</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">u</span>);
</div>
</div>
</div>
<div id="S5.p10" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">In this case <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">x</span><span class="ltx_text ltx_lst_space ltx_font_upright"> </span><span class="ltx_text ltx_font_upright">=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">y</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">z</span></span></span>, but a tool might generate events for <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">z</span>. The if-expression is taken literally without inducing state events.</span></p>
</div>
<div id="S5.p11" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">The <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="color:#543D08;background-color:#FFFFFF;">smooth</span> operator is useful, if e.g. the modeler can guarantee that the used if-clauses fulfill at least the continuity requirement of integrators. In this case the simulation speed is improved, since no state event iterations occur during integration. The <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="color:#543D08;background-color:#FFFFFF;">noEvent</span> operator is used to guard against <em class="ltx_emph ltx_font_upright">outside domain</em> errors, e.g. <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">y</span><span class="ltx_text ltx_lst_space ltx_font_upright"> </span><span class="ltx_text ltx_font_upright">=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">noEvent</span>(<span class="ltx_text ltx_lst_identifier">x</span><span class="ltx_text ltx_lst_space"> </span>&gt;=<span class="ltx_text ltx_lst_space"> </span>0)<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">sqrt</span>(<span class="ltx_text ltx_lst_identifier">x</span>)<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space"> </span>0.</span></span></span>]</p>
</div>
<div id="S5.p12" class="ltx_para">
<p class="ltx_p">All equations and assignment statements within when-clauses and all assignment statements within <span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_bold" style="color:#003378;background-color:#FFFFFF;">function</span> classes are implicitly treated with <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">noEvent</span>, i.e., relations within the scope of these operators never induce state or time events.</p>
</div>
<div id="S5.p13" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Using state events in when-clauses is unnecessary because the body of a when-clause is not evaluated during continuous integration.</span>]</p>
</div>
<div id="S5.p14" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Example:
Two different errors caused by non-discrete-time expressions:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,d2hlbiBub0V2ZW50KHgxID4gMSkgb3IgeDIgPiAxMCB0aGVuIC8vIFdoZW4tY29uZGl0aW9uIG11c3QgYmUgZGlzY3JldGUtdGltZQogIGNsb3NlID0gdHJ1ZTsKZW5kIHdoZW47CmFib3ZlMSA9IG5vRXZlbnQoeDEgPiAxKTsgICAgICAgICAgICAvLyBCb29sZWFuIGVxdWF0aW9uIG11c3QgYmUgZGlzY3JldGUtdGltZQ==">⬇</a></div>
<div id="lstnumberx1704" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">noEvent</span>(<span class="ltx_text ltx_lst_identifier">x1</span><span class="ltx_text ltx_lst_space"> </span>&gt;<span class="ltx_text ltx_lst_space"> </span>1)<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">or</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">x2</span><span class="ltx_text ltx_lst_space"> </span>&gt;<span class="ltx_text ltx_lst_space"> </span>10<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>When-condition<span class="ltx_text ltx_lst_space"> </span>must<span class="ltx_text ltx_lst_space"> </span>be<span class="ltx_text ltx_lst_space"> </span>discrete-time</span>
</div>
<div id="lstnumberx1705" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">close</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">true</span>;
</div>
<div id="lstnumberx1706" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span>;
</div>
<div id="lstnumberx1707" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier">above1</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">noEvent</span>(<span class="ltx_text ltx_lst_identifier">x1</span><span class="ltx_text ltx_lst_space"> </span>&gt;<span class="ltx_text ltx_lst_space"> </span>1);<span class="ltx_text ltx_lst_space">            </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>Boolean<span class="ltx_text ltx_lst_space"> </span>equation<span class="ltx_text ltx_lst_space"> </span>must<span class="ltx_text ltx_lst_space"> </span>be<span class="ltx_text ltx_lst_space"> </span>discrete-time</span>
</div>
</div>
<p class="ltx_p"><span class="ltx_text ltx_font_italic">The when-condition rule is stated in <a href="#when-equations" title="8.3.5 When-Equations ‣ 8.3 Equations in Equation Sections ‣ Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">8.3.5</span></a>, and the rule for a non-<span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="color:#543D08;background-color:#FFFFFF;">Real</span> equation is stated in <a href="operators-and-expressions.html#discrete-time-expressions" title="3.8.3 Discrete-Time Expressions ‣ 3.8 Variability of Expressions ‣ Chapter 3 Operators and Expressions ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">3.8.3</span></a>.</span>]</p>
</div>
<div id="S5.p15" class="ltx_para">
<p class="ltx_p">Modelica is based on the synchronous data flow principle (<a href="#synchronous-data-flow-principle-and-single-assignment-rule" title="8.4 Synchronous Data-flow Principle and Single Assignment Rule ‣ Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">8.4</span></a>).</p>
</div>
<div id="S5.p16" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">The rules for the synchronous data flow principle guarantee
that variables are always defined by a unique set of equations. It is
not possible that a variable is e.g. defined by two equations, which
would give rise to conflicts or non-deterministic behavior. Furthermore,
the continuous and the discrete parts of a model are always
automatically “synchronized”. Example:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ZXF1YXRpb24gLy8gSWxsZWdhbCBleGFtcGxlCiAgd2hlbiBjb25kaXRpb24xIHRoZW4KICAgIGNsb3NlID0gdHJ1ZTsKICBlbmQgd2hlbjsKCiAgd2hlbiBjb25kaXRpb24yIHRoZW4KICAgIGNsb3NlID0gZmFsc2U7CiAgZW5kIHdoZW47">⬇</a></div>
<div id="lstnumberx1708" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>Illegal<span class="ltx_text ltx_lst_space"> </span>example</span>
</div>
<div id="lstnumberx1709" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">condition1</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx1710" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_identifier">close</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">true</span>;
</div>
<div id="lstnumberx1711" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span>;
</div>
<div id="lstnumberx1712" class="ltx_listingline">
</div>
<div id="lstnumberx1713" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">condition2</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx1714" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_identifier">close</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">false</span>;
</div>
<div id="lstnumberx1715" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span>;
</div>
</div>
</div>
<div id="S5.p17" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">This is not a valid model because rule 4 is violated since there
are two equations for the single unknown variable close. If this would
be a valid model, a conflict occurs when both conditions become true at
the same time instant, since no priorities between the two equations are
assigned. To become valid, the model has to be changed to:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ZXF1YXRpb24KICB3aGVuIGNvbmRpdGlvbjEgdGhlbgogICAgY2xvc2UgPSB0cnVlOwogIGVsc2V3aGVuIGNvbmRpdGlvbjIgdGhlbgogICAgY2xvc2UgPSBmYWxzZTsKICBlbmQgd2hlbjs=">⬇</a></div>
<div id="lstnumberx1716" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx1717" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">condition1</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx1718" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_identifier">close</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">true</span>;
</div>
<div id="lstnumberx1719" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">elsewhen</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">condition2</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx1720" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_identifier">close</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">false</span>;
</div>
<div id="lstnumberx1721" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span>;
</div>
</div>
</div>
<div id="S5.p18" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">Here, it is well-defined if both conditions become true at the
same time instant (<span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">condition1</span> has a higher priority than
<span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">condition2</span>).</span>]</p>
</div>
<div id="S5.p19" class="ltx_para">
<p class="ltx_p">There is no guarantee that two different events occur at the same time
instant.</p>
</div>
<div id="S5.p20" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">As a consequence, synchronization of events has to be
explicitly programmed in the model, e.g. via counters. Example:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ICBCb29sZWFuIGZhc3RTYW1wbGUsIHNsb3dTYW1wbGU7CiAgSW50ZWdlciB0aWNrcyhzdGFydD0wKTsKZXF1YXRpb24KICBmYXN0U2FtcGxlID0gc2FtcGxlKDAsMSk7CmFsZ29yaXRobQogIHdoZW4gZmFzdFNhbXBsZSB0aGVuCiAgICB0aWNrcyAgICAgIDo9IGlmIHByZSh0aWNrcykgPCA1IHRoZW4gcHJlKHRpY2tzKSsxIGVsc2UgMDsKICAgIHNsb3dTYW1wbGUgOj0gcHJlKHRpY2tzKSA9PSAwOwogIGVuZCB3aGVuOwphbGdvcml0aG0KICB3aGVuIGZhc3RTYW1wbGUgdGhlbiAgIC8vIGZhc3Qgc2FtcGxpbmcKICAgICRcbGRvdHMkCiAgZW5kIHdoZW47CmFsZ29yaXRobQogIHdoZW4gc2xvd1NhbXBsZSB0aGVuICAgLy8gc2xvdyBzYW1wbGluZyAoNS10aW1lcyBzbG93ZXIpCiAgICAkXGxkb3RzJAogIGVuZCB3aGVuOw==">⬇</a></div>
<div id="lstnumberx1722" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Boolean</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">fastSample</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">slowSample</span>;
</div>
<div id="lstnumberx1723" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">ticks</span>(<span class="ltx_text ltx_lst_identifier">start</span>=0);
</div>
<div id="lstnumberx1724" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx1725" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">fastSample</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">sample</span>(0,1);
</div>
<div id="lstnumberx1726" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">algorithm</span>
</div>
<div id="lstnumberx1727" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">fastSample</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx1728" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_identifier">ticks</span><span class="ltx_text ltx_lst_space">      </span>:=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">pre</span>(<span class="ltx_text ltx_lst_identifier">ticks</span>)<span class="ltx_text ltx_lst_space"> </span>&lt;<span class="ltx_text ltx_lst_space"> </span>5<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">pre</span>(<span class="ltx_text ltx_lst_identifier">ticks</span>)+1<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space"> </span>0;
</div>
<div id="lstnumberx1729" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_identifier">slowSample</span><span class="ltx_text ltx_lst_space"> </span>:=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">pre</span>(<span class="ltx_text ltx_lst_identifier">ticks</span>)<span class="ltx_text ltx_lst_space"> </span>==<span class="ltx_text ltx_lst_space"> </span>0;
</div>
<div id="lstnumberx1730" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span>;
</div>
<div id="lstnumberx1731" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">algorithm</span>
</div>
<div id="lstnumberx1732" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">fastSample</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space">   </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>fast<span class="ltx_text ltx_lst_space"> </span>sampling</span>
</div>
<div id="lstnumberx1733" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><math id="lstnumberx1733.m1" class="ltx_Math" alttext="\ldots" display="inline"><mi mathbackground="#FFFFFF" mathvariant="normal">…</mi></math>
</div>
<div id="lstnumberx1734" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span>;
</div>
<div id="lstnumberx1735" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">algorithm</span>
</div>
<div id="lstnumberx1736" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">slowSample</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space">   </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>slow<span class="ltx_text ltx_lst_space"> </span>sampling<span class="ltx_text ltx_lst_space"> </span>(5-times<span class="ltx_text ltx_lst_space"> </span>slower)</span>
</div>
<div id="lstnumberx1737" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><math id="lstnumberx1737.m1" class="ltx_Math" alttext="\ldots" display="inline"><mi mathbackground="#FFFFFF" mathvariant="normal">…</mi></math>
</div>
<div id="lstnumberx1738" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span>;
</div>
</div>
</div>
<div id="S5.p21" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">The <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">slowSample</span> when-clause is evaluated at every 5th occurrence of the
<span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">fastSample</span> when-clause.</span>]</p>
</div>
<div id="S5.p22" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">The single assignment rule and the requirement to explicitly
program the synchronization of events allow a certain degree of model
verification already at compile time.</span>]</p>
</div>
</section>
<section id="initialization-initial-equation-and-initial-algorithm" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">8.6 </span>Initialization, initial equation, and initial algorithm</h2>

<div id="S6.p1" class="ltx_para">
<p class="ltx_p">Before any operation is carried out with a Modelica model (e.g., simulation or linearization), initialization takes place to assign consistent values for all variables present in the model.
During this phase, called the <em class="ltx_emph ltx_font_italic">initialization problem</em>, also the derivatives (<span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">der</span>), and the pre-variables (<span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">pre</span>), are interpreted as unknown algebraic variables.
The initialization uses all equations and algorithms that are utilized in the intended operation (such as simulation or linearization).
</p>
</div>
<div id="S6.p2" class="ltx_para">
<p class="ltx_p">The equations of a when-clause are active during initialization, if and only if they are explicitly enabled with <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">initial</span>()</span>, and only in one of the two forms
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">initial</span>()<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span></span> or <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span><span class="ltx_text ltx_lst_space"> </span>{<math id="S6.p2.m1" class="ltx_Math" alttext="\ldots" display="inline"><mi mathbackground="#FFFFFF" mathvariant="normal">…</mi></math>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">initial</span>(),<span class="ltx_text ltx_lst_space"> </span><math id="S6.p2.m2" class="ltx_Math" alttext="\ldots" display="inline"><mi mathbackground="#FFFFFF" mathvariant="normal">…</mi></math>}<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span></span> (and similarly for <span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_bold" style="color:#003378;background-color:#FFFFFF;">elsewhen</span> and algorithms see below). In this case, the when-clause equations remain active during the
whole initialization phase. In case of a <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">reinit</span>(<span class="ltx_text ltx_lst_identifier">x</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">expr</span>)</span> being active during initialization (due to being inside <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">initial</span>()</span>) this is interpreted as adding
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">x</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">expr</span></span> (the <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">reinit</span>-equation) as an initial equation.</p>
</div>
<div id="S6.p3" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">If a when-clause equation <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">v</span><span class="ltx_text ltx_lst_space ltx_font_upright"> </span><span class="ltx_text ltx_font_upright">=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">expr</span>;</span></span> is not active during the initialization phase, the equation <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">v</span><span class="ltx_text ltx_lst_space ltx_font_upright"> </span><span class="ltx_text ltx_font_upright">=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">pre</span>(<span class="ltx_text ltx_lst_identifier">v</span>)</span></span> is added for
initialization. This follows from the mapping rule of when-clause equations. If the condition of the when-clause contains <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_bold ltx_font_upright" style="color:#003378;">initial</span><span class="ltx_text ltx_font_upright">()</span></span>,
but not in one of the specific forms, the when-clause is not active during initialization: <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_bold ltx_font_upright" style="color:#003378;">when</span><span class="ltx_text ltx_lst_space ltx_font_upright"> </span><span class="ltx_text ltx_lst_keyword ltx_font_upright" style="color:#003378;">not</span><span class="ltx_text ltx_lst_space ltx_font_upright"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold ltx_font_upright" style="color:#003378;">initial</span><span class="ltx_text ltx_font_upright">()<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">print</span>(<span class="ltx_text ltx_lst_string" style="color:#000000;">"simulation<span class="ltx_text ltx_lst_space"> </span>started"</span>);<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span>;</span></span></span>]</p>
</div>
<div id="S6.p4" class="ltx_para">
<p class="ltx_p">The algorithmic statements within a when-statement are active during initialization, if and only they are explicitly enabled with <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">initial</span>()</span>, and only in one of the two forms
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">initial</span>()<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span></span> or <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span><span class="ltx_text ltx_lst_space"> </span>{<math id="S6.p4.m1" class="ltx_Math" alttext="\ldots" display="inline"><mi mathbackground="#FFFFFF" mathvariant="normal">…</mi></math>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">initial</span>(),<span class="ltx_text ltx_lst_space"> </span><math id="S6.p4.m2" class="ltx_Math" alttext="\ldots" display="inline"><mi mathbackground="#FFFFFF" mathvariant="normal">…</mi></math>}<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span></span>. In this case, the algorithmic statements within the when-statement remain active during the whole
initialization phase.</p>
</div>
<div id="S6.p5" class="ltx_para">
<p class="ltx_p">An active when-clause inactivates the following <span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_bold" style="color:#003378;background-color:#FFFFFF;">elsewhen</span> (similarly as for when-clauses during simulation), but apart from that
the first <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">elsewhen</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">initial</span>()<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span></span> or <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">elsewhen</span><span class="ltx_text ltx_lst_space"> </span>{<math id="S6.p5.m1" class="ltx_Math" alttext="\ldots" display="inline"><mi mathbackground="#FFFFFF" mathvariant="normal">…</mi></math>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">initial</span>(),<span class="ltx_text ltx_lst_space"> </span><math id="S6.p5.m2" class="ltx_Math" alttext="\ldots" display="inline"><mi mathbackground="#FFFFFF" mathvariant="normal">…</mi></math>}<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span></span> is similarly active during initialization as
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">initial</span>()<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span></span> or <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span><span class="ltx_text ltx_lst_space"> </span>{<math id="S6.p5.m3" class="ltx_Math" alttext="\ldots" display="inline"><mi mathbackground="#FFFFFF" mathvariant="normal">…</mi></math>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">initial</span>(),<span class="ltx_text ltx_lst_space"> </span><math id="S6.p5.m4" class="ltx_Math" alttext="\ldots" display="inline"><mi mathbackground="#FFFFFF" mathvariant="normal">…</mi></math>}<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span></span>.</p>
</div>
<div id="S6.p6" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">That means that any subsequent <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_bold ltx_font_upright" style="color:#003378;">elsewhen</span><span class="ltx_text ltx_lst_space ltx_font_upright"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold ltx_font_upright" style="color:#003378;">initial</span><span class="ltx_text ltx_font_upright">()</span></span> has no effect,
similarly as <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_bold ltx_font_upright" style="color:#003378;">when</span><span class="ltx_text ltx_lst_space ltx_font_upright"> </span><span class="ltx_text ltx_lst_keyword ltx_font_upright" style="color:#003378;">false</span><span class="ltx_text ltx_lst_space ltx_font_upright"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold ltx_font_upright" style="color:#003378;">then</span></span>.</span>]</p>
</div>
<div id="S6.p7" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">There is no special handling of inactive when-statements during initialization, instead
variables assigned in when-statements are initialized using <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">v</span><span class="ltx_text ltx_lst_space ltx_font_upright"> </span><span class="ltx_text ltx_font_upright">:=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">pre</span>(<span class="ltx_text ltx_lst_identifier">v</span>)</span></span>
before the body of the algorithm (since they are discrete), see <a href="statements-and-algorithm-sections.html#execution-of-an-algorithm-in-a-model" title="11.1.2 Execution of an algorithm in a model ‣ 11.1 Algorithm Sections ‣ Chapter 11 Statements and Algorithm Sections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">11.1.2</span></a>.</span>]</p>
</div>
<div id="S6.p8" class="ltx_para">
<p class="ltx_p">Further constraints, necessary to determine the initial values of all
variables, can be defined in the following ways:</p>
<ol id="S6.I1" class="ltx_enumerate">
<li id="S6.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span> 
<div id="S6.I1.i1.p1" class="ltx_para">
<p class="ltx_p">As equations in an <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">initial</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span></span> section or as assignments in an <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">initial</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">algorithm</span></span> section.
The equations and assignments in these initial sections are purely algebraic, stating constraints between the variables at the initial time instant.
It is not allowed to use when-clauses in these sections.</p>
</div>
</li>
<li id="S6.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span> 
<div id="S6.I1.i2.p1" class="ltx_para">
<p class="ltx_p">For a non-discrete (that is continuous-time) <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">Real</span> variable <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">vc</span>, the equation <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">pre</span>(<span class="ltx_text ltx_lst_identifier">vc</span>)<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">vc</span></span> is added to the initialization equations.</p>
</div>
<div id="S6.I1.i2.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">If <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords3 ltx_font_upright" style="color:#543D08;">pre</span><span class="ltx_text ltx_font_upright">(<span class="ltx_text ltx_lst_identifier">vc</span>)</span></span> is not present in the flattened model, a tool may choose not to introduce this equation, or if it was introduced
it can eliminate it (to avoid the introduction of many dummy variables <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords3 ltx_font_upright" style="color:#543D08;">pre</span><span class="ltx_text ltx_font_upright">(<span class="ltx_text ltx_lst_identifier">vc</span>)</span></span>).</span>]</p>
</div>
</li>
<li id="S6.I1.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">3.</span> 
<div id="S6.I1.i3.p1" class="ltx_para">
<p class="ltx_p">Implicitly by using the <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">start</span> attribute for variables with <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">fixed</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">true</span></span>. With <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">start</span> given by <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">startExpression</span>:</p>
<ul id="S6.I1.i3.I1" class="ltx_itemize">
<li id="S6.I1.i3.I0.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S6.I1.i3.I0.i1.p1" class="ltx_para">
<p class="ltx_p">For a non-discrete-time (that is continuous-time) <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">Real</span> variable <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">vc</span>, the equation <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">vc</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">startExpression</span></span> is added to the initialization equations.</p>
</div>
</li>
<li id="S6.I1.i3.I0.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S6.I1.i3.I0.i2.p1" class="ltx_para">
<p class="ltx_p">For a discrete-time variable <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">vd</span>, the equation <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">pre</span>(<span class="ltx_text ltx_lst_identifier">vd</span>)<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">startExpression</span></span> is added to the initialization equations.</p>
</div>
</li>
<li id="S6.I1.i3.I0.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S6.I1.i3.I0.i3.p1" class="ltx_para">
<p class="ltx_p">For a variable declared as <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">constant</span> or <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">parameter</span>, no equation is added to the initialization equations.</p>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="S6.p9" class="ltx_para">
<p class="ltx_p">For constants and parameters, the attribute <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">fixed</span> defaults to <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">true</span>, which is the only allowed value for a constant. For other variables,
<span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">fixed</span> defaults to <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">false</span>.</p>
</div>
<div id="S6.p10" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">start</span>-values of variables having <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">fixed</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">false</span></span> can be used as initial guesses, in case iterative solvers are used in the initialization phase.</p>
</div>
<div id="S6.p11" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">In case of iterative solver failure, it is recommended to specially report those variables for which the solver needs an initial guess, but which only have the default
value of the <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">start</span> attribute as defined in <a href="class-predefined-types-and-declarations.html#predefined-types-and-classes" title="4.8 Predefined Types and Classes ‣ Chapter 4 Classes, Predefined Types, and Declarations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">4.8</span></a>, since the lack of appropriate initial guesses is a likely cause of the solver failure.</span>]</p>
</div>
<div id="S6.p12" class="ltx_para">
<p class="ltx_p">If a parameter has a modifier for the <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">start</span> attribute, does not have <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">fixed</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">false</span></span>, and neither has a binding equation nor is part of a record having a binding equation,
the modifier for the <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">start</span> attribute can be used to add a parameter binding equation assigning the parameter to that <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">start</span> value. In this case a diagnostic message is
recommended in a simulation model.</p>
</div>
<div id="S6.p13" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">This is used in libraries to give non-zero defaults so that users can quickly combine models and simulate without setting parameters; but still easily find the parameters
that need to be set.</span>]</p>
</div>
<div id="S6.p14" class="ltx_para">
<p class="ltx_p">All variables declared as <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">parameter</span> having <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier">fixed</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">false</span></span> are treated as unknowns during the initialization phase, i.e. there must be additional equations for them – and
the <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">start</span>-value can be used as a guess-value during initialization.</p>
</div>
<div id="S6.p15" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">In the case a parameter has both a binding equation and <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">fixed</span><span class="ltx_text ltx_lst_space ltx_font_upright"> </span><span class="ltx_text ltx_font_upright">=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">false</span></span></span> a diagnostics is recommended, but the parameter should be solved from the binding equation.</span></p>
</div>
<div id="S6.p16" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">Non-discrete (that is continuous-time) <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="color:#543D08;background-color:#FFFFFF;">Real</span> variables <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">vc</span> have exactly one initialization value since the rules above assure that during initialization
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">vc</span><span class="ltx_text ltx_lst_space ltx_font_upright"> </span><span class="ltx_text ltx_font_upright">=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">pre</span>(<span class="ltx_text ltx_lst_identifier">vc</span>)<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">vc</span>.<span class="ltx_text ltx_lst_identifier">startExpression</span></span></span> (if <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">fixed</span><span class="ltx_text ltx_lst_space ltx_font_upright"> </span><span class="ltx_text ltx_font_upright">=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">true</span></span></span>).</span></p>
</div>
<div id="S6.p17" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">Before the start of the integration, it must be guaranteed that for all variables <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">v</span>, <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">v</span><span class="ltx_text ltx_lst_space ltx_font_upright"> </span><span class="ltx_text ltx_font_upright">=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">pre</span>(<span class="ltx_text ltx_lst_identifier">v</span>)</span></span>. If this is not the case for some variables
<span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">vi</span>, <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords3 ltx_font_upright" style="color:#543D08;">pre</span><span class="ltx_text ltx_font_upright">(<span class="ltx_text ltx_lst_identifier">vi</span>)<span class="ltx_text ltx_lst_space"> </span>:=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">vi</span></span></span> must be set and an event iteration at the initial time must follow, so the model is re-evaluated, until this condition is fulfilled.</span></p>
</div>
<div id="S6.p18" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">A Modelica translator may first transform the continuous equations of a model, at least conceptually, to state space form. This may require to differentiate equations for index
reduction, i.e., additional equations and, in some cases, additional unknown variables are introduced. This whole set of equations, together with the additional constraints
defined above, should lead to an algebraic system of equations where the number of equations and the number of all variables (including <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="color:#003378;background-color:#FFFFFF;">der</span> and <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="color:#543D08;background-color:#FFFFFF;">pre</span>
variables) is equal. Often, this is a nonlinear system of equations and therefore it may be necessary to provide appropriate guess values (i.e., <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">start</span> values and
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_upright">fixed</span><span class="ltx_text ltx_lst_space ltx_font_upright"> </span><span class="ltx_text ltx_font_upright">=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">false</span></span></span>) in order to compute a solution numerically.</span></p>
</div>
<div id="S6.p19" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">It may be difficult for a user to figure out how many initial equations have to be added, especially if the system has a higher index. A tool may add or remove initial equations
automatically such that the resulting system is structurally nonsingular. In these cases diagnostics are appropriate since the result is not unique and not necessarily what the user
expects. A missing initial value of a discrete-time variable which does not influence the simulation result, may be automatically set to the <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">start</span> value or its default without
informing the user. For example, variables assigned in a when-clause which are not accessed outside of the when-clause and where <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="color:#543D08;background-color:#FFFFFF;">pre</span> is not explicitly
used on these variables, do not have an effect on the simulation.</span>]</p>
</div>
<div id="S6.p20" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Example:
Continuous time controller initialized in steady-state:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ICBSZWFsIHkoZml4ZWQgPSBmYWxzZSk7ICAvLyBmaXhlZD1mYWxzZSBpcyByZWR1bmRhbnQKZXF1YXRpb24KICBkZXIoeSkgPSBhICogeSArIGIgKiB1Owppbml0aWFsIGVxdWF0aW9uCiAgZGVyKHkpID0gMDs=">⬇</a></div>
<div id="lstnumberx1739" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">y</span>(<span class="ltx_text ltx_lst_identifier">fixed</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">false</span>);<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>fixed=false<span class="ltx_text ltx_lst_space"> </span>is<span class="ltx_text ltx_lst_space"> </span>redundant</span>
</div>
<div id="lstnumberx1740" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx1741" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">der</span>(<span class="ltx_text ltx_lst_identifier">y</span>)<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">a</span><span class="ltx_text ltx_lst_space"> </span>*<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">y</span><span class="ltx_text ltx_lst_space"> </span>+<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">b</span><span class="ltx_text ltx_lst_space"> </span>*<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">u</span>;
</div>
<div id="lstnumberx1742" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">initial</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx1743" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">der</span>(<span class="ltx_text ltx_lst_identifier">y</span>)<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span>0;
</div>
</div>
</div>
<div id="S6.p21" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">This has the following solution at initialization:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ZGVyKHkpID0gMDsKeSA9IC0gYiAvIGEgKiB1Ow==">⬇</a></div>
<div id="lstnumberx1744" class="ltx_listingline">
<span class="ltx_text ltx_lst_keyword" style="color:#003378;">der</span>(<span class="ltx_text ltx_lst_identifier">y</span>)<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span>0;
</div>
<div id="lstnumberx1745" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier">y</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span>-<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">b</span><span class="ltx_text ltx_lst_space"> </span>/<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">a</span><span class="ltx_text ltx_lst_space"> </span>*<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">u</span>;
</div>
</div>
<p class="ltx_p">]</p>
</div>
<div id="S6.p22" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Example:
Continuous time controller initialized either in steady-state or by providing a <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">start</span> value for state <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">y</span>:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ICBwYXJhbWV0ZXIgQm9vbGVhbiBzdGVhZHlTdGF0ZSA9IHRydWU7CiAgcGFyYW1ldGVyIFJlYWwgeTAgPSAwICJzdGFydCB2YWx1ZSBmb3IgeSwgaWYgbm90IHN0ZWFkeVN0YXRlIjsKICBSZWFsIHk7CmVxdWF0aW9uCiAgZGVyKHkpID0gYSAqIHkgKyBiICogdTsKaW5pdGlhbCBlcXVhdGlvbgogIGlmIHN0ZWFkeVN0YXRlIHRoZW4KICAgIGRlcih5KSA9IDA7CiAgZWxzZQogICAgeSA9IHkwOwogIGVuZCBpZjs=">⬇</a></div>
<div id="lstnumberx1746" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">parameter</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Boolean</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">steadyState</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">true</span>;
</div>
<div id="lstnumberx1747" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">parameter</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">y0</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span>0<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_string" style="color:#000000;">"start<span class="ltx_text ltx_lst_space"> </span>value<span class="ltx_text ltx_lst_space"> </span>for<span class="ltx_text ltx_lst_space"> </span>y,<span class="ltx_text ltx_lst_space"> </span>if<span class="ltx_text ltx_lst_space"> </span>not<span class="ltx_text ltx_lst_space"> </span>steadyState"</span>;
</div>
<div id="lstnumberx1748" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">y</span>;
</div>
<div id="lstnumberx1749" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx1750" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">der</span>(<span class="ltx_text ltx_lst_identifier">y</span>)<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">a</span><span class="ltx_text ltx_lst_space"> </span>*<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">y</span><span class="ltx_text ltx_lst_space"> </span>+<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">b</span><span class="ltx_text ltx_lst_space"> </span>*<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">u</span>;
</div>
<div id="lstnumberx1751" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">initial</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx1752" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">steadyState</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx1753" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">der</span>(<span class="ltx_text ltx_lst_identifier">y</span>)<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span>0;
</div>
<div id="lstnumberx1754" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">else</span>
</div>
<div id="lstnumberx1755" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_identifier">y</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">y0</span>;
</div>
<div id="lstnumberx1756" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">if</span>;
</div>
</div>
</div>
<div id="S6.p23" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">This can also be written as follows (this form is less clear):</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ICBwYXJhbWV0ZXIgQm9vbGVhbiBzdGVhZHlTdGF0ZSA9IHRydWU7CiAgUmVhbCB5ICAgIChzdGFydCA9IDAsIGZpeGVkID0gbm90IHN0ZWFkeVN0YXRlKTsKICBSZWFsIGRlcl95KHN0YXJ0ID0gMCwgZml4ZWQgPSBzdGVhZHlTdGF0ZSkgPSBkZXIoeSk7CmVxdWF0aW9uCiAgZGVyKHkpID0gYSAqIHkgKyBiICogdTs=">⬇</a></div>
<div id="lstnumberx1757" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">parameter</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Boolean</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">steadyState</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">true</span>;
</div>
<div id="lstnumberx1758" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">y</span><span class="ltx_text ltx_lst_space">    </span>(<span class="ltx_text ltx_lst_identifier">start</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span>0,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">fixed</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">not</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">steadyState</span>);
</div>
<div id="lstnumberx1759" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">der_y</span>(<span class="ltx_text ltx_lst_identifier">start</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span>0,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">fixed</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">steadyState</span>)<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">der</span>(<span class="ltx_text ltx_lst_identifier">y</span>);
</div>
<div id="lstnumberx1760" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx1761" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">der</span>(<span class="ltx_text ltx_lst_identifier">y</span>)<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">a</span><span class="ltx_text ltx_lst_space"> </span>*<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">y</span><span class="ltx_text ltx_lst_space"> </span>+<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">b</span><span class="ltx_text ltx_lst_space"> </span>*<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">u</span>;
</div>
</div>
<p class="ltx_p">]</p>
</div>
<div id="S6.p24" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Example:
Discrete time controller initialized in steady-state:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ICBkaXNjcmV0ZSBSZWFsIHk7CmVxdWF0aW9uCiAgd2hlbiB7aW5pdGlhbCgpLCBzYW1wbGVUcmlnZ2VyfSB0aGVuCiAgICB5ID0gYSAqIHByZSh5KSArIGIgKiB1OwogIGVuZCB3aGVuOwppbml0aWFsIGVxdWF0aW9uCiAgeSA9IHByZSh5KTs=">⬇</a></div>
<div id="lstnumberx1762" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">discrete</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Real</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">y</span>;
</div>
<div id="lstnumberx1763" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx1764" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span><span class="ltx_text ltx_lst_space"> </span>{<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">initial</span>(),<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">sampleTrigger</span>}<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx1765" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">    </span><span class="ltx_text ltx_lst_identifier">y</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">a</span><span class="ltx_text ltx_lst_space"> </span>*<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">pre</span>(<span class="ltx_text ltx_lst_identifier">y</span>)<span class="ltx_text ltx_lst_space"> </span>+<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">b</span><span class="ltx_text ltx_lst_space"> </span>*<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">u</span>;
</div>
<div id="lstnumberx1766" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">when</span>;
</div>
<div id="lstnumberx1767" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">initial</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx1768" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">y</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">pre</span>(<span class="ltx_text ltx_lst_identifier">y</span>);
</div>
</div>
</div>
<div id="S6.p25" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">This leads to the following equations during initialization:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,eSA9IGEgKiBwcmUoeSkgKyBiICogdTsKeSA9IHByZSh5KTs=">⬇</a></div>
<div id="lstnumberx1769" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier">y</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">a</span><span class="ltx_text ltx_lst_space"> </span>*<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">pre</span>(<span class="ltx_text ltx_lst_identifier">y</span>)<span class="ltx_text ltx_lst_space"> </span>+<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">b</span><span class="ltx_text ltx_lst_space"> </span>*<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">u</span>;
</div>
<div id="lstnumberx1770" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier">y</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">pre</span>(<span class="ltx_text ltx_lst_identifier">y</span>);
</div>
</div>
<p class="ltx_p"><span class="ltx_text ltx_font_italic">with the solution:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,eSA6PSAoYiAqIHUpIC8gKDEgLSBhKTsKcHJlKHkpIDo9IHk7">⬇</a></div>
<div id="lstnumberx1771" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier">y</span><span class="ltx_text ltx_lst_space"> </span>:=<span class="ltx_text ltx_lst_space"> </span>(<span class="ltx_text ltx_lst_identifier">b</span><span class="ltx_text ltx_lst_space"> </span>*<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">u</span>)<span class="ltx_text ltx_lst_space"> </span>/<span class="ltx_text ltx_lst_space"> </span>(1<span class="ltx_text ltx_lst_space"> </span>-<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">a</span>);
</div>
<div id="lstnumberx1772" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">pre</span>(<span class="ltx_text ltx_lst_identifier">y</span>)<span class="ltx_text ltx_lst_space"> </span>:=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">y</span>;
</div>
</div>
<p class="ltx_p">]</p>
</div>
<section id="the-number-of-equations-needed-for-initialization" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">8.6.1 </span>The Number of Equations Needed for Initialization</h3>

<div id="S6.SS1.p1" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">In general, for the case of a pure (first order) ordinary
differential equation (ODE) system with <math id="S6.SS1.p1.m1" class="ltx_Math" alttext="n" display="inline"><mi>n</mi></math> state variables and <math id="S6.SS1.p1.m2" class="ltx_Math" alttext="m" display="inline"><mi>m</mi></math> output
variables, we will have <math id="S6.SS1.p1.m3" class="ltx_Math" alttext="n+m" display="inline"><mrow><mi>n</mi><mo mathvariant="normal">+</mo><mi>m</mi></mrow></math> unknowns in the simulation problem. The ODE
initialization problem has <math id="S6.SS1.p1.m4" class="ltx_Math" alttext="n" display="inline"><mi>n</mi></math> additional unknowns corresponding to the
derivative variables. At initialization of an ODE we will need to find
the values of <math id="S6.SS1.p1.m5" class="ltx_Math" alttext="2n+m" display="inline"><mrow><mrow><mn mathvariant="normal">2</mn><mo mathvariant="italic">⁢</mo><mi>n</mi></mrow><mo mathvariant="normal">+</mo><mi>m</mi></mrow></math> variables, in contrast to just <math id="S6.SS1.p1.m6" class="ltx_Math" alttext="n+m" display="inline"><mrow><mi>n</mi><mo mathvariant="normal">+</mo><mi>m</mi></mrow></math> variables to be
solved for during simulation.</span>]</p>
</div>
<div id="S6.SS1.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Example:
Consider the following simple equation system:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ZGVyKHgxKSA9IGYxKHgxKTsKZGVyKHgyKSA9IGYyKHgyKTsKeSA9IHgxK3gyK3U7">⬇</a></div>
<div id="lstnumberx1773" class="ltx_listingline">
<span class="ltx_text ltx_lst_keyword" style="color:#003378;">der</span>(<span class="ltx_text ltx_lst_identifier">x1</span>)<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">f1</span>(<span class="ltx_text ltx_lst_identifier">x1</span>);
</div>
<div id="lstnumberx1774" class="ltx_listingline">
<span class="ltx_text ltx_lst_keyword" style="color:#003378;">der</span>(<span class="ltx_text ltx_lst_identifier">x2</span>)<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">f2</span>(<span class="ltx_text ltx_lst_identifier">x2</span>);
</div>
<div id="lstnumberx1775" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier">y</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">x1</span>+<span class="ltx_text ltx_lst_identifier">x2</span>+<span class="ltx_text ltx_lst_identifier">u</span>;
</div>
</div>
</div>
<div id="S6.SS1.p3" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">Here we have three variables with unknown values: two dynamic
variables that also are state variables, <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">x1</span> and <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">x2</span>, i.e.,
<math id="S6.SS1.p3.m1" class="ltx_Math" alttext="n=2" display="inline"><mrow><mi>n</mi><mo mathvariant="normal">=</mo><mn mathvariant="normal">2</mn></mrow></math>, one output variable <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">y</span>, i.e., <math id="S6.SS1.p3.m2" class="ltx_Math" alttext="m=1" display="inline"><mrow><mi>m</mi><mo mathvariant="normal">=</mo><mn mathvariant="normal">1</mn></mrow></math>, and one input variable <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">u</span> with
known value. A consistent solution of the initial value problem
providing initial values for <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">x1</span>, <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">x2</span>, <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keyword ltx_font_upright" style="color:#003378;">der</span><span class="ltx_text ltx_font_upright">(<span class="ltx_text ltx_lst_identifier">x1</span>)</span></span>,
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keyword ltx_font_upright" style="color:#003378;">der</span><span class="ltx_text ltx_font_upright">(<span class="ltx_text ltx_lst_identifier">x2</span>)</span></span>, and <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">y</span> needs to be found. Two additional initial
equations thus need to be provided to solve the initialization problem.</span></p>
</div>
<div id="S6.SS1.p4" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">Regarding DAEs, only that at most <math id="S6.SS1.p4.m1" class="ltx_Math" alttext="n" display="inline"><mi>n</mi></math> additional equations are
needed to arrive at <math id="S6.SS1.p4.m2" class="ltx_Math" alttext="2n+m" display="inline"><mrow><mrow><mn mathvariant="normal">2</mn><mo mathvariant="italic">⁢</mo><mi>n</mi></mrow><mo mathvariant="normal">+</mo><mi>m</mi></mrow></math> equations in the initialization system. The
reason is that in a higher index DAE problem the number of dynamic
continuous-time state variables might be less than the number of state
variables <math id="S6.SS1.p4.m3" class="ltx_Math" alttext="n" display="inline"><mi>n</mi></math>. As noted in <a href="#initialization-initial-equation-and-initial-algorithm" title="8.6 Initialization, initial equation, and initial algorithm ‣ Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">8.6</span></a> a tool may add/remove
initial equations to fulfill this requirement, if appropriate
diagnostics are given.</span>]</p>
</div>
</section>
<section id="recommended-selection-of-start-values" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">8.6.2 </span>Recommended selection of start-values</h3>

<div id="S6.SS2.p1" class="ltx_para">
<p class="ltx_p">In general many variables have start-values that are not fixed and
selecting a sub-set of these can give a consistent set of start-values
close to the user-expectations. The following gives a non-normative
procedure for finding such a sub-set.</p>
</div>
<div id="S6.SS2.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">A model has a hierarchical component structure. Each component
of a model can be given a unique model component hierarchy level number.
The top level model has a level number of 1. The level number increases
by 1 for each level down in the model component hierarchy. The model
component hierarchy level number is used to give start values a
confidence number, where a lower number means that the start value is
more confident. Loosely, if the start value is set or modified on level
i then the confidence number is i. If a start value is set by a possibly
hierarchical modifier at the top level, then this start value has the
highest confidence, namely 1 irrespectively on what level, the variable
itself is declared.</span>]</p>
</div>
</section>
</section>
</section>
</div>
<footer class="ltx_page_footer">
<div>
<a href="inheritance-modification-and-redeclaration.html" title="Chapter 7 Inheritance, Modification, and Redeclaration ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref" rel="prev"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7 </span>Inheritance, Modification, and Redeclaration</span></a><a href="bib.html" title="References ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref" rel="bibliography"><span class="ltx_text ltx_ref_title">References</span></a><a href="idx.html" title="Index ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref" rel="index"><span class="ltx_text ltx_ref_title">Index</span></a><a href="connectors-and-connections.html" title="Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref" rel="next"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9 </span>Connectors and Connections</span></a>
</div>
<div class="ltx_page_logo">Generated  on Sat May  1 12:45:50 2021 by <a href="http://dlmf.nist.gov/LaTeXML/">LaTeXML <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg==" alt="[LOGO]"></a>
</div></footer>
</div>
</body>
</html>
