<!DOCTYPE html><html lang="en">
<head>
<title>B Modelica DAE Representation‣ Modelica® Language Specification version 3.6-dev</title>
<!--Generated on Sat May  1 12:45:50 2021 by LaTeXML (version 0.8.5) http://dlmf.nist.gov/LaTeXML/.-->
<!--Document created on May 1, 2021.-->

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="LaTeXML.css" type="text/css">
<link rel="stylesheet" href="ltx-report.css" type="text/css">
<link rel="stylesheet" href="ltx-listings.css" type="text/css">
<link rel="stylesheet" href="css/MLS.css" type="text/css">
<link rel="stylesheet" href="css/MLS-navbar-left.css" type="text/css">
<script src="LaTeXML-maybeMathjax.js" type="text/javascript"></script>
<link rel="up" href="MLS.html" title="Modelica® Language Specification version 3.6-dev">
<link rel="start" href="MLS.html" title="Modelica® Language Specification version 3.6-dev">
<link rel="prev" href="modelica-concrete-syntax.html" title="Appendix A Modelica Concrete Syntax ‣ Modelica® Language Specification version 3.6-dev">
<link rel="next" href="derivation-of-stream-equations.html" title="Appendix C Derivation of Stream Equations ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="preface.html" title="Preface ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="introduction1.html" title="Chapter 1 Introduction ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="lexical-structure.html" title="Chapter 2 Lexical Structure ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="operators-and-expressions.html" title="Chapter 3 Operators and Expressions ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="class-predefined-types-and-declarations.html" title="Chapter 4 Classes, Predefined Types, and Declarations ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="scoping-name-lookup-and-flattening.html" title="Chapter 5 Scoping, Name Lookup, and Flattening ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="interface-or-type-relationships.html" title="Chapter 6 Interface or Type Relationships ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="inheritance-modification-and-redeclaration.html" title="Chapter 7 Inheritance, Modification, and Redeclaration ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="equations.html" title="Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="connectors-and-connections.html" title="Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="arrays.html" title="Chapter 10 Arrays ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="statements-and-algorithm-sections.html" title="Chapter 11 Statements and Algorithm Sections ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="functions.html" title="Chapter 12 Functions ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="packages.html" title="Chapter 13 Packages ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="overloaded-operators.html" title="Chapter 14 Overloaded Operators ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="stream-connectors.html" title="Chapter 15 Stream Connectors ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="synchronous-language-elements.html" title="Chapter 16 Synchronous Language Elements ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="state-machines.html" title="Chapter 17 State Machines ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="annotations.html" title="Chapter 18 Annotations ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="unit-expressions.html" title="Chapter 19 Unit Expressions ‣ Modelica® Language Specification version 3.6-dev">
<link rel="chapter" href="the-modelica-standard-library.html" title="Chapter 20 The Modelica Standard Library ‣ Modelica® Language Specification version 3.6-dev">
<link rel="appendix" href="modelica-concrete-syntax.html" title="Appendix A Modelica Concrete Syntax ‣ Modelica® Language Specification version 3.6-dev">
<link rel="appendix" href="derivation-of-stream-equations.html" title="Appendix C Derivation of Stream Equations ‣ Modelica® Language Specification version 3.6-dev">
<link rel="appendix" href="modelica-revision-history.html" title="Appendix D Modelica Revision History ‣ Modelica® Language Specification version 3.6-dev">
<link rel="bibliography" href="bib.html" title="References ‣ Modelica® Language Specification version 3.6-dev">
<link rel="index" href="idx.html" title="Index ‣ Modelica® Language Specification version 3.6-dev">
<meta name="keywords" lang="en" content="DAE, hybrid DAE">
</head>
<body>
<nav class="ltx_page_navbar"><a href="MLS.html" title="Modelica® Language Specification version 3.6-dev" class="ltx_ref" rel="start"><span class="ltx_text ltx_ref_title">Modelica<sup class="ltx_sup">®</sup> Language Specification version 3.6-dev</span></a>
<div class="ltx_TOC">
<ul class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="preface.html" title="Preface ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title">Preface</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="introduction1.html" title="Chapter 1 Introduction ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1 </span>Introduction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="lexical-structure.html" title="Chapter 2 Lexical Structure ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2 </span>Lexical Structure</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="operators-and-expressions.html" title="Chapter 3 Operators and Expressions ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3 </span>Operators and Expressions</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="class-predefined-types-and-declarations.html" title="Chapter 4 Classes, Predefined Types, and Declarations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4 </span>Classes, Predefined Types, and Declarations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="scoping-name-lookup-and-flattening.html" title="Chapter 5 Scoping, Name Lookup, and Flattening ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5 </span>Scoping, Name Lookup, and Flattening</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="interface-or-type-relationships.html" title="Chapter 6 Interface or Type Relationships ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">6 </span>Interface or Type Relationships</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="inheritance-modification-and-redeclaration.html" title="Chapter 7 Inheritance, Modification, and Redeclaration ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7 </span>Inheritance, Modification, and Redeclaration</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="equations.html" title="Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8 </span>Equations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="connectors-and-connections.html" title="Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9 </span>Connectors and Connections</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="arrays.html" title="Chapter 10 Arrays ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">10 </span>Arrays</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="statements-and-algorithm-sections.html" title="Chapter 11 Statements and Algorithm Sections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">11 </span>Statements and Algorithm Sections</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="functions.html" title="Chapter 12 Functions ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">12 </span>Functions</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="packages.html" title="Chapter 13 Packages ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">13 </span>Packages</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="overloaded-operators.html" title="Chapter 14 Overloaded Operators ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">14 </span>Overloaded Operators</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="stream-connectors.html" title="Chapter 15 Stream Connectors ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">15 </span>Stream Connectors</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="synchronous-language-elements.html" title="Chapter 16 Synchronous Language Elements ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">16 </span>Synchronous Language Elements</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="state-machines.html" title="Chapter 17 State Machines ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">17 </span>State Machines</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="annotations.html" title="Chapter 18 Annotations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">18 </span>Annotations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="unit-expressions.html" title="Chapter 19 Unit Expressions ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">19 </span>Unit Expressions</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="the-modelica-standard-library.html" title="Chapter 20 The Modelica Standard Library ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">20 </span>The Modelica Standard Library</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="modelica-concrete-syntax.html" title="Appendix A Modelica Concrete Syntax ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A </span>Modelica Concrete Syntax</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix ltx_ref_self"><span class="ltx_ref ltx_ref_self"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">B </span>Modelica DAE Representation</span></span></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="derivation-of-stream-equations.html" title="Appendix C Derivation of Stream Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C </span>Derivation of Stream Equations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="modelica-revision-history.html" title="Appendix D Modelica Revision History ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">D </span>Modelica Revision History</span></a></li>
<li class="ltx_tocentry ltx_tocentry_bibliography"><a href="bib.html" title="References ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title">References</span></a></li>
<li class="ltx_tocentry ltx_tocentry_index"><a href="idx.html" title="Index ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_title">Index</span></a></li>
</ul>
</div>
</nav>
<div class="ltx_page_main">
<header class="ltx_page_header">
<div>
<a href="MLS.html" title="Modelica® Language Specification version 3.6-dev" class="ltx_ref" rel="up"><span class="ltx_text ltx_ref_title">Modelica<sup class="ltx_sup">®</sup> Language Specification version 3.6-dev</span></a><a href="modelica-concrete-syntax.html" title="Appendix A Modelica Concrete Syntax ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref" rel="prev"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A </span>Modelica Concrete Syntax</span></a><a href="derivation-of-stream-equations.html" title="Appendix C Derivation of Stream Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref" rel="next"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C </span>Derivation of Stream Equations</span></a>
</div></header>
<div class="ltx_page_content">
<section class="ltx_appendix" lang="en">
<h1 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix B </span>Modelica DAE Representation</h1>
<div class="ltx_dates">(May 1, 2021)</div>

<div id="p1" class="ltx_para">
<p class="ltx_p">In this appendix, the mapping of a Modelica model into an appropriate
mathematical description form is discussed.</p>
</div>
<div id="p2" class="ltx_para">
<p class="ltx_p">In a first step, a Modelica translator transforms a hierarchical
Modelica simulation model into a “flat” set of Modelica
“statements”, consisting of the equation and algorithm sections of all
used components by:</p>
<ul id="S0.I1" class="ltx_itemize">
<li id="S0.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S0.I1.i1.p1" class="ltx_para">
<p class="ltx_p">Expanding all class definitions (flattening the inheritance tree) and
adding the equations and assignment statements of the expanded classes
for every instance of the model.</p>
</div>
</li>
<li id="S0.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S0.I1.i2.p1" class="ltx_para">
<p class="ltx_p">Replacing all connect-equations by the corresponding equations of the
connection set (see <a href="connectors-and-connections.html#generation-of-connection-equations" title="9.2 Generation of Connection Equations ‣ Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">9.2</span></a>).</p>
</div>
</li>
<li id="S0.I1.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S0.I1.i3.p1" class="ltx_para">
<p class="ltx_p">Mapping all algorithm sections to equation sets.</p>
</div>
</li>
<li id="S0.I1.i4" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S0.I1.i4.p1" class="ltx_para">
<p class="ltx_p">Mapping all when-clauses to equation sets (see <a href="equations.html#when-equations" title="8.3.5 When-Equations ‣ 8.3 Equations in Equation Sections ‣ Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">8.3.5</span></a>).</p>
</div>
</li>
</ul>
</div>
<div id="p3" class="ltx_para">
<p class="ltx_p">As a result of this transformation process, a set of equations is
obtained consisting of differential, algebraic and discrete equations of
the following form where (<math id="p3.m1" class="ltx_Math" alttext="{{v:=[p;t;\dot{x};x;y;z;m;\text{\lstinline{{\lst@@@set@language%
\lst@@@set@numbers\lst@@@set@frame\lst@@@set@rulecolor\lst@@@set@language%
\lst@@@set@language\lst@@@set@frame\normalsize{\@listingGroup{%
ltx_lst_keywords3}{\color[rgb]{0.33,0.24,0.03}pre}}}}}}(z);\text{\lstinline{{%
\lst@@@set@language\lst@@@set@numbers\lst@@@set@frame\lst@@@set@rulecolor%
\lst@@@set@language\lst@@@set@language\lst@@@set@frame\normalsize{%
\@listingGroup{ltx_lst_keywords3}{\color[rgb]{0.33,0.24,0.03}pre}}}}}}(m)]" display="inline"><mrow><mi>v</mi><mo>:=</mo><mrow><mo stretchy="false">[</mo><mi>p</mi><mo>;</mo><mi>t</mi><mo>;</mo><mover accent="true"><mi>x</mi><mo>˙</mo></mover><mo>;</mo><mi>x</mi><mo>;</mo><mi>y</mi><mo>;</mo><mi>z</mi><mo>;</mo><mi>m</mi><mo>;</mo><mrow><mtext class="ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" mathbackground="#FFFFFF" mathcolor="#543D08">pre</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo></mrow></mrow><mo>;</mo><mrow><mtext class="ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" mathbackground="#FFFFFF" mathcolor="#543D08">pre</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>m</mi><mo stretchy="false">)</mo></mrow></mrow><mo stretchy="false">]</mo></mrow></mrow></math>):</p>
<table id="E1" class="ltx_equationgroup ltx_eqn_table">

<tbody id="eq:dae"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="E1.1.m1" class="ltx_Math" alttext="0=f_{\mathrm{x}}(v,c)" display="block"><mrow><mn>0</mn><mo>=</mo><mrow><msub><mi>f</mi><mi mathvariant="normal">x</mi></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>v</mi><mo>,</mo><mi>c</mi><mo stretchy="false">)</mo></mrow></mrow></mrow></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(B.1a)</span></td>
</tr></tbody>
<tbody id="eq:dae-discrete-real"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="E1.2.m1" class="ltx_Math" alttext="{0=\begin{cases}f_{\mathrm{z}}(v,c)&amp;\text{at events}\\
z-\text{\lstinline{{\lst@@@set@language\lst@@@set@numbers\lst@@@set@frame%
\lst@@@set@rulecolor\lst@@@set@language\lst@@@set@language\lst@@@set@frame%
\normalsize{\@listingGroup{ltx_lst_keywords3}{\color[rgb]{0.33,0.24,0.03}pre}}%
}}}}(z)&amp;\text{otherwise}\end{cases}" display="block"><mrow><mn>0</mn><mo>=</mo><mrow><mo>{</mo><mtable columnspacing="5pt" displaystyle="true" rowspacing="0pt"><mtr><mtd columnalign="left"><mrow><msub><mi>f</mi><mi mathvariant="normal">z</mi></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>v</mi><mo>,</mo><mi>c</mi><mo stretchy="false">)</mo></mrow></mrow></mtd><mtd columnalign="left"><mtext>at events</mtext></mtd></mtr><mtr><mtd columnalign="left"><mrow><mi>z</mi><mo>-</mo><mrow><mtext class="ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" mathbackground="#FFFFFF" mathcolor="#543D08">pre</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo></mrow></mrow></mrow></mtd><mtd columnalign="left"><mtext>otherwise</mtext></mtd></mtr></mtable></mrow></mrow></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(B.1b)</span></td>
</tr></tbody>
<tbody id="eq:dae-discrete-valued"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="E1.3.m1" class="ltx_Math" alttext="m:=f_{\mathrm{m}}(v,c)" display="block"><mrow><mi>m</mi><mo>:=</mo><mrow><msub><mi>f</mi><mi mathvariant="normal">m</mi></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>v</mi><mo>,</mo><mi>c</mi><mo stretchy="false">)</mo></mrow></mrow></mrow></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(B.1c)</span></td>
</tr></tbody>
<tbody id="eq:crossing"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="E1.4.m1" class="ltx_Math" alttext="c:=f_{\mathrm{c}}(\mathit{relation}(v))" display="block"><mrow><mi>c</mi><mo>:=</mo><mrow><msub><mi>f</mi><mi mathvariant="normal">c</mi></msub><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mi>𝑟𝑒𝑙𝑎𝑡𝑖𝑜𝑛</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>v</mi><mo stretchy="false">)</mo></mrow></mrow><mo stretchy="false">)</mo></mrow></mrow></mrow></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(B.1d)</span></td>
</tr></tbody>
</table>
<p class="ltx_p">and where</p>
<ul id="S0.I2" class="ltx_itemize">
<li id="S0.I2.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S0.I2.i1.p1" class="ltx_para">
<p class="ltx_p"><math id="S0.I2.i1.p1.m1" class="ltx_Math" alttext="p" display="inline"><mi>p</mi></math>:
Modelica variables declared as <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">parameter</span> or <span class="ltx_text ltx_lst_keyword ltx_lst_language_modelica_short ltx_lstlisting" style="color:#003378;background-color:#FFFFFF;">constant</span>, i.e., variables without any time-dependency.
</p>
</div>
</li>
<li id="S0.I2.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S0.I2.i2.p1" class="ltx_para">
<p class="ltx_p"><math id="S0.I2.i2.p1.m1" class="ltx_Math" alttext="t" display="inline"><mi>t</mi></math>:
Modelica variable <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;">time</span>, the independent (real) variable.</p>
</div>
</li>
<li id="S0.I2.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S0.I2.i3.p1" class="ltx_para">
<p class="ltx_p"><math id="S0.I2.i3.p1.m1" class="ltx_Math" alttext="x(t)" display="inline"><mrow><mi>x</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow></mrow></math>:
Modelica variables of type <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">Real</span>, appearing differentiated.</p>
</div>
</li>
<li id="S0.I2.i4" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S0.I2.i4.p1" class="ltx_para">
<p class="ltx_p"><math id="S0.I2.i4.p1.m1" class="ltx_Math" alttext="y(t)" display="inline"><mrow><mi>y</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow></mrow></math>:
Continuous-time modelica variables of type <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">Real</span> that do not appear differentiated (= algebraic variables).</p>
</div>
</li>
<li id="S0.I2.i5" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S0.I2.i5.p1" class="ltx_para">
<p class="ltx_p"><math id="S0.I2.i5.p1.m1" class="ltx_Math" alttext="z(t_{\mathrm{e}})" display="inline"><mrow><mi>z</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mi>t</mi><mi mathvariant="normal">e</mi></msub><mo stretchy="false">)</mo></mrow></mrow></math>:
Discrete-time modelica variables of type <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">Real</span>. These variables change their value only at event instants <math id="S0.I2.i5.p1.m2" class="ltx_Math" alttext="t_{\mathrm{e}}" display="inline"><msub><mi>t</mi><mi mathvariant="normal">e</mi></msub></math>. <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">pre</span>(<span class="ltx_text ltx_lst_identifier">z</span>)</span> are the values of <math id="S0.I2.i5.p1.m3" class="ltx_Math" alttext="z" display="inline"><mi>z</mi></math> immediately before the current event occurred.</p>
</div>
</li>
<li id="S0.I2.i6" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S0.I2.i6.p1" class="ltx_para">
<p class="ltx_p"><math id="S0.I2.i6.p1.m1" class="ltx_Math" alttext="m(t_{\mathrm{e}})" display="inline"><mrow><mi>m</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mi>t</mi><mi mathvariant="normal">e</mi></msub><mo stretchy="false">)</mo></mrow></mrow></math>:
Modelica variables of discrete-valued types (<span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">Boolean</span>, <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">Integer</span>, etc) which are unknown. These variables change their value only at event instants <math id="S0.I2.i6.p1.m2" class="ltx_Math" alttext="t_{\mathrm{e}}" display="inline"><msub><mi>t</mi><mi mathvariant="normal">e</mi></msub></math>. <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">pre</span>(<span class="ltx_text ltx_lst_identifier">m</span>)</span> are the values of <math id="S0.I2.i6.p1.m3" class="ltx_Math" alttext="m" display="inline"><mi>m</mi></math> immediately before the current event occurred.</p>
</div>
</li>
<li id="S0.I2.i7" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S0.I2.i7.p1" class="ltx_para">
<p class="ltx_p"><math id="S0.I2.i7.p1.m1" class="ltx_Math" alttext="c(t_{\mathrm{e}})" display="inline"><mrow><mi>c</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mi>t</mi><mi mathvariant="normal">e</mi></msub><mo stretchy="false">)</mo></mrow></mrow></math>:
The conditions of all if-expressions generated including when-clauses after conversion, see <a href="equations.html#when-equations" title="8.3.5 When-Equations ‣ 8.3 Equations in Equation Sections ‣ Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">8.3.5</span></a>).</p>
</div>
</li>
<li id="S0.I2.i8" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S0.I2.i8.p1" class="ltx_para">
<p class="ltx_p"><math id="S0.I2.i8.p1.m1" class="ltx_Math" alttext="\mathit{relation}(v)" display="inline"><mrow><mi>𝑟𝑒𝑙𝑎𝑡𝑖𝑜𝑛</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mi>v</mi><mo stretchy="false">)</mo></mrow></mrow></math>:
A relation containing variables <math id="S0.I2.i8.p1.m2" class="ltx_Math" alttext="v_{i}" display="inline"><msub><mi>v</mi><mi>i</mi></msub></math>, e.g. <math id="S0.I2.i8.p1.m3" class="ltx_Math" alttext="v_{1}&gt;v_{2}" display="inline"><mrow><msub><mi>v</mi><mn>1</mn></msub><mo>&gt;</mo><msub><mi>v</mi><mn>2</mn></msub></mrow></math>, <math id="S0.I2.i8.p1.m4" class="ltx_Math" alttext="v_{3}\geq 0" display="inline"><mrow><msub><mi>v</mi><mn>3</mn></msub><mo>≥</mo><mn>0</mn></mrow></math>.</p>
</div>
</li>
</ul>
</div>
<div id="p4" class="ltx_para">
<p class="ltx_p">For simplicity, the special cases of <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">noEvent</span> and <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">reinit</span> are not contained in the equations
above and are not discussed below.
</p>
</div>
<div id="p5" class="ltx_para">
<p class="ltx_p">The key difference between the two groups of discrete-time variables <math id="p5.m1" class="ltx_Math" alttext="z" display="inline"><mi>z</mi></math> and and <math id="p5.m2" class="ltx_Math" alttext="m" display="inline"><mi>m</mi></math> here is how they are determined. The interpretation of the solved form of (<a href="#eq:dae-discrete-valued" title="(B.1c) ‣ (B.1) ‣ Appendix B Modelica DAE Representation ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">B.1c</span></a>) is that given values for everything else, there is a closed-form solution for <math id="p5.m3" class="ltx_Math" alttext="m" display="inline"><mi>m</mi></math> in the form of a sequence of assignments to each of the variables of <math id="p5.m4" class="ltx_Math" alttext="m" display="inline"><mi>m</mi></math> in turn – there must be no cyclic dependencies between the equations used to solve for <math id="p5.m5" class="ltx_Math" alttext="m" display="inline"><mi>m</mi></math>. Further, each of the original model equations behind (<a href="#eq:dae-discrete-valued" title="(B.1c) ‣ (B.1) ‣ Appendix B Modelica DAE Representation ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">B.1c</span></a>) must be given in solved form, at most requiring flipping sides of the equation to obtain the used assignment form. The interpretation of the non-solved form of (<a href="#eq:dae-discrete-real" title="(B.1b) ‣ (B.1) ‣ Appendix B Modelica DAE Representation ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">B.1b</span></a>) at events, on the other hand, is that at events, the discrete-time <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">Real</span> variables <math id="p5.m6" class="ltx_Math" alttext="z" display="inline"><mi>z</mi></math> are solved together with the continuous-time variables using (<a href="#eq:dae" title="(B.1a) ‣ (B.1) ‣ Appendix B Modelica DAE Representation ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">B.1a</span></a>) and (<a href="#eq:dae-discrete-real" title="(B.1b) ‣ (B.1) ‣ Appendix B Modelica DAE Representation ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">B.1b</span></a>).</p>
</div>
<div id="p6" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Example:
The following model is illegal since there is no equation in solved form that can be used in (<a href="#eq:dae-discrete-valued" title="(B.1c) ‣ (B.1) ‣ Appendix B Modelica DAE Representation ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">B.1c</span></a>) to solve for the discrete-valued variable <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;">y</span>:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,bW9kZWwgTQogIEJvb2xlYW4geDsKICBCb29sZWFuIHk7CmVxdWF0aW9uCiAgeCA9IHRpbWUgPj0gMS4wOwogIG5vdCB5ID0geDsgLyogRXF1YXRpb24gaW4gc29sdmVkIGZvcm0sIGJ1dCBub3Qgd2l0aCByZXNwZWN0IHRvIHkuICovCmVuZCBNOw==">⬇</a></div>
<div id="lstnumberx5351" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">model</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">M</span>
</div>
<div id="lstnumberx5352" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Boolean</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">x</span>;
</div>
<div id="lstnumberx5353" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">Boolean</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">y</span>;
</div>
<div id="lstnumberx5354" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx5355" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">x</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">time</span><span class="ltx_text ltx_lst_space"> </span>&gt;=<span class="ltx_text ltx_lst_space"> </span>1.0;
</div>
<div id="lstnumberx5356" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">not</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">y</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">x</span>;<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">/*<span class="ltx_text ltx_lst_space"> </span>Equation<span class="ltx_text ltx_lst_space"> </span>in<span class="ltx_text ltx_lst_space"> </span>solved<span class="ltx_text ltx_lst_space"> </span>form,<span class="ltx_text ltx_lst_space"> </span>but<span class="ltx_text ltx_lst_space"> </span>not<span class="ltx_text ltx_lst_space"> </span>with<span class="ltx_text ltx_lst_space"> </span>respect<span class="ltx_text ltx_lst_space"> </span>to<span class="ltx_text ltx_lst_space"> </span>y.<span class="ltx_text ltx_lst_space"> </span>*/</span>
</div>
<div id="lstnumberx5357" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">M</span>;
</div>
</div>
<p class="ltx_p">]</p>
</div>
<div id="p7" class="ltx_para">
<p class="ltx_p">The generated set of equations is used for simulation and other analysis activities.
Simulation means that an initial value problem is solved, i.e., initial values have to be provided for the states <math id="p7.m1" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math>, <a href="equations.html#initialization-initial-equation-and-initial-algorithm" title="8.6 Initialization, initial equation, and initial algorithm ‣ Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">8.6</span></a>.
The equations define a DAE (Differential Algebraic Equations) which may have discontinuities, a variable structure and/or which are controlled by a discrete-event system.
Such types of systems are called <em class="ltx_emph ltx_font_italic">hybrid DAEs</em>.
Simulation is performed in the following way:</p>
<ol id="S0.I3" class="ltx_enumerate">
<li id="perform-simulation-integrate" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span> 
<div id="S0.I3.i1.p1" class="ltx_para">
<p class="ltx_p">The DAE (<a href="#eq:dae" title="(B.1a) ‣ (B.1) ‣ Appendix B Modelica DAE Representation ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">B.1a</span></a>) is solved by a numerical integration method. In this
phase the conditions <math id="S0.I3.i1.p1.m1" class="ltx_Math" alttext="c" display="inline"><mi>c</mi></math> of the if- and when-clauses, as well as the
discrete-time variables <math id="S0.I3.i1.p1.m2" class="ltx_Math" alttext="z" display="inline"><mi>z</mi></math> and <math id="S0.I3.i1.p1.m3" class="ltx_Math" alttext="m" display="inline"><mi>m</mi></math> are kept constant. Therefore, (<a href="#eq:dae" title="(B.1a) ‣ (B.1) ‣ Appendix B Modelica DAE Representation ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">B.1a</span></a>) is a
continuous function of continuous variables and the most basic
requirement of numerical integrators is fulfilled.</p>
</div>
</li>
<li id="S0.I3.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span> 
<div id="S0.I3.i2.p1" class="ltx_para">
<p class="ltx_p">During integration, all relations from (<a href="#eq:crossing" title="(B.1d) ‣ (B.1) ‣ Appendix B Modelica DAE Representation ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">B.1d</span></a>) are monitored. If one of
the relations changes its value an event is triggered, i.e., the exact
time instant of the change is determined and the integration is
halted. As discussed in <a href="equations.html#events-and-synchronization" title="8.5 Events and Synchronization ‣ Chapter 8 Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">8.5</span></a>, relations which depend only on
time are usually treated in a special way, because this allows
determining the time instant of the next event in advance.</p>
</div>
</li>
<li id="S0.I3.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">3.</span> 
<div id="S0.I3.i3.p1" class="ltx_para">
<p class="ltx_p">At an event instant, (<a href="#eq:crossing" title="(B.1d) ‣ (B.1) ‣ Appendix B Modelica DAE Representation ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">B.1d</span></a>) is a mixed set of algebraic equations which is solved for the <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">Real</span>, <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">Boolean</span> and <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">Integer</span> unknowns.</p>
</div>
</li>
<li id="S0.I3.i4" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">4.</span> 
<div id="S0.I3.i4.p1" class="ltx_para">
<p class="ltx_p">After an event is processed, the integration is restarted with <a href="#perform-simulation-integrate" title="item 1 ‣ Appendix B Modelica DAE Representation ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>.</p>
</div>
</li>
</ol>
</div>
<div id="p8" class="ltx_para">
<p class="ltx_p">Note, that both the values of the conditions <math id="p8.m1" class="ltx_Math" alttext="c" display="inline"><mi>c</mi></math> as well as the values of
<math id="p8.m2" class="ltx_Math" alttext="z" display="inline"><mi>z</mi></math> and <math id="p8.m3" class="ltx_Math" alttext="m" display="inline"><mi>m</mi></math> (all discrete-time <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">Real</span>, <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">Boolean</span> and <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">Integer</span> variables) are only changed at
an event instant and that these variables remain constant during
continuous integration. At every event instant, new values of the
discrete-time variables <math id="p8.m4" class="ltx_Math" alttext="z" display="inline"><mi>z</mi></math> and <math id="p8.m5" class="ltx_Math" alttext="m" display="inline"><mi>m</mi></math>, as well as of new initial values for the states <math id="p8.m6" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math>, are
determined. The change of discrete-time variables may characterize a new
structure of a DAE where elements of the state vector <math id="p8.m7" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math> are
<em class="ltx_emph ltx_font_italic">disabled</em>. In other words, the number of state variables,
algebraic variables and residue equations of a DAE may change at event
instants by disabling the appropriate part of the DAE. For clarity of
the equations, this is not explicitly shown by an additional index in
(<a href="#eq:crossing" title="(B.1d) ‣ (B.1) ‣ Appendix B Modelica DAE Representation ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">B.1d</span></a>).</p>
</div>
<div id="p9" class="ltx_para">
<p class="ltx_p">At an event instant, including the initial event, the model equations
are reinitialized according to the following iteration procedure:</p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,a25vd24gIHZhcmlhYmxlczogeCwgdCwgcAp1bmtvd24gdmFyaWFibGVzOiBkeC9kdCwgeSwgeiwgbSwgcHJlKHopLCBwcmUobSksIGMKCi8vIHByZSh6KSA9IHZhbHVlIG9mIHogYmVmb3JlIGV2ZW50IG9jY3VyZWQKLy8gcHJlKG0pID0gdmFsdWUgb2YgbSBiZWZvcmUgZXZlbnQgb2NjdXJlZApsb29wCiAgc29sdmUgKDEpIGZvciB0aGUgdW5rbm93bnMsIHdpdGggcHJlKHopIGFuZCBwcmUobSkgZml4ZWQKICBpZiB6ID09IHByZSh6KSBhbmQgbSA9PSBwcmUobSkgdGhlbiBicmVhawogIHByZSh6KSA6PSB6CiAgcHJlKG0pIDo9IG0KZW5kIGxvb3A=">⬇</a></div>
<div id="lstnumberx5358" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier">known</span><span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">variables</span>:<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">x</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">t</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">p</span>
</div>
<div id="lstnumberx5359" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier">unkown</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">variables</span>:<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">dx</span>/<span class="ltx_text ltx_lst_identifier">dt</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">y</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">z</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">m</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">pre</span>(<span class="ltx_text ltx_lst_identifier">z</span>),<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">pre</span>(<span class="ltx_text ltx_lst_identifier">m</span>),<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">c</span>
</div>
<div id="lstnumberx5360" class="ltx_listingline">
</div>
<div id="lstnumberx5361" class="ltx_listingline">
<span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>pre(z)<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span>value<span class="ltx_text ltx_lst_space"> </span>of<span class="ltx_text ltx_lst_space"> </span>z<span class="ltx_text ltx_lst_space"> </span>before<span class="ltx_text ltx_lst_space"> </span>event<span class="ltx_text ltx_lst_space"> </span>occured</span>
</div>
<div id="lstnumberx5362" class="ltx_listingline">
<span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>pre(m)<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span>value<span class="ltx_text ltx_lst_space"> </span>of<span class="ltx_text ltx_lst_space"> </span>m<span class="ltx_text ltx_lst_space"> </span>before<span class="ltx_text ltx_lst_space"> </span>event<span class="ltx_text ltx_lst_space"> </span>occured</span>
</div>
<div id="lstnumberx5363" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">loop</span>
</div>
<div id="lstnumberx5364" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_identifier">solve</span><span class="ltx_text ltx_lst_space"> </span>(1)<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">for</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">the</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">unknowns</span>,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">with</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">pre</span>(<span class="ltx_text ltx_lst_identifier">z</span>)<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">and</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">pre</span>(<span class="ltx_text ltx_lst_identifier">m</span>)<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">fixed</span>
</div>
<div id="lstnumberx5365" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">z</span><span class="ltx_text ltx_lst_space"> </span>==<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">pre</span>(<span class="ltx_text ltx_lst_identifier">z</span>)<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">and</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">m</span><span class="ltx_text ltx_lst_space"> </span>==<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">pre</span>(<span class="ltx_text ltx_lst_identifier">m</span>)<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keyword" style="color:#003378;">break</span>
</div>
<div id="lstnumberx5366" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">pre</span>(<span class="ltx_text ltx_lst_identifier">z</span>)<span class="ltx_text ltx_lst_space"> </span>:=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">z</span>
</div>
<div id="lstnumberx5367" class="ltx_listingline">
<span class="ltx_text ltx_lst_space">  </span><span class="ltx_text ltx_lst_keywords3" style="color:#543D08;">pre</span>(<span class="ltx_text ltx_lst_identifier">m</span>)<span class="ltx_text ltx_lst_space"> </span>:=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">m</span>
</div>
<div id="lstnumberx5368" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">loop</span>
</div>
</div>
</div>
<div id="p10" class="ltx_para">
<p class="ltx_p">Clocked variables are handled similarly as <math id="p10.m1" class="ltx_Math" alttext="z" display="inline"><mi>z</mi></math> and <math id="p10.m2" class="ltx_Math" alttext="m" display="inline"><mi>m</mi></math> (depending on type), but using <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">previous</span> instead of <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">pre</span> and only solved in the first iteration of the event-loop.</p>
</div>
<div id="p11" class="ltx_para">
<p class="ltx_p">Solving (<a href="#eq:crossing" title="(B.1d) ‣ (B.1) ‣ Appendix B Modelica DAE Representation ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">B.1d</span></a>) for the unknowns is non-trivial, because this set of equations contains not only <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">Real</span>, but also discrete-valued unknowns.
Usually, in a first step these equations are sorted and in many cases the discrete-valued unknowns <math id="p11.m1" class="ltx_Math" alttext="m" display="inline"><mi>m</mi></math> can be just computed by a forward evaluation sequence.
In some cases, there remain systems of equations involving <math id="p11.m2" class="ltx_Math" alttext="m" display="inline"><mi>m</mi></math> due to cyclic dependencies with <math id="p11.m3" class="ltx_Math" alttext="y" display="inline"><mi>y</mi></math> and <math id="p11.m4" class="ltx_Math" alttext="z" display="inline"><mi>z</mi></math> (e.g. for ideal diodes, Coulomb friction elements), and specialized algorithms have to be used to solve them.
</p>
</div>
<div id="p12" class="ltx_para">
<p class="ltx_p">Due to the construction of the equations by <em class="ltx_emph ltx_font_italic">flattening</em> a Modelica model, the hybrid DAE (<a href="#eq:crossing" title="(B.1d) ‣ (B.1) ‣ Appendix B Modelica DAE Representation ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">B.1d</span></a>) contains a huge number of sparse equations.
Therefore, direct simulation of (<a href="#eq:crossing" title="(B.1d) ‣ (B.1) ‣ Appendix B Modelica DAE Representation ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">B.1d</span></a>) requires sparse matrix methods.
However, solving this initial set of equations directly with a numerical method is both unreliable and inefficient.
One reason is that many Modelica models, like the mechanical ones, have a DAE index of 2 or 3, i.e., the overall number of states of the model is less than the sum of the states of the sub-components.
In such a case, every direct numerical method has the difficulty that the numerical condition becomes worse, if the integrator step size is reduced and that a step size of zero leads to a singularity.
Another problem is the handling of idealized elements, such as ideal diodes or Coulomb friction.
These elements lead to mixed systems of equations having both <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">Real</span> and <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting" style="color:#543D08;background-color:#FFFFFF;">Boolean</span> unknowns.
Specialized algorithms are needed to solve such systems.</p>
</div>
<div id="p13" class="ltx_para">
<p class="ltx_p">To summarize, symbolic transformation techniques are needed to transform
(<a href="#eq:crossing" title="(B.1d) ‣ (B.1) ‣ Appendix B Modelica DAE Representation ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">B.1d</span></a>) into a set of equations which can be numerically solved reliably. Most
important, the algorithm of Pantelides should to be applied to
differentiate certain parts of the equations in order to reduce the
index. Note, that also explicit integration methods, such as Runge-Kutta
algorithms, can be used to solve (<a href="#eq:dae" title="(B.1a) ‣ (B.1) ‣ Appendix B Modelica DAE Representation ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">B.1a</span></a>), after the index of (<a href="#eq:dae" title="(B.1a) ‣ (B.1) ‣ Appendix B Modelica DAE Representation ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">B.1a</span></a>) has been
reduced by the Pantelides algorithm: During continuous integration, the
integrator provides <math id="p13.m1" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math> and <math id="p13.m2" class="ltx_Math" alttext="t" display="inline"><mi>t</mi></math>. Then, (<a href="#eq:dae" title="(B.1a) ‣ (B.1) ‣ Appendix B Modelica DAE Representation ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">B.1a</span></a>) is a linear or nonlinear system
of equations to compute the algebraic variables <math id="p13.m3" class="ltx_Math" alttext="y" display="inline"><mi>y</mi></math> and the state
derivatives <math id="p13.m4" class="ltx_Math" alttext="\mathrm{d}x/\mathrm{d}t" display="inline"><mrow><mrow><mrow><mi mathvariant="normal">d</mi><mo>⁢</mo><mi>x</mi></mrow><mo>/</mo><mi mathvariant="normal">d</mi></mrow><mo>⁢</mo><mi>t</mi></mrow></math> and the model returns <math id="p13.m5" class="ltx_Math" alttext="\mathrm{d}x/\mathrm{d}t" display="inline"><mrow><mrow><mrow><mi mathvariant="normal">d</mi><mo>⁢</mo><mi>x</mi></mrow><mo>/</mo><mi mathvariant="normal">d</mi></mrow><mo>⁢</mo><mi>t</mi></mrow></math> to the integrator by
solving these systems of equations. Often, (<a href="#eq:dae" title="(B.1a) ‣ (B.1) ‣ Appendix B Modelica DAE Representation ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref"><span class="ltx_text ltx_ref_tag">B.1a</span></a>) is just a linear system
of equations in these unknowns, so that the solution is straightforward.
This procedure is especially useful for real-time simulation where
usually explicit one-step methods are used.</p>
</div>
</section>
</div>
<footer class="ltx_page_footer">
<div>
<a href="modelica-concrete-syntax.html" title="Appendix A Modelica Concrete Syntax ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref" rel="prev"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A </span>Modelica Concrete Syntax</span></a><a href="bib.html" title="References ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref" rel="bibliography"><span class="ltx_text ltx_ref_title">References</span></a><a href="idx.html" title="Index ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref" rel="index"><span class="ltx_text ltx_ref_title">Index</span></a><a href="derivation-of-stream-equations.html" title="Appendix C Derivation of Stream Equations ‣ Modelica® Language Specification version 3.6-dev" class="ltx_ref" rel="next"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C </span>Derivation of Stream Equations</span></a>
</div>
<div class="ltx_page_logo">Generated  on Sat May  1 12:45:50 2021 by <a href="http://dlmf.nist.gov/LaTeXML/">LaTeXML <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg==" alt="[LOGO]"></a>
</div></footer>
</div>
</body>
</html>
