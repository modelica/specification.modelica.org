<!DOCTYPE html><html>
<head>
<title>9 Connectors and Connections‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4</title>
<!--Generated on Sat May  1 09:01:01 2021 by LaTeXML (version 0.8.3) http://dlmf.nist.gov/LaTeXML/.-->
<!--Document created on April 10, 2017.-->

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="LaTeXML.css" type="text/css">
<link rel="stylesheet" href="ltx-report.css" type="text/css">
<link rel="stylesheet" href="ltx-listings.css" type="text/css">
<link rel="stylesheet" href="css/LaTeXML-navbar-left.css" type="text/css">
<script src="css/LatexML-maybeMathJax.js" type="text/javascript"></script>
<link rel="up" href="MLS.html" title="Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="start" href="MLS.html" title="Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="prev" href="Ch8.html" title="Chapter 8 Equations ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="next" href="Ch10.html" title="Chapter 10 Arrays ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Chx1.html" title="Preface ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch1.html" title="Chapter 1 Introduction ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch2.html" title="Chapter 2 Lexical Structure ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch3.html" title="Chapter 3 Operators and Expressions ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch4.html" title="Chapter 4 Classes, Predefined Types, and Declarations ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch5.html" title="Chapter 5 Scoping, Name Lookup, and Flattening ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch6.html" title="Chapter 6 Interface or Type Relationships ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch7.html" title="Chapter 7 Inheritance, Modification, and Redeclaration ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch8.html" title="Chapter 8 Equations ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch10.html" title="Chapter 10 Arrays ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch11.html" title="Chapter 11 Statements and Algorithm Sections ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch12.html" title="Chapter 12 Functions ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch13.html" title="Chapter 13 Packages ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch14.html" title="Chapter 14 Overloaded Operators ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch15.html" title="Chapter 15 Stream Connectors ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch16.html" title="Chapter 16 Synchronous Language Elements ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch17.html" title="Chapter 17 State Machines ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch18.html" title="Chapter 18 Annotations ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch19.html" title="Chapter 19 Unit Expressions ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch20.html" title="Chapter 20 The Modelica Standard Library ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="appendix" href="A1.html" title="Appendix A Glossary ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="appendix" href="A2.html" title="Appendix B Modelica Concrete Syntax ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="appendix" href="A3.html" title="Appendix C Modelica DAE Representation ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="appendix" href="A4.html" title="Appendix D Derivation of Stream Equations ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="appendix" href="A5.html" title="Appendix E Modelica Revision History ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="appendix" href="A6.html" title="Appendix F Literature ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
</head>
<body>
<nav class="ltx_page_navbar"><a href="MLS.html" title="Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref" rel="start"><span class="ltx_text ltx_ref_title">Modelica® - A Unified Object-Oriented Language for Systems
Modeling<span class="ltx_text"> </span>Language
Specification<span class="ltx_text"> </span>Version 3.4</span></a>
<div class="ltx_TOC">
<ul class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Chx1.html" title="Preface ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title">Preface</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch1.html" title="Chapter 1 Introduction ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1 </span>Introduction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch2.html" title="Chapter 2 Lexical Structure ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2 </span>Lexical Structure</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch3.html" title="Chapter 3 Operators and Expressions ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3 </span>Operators and Expressions</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch4.html" title="Chapter 4 Classes, Predefined Types, and Declarations ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4 </span>Classes, Predefined Types, and Declarations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch5.html" title="Chapter 5 Scoping, Name Lookup, and Flattening ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5 </span>Scoping, Name Lookup, and Flattening</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch6.html" title="Chapter 6 Interface or Type Relationships ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">6 </span>Interface or Type Relationships</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch7.html" title="Chapter 7 Inheritance, Modification, and Redeclaration ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7 </span>Inheritance, Modification, and Redeclaration</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch8.html" title="Chapter 8 Equations ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8 </span>Equations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter ltx_ref_self">
<span class="ltx_ref ltx_ref_self"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9 </span>Connectors and Connections</span></span>
<ul class="ltx_toclist ltx_toclist_chapter">
<li class="ltx_tocentry ltx_tocentry_section">
<a href="#connect-equations-and-connectors" title="9.1 Connect-Equations and Connectors ‣ Chapter 9 Connectors and Connections ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9.1 </span>Connect-Equations and Connectors</span></a>
<ul class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#connection-sets" title="9.1.1 Connection Sets ‣ 9.1 Connect-Equations and Connectors ‣ Chapter 9 Connectors and Connections ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9.1.1 </span>Connection Sets</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#inside-and-outside-connectors" title="9.1.2 Inside and Outside Connectors ‣ 9.1 Connect-Equations and Connectors ‣ Chapter 9 Connectors and Connections ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9.1.2 </span>Inside and Outside Connectors</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#expandable-connectors" title="9.1.3 Expandable Connectors ‣ 9.1 Connect-Equations and Connectors ‣ Chapter 9 Connectors and Connections ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9.1.3 </span>Expandable Connectors</span></a></li>
</ul>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a href="#generation-of-connection-equations" title="9.2 Generation of Connection Equations ‣ Chapter 9 Connectors and Connections ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9.2 </span>Generation of Connection Equations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a href="#restrictions-of-connections-and-connectors" title="9.3 Restrictions of Connections and Connectors ‣ Chapter 9 Connectors and Connections ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9.3 </span>Restrictions of Connections and Connectors</span></a>
<ul class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#balancing-restriction-and-size-of-connectors" title="9.3.1 Balancing Restriction and Size of Connectors ‣ 9.3 Restrictions of Connections and Connectors ‣ Chapter 9 Connectors and Connections ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9.3.1 </span>Balancing Restriction and Size of Connectors</span></a></li>
</ul>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a href="#equation-operators-for-overconstrained-connection-based-equation-systems1" title="9.4 Equation Operators for Overconstrained Connection-Based Equation Systems ‣ Chapter 9 Connectors and Connections ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9.4 </span>Equation Operators for Overconstrained Connection-Based Equation Systems</span></a>
<ul class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#overconstrained-equation-operators-for-connection-graphs" title="9.4.1 Overconstrained Equation Operators for Connection Graphs ‣ 9.4 Equation Operators for Overconstrained Connection-Based Equation Systems ‣ Chapter 9 Connectors and Connections ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9.4.1 </span>Overconstrained Equation Operators for Connection Graphs</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#converting-the-connection-graph-into-trees-and-generating-connection-equations" title="9.4.2 Converting the Connection Graph into Trees and Generating Connection Equations ‣ 9.4 Equation Operators for Overconstrained Connection-Based Equation Systems ‣ Chapter 9 Connectors and Connections ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9.4.2 </span>Converting the Connection Graph into Trees and Generating Connection Equations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a href="#examples-of-overconstrained-connection-graphs" title="9.4.3 Examples of Overconstrained Connection Graphs ‣ 9.4 Equation Operators for Overconstrained Connection-Based Equation Systems ‣ Chapter 9 Connectors and Connections ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9.4.3 </span>Examples of Overconstrained Connection Graphs</span></a>
<ul class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a href="#an-overdetermined-connector-for-power-systems" title="9.4.3.1 An Overdetermined Connector for Power Systems ‣ 9.4.3 Examples of Overconstrained Connection Graphs ‣ 9.4 Equation Operators for Overconstrained Connection-Based Equation Systems ‣ Chapter 9 Connectors and Connections ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9.4.3.1 </span>An Overdetermined Connector for Power Systems</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a href="#an-overdetermined-connector-for-3-dimensional-mechanical-systems" title="9.4.3.2 An Overdetermined Connector for 3-dimensional Mechanical Systems ‣ 9.4.3 Examples of Overconstrained Connection Graphs ‣ 9.4 Equation Operators for Overconstrained Connection-Based Equation Systems ‣ Chapter 9 Connectors and Connections ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9.4.3.2 </span>An Overdetermined Connector for 3-dimensional Mechanical Systems</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch10.html" title="Chapter 10 Arrays ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">10 </span>Arrays</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch11.html" title="Chapter 11 Statements and Algorithm Sections ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">11 </span>Statements and Algorithm Sections</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch12.html" title="Chapter 12 Functions ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">12 </span>Functions</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch13.html" title="Chapter 13 Packages ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">13 </span>Packages</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch14.html" title="Chapter 14 Overloaded Operators ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">14 </span>Overloaded Operators</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch15.html" title="Chapter 15 Stream Connectors ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">15 </span>Stream Connectors</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch16.html" title="Chapter 16 Synchronous Language Elements ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">16 </span>Synchronous Language Elements</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch17.html" title="Chapter 17 State Machines ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">17 </span>State Machines</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch18.html" title="Chapter 18 Annotations ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">18 </span>Annotations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch19.html" title="Chapter 19 Unit Expressions ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">19 </span>Unit Expressions</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch20.html" title="Chapter 20 The Modelica Standard Library ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">20 </span>The Modelica Standard Library</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="A1.html" title="Appendix A Glossary ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A </span>Glossary</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="A2.html" title="Appendix B Modelica Concrete Syntax ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">B </span>Modelica Concrete Syntax</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="A3.html" title="Appendix C Modelica DAE Representation ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C </span>Modelica DAE Representation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="A4.html" title="Appendix D Derivation of Stream Equations ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">D </span>Derivation of Stream Equations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="A5.html" title="Appendix E Modelica Revision History ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">E </span>Modelica Revision History</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="A6.html" title="Appendix F Literature ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">F </span>Literature</span></a></li>
</ul>
</div>
</nav>
<div class="ltx_page_main">
<header class="ltx_page_header">
<div>
<a href="MLS.html" title="Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref" rel="up"><span class="ltx_text ltx_ref_title">Modelica® - A Unified Object-Oriented Language for Systems
Modeling<span class="ltx_text"> </span>Language
Specification<span class="ltx_text"> </span>Version 3.4</span></a><a href="Ch8.html" title="Chapter 8 Equations ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref" rel="prev"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8 </span>Equations</span></a><a href="Ch10.html" title="Chapter 10 Arrays ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref" rel="next"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">10 </span>Arrays</span></a>
</div></header>
<div class="ltx_page_content">
<section class="ltx_chapter ltx_authors_1line">
<h1 class="ltx_title ltx_title_chapter">
<span class="ltx_tag ltx_tag_chapter">Chapter 9 </span>Connectors and Connections</h1>
<div class="ltx_date ltx_role_creation"></div>

<div id="Ch9.p1" class="ltx_para">
<p class="ltx_p">This chapter covers connectors, connect-equations, and connections.</p>
</div>
<div id="Ch9.p2" class="ltx_para">
<p class="ltx_p">The special functions cardinality, rooted [ <span class="ltx_text ltx_emph ltx_font_italic">deprecated</span>],
Connections.isRoot, and Connections.rooted may not be used to control
them.</p>
</div>
<section id="connect-equations-and-connectors" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">9.1 </span>Connect-Equations and Connectors</h2>

<div id="Ch9.S1.p1" class="ltx_para">
<p class="ltx_p">Connections between objects are introduced by connect-equations in the
equation part of a class. A connect-equation has the following syntax:</p>
</div>
<div id="Ch9.S1.p2" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold">connect</span> ”(” component-reference ”,” component-reference ”)” ”;”</p>
</div>
<div id="Ch9.S1.p3" class="ltx_para">
<p class="ltx_p">The connect-equation construct takes two references to connectors
[<span class="ltx_text ltx_emph ltx_font_italic">a connector is an instance of a connector class</span>], each of
which is either of the following forms:</p>
</div>
<div id="Ch9.S1.p4" class="ltx_para">
<ul id="Ch9.S1.I1" class="ltx_itemize">
<li id="Ch9.S1.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch9.S1.I1.i1.p1" class="ltx_para">
<p class="ltx_p"><math id="Ch9.S1.I1.i1.p1.m1" class="ltx_Math" alttext="c_{1}.c_{2}...c_{n}" display="inline"><mrow><msub><mi>c</mi><mn>1</mn></msub><mo>.</mo><mrow><msub><mi>c</mi><mn>2</mn></msub><mo>⁢</mo><mi mathvariant="normal">…</mi><mo>⁢</mo><msub><mi>c</mi><mi>n</mi></msub></mrow></mrow></math>,
where <math id="Ch9.S1.I1.i1.p1.m2" class="ltx_Math" alttext="c_{1}" display="inline"><msub><mi>c</mi><mn>1</mn></msub></math> is a connector of the class,
n&gt;=1 and <math id="Ch9.S1.I1.i1.p1.m3" class="ltx_Math" alttext="c_{i+1}" display="inline"><msub><mi>c</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub></math> is a connector element of
<math id="Ch9.S1.I1.i1.p1.m4" class="ltx_Math" alttext="c_{i}" display="inline"><msub><mi>c</mi><mi>i</mi></msub></math> for <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">i</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=1:(<span class="ltx_text ltx_lst_identifier">n</span>-1)</span></span>.</p>
</div>
</li>
<li id="Ch9.S1.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch9.S1.I1.i2.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">m.c</span>, where <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">m</span> is a non-connector element in the class and <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">c</span> is a
connector element of <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">m</span>.</p>
</div>
</li>
</ul>
</div>
<div id="Ch9.S1.p5" class="ltx_para">
<p class="ltx_p">There may optionally be array subscripts on any of the components; the
array subscripts shall be parameter expressions or the special operator
“:”. If the connect construct references array of connectors, the
array dimensions must match, and each corresponding pair of elements
from the arrays is connected as a pair of scalar connectors.</p>
</div>
<div id="Ch9.S1.p6" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_emph ltx_font_italic">Example of array usage</span>:</p>
</div>
<div id="Ch9.S1.p7" class="ltx_para">
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ICBjb25uZWN0b3IgSW5Qb3J0ID0gaW5wdXQgUmVhbDsKICBjb25uZWN0b3IgT3V0UG9ydCA9IG91dHB1dCBSZWFsOwogIGJsb2NrIE1hdHJpeEdhaW4KICAgIGlucHV0IEluUG9ydCB1W3NpemUoQSwyKV07CiAgICBvdXRwdXQgT3V0UG9ydCB5W3NpemUoQSwxKV07CiAgICBwYXJhbWV0ZXIgUmVhbCBBWzosOl0gPSBbMV07CiAgZXF1YXRpb24KICAgIHk9QSp1OwogIGVuZCBNYXRyaXhHYWluOwogIE1vZGVsaWNhLkJsb2Nrcy5Tb3VyY2VzLlNpbmUgc2luU291cmNlWzVdOwogIE1hdHJpeEdhaW4gZ2FpbiAoQSA9IDUqaWRlbnRpdHkoNSkpOwogIE1hdHJpeEdhaW4gZ2FpbjIoQSA9IG9uZXMoMiw1KSk7CiAgT3V0UG9ydCB4WzJdOwplcXVhdGlvbgogIGNvbm5lY3Qoc2luU291cmNlLnksIGdhaW4udSk7IC8vIExlZ2FsCiAgY29ubmVjdChnYWluLnksIGdhaW4yLnUpOyAvLyBMZWdhbAogIGNvbm5lY3QoZ2FpbjIueSwgeCk7IC8vIExlZ2Fs">⬇</a></div>
<div id="lstnumberx1608" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">connector</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">InPort</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">input</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">Real</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1609" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">connector</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">OutPort</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">output</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">Real</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1610" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">block</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">MatrixGain</span>
</div>
<div id="lstnumberx1611" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">input</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">InPort</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">u</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">size</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">A</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,2)];</span>
</div>
<div id="lstnumberx1612" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">output</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">OutPort</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">y</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">size</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">A</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,1)];</span>
</div>
<div id="lstnumberx1613" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">parameter</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">Real</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">A</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[:,:]</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[1];</span>
</div>
<div id="lstnumberx1614" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">equation</span>
</div>
<div id="lstnumberx1615" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">    </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">y</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">A</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">*</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">u</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1616" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">MatrixGain</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1617" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.Blocks.Sources.Sine</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">sinSource</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[5];</span>
</div>
<div id="lstnumberx1618" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">MatrixGain</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">gain</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">A</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">5*</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">identity</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(5));</span>
</div>
<div id="lstnumberx1619" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">MatrixGain</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">gain2</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">A</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">ones</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(2,5));</span>
</div>
<div id="lstnumberx1620" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">OutPort</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">x</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[2];</span>
</div>
<div id="lstnumberx1621" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">equation</span>
</div>
<div id="lstnumberx1622" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">connect</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">sinSource.y</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">gain.u</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">);</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>Legal</span>
</div>
<div id="lstnumberx1623" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">connect</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">gain.y</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">gain2.u</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">);</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>Legal</span>
</div>
<div id="lstnumberx1624" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">connect</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">gain2.y</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">x</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">);</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>Legal</span>
</div>
</div>
<p class="ltx_p">]</p>
</div>
<div id="Ch9.S1.p8" class="ltx_para">
<p class="ltx_p">The three main tasks are to:</p>
</div>
<div id="Ch9.S1.p9" class="ltx_para">
<ul id="Ch9.S1.I2" class="ltx_itemize">
<li id="Ch9.S1.I2.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch9.S1.I2.i1.p1" class="ltx_para">
<p class="ltx_p">Elaborate expandable connectors.</p>
</div>
</li>
<li id="Ch9.S1.I2.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch9.S1.I2.i2.p1" class="ltx_para">
<p class="ltx_p">Build connection sets from connect-equations.</p>
</div>
</li>
<li id="Ch9.S1.I2.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch9.S1.I2.i3.p1" class="ltx_para">
<p class="ltx_p">Generate equations for the complete model.</p>
</div>
</li>
</ul>
</div>
<section id="connection-sets" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">9.1.1 </span>Connection Sets</h3>

<div id="Ch9.S1.SS1.p1" class="ltx_para">
<p class="ltx_p">A connection set is a set of variables connected by means of
connect-equations. A connection set shall contain either only flow
variables or only non-flow variables.</p>
</div>
</section>
<section id="inside-and-outside-connectors" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">9.1.2 </span>Inside and Outside Connectors</h3>

<div id="Ch9.S1.SS2.p1" class="ltx_para">
<p class="ltx_p">In an element instance M, each connector element of M is called an
outside connector with respect to M. All other connector elements that
are hierarchically inside M, but not in one of the outside connectors of
M, is called an inside connector with respect to M. This is done before
resolving <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;background-color:#FFFFFF;">outer</span> elements to corresponding <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;background-color:#FFFFFF;">inner</span> ones.</p>
</div>
<div id="Ch9.S1.SS2.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_emph ltx_font_italic">Example:</span></p>
</div>
<figure id="Ch9.F1" class="ltx_figure"><img src="media/innerouterconnector.png" id="Ch9.F1.g1" class="ltx_graphics" width="654" height="268" alt="">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure">Figure 9.1: </span>Example for inside and outside connectors</figcaption>
</figure>
<div id="Ch9.S1.SS2.p3" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_emph ltx_font_italic">The figure visualizes the following</span> <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;background-color:#FFFFFF;">connect</span> <span class="ltx_text ltx_emph ltx_font_italic">equations to
the connector c in the models mi. Consider the
following</span> <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;background-color:#FFFFFF;">connect</span> <span class="ltx_text ltx_emph ltx_font_italic">equations found in the model for component m0:</span></p>
</div>
<div id="Ch9.S1.SS2.p4" class="ltx_para">
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ICBjb25uZWN0KG0xLmMsIG0zLmMpOyAvLyBtMS5jIGFuZCBtMy5jIGFyZSBpbnNpZGUgY29ubmVjdG9ycwogIGNvbm5lY3QobTIuYywgbTMuYyk7IC8vIG0yLmMgYW5kIG0zLmMgYXJlIGluc2lkZSBjb25uZWN0b3Jz">⬇</a></div>
<div id="lstnumberx1625" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">connect</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">m1.c</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">m3.c</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">);</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>m1.c<span class="ltx_text ltx_lst_space"> </span>and<span class="ltx_text ltx_lst_space"> </span>m3.c<span class="ltx_text ltx_lst_space"> </span>are<span class="ltx_text ltx_lst_space"> </span>inside<span class="ltx_text ltx_lst_space"> </span>connectors</span>
</div>
<div id="lstnumberx1626" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">connect</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">m2.c</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">m3.c</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">);</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>m2.c<span class="ltx_text ltx_lst_space"> </span>and<span class="ltx_text ltx_lst_space"> </span>m3.c<span class="ltx_text ltx_lst_space"> </span>are<span class="ltx_text ltx_lst_space"> </span>inside<span class="ltx_text ltx_lst_space"> </span>connectors</span>
</div>
</div>
<p class="ltx_p"><span class="ltx_text ltx_emph ltx_font_italic">and in the model for component m3 (c.x is a sub-connector inside
c):</span>
</p>
</div>
<div id="Ch9.S1.SS2.p5" class="ltx_para">
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ICBjb25uZWN0KGMsIG00LmMpOyAvLyBjIGlzIGFuIG91dHNpZGUKICBjb25uZWN0b3IsIG00LmMgaXMgYW4gaW5zaWRlIGNvbm5lY3RvcgogIGNvbm5lY3QoYy54LCBtNS5jKTsgLy8gYy54IGlzIGFuIG91dHNpZGUKICBjb25uZWN0b3IsIG01LmMgaXMgYW4gaW5zaWRlIGNvbm5lY3RvcgogIGNvbm5lY3QoYyAsIGQpIDsgLy8gYyBpcyBhbiBvdXRzaWRlICBjb25uZWN0b3IsIGQgIGlzIGFuIG91dHNpZGUgY29ubmVjdG9y">⬇</a></div>
<div id="lstnumberx1627" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">connect</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">c</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">m4.c</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">);</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>c<span class="ltx_text ltx_lst_space"> </span>is<span class="ltx_text ltx_lst_space"> </span>an<span class="ltx_text ltx_lst_space"> </span>outside</span>
</div>
<div id="lstnumberx1628" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">connector</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">m4.c</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">is</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">an</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">inside</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">connector</span>
</div>
<div id="lstnumberx1629" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">connect</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">c.x</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">m5.c</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">);</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>c.x<span class="ltx_text ltx_lst_space"> </span>is<span class="ltx_text ltx_lst_space"> </span>an<span class="ltx_text ltx_lst_space"> </span>outside</span>
</div>
<div id="lstnumberx1630" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">connector</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">m5.c</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">is</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">an</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">inside</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">connector</span>
</div>
<div id="lstnumberx1631" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">connect</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">c</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">d</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">)</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>c<span class="ltx_text ltx_lst_space"> </span>is<span class="ltx_text ltx_lst_space"> </span>an<span class="ltx_text ltx_lst_space"> </span>outside<span class="ltx_text ltx_lst_space">  </span>connector,<span class="ltx_text ltx_lst_space"> </span>d<span class="ltx_text ltx_lst_space">  </span>is<span class="ltx_text ltx_lst_space"> </span>an<span class="ltx_text ltx_lst_space"> </span>outside<span class="ltx_text ltx_lst_space"> </span>connector</span>
</div>
</div>
<p class="ltx_p"><span class="ltx_text ltx_emph ltx_font_italic">and in the model for component m6:</span></p>
</div>
<div id="Ch9.S1.SS2.p6" class="ltx_para">
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ICBjb25uZWN0KGQsIG03LmMpOyAvLyBkIGlzIGFuIG91dHNpZGUgY29ubmVjdG9yLCBtNy5jIGlzIGFuIGluc2lkZSBjb25uZWN0b3I=">⬇</a></div>
<div id="lstnumberx1632" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">connect</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">d</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">m7.c</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">);</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>d<span class="ltx_text ltx_lst_space"> </span>is<span class="ltx_text ltx_lst_space"> </span>an<span class="ltx_text ltx_lst_space"> </span>outside<span class="ltx_text ltx_lst_space"> </span>connector,<span class="ltx_text ltx_lst_space"> </span>m7.c<span class="ltx_text ltx_lst_space"> </span>is<span class="ltx_text ltx_lst_space"> </span>an<span class="ltx_text ltx_lst_space"> </span>inside<span class="ltx_text ltx_lst_space"> </span>connector</span>
</div>
</div>
<p class="ltx_p">]</p>
</div>
</section>
<section id="expandable-connectors" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">9.1.3 </span>Expandable Connectors</h3>

<div id="Ch9.S1.SS3.p1" class="ltx_para">
<p class="ltx_p">If the <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;background-color:#FFFFFF;">expandable</span> qualifier is present on a connector definition, all
instances of that connector are referred to as expandable connectors.
Instances of connectors that do not possess this qualifier will be
referred to as non-expandable connectors.</p>
</div>
<div id="Ch9.S1.SS3.p2" class="ltx_para">
<p class="ltx_p">Before generating connection equations non-parameter scalar variables
and non-parameter array elements declared in expandable connectors are
marked as only being potentially present. A non-parameter array element
may be declared with array dimensions “:” indicating that the size is
unknown. This applies to both variables of simple types, and variables
of structured types.</p>
</div>
<div id="Ch9.S1.SS3.p3" class="ltx_para">
<p class="ltx_p">Then connections containing expandable connectors are elaborated:</p>
</div>
<div id="Ch9.S1.SS3.p4" class="ltx_para">
<ul id="Ch9.S1.I3" class="ltx_itemize">
<li id="Ch9.S1.I3.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch9.S1.I3.i1.p1" class="ltx_para">
<p class="ltx_p">One connector in the connect equation must reference a declared
component, and if the other connector is an undeclared element in a
declared expandable connector it is handled as follows (elements that
are only potentially present are not seen as declared):</p>
<ul id="Ch9.S1.I3.I1" class="ltx_itemize">
<li id="Ch9.S1.I3.i1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold">–</span></span> 
<div id="Ch9.S1.I3.i1.i1.p1" class="ltx_para">
<p class="ltx_p">The expandable connector instance is automatically augmented with a
new component having the used name and corresponding type.</p>
</div>
</li>
<li id="Ch9.S1.I3.i1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold">–</span></span> 
<div id="Ch9.S1.I3.i1.i2.p1" class="ltx_para">
<p class="ltx_p">If the undeclared component is subscripted, an array variable is
created, and a connection to the specific array element is performed.
Introducing elements in an array gives an array with at least the
specified elements, other elements are either not created or have a
default value (i.e. as if they were only potentially present).</p>
</div>
</li>
<li id="Ch9.S1.I3.i1.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span class="ltx_text ltx_font_bold">–</span></span> 
<div id="Ch9.S1.I3.i1.i3.p1" class="ltx_para">
<p class="ltx_p">If the variable on the other side of the connect-equation is input or
output the new component will be either input or output to satisfy the
restrictions in <a href="#restrictions-of-connections-and-connectors" title="9.3 Restrictions of Connections and Connectors ‣ Chapter 9 Connectors and Connections ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">section 9.3</span></a> for a non-expandable connector.
[<span class="ltx_text ltx_emph ltx_font_italic">If the existing side refers to an inside connector (i.e. a
connector of a component) the new variable will copy its causality,
i.e. input if input and output if output, since the expandable
connector must be an outside connector</span>]. For an array the
input/output property can be deduced separately for each array
element.</p>
</div>
</li>
</ul>
</div>
</li>
<li id="Ch9.S1.I3.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch9.S1.I3.i2.p1" class="ltx_para">
<p class="ltx_p">When two expandable connectors are connected, each is augmented with
the variables that are only declared in the other expandable connector
(the new variables are neither input nor output). This is repeated
until all connected expandable connector instances have matching
variables [<span class="ltx_text ltx_emph ltx_font_italic">i.e. each of the connector instances is expanded to
be the union of all connector variables</span>.]</p>
</div>
</li>
<li id="Ch9.S1.I3.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch9.S1.I3.i3.p1" class="ltx_para">
<p class="ltx_p">The variables introduced in the elaboration follow additional rules
for generating connection sets (given in <a href="#generation-of-connection-equations" title="9.2 Generation of Connection Equations ‣ Chapter 9 Connectors and Connections ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">section 9.2</span></a>).</p>
</div>
</li>
<li id="Ch9.S1.I3.i4" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch9.S1.I3.i4.p1" class="ltx_para">
<p class="ltx_p">If a variable appears as an input in one expandable connector, it
should appear as a non-input in at least one other expandable
connector instance in the same augmentation set. An augmentation set
is defined as the set of connected expandable connector instances that
through the elaboration will have matching variables.</p>
</div>
<div id="Ch9.S1.I3.i4.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_emph ltx_font_italic">Example</span>:</p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ZXhwYW5kYWJsZSBjb25uZWN0b3IgRW5naW5lQnVzCmVuZCBFbmdpbmVCdXM7CgpibG9jayBTZW5zb3IKICBSZWFsT3V0cHV0IHNwZWVkOyAvLyBPdXRwdXQsIGkuZS4sIG5vbi1pbnB1dAplbmQgU2Vuc29yOwpibG9jayBBY3R1YXRvcgogIFJlYWxJbnB1dCBzcGVlZDsgLy8gSW5wdXQKZW5kIEFjdHVhdG9yOwoKbW9kZWwgRW5naW5lCiAgRW5naW5lQnVzIGJ1czsKICBTZW5zb3Igc2Vuc29yOwogIEFjdHVhdG9yIGFjdHVhdG9yOwplcXVhdGlvbgogIGNvbm5lY3QoYnVzLnNwZWVkLCBzZW5zb3Iuc3BlZWQpOyAvLyBwcm92aWRlcyB0aGUgbm9uLWlucHV0IGZyb20gc2Vuc29yLnNwZWVkCiAgY29ubmVjdChidXMuc3BlZWQsIGFjdHVhdG9yLnNwZWVkKTsKZW5kIEVuZ2luZTs=">⬇</a></div>
<div id="lstnumberx1633" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">expandable</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">connector</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">EngineBus</span>
</div>
<div id="lstnumberx1634" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">EngineBus</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1635" class="ltx_listingline">
</div>
<div id="lstnumberx1636" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">block</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Sensor</span>
</div>
<div id="lstnumberx1637" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">RealOutput</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">speed</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>Output,<span class="ltx_text ltx_lst_space"> </span>i.e.,<span class="ltx_text ltx_lst_space"> </span>non-input</span>
</div>
<div id="lstnumberx1638" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Sensor</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1639" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">block</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Actuator</span>
</div>
<div id="lstnumberx1640" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">RealInput</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">speed</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>Input</span>
</div>
<div id="lstnumberx1641" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Actuator</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1642" class="ltx_listingline">
</div>
<div id="lstnumberx1643" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">model</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Engine</span>
</div>
<div id="lstnumberx1644" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">EngineBus</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">bus</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1645" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Sensor</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">sensor</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1646" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Actuator</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">actuator</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1647" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">equation</span>
</div>
<div id="lstnumberx1648" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">connect</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">bus.speed</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">sensor.speed</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">);</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>provides<span class="ltx_text ltx_lst_space"> </span>the<span class="ltx_text ltx_lst_space"> </span>non-input<span class="ltx_text ltx_lst_space"> </span>from<span class="ltx_text ltx_lst_space"> </span>sensor.speed</span>
</div>
<div id="lstnumberx1649" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">connect</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">bus.speed</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">actuator.speed</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">);</span>
</div>
<div id="lstnumberx1650" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Engine</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
</div>
<p class="ltx_p">]</p>
</div>
</li>
<li id="Ch9.S1.I3.i5" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch9.S1.I3.i5.p1" class="ltx_para">
<p class="ltx_p">All components in an expandable connector are seen as connector
instances even if they are not declared as such [<span class="ltx_text ltx_emph ltx_font_italic">i.e. it is
possible to connect to e.g. a Real variable</span>].</p>
</div>
<div id="Ch9.S1.I3.i5.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_emph ltx_font_italic">Example</span>:</p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ZXhwYW5kYWJsZSBjb25uZWN0b3IgRW5naW5lQnVzIC8vIGhhcyBwcmVkZWZpbmVkIHNpZ25hbHMKICBpbXBvcnQgU0k9TW9kZWxpY2EuU0l1bml0czsKICBTSS5Bbmd1bGFyVmVsb2NpdHkgc3BlZWQ7CiAgU0kuVGVtcGVyYXR1cmUgVDsKZW5kIEVuZ2luZUJ1czsKCmJsb2NrIFNlbnNvcgogUmVhbE91dHB1dCBzcGVlZDsKZW5kIFNlbnNvcjsKCm1vZGVsIEVuZ2luZQogIEVuZ2luZUJ1cyBidXM7CiAgU2Vuc29yIHNlbnNvcjsKZXF1YXRpb24KICBjb25uZWN0KGJ1cy5zcGVlZCwgc2Vuc29yLnNwZWVkKTsKICAvLyBjb25uZWN0aW9uIHRvIG5vbi1jb25uZWN0b3Igc3BlZWQgaXMgcG9zc2libGUKICAvLyBpbiBleHBhbmRhYmxlIGNvbm5lY3RvcnMKZW5kIEVuZ2luZTs=">⬇</a></div>
<div id="lstnumberx1651" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">expandable</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">connector</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">EngineBus</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>has<span class="ltx_text ltx_lst_space"> </span>predefined<span class="ltx_text ltx_lst_space"> </span>signals</span>
</div>
<div id="lstnumberx1652" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">import</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">SI</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.SIunits</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1653" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">SI.AngularVelocity</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">speed</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1654" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">SI.Temperature</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">T</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1655" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">EngineBus</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1656" class="ltx_listingline">
</div>
<div id="lstnumberx1657" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">block</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Sensor</span>
</div>
<div id="lstnumberx1658" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">RealOutput</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">speed</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1659" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Sensor</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1660" class="ltx_listingline">
</div>
<div id="lstnumberx1661" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">model</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Engine</span>
</div>
<div id="lstnumberx1662" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">EngineBus</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">bus</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1663" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Sensor</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">sensor</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1664" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">equation</span>
</div>
<div id="lstnumberx1665" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">connect</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">bus.speed</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">sensor.speed</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">);</span>
</div>
<div id="lstnumberx1666" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>connection<span class="ltx_text ltx_lst_space"> </span>to<span class="ltx_text ltx_lst_space"> </span>non-connector<span class="ltx_text ltx_lst_space"> </span>speed<span class="ltx_text ltx_lst_space"> </span>is<span class="ltx_text ltx_lst_space"> </span>possible</span>
</div>
<div id="lstnumberx1667" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>in<span class="ltx_text ltx_lst_space"> </span>expandable<span class="ltx_text ltx_lst_space"> </span>connectors</span>
</div>
<div id="lstnumberx1668" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Engine</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
</div>
<p class="ltx_p">]
</p>
</div>
</li>
<li id="Ch9.S1.I3.i6" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch9.S1.I3.i6.p1" class="ltx_para">
<p class="ltx_p">An expandable connector may not contain a component declared with the
prefix <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;background-color:#FFFFFF;">flow</span>, but may contain non-expandable connector components with
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;background-color:#FFFFFF;">flow</span> components.</p>
</div>
<div id="Ch9.S1.I3.i6.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_emph ltx_font_italic">Example</span>:</p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,aW1wb3J0IEludGVyZmFjZXM9TW9kZWxpY2EuRWxlY3RyaWNhbC5BbmFsb2cuSW50ZXJmYWNlczsKZXhwYW5kYWJsZSBjb25uZWN0b3IgRWxlY3RyaWNhbEJ1cwogIEludGVyZmFjZXMuUG9zaXRpdmVQaW4gcDEyLCBuMTI7IC8vIE9LCiAgZmxvdyBNb2RlbGljYS5TSXVuaXRzLkN1cnJlbnQgaTsgLy8gbm90IGFsbG93ZWQKZW5kIEVsZWN0cmljYWxCdXM7Cgptb2RlbCBCYXR0ZXJ5CiAgSW50ZXJmYWNlcy5Qb3NpdGl2ZVBpbiBwNDIsIG40MjsKICBFbGVjdHJpY2FsQnVzIGJ1czsKZXF1YXRpb24KICBjb25uZWN0KHA0MiwgYnVzLnA0Mik7IC8vIEFkZHMgbmV3IGVsZWN0cmljYWwgcGluCiAgY29ubmVjdChuNDIsIGJ1cy5uNDIpOyAvLyBBZGRzIGFub3RoZXIgcGluCmVuZCBCYXR0ZXJ5Ow==">⬇</a></div>
<div id="lstnumberx1669" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">import</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Interfaces</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.Electrical.Analog.Interfaces</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1670" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">expandable</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">connector</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">ElectricalBus</span>
</div>
<div id="lstnumberx1671" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Interfaces.PositivePin</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">p12</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">n12</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>OK</span>
</div>
<div id="lstnumberx1672" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">flow</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.SIunits.Current</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">i</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>not<span class="ltx_text ltx_lst_space"> </span>allowed</span>
</div>
<div id="lstnumberx1673" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">ElectricalBus</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1674" class="ltx_listingline">
</div>
<div id="lstnumberx1675" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">model</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Battery</span>
</div>
<div id="lstnumberx1676" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Interfaces.PositivePin</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">p42</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">n42</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1677" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">ElectricalBus</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">bus</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1678" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">equation</span>
</div>
<div id="lstnumberx1679" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">connect</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">p42</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">bus.p42</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">);</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>Adds<span class="ltx_text ltx_lst_space"> </span>new<span class="ltx_text ltx_lst_space"> </span>electrical<span class="ltx_text ltx_lst_space"> </span>pin</span>
</div>
<div id="lstnumberx1680" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">connect</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">n42</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">bus.n42</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">);</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>Adds<span class="ltx_text ltx_lst_space"> </span>another<span class="ltx_text ltx_lst_space"> </span>pin</span>
</div>
<div id="lstnumberx1681" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Battery</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
</div>
</div>
<div id="Ch9.S1.I3.i6.p3" class="ltx_para">
<p class="ltx_p">]</p>
</div>
</li>
<li id="Ch9.S1.I3.i7" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch9.S1.I3.i7.p1" class="ltx_para">
<p class="ltx_p">expandable connectors can only be connected to other expandable
connectors.</p>
</div>
</li>
</ul>
<p class="ltx_p">If a connect equation references a potentially present variable, or
variable element, in an expandable connector the variable or variable
element is marked as being present, and due to the paragraphs above it
is possible to deduce whether the bus variable shall be treated as
input, or shall be treated as output in the connect equation. That
input or output prefix is added if no input/output prefix is present
on the declaration</p>
</div>
<div id="Ch9.S1.SS3.p5" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_emph ltx_font_italic">Example</span>:</p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ZXhwYW5kYWJsZSBjb25uZWN0b3IgRW1wdHlCdXMKZW5kIEVtcHR5QnVzOwoKbW9kZWwgQ29udHJvbGxlcgogIEVtcHR5QnVzIGJ1czE7CiAgRW1wdHlCdXMgYnVzMjsKICBSZWFsSW5wdXQgc3BlZWQ7CmVxdWF0aW9uCiAgY29ubmVjdChzcGVlZCwgYnVzMS5zcGVlZCk7IC8vIG9rLCBvbmx5IG9uZSB1bmRlY2xhcmVkCiAgLy8gYW5kIGl0IGlzIHVuc3Vic2NyaXB0ZWQKCiAgY29ubmVjdChidXMxLnByZXNzdXJlLCBidXMyLnByZXNzdXJlKTsKICAvLyBub3QgYWxsb3dlZCwgYm90aCB1bmRlY2xhcmVkCgogIGNvbm5lY3Qoc3BlZWQsIGJ1czIuc3BlZWRbMl0pOwogIC8vIGludHJvZHVjZXMgc3BlZWQgYXJyYXkgKHdpdGggZWxlbWVudCBbMl0pLgplbmQgQ29udHJvbGxlcjs=">⬇</a></div>
<div id="lstnumberx1682" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">expandable</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">connector</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">EmptyBus</span>
</div>
<div id="lstnumberx1683" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">EmptyBus</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1684" class="ltx_listingline">
</div>
<div id="lstnumberx1685" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">model</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Controller</span>
</div>
<div id="lstnumberx1686" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">EmptyBus</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">bus1</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1687" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">EmptyBus</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">bus2</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1688" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">RealInput</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">speed</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1689" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">equation</span>
</div>
<div id="lstnumberx1690" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">connect</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">speed</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">bus1.speed</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">);</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>ok,<span class="ltx_text ltx_lst_space"> </span>only<span class="ltx_text ltx_lst_space"> </span>one<span class="ltx_text ltx_lst_space"> </span>undeclared</span>
</div>
<div id="lstnumberx1691" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>and<span class="ltx_text ltx_lst_space"> </span>it<span class="ltx_text ltx_lst_space"> </span>is<span class="ltx_text ltx_lst_space"> </span>unsubscripted</span>
</div>
<div id="lstnumberx1692" class="ltx_listingline">
</div>
<div id="lstnumberx1693" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">connect</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">bus1.pressure</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">bus2.pressure</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">);</span>
</div>
<div id="lstnumberx1694" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>not<span class="ltx_text ltx_lst_space"> </span>allowed,<span class="ltx_text ltx_lst_space"> </span>both<span class="ltx_text ltx_lst_space"> </span>undeclared</span>
</div>
<div id="lstnumberx1695" class="ltx_listingline">
</div>
<div id="lstnumberx1696" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">connect</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">speed</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">bus2.speed</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[2]);</span>
</div>
<div id="lstnumberx1697" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>introduces<span class="ltx_text ltx_lst_space"> </span>speed<span class="ltx_text ltx_lst_space"> </span>array<span class="ltx_text ltx_lst_space"> </span>(with<span class="ltx_text ltx_lst_space"> </span>element<span class="ltx_text ltx_lst_space"> </span>[2]).</span>
</div>
<div id="lstnumberx1698" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Controller</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
</div>
<p class="ltx_p">]</p>
</div>
<div id="Ch9.S1.SS3.p6" class="ltx_para">
<p class="ltx_p">After this elaboration the expandable connectors are treated as normal
connector instances, and the connections as normal connections, and all
potentially present variables and array elements that are not actually
present are undefined [<span class="ltx_text ltx_emph ltx_font_italic">a tool may remove them or set them to the
default value, e.g. zero for Real variables</span>]. It is an error if there
are expressions referring to potentially present variables or array
elements that are not actually present or non-declared variables
[<span class="ltx_text ltx_emph ltx_font_italic">the expressions can only “read” variables from the bus that
are actually declared and present in the connector, in order that the
types of the variables can be determined in the local scope</span>]. This
elaboration implies that expandable connectors can be connected even if
they do not contain the same components.</p>
</div>
<div id="Ch9.S1.SS3.p7" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_emph ltx_font_italic">Note that the introduction of variables, as described above, is
conceptual and does not necessarily impact the flattening hierarchy in
any way. Furthermore, it is important to note that these elaboration
rules must consider:</span></p>
</div>
<div id="Ch9.S1.SS3.p8" class="ltx_para">
<ol id="Ch9.S1.I4" class="ltx_enumerate">
<li id="Ch9.S1.I4.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span> 
<div id="Ch9.S1.I4.i1.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_emph ltx_font_italic">Expandable connectors nested hierarchically. This means that
both outside and inside connectors must be included at every level of
the hierarchy in this elaboration process.</span></p>
</div>
</li>
<li id="Ch9.S1.I4.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span> 
<div id="Ch9.S1.I4.i2.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_emph ltx_font_italic">When processing an expandable connector that possesses the</span>
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;background-color:#FFFFFF;">inner</span> <span class="ltx_text ltx_emph ltx_font_italic">scope qualifier, all outer instances must also be taken into
account during elaboration</span>.</p>
</div>
</li>
</ol>
<p class="ltx_p"><span class="ltx_text ltx_emph ltx_font_italic">Example</span>:</p>
</div>
<div id="Ch9.S1.SS3.p9" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_emph ltx_font_italic">Engine system with sensors, controllers, actuator and plant that
exchange information via a bus (i.e. via expandable connectors):</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,aW1wb3J0IFNJPU1vZGVsaWNhLlNJdW5pdHM7CmltcG9ydCBNb2RlbGljYS5CbG9ja3MuSW50ZXJmYWNlcy5SZWFsSW5wdXQ7Ci8vIFBsYW50IFNpZGUKbW9kZWwgU3BhcmtQbHVnCiAgUmVhbElucHV0IHNwYXJrX2FkdmFuY2U7CiAgLi4uCmVuZCBTcGFya1BsdWc7CgpleHBhbmRhYmxlIGNvbm5lY3RvciBFbmdpbmVCdXMKICAvLyBObyBtaW5pbWFsIHNldAplbmQgRW5naW5lQnVzOwoKZXhwYW5kYWJsZSBjb25uZWN0b3IgQ3lsaW5kZXJCdXMKICBSZWFsIHNwYXJrX2FkdmFuY2U7CmVuZCBDeWxpbmRlckJ1czsKCm1vZGVsIEN5bGluZGVyCiAgQ3lsaW5kZXJCdXMgY3lsaW5kZXJfYnVzOwogIFNwYXJrUGx1ZyBzcGFya19wbHVnOwogIC4uLgplcXVhdGlvbgogIGNvbm5lY3Qoc3BhcmtfcGx1Zy5zcGFya19hZHZhbmNlLAogIGN5bGluZGVyX2J1cy5zcGFya19hZHZhbmNlKTsKZW5kIEN5bGluZGVyOwoKbW9kZWwgSTQKICBFbmdpbmVCdXMgZW5naW5lX2J1czsKICBNb2RlbGljYS5NZWNoYW5pY3MuUm90YXRpb25hbC5TZW5zb3JzLlNwZWVkU2Vuc29yIHNwZWVkX3NlbnNvcjsKICBNb2RlbGljYS5UaGVybWFsLkhlYXRUcmFuc2Zlci5TZW5zb3JzLlRlbXBlcmF0dXJlU2Vuc29yIHRlbXBfc2Vuc29yOwogIHBhcmFtZXRlciBJbnRlZ2VyIG5DeWxpbmRlciA9IDQgIk51bWJlciBvZiBjeWxpbmRlcnMiOwogIEN5bGluZGVyIGN5bGluZGVyW25DeWxpbmRlcl07CmVxdWF0aW9uCiAgLy8gYWRkcyBlbmdpbmVfc3BlZWQgKGFzIG91dHB1dCkKICBjb25uZWN0KHNwZWVkX3NlbnNvci53LCBlbmdpbmVfYnVzLmVuZ2luZV9zcGVlZCk7CiAgLy8gYWRkcyBlbmdpbmVfdGVtcCAoYXMgb3V0cHV0KQogIGNvbm5lY3QodGVtcF9zZW5zb3IuVCwgZW5naW5lX2J1cy5lbmdpbmVfdGVtcCk7CiAgLy8gYWRkcyBjeWxpbmRlcl9idXMxIChhIG5lc3RlZCBidXMpCiAgZm9yIGkgaW4gMTpuQ3lsaW5kZXIgbG9vcAogICAgY29ubmVjdChjeWxpbmRlcltpXS5jeWxpbmRlcl9idXMsCiAgICBlbmdpbmVfYnVzLmN5bGluZGVyX2J1c1tpXSk7CiAgZW5kIGZvcjsKZW5kIEk0Ow==">⬇</a></div>
<div id="lstnumberx1699" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">import</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">SI</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.SIunits</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1700" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">import</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.Blocks.Interfaces.RealInput</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1701" class="ltx_listingline">
<span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>Plant<span class="ltx_text ltx_lst_space"> </span>Side</span>
</div>
<div id="lstnumberx1702" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">model</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">SparkPlug</span>
</div>
<div id="lstnumberx1703" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">RealInput</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">spark_advance</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1704" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">...</span>
</div>
<div id="lstnumberx1705" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">SparkPlug</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1706" class="ltx_listingline">
</div>
<div id="lstnumberx1707" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">expandable</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">connector</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">EngineBus</span>
</div>
<div id="lstnumberx1708" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>No<span class="ltx_text ltx_lst_space"> </span>minimal<span class="ltx_text ltx_lst_space"> </span>set</span>
</div>
<div id="lstnumberx1709" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">EngineBus</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1710" class="ltx_listingline">
</div>
<div id="lstnumberx1711" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">expandable</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">connector</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">CylinderBus</span>
</div>
<div id="lstnumberx1712" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">Real</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">spark_advance</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1713" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">CylinderBus</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1714" class="ltx_listingline">
</div>
<div id="lstnumberx1715" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">model</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Cylinder</span>
</div>
<div id="lstnumberx1716" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">CylinderBus</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">cylinder_bus</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1717" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">SparkPlug</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">spark_plug</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1718" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">...</span>
</div>
<div id="lstnumberx1719" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">equation</span>
</div>
<div id="lstnumberx1720" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">connect</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">spark_plug.spark_advance</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span>
</div>
<div id="lstnumberx1721" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">cylinder_bus.spark_advance</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">);</span>
</div>
<div id="lstnumberx1722" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Cylinder</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1723" class="ltx_listingline">
</div>
<div id="lstnumberx1724" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">model</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">I4</span>
</div>
<div id="lstnumberx1725" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">EngineBus</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">engine_bus</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1726" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.Mechanics.Rotational.Sensors.SpeedSensor</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">speed_sensor</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1727" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.Thermal.HeatTransfer.Sensors.TemperatureSensor</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">temp_sensor</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1728" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">parameter</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">nCylinder</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">4</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_string ltx_font_typewriter" style="font-size:90%;color:#000000;">"Number<span class="ltx_text ltx_lst_space"> </span>of<span class="ltx_text ltx_lst_space"> </span>cylinders"</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1729" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Cylinder</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">cylinder</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">nCylinder</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">];</span>
</div>
<div id="lstnumberx1730" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">equation</span>
</div>
<div id="lstnumberx1731" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>adds<span class="ltx_text ltx_lst_space"> </span>engine_speed<span class="ltx_text ltx_lst_space"> </span>(as<span class="ltx_text ltx_lst_space"> </span>output)</span>
</div>
<div id="lstnumberx1732" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">connect</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">speed_sensor.w</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">engine_bus.engine_speed</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">);</span>
</div>
<div id="lstnumberx1733" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>adds<span class="ltx_text ltx_lst_space"> </span>engine_temp<span class="ltx_text ltx_lst_space"> </span>(as<span class="ltx_text ltx_lst_space"> </span>output)</span>
</div>
<div id="lstnumberx1734" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">connect</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">temp_sensor.T</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">engine_bus.engine_temp</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">);</span>
</div>
<div id="lstnumberx1735" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>adds<span class="ltx_text ltx_lst_space"> </span>cylinder_bus1<span class="ltx_text ltx_lst_space"> </span>(a<span class="ltx_text ltx_lst_space"> </span>nested<span class="ltx_text ltx_lst_space"> </span>bus)</span>
</div>
<div id="lstnumberx1736" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">for</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">i</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">in</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">1:</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">nCylinder</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">loop</span>
</div>
<div id="lstnumberx1737" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">    </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">connect</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">cylinder</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">i</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">]</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">.cylinder_bus</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span>
</div>
<div id="lstnumberx1738" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">    </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">engine_bus.cylinder_bus</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">i</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">]);</span>
</div>
<div id="lstnumberx1739" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">for</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1740" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">I4</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
</div>
<p class="ltx_p"><span class="ltx_text ltx_emph ltx_font_italic">Due to the above connection, conceptually a connector consisting
of the union of all connectors is introduced.</span></p>
</div>
<div id="Ch9.S1.SS3.p10" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_emph ltx_font_italic">The engine_bus contains the following variable declarations:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ICBSZWFsT3V0cHV0IGVuZ2luZV9zcGVlZDsKICBSZWFsT3V0cHV0IGVuZ2luZV90ZW1wOwogIEN5bGluZGVyQnVzIGN5bGluZGVyX2J1c1sxXTsKICBDeWxpbmRlckJ1cyBjeWxpbmRlcl9idXNbMl07CiAgQ3lsaW5kZXJCdXMgY3lsaW5kZXJfYnVzWzNdOwogIEN5bGluZGVyQnVzIGN5bGluZGVyX2J1c1s0XTs=">⬇</a></div>
<div id="lstnumberx1741" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">RealOutput</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">engine_speed</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1742" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">RealOutput</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">engine_temp</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1743" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">CylinderBus</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">cylinder_bus</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[1];</span>
</div>
<div id="lstnumberx1744" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">CylinderBus</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">cylinder_bus</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[2];</span>
</div>
<div id="lstnumberx1745" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">CylinderBus</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">cylinder_bus</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3];</span>
</div>
<div id="lstnumberx1746" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">CylinderBus</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">cylinder_bus</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[4];</span>
</div>
</div>
<p class="ltx_p">]</p>
</div>
</section>
</section>
<section id="generation-of-connection-equations" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">9.2 </span>Generation of Connection Equations</h2>

<div id="Ch9.S2.p1" class="ltx_para">
<p class="ltx_p">When generating connection equations, <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;background-color:#FFFFFF;">outer</span> elements are resolved to the
corresponding <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;background-color:#FFFFFF;">inner</span> elements in the instance hierarchy (see instance
hierarchy name lookup <a href="Ch5.html#instance-hierarchy-name-lookup-of-inner-declarations" title="5.4 Instance Hierarchy Name Lookup of Inner Declarations ‣ Chapter 5 Scoping, Name Lookup, and Flattening ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">section 5.4</span></a>). The arguments to each <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;background-color:#FFFFFF;">connect</span>-equation are
resolved to two connector elements.</p>
</div>
<div id="Ch9.S2.p2" class="ltx_para">
<p class="ltx_p">For every use of the <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;background-color:#FFFFFF;">connect</span>-equation</p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,Y29ubmVjdChhLCBiKTs=">⬇</a></div>
<div id="lstnumberx1747" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">connect</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">a</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">b</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">);</span>
</div>
</div>
</div>
<div id="Ch9.S2.p3" class="ltx_para">
<p class="ltx_p">the primitive components of <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">a</span> and <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">b</span> form a connection set – together
with an indication of whether they are from an inside or an outside
connector; the primitive elements are of simple types – or of types
defined as <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">operator</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">record</span></span> (i.e. a component of an <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">operator</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">record</span></span> type
is not split into sub-components). The elements of the connection sets
are tuples of primitive variables together with an indication of inside
or outside; if the same tuple belongs to two connection sets those two
sets are merged, until every tuple is only present in one set. Composite
connector types are broken down into primitive components. The <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;background-color:#FFFFFF;">outer</span>
components are handled by mapping the objects to the corresponding <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;background-color:#FFFFFF;">inner</span>
components – and the inside indication is not influenced. The outer
connectors are handled by mapping the objects to the corresponding inner
connectors – and they are always treated as outside connectors.</p>
</div>
<div id="Ch9.S2.p4" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_emph ltx_font_italic">Rationale: The inside/outside as part of the connection sets
ensure that connections from different hierarchical levels are treated
separately. Connection sets are formed from the primitive elements and
not from the connectors; this handles connections to parts of
hierarchical connectors and also makes it easier to generate equations
directly from the connection sets. All variables in one connection set
will either be flow variables or non-flow variables due to restriction
on connect-equations. The mapping from an</span> <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;background-color:#FFFFFF;">outer</span> <span class="ltx_text ltx_emph ltx_font_italic">to an</span> <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;background-color:#FFFFFF;">inner</span>
<span class="ltx_text ltx_emph ltx_font_italic">element must occur before merging the sets in order to get one
zero-sum equation, and ensures that the equations for the</span> outer
<span class="ltx_text ltx_emph ltx_font_italic">elements are all given for “one side” of the connector, and the</span>
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;background-color:#FFFFFF;">inner</span> <span class="ltx_text ltx_emph ltx_font_italic">element can define the other “side”.</span>]</p>
</div>
<div id="Ch9.S2.p5" class="ltx_para">
<p class="ltx_p">The following connection sets with just one member are also present (and
merged):</p>
</div>
<div id="Ch9.S2.p6" class="ltx_para">
<ul id="Ch9.S2.I1" class="ltx_itemize">
<li id="Ch9.S2.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch9.S2.I1.i1.p1" class="ltx_para">
<p class="ltx_p">Each primitive flow-variable as inside connector.</p>
</div>
</li>
<li id="Ch9.S2.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch9.S2.I1.i2.p1" class="ltx_para">
<p class="ltx_p">Each flow variable <span class="ltx_text ltx_emph ltx_font_italic">added</span> during augmentation of expandable
connectors, both as inside and as outside. <span class="ltx_text ltx_emph ltx_font_italic">[Note that the flow
variable is not directly in the expandable connector, but in a
connector inside the expandable connector.]</span></p>
</div>
</li>
</ul>
</div>
<div id="Ch9.S2.p7" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_emph ltx_font_italic">Rationale: If these variables are not connected they will
generate a set comprised only of this element, and thus they will be
implicitly set to zero (see below). If connected, this set will be
merged and adding this at the start has no impact.</span>]</p>
</div>
<div id="Ch9.S2.p8" class="ltx_para">
<p class="ltx_p">Each connection set is used to generate equations for potential and flow
(zero-sum) variables of the form</p>
</div>
<div id="Ch9.S2.p9" class="ltx_para">
<ul id="Ch9.S2.I2" class="ltx_itemize">
<li id="Ch9.S2.I2.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch9.S2.I2.i1.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">a1</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">a2</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">...</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">an</span>;<span class="ltx_text ltx_lst_space">                </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>neither<span class="ltx_text ltx_lst_space"> </span>flow<span class="ltx_text ltx_lst_space"> </span>nor<span class="ltx_text ltx_lst_space"> </span>stream<span class="ltx_text ltx_lst_space"> </span>variables</span></span></span></p>
</div>
</li>
<li id="Ch9.S2.I2.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch9.S2.I2.i2.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">z1</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">+<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">z2</span><span class="ltx_text ltx_lst_space"> </span>+<span class="ltx_text ltx_lst_space"> </span>(-<span class="ltx_text ltx_lst_identifier">z3</span>)<span class="ltx_text ltx_lst_space"> </span>+<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">...</span><span class="ltx_text ltx_lst_space"> </span>+<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">zn</span><span class="ltx_text ltx_lst_space"> </span>=</span></span> <span class="ltx_text ltx_font_bold" style="font-size:90%;">0<span class="ltx_text ltx_font_medium"> <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">;<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>flow-variables</span></span></span></span></p>
</div>
</li>
</ul>
</div>
<div id="Ch9.S2.p10" class="ltx_para">
<p class="ltx_p">The bold-face <span class="ltx_text ltx_font_bold">0</span> represents an array or scalar zero of
appropriate dimensions (i.e. the same size as z).</p>
</div>
<div id="Ch9.S2.p11" class="ltx_para">
<p class="ltx_p">For an <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">operator</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">record</span></span> type this uses the operator <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_string ltx_font_typewriter" style="font-size:90%;color:#000000;background-color:#FFFFFF;">’0’</span> – which must be
defined in the operator record; and all of the flow-variables for the
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">operator</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">record</span></span> must be of the same <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">operator</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">record</span></span> type. This implies
that in order to have flow variables of an <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">operator</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">record</span></span> type the
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">operator</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">record</span></span> must define addition, negation, and <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_string ltx_font_typewriter" style="font-size:90%;color:#000000;background-color:#FFFFFF;">’0’</span>; and these
operations should define an additive group.</p>
</div>
<div id="Ch9.S2.p12" class="ltx_para">
<p class="ltx_p">In order to generate equations for flow variables [<span class="ltx_text ltx_emph ltx_font_italic">using the</span>
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;background-color:#FFFFFF;">flow</span> <span class="ltx_text ltx_emph ltx_font_italic">prefix</span>], the sign used for the connector variable
<span class="ltx_text ltx_font_typewriter">z<sub class="ltx_sub">i</sub></span> above is +1 for inside connectors and -1 for outside
connectors <span class="ltx_text ltx_font_typewriter">z<sub class="ltx_sub">3</sub></span> <span class="ltx_text ltx_emph ltx_font_italic">in the example above</span>].</p>
</div>
<div id="Ch9.S2.p13" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_emph ltx_font_italic">Example (simple):</span></p>
</div>
<div id="Ch9.S2.p14" class="ltx_para">
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,bW9kZWwgQ2lyY3VpdAogIEdyb3VuZCBncm91bmQ7CiAgTG9hZCBsb2FkOwogIFJlc2lzdG9yIHJlc2lzdG9yOwplcXVhdGlvbgogIGNvbm5lY3QobG9hZC5wICwgZ3JvdW5kLnApOwogIGNvbm5lY3QocmVzaXN0b3IucCwgZ3JvdW5kLnApOwplbmQgQ2lyY3VpdDsKCm1vZGVsIExvYWQKICBleHRlbmRzIFR3b1BpbjsKICBSZXNpc3RvciByZXNpc3RvcjsKZXF1YXRpb24KICBjb25uZWN0KHAsIHJlc2lzdG9yLnApOwogIGNvbm5lY3QocmVzaXN0b3Iubiwgbik7CmVuZCBMb2FkOw==">⬇</a></div>
<div id="lstnumberx1748" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">model</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Circuit</span>
</div>
<div id="lstnumberx1749" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Ground</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">ground</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1750" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Load</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">load</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1751" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Resistor</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">resistor</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1752" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">equation</span>
</div>
<div id="lstnumberx1753" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">connect</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">load.p</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">ground.p</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">);</span>
</div>
<div id="lstnumberx1754" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">connect</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">resistor.p</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">ground.p</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">);</span>
</div>
<div id="lstnumberx1755" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Circuit</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1756" class="ltx_listingline">
</div>
<div id="lstnumberx1757" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">model</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Load</span>
</div>
<div id="lstnumberx1758" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">extends</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">TwoPin</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1759" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Resistor</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">resistor</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1760" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">equation</span>
</div>
<div id="lstnumberx1761" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">connect</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">p</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">resistor.p</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">);</span>
</div>
<div id="lstnumberx1762" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">connect</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">resistor.n</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">n</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">);</span>
</div>
<div id="lstnumberx1763" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Load</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
</div>
<p class="ltx_p"><span class="ltx_text ltx_emph ltx_font_italic">The connection sets are before merging (note that one part of the
load and resistor is not connected):</span></p>
</div>
<div id="Ch9.S2.p15" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;load.p.i, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p16" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;load.n.i, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p17" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;ground.p.i, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p18" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;load.resistor.p.i, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p19" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;load.resistor.n.i, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p20" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;resistor.p.i, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p21" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;resistor.n.i, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p22" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;resistor.p.i, inside&gt;,
&lt;ground.p.i, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p23" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;resistor.p.v, inside&gt;,
&lt;ground.p.v, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p24" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;load.p.i, inside&gt;,
&lt;ground.p.i, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p25" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;load.p.v, inside&gt;,
&lt;ground.p.v, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p26" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;load.p.i, outside&gt;,
&lt;load.resistor.p.i, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p27" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;load.p.v, outside&gt;,
&lt;load.resistor.p.v, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p28" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;load.n.i, outside&gt;,
&lt;load.resistor.n.i, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p29" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;load.n.v, outside&gt;,
&lt;load.resistor.n.v, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p30" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_emph ltx_font_italic">After merging this gives:</span></p>
</div>
<div id="Ch9.S2.p31" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;load.p.i, outside&gt;,
&lt;load.resistor.p.i, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p32" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;load.p.v, outside&gt;,
&lt;load.resistor.p.v, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p33" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;load.n.i, outside&gt;,
&lt;load.resistor.n.i, inside&gt;</span>}
</p>
</div>
<div id="Ch9.S2.p34" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;load.n.v, outside&gt;,
&lt;load.resistor.n.v, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p35" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;load.p.i, inside&gt;,
&lt;ground.p.i, inside&gt;, &lt;resistor.p.i,
inside&gt; </span>}</p>
</div>
<div id="Ch9.S2.p36" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;load.p.v, inside&gt;,
&lt;ground.p.v, inside&gt;, &lt;resistor.p.v,
inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p37" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;load.n.i, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p38" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;resistor.n.i, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p39" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_emph ltx_font_italic">And thus the equations:</span></p>
</div>
<div id="Ch9.S2.p40" class="ltx_para">
<p class="ltx_p">load.p.v = load.resistor.p.v;</p>
</div>
<div id="Ch9.S2.p41" class="ltx_para">
<p class="ltx_p">load.n.v = load.resistor.n.v;</p>
</div>
<div id="Ch9.S2.p42" class="ltx_para">
<p class="ltx_p">load.p.v = ground.p.v;</p>
</div>
<div id="Ch9.S2.p43" class="ltx_para">
<p class="ltx_p">load.p.v = resistor.p.v;
</p>
</div>
<div id="Ch9.S2.p44" class="ltx_para">
<p class="ltx_p">0 = (-load.p.i) + load.resistor.p.i;</p>
</div>
<div id="Ch9.S2.p45" class="ltx_para">
<p class="ltx_p">0 = (-load.n.i) + load.resistor.n.i;</p>
</div>
<div id="Ch9.S2.p46" class="ltx_para">
<p class="ltx_p">0 = load.p.i + ground.p.i + resistor.p.i;</p>
</div>
<div id="Ch9.S2.p47" class="ltx_para">
<p class="ltx_p">0 = load.n.i;</p>
</div>
<div id="Ch9.S2.p48" class="ltx_para">
<p class="ltx_p">0 = resistor.n.i;</p>
</div>
<div id="Ch9.S2.p49" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_emph ltx_font_italic">Example (outer component):</span></p>
</div>
<div id="Ch9.S2.p50" class="ltx_para">
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,bW9kZWwgQ2lyY3VpdAogIEdyb3VuZCBncm91bmQ7CiAgTG9hZCBsb2FkOwogIGlubmVyIFJlc2lzdG9yIHJlc2lzdG9yOwplcXVhdGlvbgogIGNvbm5lY3QobG9hZC5wLCBncm91bmQucCk7CmVuZCBDaXJjdWl0OwoKbW9kZWwgTG9hZAogIGV4dGVuZHMgVHdvUGluOwogIG91dGVyIFJlc2lzdG9yIHJlc2lzdG9yOwplcXVhdGlvbgogIGNvbm5lY3QocCwgcmVzaXN0b3IucCk7CiAgY29ubmVjdChyZXNpc3Rvci5uLCBuKTsKZW5kIExvYWQ7">⬇</a></div>
<div id="lstnumberx1764" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">model</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Circuit</span>
</div>
<div id="lstnumberx1765" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Ground</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">ground</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1766" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Load</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">load</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1767" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">inner</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Resistor</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">resistor</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1768" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">equation</span>
</div>
<div id="lstnumberx1769" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">connect</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">load.p</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">ground.p</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">);</span>
</div>
<div id="lstnumberx1770" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Circuit</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1771" class="ltx_listingline">
</div>
<div id="lstnumberx1772" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">model</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Load</span>
</div>
<div id="lstnumberx1773" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">extends</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">TwoPin</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1774" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">outer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Resistor</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">resistor</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1775" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">equation</span>
</div>
<div id="lstnumberx1776" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">connect</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">p</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">resistor.p</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">);</span>
</div>
<div id="lstnumberx1777" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">connect</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">resistor.n</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">n</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">);</span>
</div>
<div id="lstnumberx1778" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Load</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
</div>
<p class="ltx_p"><span class="ltx_text ltx_emph ltx_font_italic">The connection sets are before merging (note that one part of the
load and resistor is not connected):</span></p>
</div>
<div id="Ch9.S2.p51" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;load.p.i, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p52" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;load.n.i, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p53" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;ground.p.i, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p54" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;resistor.p.i, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p55" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;resistor.n.i, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p56" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;load.p.i, inside&gt;,
&lt;ground.p.i, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p57" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;load.p.v, inside&gt;,
&lt;ground.p.v, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p58" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;load.p.i, outside&gt;, &lt;
resistor.p.i, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p59" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;load.p.v, outside&gt;,
&lt;resistor.p.v, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p60" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;load.n.i, outside&gt;,
&lt;resistor.n.i, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p61" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;load.n.v, outside&gt;,
&lt;resistor.n.v, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p62" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_emph ltx_font_italic">After merging this gives:</span></p>
</div>
<div id="Ch9.S2.p63" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;load.p.i, outside&gt;,
&lt;resistor.p.i, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p64" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;load.p.v, outside&gt;,
&lt;resistor.p.v, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p65" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;load.n.i, outside&gt;,
&lt;resistor.n.i, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p66" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;load.n.v, outside&gt;,
&lt;resistor.n.v, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p67" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;load.p.i, inside&gt;,
&lt;ground.p.i, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p68" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;load.p.v, inside&gt;,
&lt;ground.p.v, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p69" class="ltx_para">
<p class="ltx_p ltx_emph">{<span class="ltx_text ltx_font_italic">&lt;load.n.i, inside&gt;</span>}</p>
</div>
<div id="Ch9.S2.p70" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_emph ltx_font_italic">And thus the equations:</span></p>
</div>
<div id="Ch9.S2.p71" class="ltx_para">
<p class="ltx_p">load.p.v = resistor.p.v;</p>
</div>
<div id="Ch9.S2.p72" class="ltx_para">
<p class="ltx_p">load.n.v = resistor.n.v;</p>
</div>
<div id="Ch9.S2.p73" class="ltx_para">
<p class="ltx_p">load.p.v = ground.p.v;</p>
</div>
<div id="Ch9.S2.p74" class="ltx_para">
<p class="ltx_p">0 = (-load.p.i) + resistor.p.i;</p>
</div>
<div id="Ch9.S2.p75" class="ltx_para">
<p class="ltx_p">0 = (-load.n.i) + resistor.n.i;</p>
</div>
<div id="Ch9.S2.p76" class="ltx_para">
<p class="ltx_p">0 = load.p.i + ground.p.i;</p>
</div>
<div id="Ch9.S2.p77" class="ltx_para">
<p class="ltx_p">0 = load.n.i;</p>
</div>
<div id="Ch9.S2.p78" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_emph ltx_font_italic">This corresponds to a direct connection of the resistor.</span>
</p>
</div>
<div id="Ch9.S2.p79" class="ltx_para">
<p class="ltx_p">]</p>
</div>
</section>
<section id="restrictions-of-connections-and-connectors" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">9.3 </span>Restrictions of Connections and Connectors</h2>

<div id="Ch9.S3.p1" class="ltx_para">
<ul id="Ch9.S3.I1" class="ltx_itemize">
<li id="Ch9.S3.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch9.S3.I1.i1.p1" class="ltx_para">
<p class="ltx_p">The connect-equations (and the special functions for overdetermined
connectors) may only be used in equations and may not be used inside
if-equations with non-parametric condition, or in when-equations.
[<span class="ltx_text ltx_emph ltx_font_italic">For-equations always have parameter expressions for the array
expression</span>.]</p>
</div>
</li>
<li id="Ch9.S3.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch9.S3.I1.i2.p1" class="ltx_para">
<p class="ltx_p">A connector component may not be declared with the prefix parameter or
constant. In the connect-equation the primitive components may only
connect parameter variables to parameter variables and constant
variables to constant variables.</p>
</div>
</li>
<li id="Ch9.S3.I1.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch9.S3.I1.i3.p1" class="ltx_para">
<p class="ltx_p">The connect-equation construct only accepts forms of connector
references as specified in <a href="#connect-equations-and-connectors" title="9.1 Connect-Equations and Connectors ‣ Chapter 9 Connectors and Connections ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">section 9.1</span></a>.</p>
</div>
</li>
<li id="Ch9.S3.I1.i4" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch9.S3.I1.i4.p1" class="ltx_para">
<p class="ltx_p">In a connect-equation the two connectors must have the same named
component elements with the same dimensions; recursively down to the
primitive components. The primitive components with the same name are
matched and belong to the same connection set.
</p>
</div>
</li>
<li id="Ch9.S3.I1.i5" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch9.S3.I1.i5.p1" class="ltx_para">
<p class="ltx_p">The matched primitive components of the two connectors must have the
same primitive types, and flow-variables may only connect to other
flow-variables, stream-variables only to other stream-variables, and
causal variables (<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;background-color:#FFFFFF;">input</span>/<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;background-color:#FFFFFF;">output</span>) only to causal variables
(<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;background-color:#FFFFFF;">input</span>/<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;background-color:#FFFFFF;">output</span>).</p>
</div>
</li>
<li id="Ch9.S3.I1.i6" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch9.S3.I1.i6.p1" class="ltx_para">
<p class="ltx_p">A connection set of causal variables (<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;background-color:#FFFFFF;">input</span>/<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;background-color:#FFFFFF;">output</span>) may at most
contain variables from one inside <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;background-color:#FFFFFF;">output</span> connector or one public
outside <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;background-color:#FFFFFF;">input</span> connector. [<span class="ltx_text ltx_emph ltx_font_italic">i.e., a connection set may at most
contain one source of a signal.</span>]</p>
</div>
</li>
<li id="Ch9.S3.I1.i7" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch9.S3.I1.i7.p1" class="ltx_para">
<p class="ltx_p">At least one of the following must hold for a connection set
containing causal variables generated for a non-partial model or
block:</p>
<ol id="Ch9.S3.I2" class="ltx_enumerate">
<li id="Ch9.S3.I2.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span> 
<div id="Ch9.S3.I2.i1.p1" class="ltx_para">
<p class="ltx_p">the connection set includes variables from an outside public
expandable connector,</p>
</div>
</li>
<li id="Ch9.S3.I2.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span> 
<div id="Ch9.S3.I2.i2.p1" class="ltx_para">
<p class="ltx_p">the set contains variables from protected
outside connectors,</p>
</div>
</li>
<li id="Ch9.S3.I2.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">3.</span> 
<div id="Ch9.S3.I2.i3.p1" class="ltx_para">
<p class="ltx_p">it contains variables from one inside <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;background-color:#FFFFFF;">output</span>
connector, or</p>
</div>
</li>
<li id="Ch9.S3.I2.i4" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">4.</span> 
<div id="Ch9.S3.I2.i4.p1" class="ltx_para">
<p class="ltx_p">from one public outside <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;background-color:#FFFFFF;">input</span> connector, or</p>
</div>
</li>
<li id="enum:exc-conn-case" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">5.</span> 
<div id="Ch9.S3.I2.i5.p1" class="ltx_para">
<p class="ltx_p">the set is comprised solely of one variable from one inside <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;background-color:#FFFFFF;">input</span>
connector that is not part of an expandable connector. 
</p>
</div>
</li>
</ol>
<p class="ltx_p">[<span class="ltx_text ltx_emph ltx_font_italic">i.e., a connection set must – unless the model or block is partial -
contain one source of a signal (the last item (<a href="#enum:exc-conn-case" title="item 5 ‣ 7th item ‣ 9.3 Restrictions of Connections and Connectors ‣ Chapter 9 Connectors and Connections ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">item 5</span></a>) covers the case
where a connector of a component is left unconnected and the source
given textually).</span>]</p>
</div>
</li>
<li id="Ch9.S3.I2.i8" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch9.S3.I2.i8.p1" class="ltx_para">
<p class="ltx_p">Variables from a protected outside connector must be part of a
connection set containing at least one inside connector or one
declared public outside connector (i.e. it may not be an implicitly
defined part of an expandable connector). [<span class="ltx_text ltx_emph ltx_font_italic">Otherwise it would
not be possible to deduce the causality for the expandable connector
element.</span>]</p>
</div>
</li>
<li id="Ch9.S3.I2.i9" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch9.S3.I2.i9.p1" class="ltx_para">
<p class="ltx_p">In a connection set all variables having non-empty quantity attribute
must have the same quantity attribute.</p>
</div>
</li>
<li id="Ch9.S3.I2.i10" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch9.S3.I2.i10.p1" class="ltx_para">
<p class="ltx_p">A <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;background-color:#FFFFFF;">connect</span> equation may not (directly or indirectly) connect two
connectors of <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;background-color:#FFFFFF;">outer</span> elements. [<span class="ltx_text ltx_emph ltx_font_italic">indirectly is similar to them
being part of the same connection set – however, connections to</span>
outer <span class="ltx_text ltx_emph ltx_font_italic">elements are “moved up” before forming connection sets.
Otherwise the connection sets could contain “redundant” information
breaking the equation count for locally balanced models and
blocks.</span>]</p>
</div>
</li>
<li id="Ch9.S3.I2.i11" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch9.S3.I2.i11.p1" class="ltx_para">
<p class="ltx_p">Subscripts in a connector reference shall be parameter expressions or
the special operator “:”.</p>
</div>
</li>
<li id="Ch9.S3.I2.i12" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch9.S3.I2.i12.p1" class="ltx_para">
<p class="ltx_p">Constants or parameters in connected components yield the appropriate
assert statements to check that they have the same value; connections
are not generated.</p>
</div>
</li>
<li id="Ch9.S3.I2.i13" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="Ch9.S3.I2.i13.p1" class="ltx_para">
<p class="ltx_p">For conditional connectors, see <a href="Ch4.html#conditional-component-declaration" title="4.4.5 Conditional Component Declaration ‣ 4.4 Component Declarations ‣ Chapter 4 Classes, Predefined Types, and Declarations ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">section 4.4.5</span></a>.</p>
</div>
</li>
</ul>
</div>
<section id="balancing-restriction-and-size-of-connectors" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">9.3.1 </span>Balancing Restriction and Size of Connectors</h3>

<div id="Ch9.S3.SS1.p1" class="ltx_para">
<p class="ltx_p">For each non-partial connector class the number of flow variables shall
be equal to the number of variables that are neither <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;background-color:#FFFFFF;">parameter</span>,
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;background-color:#FFFFFF;">constant</span>, <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;background-color:#FFFFFF;">input</span>, <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;background-color:#FFFFFF;">output</span>, <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;background-color:#FFFFFF;">stream</span>
nor <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;background-color:#FFFFFF;">flow</span>. The “number of variables” is
the number of all elements in the connector class after expanding all
records and arrays to a set of scalars of primitive types. The number of
variables of an overdetermined type or record class (see <a href="#overconstrained-equation-operators-for-connection-graphs" title="9.4.1 Overconstrained Equation Operators for Connection Graphs ‣ 9.4 Equation Operators for Overconstrained Connection-Based Equation Systems ‣ Chapter 9 Connectors and Connections ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">section 9.4.1</span></a>)
is the size of the output argument of the corresponding
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">equalityConstraint</span>() function.</p>
</div>
<div id="Ch9.S3.SS1.p2" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_emph ltx_font_italic">Examples:</span></p>
</div>
<div id="Ch9.S3.SS1.p3" class="ltx_para">
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,Y29ubmVjdG9yIFBpbiAvLyBhIHBoeXNpY2FsIGNvbm5lY3RvciBvZgogIE1vZGVsaWNhLkVsZWN0cmljYWwuQW5hbG9nCiAgUmVhbCB2OwogIGZsb3cgUmVhbCBpOwplbmQgUGluOwoKY29ubmVjdG9yIFBsdWcgLy8gYSBoaWVyYXJjaGljYWwgY29ubmVjdG9yIG9mCiAgTW9kZWxpY2EuRWxlY3RyaWNhbC5NdWx0aVBoYXNlCiAgcGFyYW1ldGVyIEludGVnZXIgbT0zOwogIFBpbiBwW21dOwplbmQgUGx1ZzsKCmNvbm5lY3RvciBJbnB1dFJlYWwgPSBpbnB1dCBSZWFsOyAvLyBBIGNhdXNhbCBpbnB1dCBjb25uZWN0b3IKY29ubmVjdG9yIE91dHB1dFJlYWwgPSBvdXRwdXQgUmVhbDsgLy8gQSBjYXVzYWwgb3V0cHV0IGNvbm5lY3RvcgoKY29ubmVjdG9yIEZyYW1lX0lsbGVnYWwKICBNb2RlbGljYS5TSXVuaXRzLlBvc2l0aW9uIHIwWzNdICJQb3NpdGlvbiB2ZWN0b3Igb2YgZnJhbWUgb3JpZ2luIjsKICBSZWFsIFNbMywgM10gIlJvdGF0aW9uIG1hdHJpeCBvZiBmcmFtZSI7CiAgTW9kZWxpY2EuU0l1bml0cy5WZWxvY2l0eSB2WzNdICJBYnMuIHZlbG9jaXR5IG9mIGZyYW1lIG9yaWdpbiI7CiAgTW9kZWxpY2EuU0l1bml0cy5Bbmd1bGFyVmVsb2NpdHkgd1szXSAiQWJzLiBhbmd1bGFyIHZlbG9jaXR5IG9mIGZyYW1lIjsKICBNb2RlbGljYS5TSXVuaXRzLkFjY2VsZXJhdGlvbiBhWzNdICJBYnMuIGFjYy4gb2YgZnJhbWUgb3JpZ2luIjsKICBNb2RlbGljYS5TSXVuaXRzLkFuZ3VsYXJBY2NlbGVyYXRpb24gelszXSAiQWJzLiBhbmd1bGFyIGFjYy4gb2YgZnJhbWUiOwogIGZsb3cgTW9kZWxpY2EuU0l1bml0cy5Gb3JjZSBmWzNdICJDdXQgZm9yY2UiOwogIGZsb3cgTW9kZWxpY2EuU0l1bml0cy5Ub3JxdWUgdFszXSAiQ3V0IHRvcnF1ZSI7CmVuZCBGcmFtZV9JbGxlZ2FsOw==">⬇</a></div>
<div id="lstnumberx1779" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">connector</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Pin</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>a<span class="ltx_text ltx_lst_space"> </span>physical<span class="ltx_text ltx_lst_space"> </span>connector<span class="ltx_text ltx_lst_space"> </span>of</span>
</div>
<div id="lstnumberx1780" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.Electrical.Analog</span>
</div>
<div id="lstnumberx1781" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">Real</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">v</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1782" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">flow</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">Real</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">i</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1783" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Pin</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1784" class="ltx_listingline">
</div>
<div id="lstnumberx1785" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">connector</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Plug</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>a<span class="ltx_text ltx_lst_space"> </span>hierarchical<span class="ltx_text ltx_lst_space"> </span>connector<span class="ltx_text ltx_lst_space"> </span>of</span>
</div>
<div id="lstnumberx1786" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.Electrical.MultiPhase</span>
</div>
<div id="lstnumberx1787" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">parameter</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">m</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=3;</span>
</div>
<div id="lstnumberx1788" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Pin</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">p</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">m</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">];</span>
</div>
<div id="lstnumberx1789" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Plug</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1790" class="ltx_listingline">
</div>
<div id="lstnumberx1791" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">connector</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">InputReal</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">input</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">Real</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>A<span class="ltx_text ltx_lst_space"> </span>causal<span class="ltx_text ltx_lst_space"> </span>input<span class="ltx_text ltx_lst_space"> </span>connector</span>
</div>
<div id="lstnumberx1792" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">connector</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">OutputReal</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">output</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">Real</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>A<span class="ltx_text ltx_lst_space"> </span>causal<span class="ltx_text ltx_lst_space"> </span>output<span class="ltx_text ltx_lst_space"> </span>connector</span>
</div>
<div id="lstnumberx1793" class="ltx_listingline">
</div>
<div id="lstnumberx1794" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">connector</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Frame_Illegal</span>
</div>
<div id="lstnumberx1795" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.SIunits.Position</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">r0</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3]</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_string ltx_font_typewriter" style="font-size:90%;color:#000000;">"Position<span class="ltx_text ltx_lst_space"> </span>vector<span class="ltx_text ltx_lst_space"> </span>of<span class="ltx_text ltx_lst_space"> </span>frame<span class="ltx_text ltx_lst_space"> </span>origin"</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1796" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">Real</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">S</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">3]</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_string ltx_font_typewriter" style="font-size:90%;color:#000000;">"Rotation<span class="ltx_text ltx_lst_space"> </span>matrix<span class="ltx_text ltx_lst_space"> </span>of<span class="ltx_text ltx_lst_space"> </span>frame"</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1797" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.SIunits.Velocity</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">v</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3]</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_string ltx_font_typewriter" style="font-size:90%;color:#000000;">"Abs.<span class="ltx_text ltx_lst_space"> </span>velocity<span class="ltx_text ltx_lst_space"> </span>of<span class="ltx_text ltx_lst_space"> </span>frame<span class="ltx_text ltx_lst_space"> </span>origin"</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1798" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.SIunits.AngularVelocity</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">w</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3]</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_string ltx_font_typewriter" style="font-size:90%;color:#000000;">"Abs.<span class="ltx_text ltx_lst_space"> </span>angular<span class="ltx_text ltx_lst_space"> </span>velocity<span class="ltx_text ltx_lst_space"> </span>of<span class="ltx_text ltx_lst_space"> </span>frame"</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1799" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.SIunits.Acceleration</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">a</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3]</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_string ltx_font_typewriter" style="font-size:90%;color:#000000;">"Abs.<span class="ltx_text ltx_lst_space"> </span>acc.<span class="ltx_text ltx_lst_space"> </span>of<span class="ltx_text ltx_lst_space"> </span>frame<span class="ltx_text ltx_lst_space"> </span>origin"</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1800" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.SIunits.AngularAcceleration</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">z</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3]</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_string ltx_font_typewriter" style="font-size:90%;color:#000000;">"Abs.<span class="ltx_text ltx_lst_space"> </span>angular<span class="ltx_text ltx_lst_space"> </span>acc.<span class="ltx_text ltx_lst_space"> </span>of<span class="ltx_text ltx_lst_space"> </span>frame"</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1801" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">flow</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.SIunits.Force</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">f</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3]</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_string ltx_font_typewriter" style="font-size:90%;color:#000000;">"Cut<span class="ltx_text ltx_lst_space"> </span>force"</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1802" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">flow</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.SIunits.Torque</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">t</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3]</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_string ltx_font_typewriter" style="font-size:90%;color:#000000;">"Cut<span class="ltx_text ltx_lst_space"> </span>torque"</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1803" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Frame_Illegal</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
</div>
</div>
<div id="Ch9.S3.SS1.p4" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_emph ltx_font_italic">The</span> <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">Frame_Illegal</span> <span class="ltx_text ltx_emph ltx_font_italic">connector (intended to be used in a
simple MultiBody-package without over-determined connectors) is illegal
since the number of flow and non-flow variables do not match. The
solution is to create two connector classes, where two 3-vectors (e.g.,
a and z) are acausal Real and the other variables are matching pairs of</span>
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;background-color:#FFFFFF;">input</span> <span class="ltx_text ltx_emph ltx_font_italic">and</span> <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;background-color:#FFFFFF;">output</span><span class="ltx_text ltx_emph ltx_font_italic">. This ensures that the models can only be
connected in a tree-structure or require a “loop-breaker” joint for
every closed kinematic loop:</span></p>
</div>
<div id="Ch9.S3.SS1.p5" class="ltx_para">
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,Y29ubmVjdG9yIEZyYW1lX2EgImNvcnJlY3QgY29ubmVjdG9yIgogIGlucHV0IE1vZGVsaWNhLlNJdW5pdHMuUG9zaXRpb24gcjBbM107CiAgaW5wdXQgUmVhbCBTWzMsIDNdOwogIGlucHV0IE1vZGVsaWNhLlNJdW5pdHMuVmVsb2NpdHkgdlszXTsKICBpbnB1dCBNb2RlbGljYS5TSXVuaXRzLkFuZ3VsYXJWZWxvY2l0eSB3WzNdOwogIE1vZGVsaWNhLlNJdW5pdHMuQWNjZWxlcmF0aW9uIGFbM107CiAgTW9kZWxpY2EuU0l1bml0cy5Bbmd1bGFyQWNjZWxlcmF0aW9uIHpbM107CiAgZmxvdyBNb2RlbGljYS5TSXVuaXRzLkZvcmNlIGZbM107CiAgZmxvdyBNb2RlbGljYS5TSXVuaXRzLlRvcnF1ZSB0WzNdOwplbmQgRnJhbWVfYTsKCmNvbm5lY3RvciBGcmFtZV9iICJjb3JyZWN0IGNvbm5lY3RvciIKICBvdXRwdXQgTW9kZWxpY2EuU0l1bml0cy5Qb3NpdGlvbiByMFszXTsKICBvdXRwdXQgUmVhbCBTWzMsIDNdOwogIG91dHB1dCBNb2RlbGljYS5TSXVuaXRzLlZlbG9jaXR5IHZbM107CiAgb3V0cHV0IE1vZGVsaWNhLlNJdW5pdHMuQW5ndWxhclZlbG9jaXR5IHdbM107CiAgTW9kZWxpY2EuU0l1bml0cy5BY2NlbGVyYXRpb24gYVszXTsKICBNb2RlbGljYS5TSXVuaXRzLkFuZ3VsYXJBY2NlbGVyYXRpb24gelszXTsKICBmbG93IE1vZGVsaWNhLlNJdW5pdHMuRm9yY2UgZlszXTsKICBmbG93IE1vZGVsaWNhLlNJdW5pdHMuVG9ycXVlIHRbM107CmVuZCBGcmFtZV9iOw==">⬇</a></div>
<div id="lstnumberx1804" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">connector</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Frame_a</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_string ltx_font_typewriter" style="font-size:90%;color:#000000;">"correct<span class="ltx_text ltx_lst_space"> </span>connector"</span>
</div>
<div id="lstnumberx1805" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">input</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.SIunits.Position</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">r0</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3];</span>
</div>
<div id="lstnumberx1806" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">input</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">Real</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">S</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">3];</span>
</div>
<div id="lstnumberx1807" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">input</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.SIunits.Velocity</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">v</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3];</span>
</div>
<div id="lstnumberx1808" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">input</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.SIunits.AngularVelocity</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">w</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3];</span>
</div>
<div id="lstnumberx1809" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.SIunits.Acceleration</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">a</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3];</span>
</div>
<div id="lstnumberx1810" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.SIunits.AngularAcceleration</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">z</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3];</span>
</div>
<div id="lstnumberx1811" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">flow</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.SIunits.Force</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">f</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3];</span>
</div>
<div id="lstnumberx1812" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">flow</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.SIunits.Torque</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">t</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3];</span>
</div>
<div id="lstnumberx1813" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Frame_a</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1814" class="ltx_listingline">
</div>
<div id="lstnumberx1815" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">connector</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Frame_b</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_string ltx_font_typewriter" style="font-size:90%;color:#000000;">"correct<span class="ltx_text ltx_lst_space"> </span>connector"</span>
</div>
<div id="lstnumberx1816" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">output</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.SIunits.Position</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">r0</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3];</span>
</div>
<div id="lstnumberx1817" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">output</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">Real</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">S</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">3];</span>
</div>
<div id="lstnumberx1818" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">output</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.SIunits.Velocity</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">v</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3];</span>
</div>
<div id="lstnumberx1819" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">output</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.SIunits.AngularVelocity</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">w</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3];</span>
</div>
<div id="lstnumberx1820" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.SIunits.Acceleration</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">a</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3];</span>
</div>
<div id="lstnumberx1821" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.SIunits.AngularAcceleration</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">z</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3];</span>
</div>
<div id="lstnumberx1822" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">flow</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.SIunits.Force</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">f</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3];</span>
</div>
<div id="lstnumberx1823" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">flow</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.SIunits.Torque</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">t</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3];</span>
</div>
<div id="lstnumberx1824" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Frame_b</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
</div>
</div>
<div id="Ch9.S3.SS1.p6" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_emph ltx_font_italic">The subsequent connectors</span> <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">Plug_Expanded</span> <span class="ltx_text ltx_emph ltx_font_italic">and</span> <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">PlugExpanded2</span>
<span class="ltx_text ltx_emph ltx_font_italic">are correct, but</span> <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">Plug_Expanded_Illegal</span> <span class="ltx_text ltx_emph ltx_font_italic">is illegal since
the number of non-flow and flow variables is different if “<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter ltx_font_upright" style="font-size:90%;background-color:#FFFFFF;">n</span>”
and “<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter ltx_font_upright" style="font-size:90%;background-color:#FFFFFF;">m</span>” are different. It is not clear how a tool can detect in
general that connectors such as</span> <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">Plug_Expanded_Illegal</span> <span class="ltx_text ltx_emph ltx_font_italic">are
illegal. However, it is always possible to detect this defect after
actual values of parameters and constants are provided in the simulation
model.</span></p>
</div>
<div id="Ch9.S3.SS1.p7" class="ltx_para">
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,Y29ubmVjdG9yIFBsdWdfRXhwYW5kZWQgImNvcnJlY3QgY29ubmVjdG9yIgogIHBhcmFtZXRlciBJbnRlZ2VyIG09MzsKICBSZWFsIHZbbV07CiAgZmxvdyBSZWFsIGlbbV07CmVuZCBQbHVnX0V4cGFuZGVkOwoKY29ubmVjdG9yIFBsdWdfRXhwYW5kZWQyICJjb3JyZWN0IGNvbm5lY3RvciIKICBwYXJhbWV0ZXIgSW50ZWdlciBtPTM7CiAgZmluYWwgcGFyYW1ldGVyIEludGVnZXIgbj1tOwogIFJlYWwgdlttXTsKICBmbG93IFJlYWwgaVtuXTsKZW5kIFBsdWdfRXhwYW5kZWQyOwoKY29ubmVjdG9yIFBsdWdfRXhwYW5kZWRfSWxsZWdhbCAiY29ubmVjdG9yIGlzIGlsbGVnYWwiCiAgcGFyYW1ldGVyIEludGVnZXIgbT0zOwogIHBhcmFtZXRlciBJbnRlZ2VyIG49bTsKICBSZWFsIHZbbV07CiAgZmxvdyBSZWFsIGlbbl07CmVuZCBQbHVnX0V4cGFuZGVkX0lsbGVnYWw7">⬇</a></div>
<div id="lstnumberx1825" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">connector</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Plug_Expanded</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_string ltx_font_typewriter" style="font-size:90%;color:#000000;">"correct<span class="ltx_text ltx_lst_space"> </span>connector"</span>
</div>
<div id="lstnumberx1826" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">parameter</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">m</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=3;</span>
</div>
<div id="lstnumberx1827" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">Real</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">v</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">m</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">];</span>
</div>
<div id="lstnumberx1828" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">flow</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">Real</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">i</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">m</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">];</span>
</div>
<div id="lstnumberx1829" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Plug_Expanded</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1830" class="ltx_listingline">
</div>
<div id="lstnumberx1831" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">connector</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Plug_Expanded2</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_string ltx_font_typewriter" style="font-size:90%;color:#000000;">"correct<span class="ltx_text ltx_lst_space"> </span>connector"</span>
</div>
<div id="lstnumberx1832" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">parameter</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">m</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=3;</span>
</div>
<div id="lstnumberx1833" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">final</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">parameter</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">n</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">m</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1834" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">Real</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">v</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">m</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">];</span>
</div>
<div id="lstnumberx1835" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">flow</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">Real</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">i</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">n</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">];</span>
</div>
<div id="lstnumberx1836" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Plug_Expanded2</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1837" class="ltx_listingline">
</div>
<div id="lstnumberx1838" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">connector</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Plug_Expanded_Illegal</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_string ltx_font_typewriter" style="font-size:90%;color:#000000;">"connector<span class="ltx_text ltx_lst_space"> </span>is<span class="ltx_text ltx_lst_space"> </span>illegal"</span>
</div>
<div id="lstnumberx1839" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">parameter</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">m</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=3;</span>
</div>
<div id="lstnumberx1840" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">parameter</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">n</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">m</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1841" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">Real</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">v</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">m</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">];</span>
</div>
<div id="lstnumberx1842" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">flow</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">Real</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">i</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">n</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">];</span>
</div>
<div id="lstnumberx1843" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Plug_Expanded_Illegal</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
</div>
</div>
<div id="Ch9.S3.SS1.p8" class="ltx_para">
<p class="ltx_p">]</p>
</div>
</section>
</section>
<section id="equation-operators-for-overconstrained-connection-based-equation-systems1" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">9.4 </span>Equation Operators for Overconstrained Connection-Based Equation Systems</h2>

<div id="Ch9.S4.p1" class="ltx_para">
<p class="ltx_p">There is a special problem regarding equation systems resulting from
<span class="ltx_text ltx_emph ltx_font_italic">loops</span> in connection graphs where the connectors contain
<span class="ltx_text ltx_emph ltx_font_italic">non-flow</span> (i.e., potential) variables <span class="ltx_text ltx_emph ltx_font_italic">dependent</span> on each
other. When a loop structure occurs in such a graph, the resulting
equation system will be <span class="ltx_text ltx_emph ltx_font_italic">overconstrained</span>, i.e., have more
equations than variables, since there are implicit constraints between
certain non-flow variables in the connector in addition to the
connection equations around the loop. At the current state-of-the-art,
it is not possible to automatically eliminate the unneeded equations
from the resulting equation system without additional information from
the model designer.</p>
</div>
<div id="Ch9.S4.p2" class="ltx_para">
<p class="ltx_p">This section describes a set of equation operators for such
overconstrained connection-based equation systems, that makes it
possible for the model designer to specify enough information in the
model to allow a Modelica environment to automatically remove the
superfluous equations.</p>
</div>
<div id="Ch9.S4.p3" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_emph ltx_font_italic">Connectors may contain redundant variables. For example, the
orientation between two coordinate systems in 3 dimensions can be
described by 3 independent variables. However, every description of
orientation with 3 variables has at least one singularity in the region
where the variables are defined. It is therefore not possible to declare
only 3 variables in a connector. Instead n variables (n &gt;
3) have to be used. These variables are no longer independent from each
other and there are n-3 constraint equations that have to be fulfilled.
A proper description of a redundant set of variables with constraint
equations does no longer have a singularity. A model that has loops in
the connection structure formed by components and connectors with
redundant variables, may lead to a differential algebraic equation
system that has more equations than unknown variables. The superfluous
equations are usually consistent with the rest of the equations, i.e., a
unique mathematical solution exists. Such models cannot be treated with
the currently known symbolic transformation methods. To overcome this
situation, operators are defined in order that a Modelica translator can
remove the superfluous equations. This is performed by replacing the
equality equations of non-flow variables from connection sets by a
reduced number of equations in certain situations.</span></p>
</div>
<div id="Ch9.S4.p4" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_emph ltx_font_italic">This section handles a certain class of overdetermined systems due
to connectors that have a redundant set of variables. There are other
causes of overdetermined systems, e.g., explicit zero-sum equations for
flow variables, that are not handled by the method described below</span>.]</p>
</div>
<section id="overconstrained-equation-operators-for-connection-graphs" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">9.4.1 </span>Overconstrained Equation Operators for Connection Graphs</h3>

<div id="Ch9.S4.SS1.p1" class="ltx_para">
<p class="ltx_p">A type or record declaration may have an optional definition of function
“<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">equalityConstraint</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(<span class="ltx_text ltx_lst_identifier">..</span>)</span></span>” that shall have the following prototype:</p>
</div>
<div id="Ch9.S4.SS1.p2" class="ltx_para">
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,dHlwZSBUeXBlIC8vIG92ZXJkZXRlcm1pbmVkIHR5cGUKICBleHRlbmRzIDxiYXNlIHR5cGU+OwogIGZ1bmN0aW9uIGVxdWFsaXR5Q29uc3RyYWludCAvLyBub24tcmVkdW5kYW50IGVxdWFsaXR5CiAgICBpbnB1dCBUeXBlIFQxOwogICAgaW5wdXQgVHlwZSBUMjsKICAgIG91dHB1dCBSZWFsIHJlc2lkdWVbIDxuPiBdOwogIGFsZ29yaXRobQogICAgcmVzaWR1ZSA6PSAuLi4KICBlbmQgZXF1YWxpdHlDb25zdHJhaW50OwplbmQgVHlwZTsKCnJlY29yZCBSZWNvcmQKICA8IGRlY2xhcmF0aW9uIG9mIHJlY29yZCBmaWVsZHM+CiAgZnVuY3Rpb24gZXF1YWxpdHlDb25zdHJhaW50IC8vIG5vbi1yZWR1bmRhbnQgZXF1YWxpdHkKICAgIGlucHV0IFJlY29yZCBSMTsKICAgIGlucHV0IFJlY29yZCBSMjsKICAgIG91dHB1dCBSZWFsIHJlc2lkdWVbIDxuPiBdOwogIGFsZ29yaXRobQogICAgcmVzaWR1ZSA6PSAuLi4KICBlbmQgZXF1YWxpdHlDb25zdHJhaW50OwplbmQgUmVjb3JkOw==">⬇</a></div>
<div id="lstnumberx1844" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">type</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">Type</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>overdetermined<span class="ltx_text ltx_lst_space"> </span>type</span>
</div>
<div id="lstnumberx1845" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">extends</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">&lt;</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">base</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">type</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">&gt;;</span>
</div>
<div id="lstnumberx1846" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">function</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">equalityConstraint</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>non-redundant<span class="ltx_text ltx_lst_space"> </span>equality</span>
</div>
<div id="lstnumberx1847" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">input</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">Type</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">T1</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1848" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">input</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">Type</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">T2</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1849" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">output</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">Real</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">residue</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">&lt;</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">n</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">&gt;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">];</span>
</div>
<div id="lstnumberx1850" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">algorithm</span>
</div>
<div id="lstnumberx1851" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">    </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">residue</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">:=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">...</span>
</div>
<div id="lstnumberx1852" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">equalityConstraint</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1853" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">Type</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1854" class="ltx_listingline">
</div>
<div id="lstnumberx1855" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">record</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">Record</span>
</div>
<div id="lstnumberx1856" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">&lt;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">declaration</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">of</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">record</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">fields</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">&gt;</span>
</div>
<div id="lstnumberx1857" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">function</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">equalityConstraint</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>non-redundant<span class="ltx_text ltx_lst_space"> </span>equality</span>
</div>
<div id="lstnumberx1858" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">input</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">Record</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">R1</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1859" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">input</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">Record</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">R2</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1860" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">output</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">Real</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">residue</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">&lt;</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">n</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">&gt;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">];</span>
</div>
<div id="lstnumberx1861" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">algorithm</span>
</div>
<div id="lstnumberx1862" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">    </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">residue</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">:=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">...</span>
</div>
<div id="lstnumberx1863" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">equalityConstraint</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1864" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">Record</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
</div>
<p class="ltx_p">The “residue” output of the <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">equalityConstraint</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(<span class="ltx_text ltx_lst_identifier">..</span>)</span></span> function shall have
known size, say constant n. The function shall express the equality
between the two type instances <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">T1</span> and <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">T2</span> or the record instances
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">R1</span> and
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">R2</span>, respectively, with a non-redundant number <math id="Ch9.S4.SS1.p2.m1" class="ltx_Math" alttext="n\geq 0" display="inline"><mrow><mi>n</mi><mo>≥</mo><mn>0</mn></mrow></math> of equations. The
residues of these equations are returned in vector “residue” of size
n. The set of n non-redundant equations stating that <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">R1</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">R2</span></span></span> is given by
the equation (<span class="ltx_text ltx_font_bold">0</span> characterizes a vector of zeros of appropriate
size):
</p>
</div>
<div id="Ch9.S4.SS1.p3" class="ltx_para">
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ICBSZWNvcmQgUjEsIFIyOwplcXVhdGlvbgogIDAgPSBSZWNvcmQuZXF1YWxpdHlDb25zdHJhaW50KFIxLFIyKTs=">⬇</a></div>
<div id="lstnumberx1865" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">Record</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">R1</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">R2</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1866" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">equation</span>
</div>
<div id="lstnumberx1867" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">0</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Record.equalityConstraint</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">R1</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">R2</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">);</span>
</div>
</div>
<p class="ltx_p">[<span class="ltx_text ltx_emph ltx_font_italic">If the elements of a record</span> <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;background-color:#FFFFFF;">Record</span> <span class="ltx_text ltx_emph ltx_font_italic">are not independent
from each other, the equation “<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_font_upright" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">R1</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">R2</span></span></span>” contains redundant
equations</span>].</p>
</div>
<div id="Ch9.S4.SS1.p4" class="ltx_para">
<p class="ltx_p">A type class with an <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">equalityConstraint</span> function declaration is called
overdetermined type. A record class with an <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">equalityConstraint</span> function
definition is called overdetermined record. A connector that contains
instances of overdetermined type and/or record classes is called
overdetermined connector. An overdetermined type or record may neither
have flow components nor may be used as a type of flow components. If an
array is used as argument to any of the Connections.* functions it is
treated as one unit – there is no special treatment of this case –
however, there is for connect – see <a href="#connect-equations-and-connectors" title="9.1 Connect-Equations and Connectors ‣ Chapter 9 Connectors and Connections ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">section 9.1</span></a>.</p>
</div>
<div id="Ch9.S4.SS1.p5" class="ltx_para">
<p class="ltx_p">Every instance of an overdetermined type or record in an overdetermined
connector is a node in a virtual connection graph that is used to
determine when the standard equation “<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">R1</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">R2</span></span></span>” or when the equation
“<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">0<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">equalityConstraint</span>(<span class="ltx_text ltx_lst_identifier">R1</span>,<span class="ltx_text ltx_lst_identifier">R2</span>)</span>”has to be used for the generation of
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">connect</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(<span class="ltx_text ltx_lst_identifier">...</span>)</span></span> equations. The branches of the virtual connection graph are
implicitly defined by “<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">connect</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(<span class="ltx_text ltx_lst_identifier">..</span>)</span></span>” and explicitly by
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Connections.branch</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(<span class="ltx_text ltx_lst_identifier">...</span>)</span></span> statements, see table below. <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">Connections</span> is a
built-in package in global scope containing built-in operators.
Additionally, corresponding nodes of the virtual connection graph have
to be defined as roots or as potential roots with functions
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Connections.root</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(<span class="ltx_text ltx_lst_identifier">...</span>)</span></span> and <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Connections.potentialRoot</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(<span class="ltx_text ltx_lst_identifier">...</span>)</span></span>, respectively.
In the following table, <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">A</span> and <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">B</span> are connector instances that may be
hierarchically structured, e.g., <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">A</span> may be an abbreviation for
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">EnginePort.Frame</span>.</p>
</div>
<figure id="Ch9.T1" class="ltx_table">
<table class="ltx_tabular">
<tr class="ltx_tr">
<td class="ltx_td ltx_align_justify ltx_border_l ltx_border_r ltx_border_t" style="width:145.1pt;"><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">connect</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(<span class="ltx_text ltx_lst_identifier">A</span>,<span class="ltx_text ltx_lst_identifier">B</span>);</span></span></td>
<td class="ltx_td ltx_align_justify ltx_border_r ltx_border_t" style="width:284.5pt;">Defines <span class="ltx_text ltx_emph ltx_font_italic">breakable branches</span> from the
overdetermined type or record instances in connector instance A to the
corresponding overdetermined type or record instances in connector
instance B for a virtual connection graph. The types of the
corresponding overdetermined type or record instances shall be the
same.</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_justify ltx_border_l ltx_border_r ltx_border_t" style="width:145.1pt;"><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Connections.branch</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(<span class="ltx_text ltx_lst_identifier">A.R</span>,<span class="ltx_text ltx_lst_identifier">B.R</span>);</span></span></td>
<td class="ltx_td ltx_align_justify ltx_border_r ltx_border_t" style="width:284.5pt;">Defines a <span class="ltx_text ltx_emph ltx_font_italic">non-breakable branch</span>
from the overdetermined type or record instance R in connector instance
A to the corresponding overdetermined type or record instance R in
connector instance B for a virtual connection graph. This function can
be used at all places where a connect(..) statement is allowed
[<span class="ltx_text ltx_emph ltx_font_italic">e.g., it is not allowed to use this function in a when-clause.
This definition shall be used if in a model with connectors A and B the
overdetermined records</span> <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">A.R</span> <span class="ltx_text ltx_emph ltx_font_italic">and</span> <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">B.R</span> <span class="ltx_text ltx_emph ltx_font_italic">are algebraically
coupled in the model, e.g., due to</span> <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">B.R</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">f</span>(<span class="ltx_text ltx_lst_identifier">A.R</span></span></span><span class="ltx_text ltx_emph ltx_font_italic">, &lt;other
unknowns&gt;)</span>]<span class="ltx_text ltx_emph ltx_wrap ltx_font_italic">.</span>
</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_justify ltx_border_l ltx_border_r ltx_border_t" style="width:145.1pt;"><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Connections.root</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(<span class="ltx_text ltx_lst_identifier">A.R</span>);</span></span></td>
<td class="ltx_td ltx_align_justify ltx_border_r ltx_border_t" style="width:284.5pt;">The overdetermined type or record instance R in
connector instance A is a (definite) <span class="ltx_text ltx_emph ltx_font_italic">root node</span> in a virtual
connection graph. [<span class="ltx_text ltx_emph ltx_font_italic">This definition shall be used if in a model
with connector</span> <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">A</span> <span class="ltx_text ltx_emph ltx_font_italic">the overdetermined record</span> <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">A.R</span> <span class="ltx_text ltx_emph ltx_font_italic">is
(consistently) assigned, e.g., from a parameter
expressions</span>]</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_justify ltx_border_l ltx_border_r ltx_border_t" style="width:145.1pt;">
<table class="ltx_tabular ltx_align_middle">
<tr class="ltx_tr">
<td class="ltx_td ltx_align_justify" style="width:145.1pt;"><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Connections.potentialRoot</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(<span class="ltx_text ltx_lst_identifier">A.R</span>);</span></span></td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_justify" style="width:145.1pt;"><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Connections.potentialRoot</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span></span></td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_justify" style="width:145.1pt;">
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">A.R</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">priority</span><span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">p</span>)</span></span>;</td>
</tr>
</table>
</td>
<td class="ltx_td ltx_align_justify ltx_border_r ltx_border_t" style="width:284.5pt;">The overdetermined type or record instance <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">R</span> in connector instance A is
a <span class="ltx_text ltx_emph ltx_font_italic">potential root node</span> in a virtual connection graph with priority
“p” (<math id="Ch9.T1.m1" class="ltx_Math" alttext="p\geq 0" display="inline"><mrow><mi>p</mi><mo>≥</mo><mn>0</mn></mrow></math>). If no second argument is provided, the priority is zero.
“<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">p</span>” shall be a parameter expression of type Integer<span class="ltx_text ltx_emph ltx_font_italic">.</span> In a
virtual connection subgraph without a Connections.root definition, one
of the potential roots with the lowest priority number is selected as
root [<span class="ltx_text ltx_emph ltx_font_italic">This definition may be used if in a model with connector</span>
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">A</span> <span class="ltx_text ltx_emph ltx_font_italic">the overdetermined record</span> <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">A.R</span> <span class="ltx_text ltx_emph ltx_font_italic">appears differentiated –</span>
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">der</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(<span class="ltx_text ltx_lst_identifier">A.R</span>)</span></span> <span class="ltx_text ltx_emph ltx_font_italic">– together with the</span> constraint equations <span class="ltx_text ltx_emph ltx_font_italic">of</span>
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">A.R</span><span class="ltx_text ltx_emph ltx_font_italic">, i.e., a non-redundant subset of</span> <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">A.R</span> <span class="ltx_text ltx_emph ltx_font_italic">maybe used as
states</span>]</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_justify ltx_border_l ltx_border_r ltx_border_t" style="width:145.1pt;"><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">b</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Connections.isRoot</span>(<span class="ltx_text ltx_lst_identifier">A.R</span>);</span></span></td>
<td class="ltx_td ltx_align_justify ltx_border_r ltx_border_t" style="width:284.5pt;">Returns true, if the overdetermined type
or record instance <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">R</span> in connector instance A is selected as a root in
the virtual connection graph.</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_justify ltx_border_b ltx_border_l ltx_border_r ltx_border_t" style="width:145.1pt;">
<table class="ltx_tabular ltx_align_middle">
<tr class="ltx_tr">
<td class="ltx_td ltx_align_justify" style="width:145.1pt;"><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">b</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Connections.rooted</span>(<span class="ltx_text ltx_lst_identifier">A.R</span>);</span></span></td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_justify" style="width:145.1pt;"><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">b</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">rooted</span>(<span class="ltx_text ltx_lst_identifier">A.R</span>);<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>deprecated</span></span></span></td>
</tr>
</table>
</td>
<td class="ltx_td ltx_align_justify ltx_border_b ltx_border_r ltx_border_t" style="width:284.5pt;">If the operator <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Connections.rooted</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(<span class="ltx_text ltx_lst_identifier">A.R</span>)</span></span>
is used, or the equivalent but deprecated operator <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">rooted</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(<span class="ltx_text ltx_lst_identifier">A.R</span>)</span></span>, then
there must be exactly one statement <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Connections.branch</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(<span class="ltx_text ltx_lst_identifier">A.R</span>,<span class="ltx_text ltx_lst_identifier">B.R</span>)</span></span>
involving <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">A.R</span> (the argument of <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">Connections.rooted</span> must be the first
argument of <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">Connections.branch</span>). In that case <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Connections.rooted</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(<span class="ltx_text ltx_lst_identifier">A.R</span>)</span></span>
returns true, if <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">A.R</span> is closer to the root of the spanning tree than
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">B.R</span>; otherwise false is returned. [<span class="ltx_text ltx_emph ltx_font_italic">This operator can be used to
avoid equation systems by providing analytic inverses, see
Modelica.Mechanics.MultiBody.Parts.FixedRotation.</span>]</td>
</tr>
</table>
</figure>
<div id="Ch9.S4.SS1.p6" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_emph ltx_font_italic">Note, that</span> <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">Connections.branch</span><span class="ltx_text ltx_emph ltx_font_italic">,</span> <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">Connections.root</span><span class="ltx_text ltx_emph ltx_font_italic">,</span>
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">Connections.potentialRoot</span> <span class="ltx_text ltx_emph ltx_font_italic">do not generate equations. They only
generate nodes and branches in the virtual graph for analysis
purposes.</span>]
</p>
</div>
</section>
<section id="converting-the-connection-graph-into-trees-and-generating-connection-equations" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">9.4.2 </span>Converting the Connection Graph into Trees and Generating Connection Equations</h3>

<div id="Ch9.S4.SS2.p1" class="ltx_para">
<p class="ltx_p">Before <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">connect</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(<span class="ltx_text ltx_lst_identifier">...</span>)</span></span> equations are generated, the virtual connection
graph is transformed into a set of spanning trees by removing breakable
branches from the graph. This is performed in the following way:</p>
</div>
<div id="Ch9.S4.SS2.p2" class="ltx_para">
<ol id="Ch9.S4.I1" class="ltx_enumerate">
<li id="Ch9.S4.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span> 
<div id="Ch9.S4.I1.i1.p1" class="ltx_para">
<p class="ltx_p">Every root node defined via the “<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Connections.root</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(<span class="ltx_text ltx_lst_identifier">..</span>)</span></span>” statement is
a definite root of one spanning tree.</p>
</div>
</li>
<li id="Ch9.S4.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span> 
<div id="Ch9.S4.I1.i2.p1" class="ltx_para">
<p class="ltx_p">The virtual connection graph may consist of sets of subgraphs that are
not connected together. Every subgraph in this set shall have at least
one root node or one potential root node in a simulation model. If a
graph of this set does not contain any root node, then one potential
root node in this subgraph that has the lowest priority number is
selected to be the root of that subgraph. The selection can be
inquired in a class with function <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Connections.isRoot</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(<span class="ltx_text ltx_lst_identifier">..</span>)</span></span>, see table
above.</p>
</div>
</li>
<li id="Ch9.S4.I1.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">3.</span> 
<div id="Ch9.S4.I1.i3.p1" class="ltx_para">
<p class="ltx_p">If there are n selected roots in a subgraph, then breakable branches
have to be removed such that the result shall be a set of n spanning
trees with the selected root nodes as roots.</p>
</div>
</li>
</ol>
</div>
<div id="Ch9.S4.SS2.p3" class="ltx_para">
<p class="ltx_p">After this analysis, the connection equations are generated in the
following way:</p>
</div>
<div id="Ch9.S4.SS2.p4" class="ltx_para">
<ol id="Ch9.S4.I2" class="ltx_enumerate">
<li id="Ch9.S4.I2.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span> 
<div id="Ch9.S4.I2.i1.p1" class="ltx_para">
<p class="ltx_p">For every breakable branch [<span class="ltx_text ltx_emph ltx_font_italic">i.e., a</span> <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">connect</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(<span class="ltx_text ltx_lst_identifier">A</span>,<span class="ltx_text ltx_lst_identifier">B</span>)</span></span>
<span class="ltx_text ltx_emph ltx_font_italic">equation,</span>] in one of the spanning trees, the connection
equations are generated according to <a href="#generation-of-connection-equations" title="9.2 Generation of Connection Equations ‣ Chapter 9 Connectors and Connections ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">section 9.2</span></a>.</p>
</div>
</li>
<li id="Ch9.S4.I2.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span> 
<div id="Ch9.S4.I2.i2.p1" class="ltx_para">
<p class="ltx_p">For every breakable branch not in any of the spanning trees, the
connection equations are generated according to <a href="#generation-of-connection-equations" title="9.2 Generation of Connection Equations ‣ Chapter 9 Connectors and Connections ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">section 9.2</span></a>, except
for overdetermined type or record instances R. Here the equations
“<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">0<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">R.equalityConstraint</span>(<span class="ltx_text ltx_lst_identifier">A.R</span>,<span class="ltx_text ltx_lst_identifier">B.R</span>)</span>” are generated instead
of “<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">A.R</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">B.R</span></span></span>”.</p>
</div>
</li>
</ol>
</div>
</section>
<section id="examples-of-overconstrained-connection-graphs" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">9.4.3 </span>Examples of Overconstrained Connection Graphs</h3>

<div id="Ch9.S4.SS3.p1" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_emph ltx_font_italic">Example:</span></p>
</div>
<figure id="Ch9.F2" class="ltx_figure">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure">Figure 9.2: </span>Example of a virtual connection graph.</figcaption><img src="media/overdetermined.png" id="Ch9.F2.g1" class="ltx_graphics" width="659" height="292" alt="">
</figure>
<div id="Ch9.S4.SS3.p2" class="ltx_para">
<p class="ltx_p">]</p>
</div>
<section id="an-overdetermined-connector-for-power-systems" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">9.4.3.1 </span>An Overdetermined Connector for Power Systems</h4>

<div id="Ch9.S4.SS3.SSS1.p1" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_emph ltx_font_italic">An overdetermined connector for power systems based on the
transformation theory of Park may be defined as:</span></p>
</div>
<div id="Ch9.S4.SS3.SSS1.p2" class="ltx_para">
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,dHlwZSBBQ19BbmdsZSAiQW5nbGUgb2Ygc291cmNlLCBlLmcuLCByb3RvciBvZiBnZW5lcmF0b3IiCiAgZXh0ZW5kcyBNb2RlbGljYS5TSXVuaXRzLkFuZ2xlOyAvLyBBQ19BbmdsZSBpcyBhIFJlYWwgbnVtYmVyCiAgLy8gd2l0aCB1bml0ID0gInJhZCIKICBmdW5jdGlvbiBlcXVhbGl0eUNvbnN0cmFpbnQKICAgIGlucHV0IEFDX0FuZ2xlIHRoZXRhMTsKICAgIGlucHV0IEFDX0FuZ2xlIHRoZXRhMjsKICAgIG91dHB1dCBSZWFsIHJlc2lkdWVbMF0gIk5vIGNvbnN0cmFpbnRzIgogIGFsZ29yaXRobQogICAgLyogbWFrZSBzdXJlIHRoYXQgdGhldGExIGFuZCB0aGV0YTIgZnJvbSBqb2luaW5nIGJyYW5jaGVzIGFyZSBpZGVudGljYWwgKi8KICAgIGFzc2VydChhYnModGhldGExIC0gdGhldGEyKSA8IDEuZS0xMCwgIkNvbnNpc3RlbnQgYW5nbGVzIik7CiAgZW5kIGVxdWFsaXR5Q29uc3RyYWludDsKZW5kIEFDX0FuZ2xlOwoKY29ubmVjdG9yIEFDX1BsdWcgIjMtcGhhc2UgYWx0ZXJuYXRpbmcgY3VycmVudCBjb25uZWN0b3IiCiAgaW1wb3J0IFNJID0gTW9kZWxpY2EuU0l1bml0czsKICBBQ19BbmdsZSB0aGV0YTsKICBTSS5Wb2x0YWdlIHZbM10gIlZvbHRhZ2VzIHJlc29sdmVkIGluIEFDX0FuZ2xlIGZyYW1lIjsKICBmbG93IFNJLkN1cnJlbnQgaVszXSAiQ3VycmVudHMgcmVzb2x2ZWQgaW4gQUNfQW5nbGUKZnJhbWUiOwplbmQgQUNfUGx1Zzs=">⬇</a></div>
<div id="lstnumberx1868" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">type</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">AC_Angle</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_string ltx_font_typewriter" style="font-size:90%;color:#000000;">"Angle<span class="ltx_text ltx_lst_space"> </span>of<span class="ltx_text ltx_lst_space"> </span>source,<span class="ltx_text ltx_lst_space"> </span>e.g.,<span class="ltx_text ltx_lst_space"> </span>rotor<span class="ltx_text ltx_lst_space"> </span>of<span class="ltx_text ltx_lst_space"> </span>generator"</span>
</div>
<div id="lstnumberx1869" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">extends</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.SIunits.Angle</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>AC_Angle<span class="ltx_text ltx_lst_space"> </span>is<span class="ltx_text ltx_lst_space"> </span>a<span class="ltx_text ltx_lst_space"> </span>Real<span class="ltx_text ltx_lst_space"> </span>number</span>
</div>
<div id="lstnumberx1870" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>with<span class="ltx_text ltx_lst_space"> </span>unit<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span>”rad”</span>
</div>
<div id="lstnumberx1871" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">function</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">equalityConstraint</span>
</div>
<div id="lstnumberx1872" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">input</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">AC_Angle</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">theta1</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1873" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">input</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">AC_Angle</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">theta2</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1874" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">output</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">Real</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">residue</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[0]</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_string ltx_font_typewriter" style="font-size:90%;color:#000000;">"No<span class="ltx_text ltx_lst_space"> </span>constraints"</span>
</div>
<div id="lstnumberx1875" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">algorithm</span>
</div>
<div id="lstnumberx1876" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">    </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">/*<span class="ltx_text ltx_lst_space"> </span>make<span class="ltx_text ltx_lst_space"> </span>sure<span class="ltx_text ltx_lst_space"> </span>that<span class="ltx_text ltx_lst_space"> </span>theta1<span class="ltx_text ltx_lst_space"> </span>and<span class="ltx_text ltx_lst_space"> </span>theta2<span class="ltx_text ltx_lst_space"> </span>from<span class="ltx_text ltx_lst_space"> </span>joining<span class="ltx_text ltx_lst_space"> </span>branches<span class="ltx_text ltx_lst_space"> </span>are<span class="ltx_text ltx_lst_space"> </span>identical<span class="ltx_text ltx_lst_space"> </span>*/</span>
</div>
<div id="lstnumberx1877" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">assert</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">abs</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">theta1</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">-</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">theta2</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">)</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">&lt;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">1</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">.e</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">-10,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_string ltx_font_typewriter" style="font-size:90%;color:#000000;">"Consistent<span class="ltx_text ltx_lst_space"> </span>angles"</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">);</span>
</div>
<div id="lstnumberx1878" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">equalityConstraint</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1879" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">AC_Angle</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1880" class="ltx_listingline">
</div>
<div id="lstnumberx1881" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">connector</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">AC_Plug</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_string ltx_font_typewriter" style="font-size:90%;color:#000000;">"3-phase<span class="ltx_text ltx_lst_space"> </span>alternating<span class="ltx_text ltx_lst_space"> </span>current<span class="ltx_text ltx_lst_space"> </span>connector"</span>
</div>
<div id="lstnumberx1882" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">import</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">SI</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.SIunits</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1883" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">AC_Angle</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">theta</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1884" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">SI.Voltage</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">v</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3]</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_string ltx_font_typewriter" style="font-size:90%;color:#000000;">"Voltages<span class="ltx_text ltx_lst_space"> </span>resolved<span class="ltx_text ltx_lst_space"> </span>in<span class="ltx_text ltx_lst_space"> </span>AC_Angle<span class="ltx_text ltx_lst_space"> </span>frame"</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1885" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">flow</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">SI.Current</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">i</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3]</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_string ltx_font_typewriter" style="font-size:90%;color:#000000;">"Currents<span class="ltx_text ltx_lst_space"> </span>resolved<span class="ltx_text ltx_lst_space"> </span>in<span class="ltx_text ltx_lst_space"> </span>AC_Angle</span>
</div>
<div id="lstnumberx1886" class="ltx_listingline">
<span class="ltx_text ltx_font_typewriter" style="font-size:90%;color:#000000;">frame"</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1887" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">AC_Plug</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
</div>
<p class="ltx_p"><span class="ltx_text ltx_emph ltx_font_italic">The currents and voltages in the connector are defined relatively
to the harmonic, high-frequency signal of a power source that is
essentially described by angle theta of the rotor of the source. This
allows much faster simulations, since the basic high frequency signal of
the power source is not part of the differential equations. For example,
when the source and the rest of the line operates with constant
frequency (= nominal case), then</span> <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">AC_Plug.v</span> <span class="ltx_text ltx_emph ltx_font_italic">and</span> <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">AC_Plug.i</span>
<span class="ltx_text ltx_emph ltx_font_italic">are constant. In this case a variable step integrator can select
large time steps. An element, such as a 3-phase inductor, may be
implemented as:</span></p>
</div>
<div id="Ch9.S4.SS3.SSS1.p3" class="ltx_para">
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,bW9kZWwgQUNfSW5kdWN0b3IKICBwYXJhbWV0ZXIgUmVhbCBYWzMsM10sIFlbMywzXTsgLy8gY29tcG9uZW50IGNvbnN0YW50cwogIEFDX3BsdWcgcDsKICBBQ19wbHVnIG47CmVxdWF0aW9uCiAgQ29ubmVjdGlvbnMuYnJhbmNoKHAudGhldGEsbi50aGV0YSk7IC8vYnJhbmNoIGluIHZpcnR1YWwgZ3JhcGgKICAvLyBzaW5jZSBuLnRoZXRhID0gcC50aGV0YQogIG4udGhldGEgPSBwLnRoZXRhOyAvLyBwYXNzIGFuZ2xlIHRoZXRhIGJldHdlZW4gcGx1Z3MKICBvbWVnYSA9IGRlciAocC50aGV0YSk7IC8vIGZyZXF1ZW5jeSBvZiBzb3VyY2UKICB6ZXJvcygzKSA9IHAuaSArIG4uaTsKICBYKmRlciAocC5pKSArIG9tZWdhKlkqcC5pID0gcC52IC0gbi52OwplbmQgQUNfSW5kdWN0b3I=">⬇</a></div>
<div id="lstnumberx1888" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">model</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">AC_Inductor</span>
</div>
<div id="lstnumberx1889" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">parameter</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">Real</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">X</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3,3],</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Y</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3,3];</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>component<span class="ltx_text ltx_lst_space"> </span>constants</span>
</div>
<div id="lstnumberx1890" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">AC_plug</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">p</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1891" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">AC_plug</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">n</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1892" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">equation</span>
</div>
<div id="lstnumberx1893" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Connections.branch</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">p.theta</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">n.theta</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">);</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//branch<span class="ltx_text ltx_lst_space"> </span>in<span class="ltx_text ltx_lst_space"> </span>virtual<span class="ltx_text ltx_lst_space"> </span>graph</span>
</div>
<div id="lstnumberx1894" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>since<span class="ltx_text ltx_lst_space"> </span>n.theta<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span>p.theta</span>
</div>
<div id="lstnumberx1895" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">n.theta</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">p.theta</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>pass<span class="ltx_text ltx_lst_space"> </span>angle<span class="ltx_text ltx_lst_space"> </span>theta<span class="ltx_text ltx_lst_space"> </span>between<span class="ltx_text ltx_lst_space"> </span>plugs</span>
</div>
<div id="lstnumberx1896" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">omega</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">der</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">p.theta</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">);</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>frequency<span class="ltx_text ltx_lst_space"> </span>of<span class="ltx_text ltx_lst_space"> </span>source</span>
</div>
<div id="lstnumberx1897" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">zeros</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(3)</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">p.i</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">+</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">n.i</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1898" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">X</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">*</span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">der</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">p.i</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">)</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">+</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">omega</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">*</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Y</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">*</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">p.i</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">p.v</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">-</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">n.v</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1899" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">AC_Inductor</span>
</div>
</div>
<p class="ltx_p"><span class="ltx_text ltx_emph ltx_font_italic">At the place where the source frequency, i.e., essentially
variable theta, is defined, a</span> <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Connections.root</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(<span class="ltx_text ltx_lst_identifier">..</span>)</span></span> <span class="ltx_text ltx_emph ltx_font_italic">must be
present:</span></p>
</div>
<div id="Ch9.S4.SS3.SSS1.p4" class="ltx_para">
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ICBBQ19wbHVnIHA7CmVxdWF0aW9uCiAgQ29ubmVjdGlvbnMucm9vdChwLnRoZXRhKTsKICBkZXIocC50aGV0YSkgPSAyKk1vZGVsaWNhLkNvbnN0YW50cy5waSo1MCAvLyA1MCBIejs=">⬇</a></div>
<div id="lstnumberx1900" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">AC_plug</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">p</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1901" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">equation</span>
</div>
<div id="lstnumberx1902" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Connections.root</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">p.theta</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">);</span>
</div>
<div id="lstnumberx1903" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">der</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">p.theta</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">)</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">2*</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.Constants.pi</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">*50</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>50<span class="ltx_text ltx_lst_space"> </span>Hz;</span>
</div>
</div>
<p class="ltx_p"><span class="ltx_text ltx_emph ltx_font_italic">The graph analysis performed with the virtual connection graph
identifies the connectors, where the</span> <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">AC_Angle</span> <span class="ltx_text ltx_emph ltx_font_italic">needs not to be
passed between components, in order to avoid redundant equations.</span></p>
</div>
</section>
<section id="an-overdetermined-connector-for-3-dimensional-mechanical-systems" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">9.4.3.2 </span>An Overdetermined Connector for 3-dimensional Mechanical Systems</h4>

<div id="Ch9.S4.SS3.SSS2.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_emph ltx_font_italic">An overdetermined connector for 3-dimensional mechanical systems
may be defined as:</span></p>
</div>
<div id="Ch9.S4.SS3.SSS2.p2" class="ltx_para">
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ICB0eXBlIFRyYW5zZm9ybWF0aW9uTWF0cml4ID0gUmVhbFszLDNdOwogIHR5cGUgT3JpZW50YXRpb24gIk9yaWVudGF0aW9uIGZyb20gZnJhbWUgMSB0byBmcmFtZSAyIgogICAgZXh0ZW5kc1RyYW5zZm9ybWF0aW9uTWF0cml4OwogICAgZnVuY3Rpb24gZXF1YWxpdHlDb25zdHJhaW50CiAgICAgIGlucHV0IE9yaWVudGF0aW9uIFIxICJSb3RhdGlvbiBmcm9tIGluZXJ0aWFsIGZyYW1lIHRvIGZyYW1lIDEiOwogICAgICBpbnB1dCBPcmllbnRhdGlvbiBSMiAiUm90YXRpb24gZnJvbSBpbmVydGlhbCBmcmFtZSB0byBmcmFtZSAyIjsKICAgICAgb3V0cHV0IFJlYWwgcmVzaWR1ZVszXTsKICAgICAgcHJvdGVjdGVkCiAgICAgIE9yaWVudGF0aW9uIFJfcmVsICJSZWxhdGl2ZSBSb3RhdGlvbiBmcm9tIGZyYW1lIDEgdG8gZnJhbWUgMiI7CiAgICBhbGdvcml0aG0KICAgICAgUl9yZWwgPSBSMip0cmFuc3Bvc2UoUjEpOwogICAgICAvKiBJZiBmcmFtZV8xIGFuZCBmcmFtZV8yIGFyZSBpZGVudGljYWwsIFJfcmVsIG11c3QgYmUKdGhlIHVuaXQgbWF0cml4LiBJZiB0aGV5IGFyZSBjbG9zZSB0b2dldGhlciwgUl9yZWwgY2FuIGJlCmxpbmVhcml6ZWQgeWllbGRpbmc6ClJfcmVsID0gWyAxLCBwaGkzLCAtcGhpMjsKLXBoaTMsIDEsIHBoaTE7CnBoaTIsIC1waGkxLCAxIF07CndoZXJlIHBoaTEsIHBoaTIsIHBoaTMgYXJlIHRoZSBzbWFsbCByb3RhdGlvbiBhbmdsZXMgYXJvdW5kCmF4aXMgeCwgeSwgeiBvZiBmcmFtZSAxIHRvIHJvdGF0ZSBmcmFtZSAxIGludG8gZnJhbWUgMi4KVGhlIGF0YW4yIGlzIHVzZWQgdG8gaGFuZGxlIGxhcmdlIHJvdGF0aW9uIGFuZ2xlcywgYnV0IGRvZXMgbm90Cm1vZGlmeSB0aGUgcmVzdWx0IGZvciBzbWFsbCBhbmdsZXMuCiovCiAgICAgIHJlc2lkdWUgOj0geyBNb2RlbGljYS5NYXRoLmF0YW4yKFJfcmVsWzIsIDNdLCBSX3JlbFsxLCAxXSksCiAgICAgIE1vZGVsaWNhLk1hdGguYXRhbjIoUl9yZWxbMywgMV0sIFJfcmVsWzIsIDJdKSwKICAgICAgTW9kZWxpY2EuTWF0aC5hdGFuMihSX3JlbFsxLCAyXSwgUl9yZWxbMywgM10pfTsKICAgIGVuZCBlcXVhbGl0eUNvbnN0cmFpbnQ7CiAgZW5kIE9yaWVudGF0aW9uOwoKICBjb25uZWN0b3IgRnJhbWUgIjMtZGltZW5zaW9uYWwgbWVjaGFuaWNhbCBjb25uZWN0b3IiCiAgICBpbXBvcnQgU0kgPSBNb2RlbGljYS5TSXVuaXRzOwogICAgU0kuUG9zaXRpb24gclszXSAiVmVjdG9yIGZyb20gaW5lcnRpYWwgZnJhbWUgdG8gRnJhbWUiOwogICAgT3JpZW50YXRpb24gUiAiT3JpZW50YXRpb24gZnJvbSBpbmVydGlhbCBmcmFtZSB0byBGcmFtZSI7CiAgICBmbG93IFNJLkZvcmNlIGZbM10gIkN1dC1mb3JjZSByZXNvbHZlZCBpbiBGcmFtZSI7CiAgICBmbG93IFNJLlRvcnF1ZSB0WzNdICJDdXQtdG9ycXVlIHJlc29sdmVkIGluIEZyYW1lIjsKICBlbmQgRnJhbWU7">⬇</a></div>
<div id="lstnumberx1904" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">type</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">TransformationMatrix</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">Real</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3,3];</span>
</div>
<div id="lstnumberx1905" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">type</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Orientation</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_string ltx_font_typewriter" style="font-size:90%;color:#000000;">"Orientation<span class="ltx_text ltx_lst_space"> </span>from<span class="ltx_text ltx_lst_space"> </span>frame<span class="ltx_text ltx_lst_space"> </span>1<span class="ltx_text ltx_lst_space"> </span>to<span class="ltx_text ltx_lst_space"> </span>frame<span class="ltx_text ltx_lst_space"> </span>2"</span>
</div>
<div id="lstnumberx1906" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">    </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">extendsTransformationMatrix</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1907" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">function</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">equalityConstraint</span>
</div>
<div id="lstnumberx1908" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">      </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">input</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Orientation</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">R1</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_string ltx_font_typewriter" style="font-size:90%;color:#000000;">"Rotation<span class="ltx_text ltx_lst_space"> </span>from<span class="ltx_text ltx_lst_space"> </span>inertial<span class="ltx_text ltx_lst_space"> </span>frame<span class="ltx_text ltx_lst_space"> </span>to<span class="ltx_text ltx_lst_space"> </span>frame<span class="ltx_text ltx_lst_space"> </span>1"</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1909" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">      </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">input</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Orientation</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">R2</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_string ltx_font_typewriter" style="font-size:90%;color:#000000;">"Rotation<span class="ltx_text ltx_lst_space"> </span>from<span class="ltx_text ltx_lst_space"> </span>inertial<span class="ltx_text ltx_lst_space"> </span>frame<span class="ltx_text ltx_lst_space"> </span>to<span class="ltx_text ltx_lst_space"> </span>frame<span class="ltx_text ltx_lst_space"> </span>2"</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1910" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">      </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">output</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">Real</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">residue</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3];</span>
</div>
<div id="lstnumberx1911" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">      </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">protected</span>
</div>
<div id="lstnumberx1912" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">      </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Orientation</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">R_rel</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_string ltx_font_typewriter" style="font-size:90%;color:#000000;">"Relative<span class="ltx_text ltx_lst_space"> </span>Rotation<span class="ltx_text ltx_lst_space"> </span>from<span class="ltx_text ltx_lst_space"> </span>frame<span class="ltx_text ltx_lst_space"> </span>1<span class="ltx_text ltx_lst_space"> </span>to<span class="ltx_text ltx_lst_space"> </span>frame<span class="ltx_text ltx_lst_space"> </span>2"</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1913" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">algorithm</span>
</div>
<div id="lstnumberx1914" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">      </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">R_rel</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">R2</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">*</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">transpose</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">R1</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">);</span>
</div>
<div id="lstnumberx1915" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">      </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">/*<span class="ltx_text ltx_lst_space"> </span>If<span class="ltx_text ltx_lst_space"> </span>frame_1<span class="ltx_text ltx_lst_space"> </span>and<span class="ltx_text ltx_lst_space"> </span>frame_2<span class="ltx_text ltx_lst_space"> </span>are<span class="ltx_text ltx_lst_space"> </span>identical,<span class="ltx_text ltx_lst_space"> </span>R_rel<span class="ltx_text ltx_lst_space"> </span>must<span class="ltx_text ltx_lst_space"> </span>be</span>
</div>
<div id="lstnumberx1916" class="ltx_listingline">
<span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">the</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">unit</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">matrix.</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">If</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">they</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">are</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">close</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">together,</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">R_rel</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">can</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">be</span>
</div>
<div id="lstnumberx1917" class="ltx_listingline">
<span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">linearized</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">yielding:</span>
</div>
<div id="lstnumberx1918" class="ltx_listingline">
<span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">R_rel</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">=</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">[</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">1,</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">phi3,</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">-phi2;</span>
</div>
<div id="lstnumberx1919" class="ltx_listingline">
<span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">-phi3,</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">1,</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">phi1;</span>
</div>
<div id="lstnumberx1920" class="ltx_listingline">
<span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">phi2,</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">-phi1,</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">1</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">];</span>
</div>
<div id="lstnumberx1921" class="ltx_listingline">
<span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">where</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">phi1,</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">phi2,</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">phi3</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">are</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">the</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">small</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">rotation</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">angles</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">around</span>
</div>
<div id="lstnumberx1922" class="ltx_listingline">
<span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">axis</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">x,</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">y,</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">z</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">of</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">frame</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">1</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">to</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">rotate</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">frame</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">1</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">into</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">frame</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">2.</span>
</div>
<div id="lstnumberx1923" class="ltx_listingline">
<span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">The</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">atan2</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">is</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">used</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">to</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">handle</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">large</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">rotation</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">angles,</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">but</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">does</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">not</span>
</div>
<div id="lstnumberx1924" class="ltx_listingline">
<span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">modify</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">the</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">result</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">for</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">small</span><span class="ltx_text ltx_lst_space ltx_font_sansserif" style="font-size:90%;color:#006600;"> </span><span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">angles.</span>
</div>
<div id="lstnumberx1925" class="ltx_listingline">
<span class="ltx_text ltx_font_sansserif" style="font-size:90%;color:#006600;">*/</span>
</div>
<div id="lstnumberx1926" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">      </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">residue</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">:=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">{</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.Math.atan2</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">R_rel</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[2,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">3],</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">R_rel</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[1,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">1]),</span>
</div>
<div id="lstnumberx1927" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">      </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.Math.atan2</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">R_rel</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">1],</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">R_rel</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[2,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">2]),</span>
</div>
<div id="lstnumberx1928" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">      </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.Math.atan2</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">R_rel</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[1,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">2],</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">R_rel</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">3])};</span>
</div>
<div id="lstnumberx1929" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">equalityConstraint</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1930" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Orientation</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1931" class="ltx_listingline">
</div>
<div id="lstnumberx1932" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">connector</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Frame</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_string ltx_font_typewriter" style="font-size:90%;color:#000000;">"3-dimensional<span class="ltx_text ltx_lst_space"> </span>mechanical<span class="ltx_text ltx_lst_space"> </span>connector"</span>
</div>
<div id="lstnumberx1933" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">import</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">SI</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.SIunits</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1934" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">    </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">SI.Position</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">r</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3]</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_string ltx_font_typewriter" style="font-size:90%;color:#000000;">"Vector<span class="ltx_text ltx_lst_space"> </span>from<span class="ltx_text ltx_lst_space"> </span>inertial<span class="ltx_text ltx_lst_space"> </span>frame<span class="ltx_text ltx_lst_space"> </span>to<span class="ltx_text ltx_lst_space"> </span>Frame"</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1935" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">    </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Orientation</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">R</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_string ltx_font_typewriter" style="font-size:90%;color:#000000;">"Orientation<span class="ltx_text ltx_lst_space"> </span>from<span class="ltx_text ltx_lst_space"> </span>inertial<span class="ltx_text ltx_lst_space"> </span>frame<span class="ltx_text ltx_lst_space"> </span>to<span class="ltx_text ltx_lst_space"> </span>Frame"</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1936" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">flow</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">SI.Force</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">f</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3]</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_string ltx_font_typewriter" style="font-size:90%;color:#000000;">"Cut-force<span class="ltx_text ltx_lst_space"> </span>resolved<span class="ltx_text ltx_lst_space"> </span>in<span class="ltx_text ltx_lst_space"> </span>Frame"</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1937" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">flow</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">SI.Torque</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">t</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3]</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_string ltx_font_typewriter" style="font-size:90%;color:#000000;">"Cut-torque<span class="ltx_text ltx_lst_space"> </span>resolved<span class="ltx_text ltx_lst_space"> </span>in<span class="ltx_text ltx_lst_space"> </span>Frame"</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1938" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Frame</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
</div>
<p class="ltx_p"><span class="ltx_text ltx_emph ltx_font_italic">A fixed translation from a frame</span> <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">A</span> <span class="ltx_text ltx_emph ltx_font_italic">to a frame</span> <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">B</span> <span class="ltx_text ltx_emph ltx_font_italic">may
be defined as</span>:</p>
</div>
<div id="Ch9.S4.SS3.SSS2.p3" class="ltx_para">
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,bW9kZWwgRml4ZWRUcmFuc2xhdGlvbgogIHBhcmFtZXRlciBNb2RlbGljYS5TSXVuaXRzLlBvc2l0aW9uIHJbM107CiAgRnJhbWUgZnJhbWVfYSwgZnJhbWVfYjsKZXF1YXRpb24KICBDb25uZWN0aW9ucy5icmFuY2goZnJhbWVfYS5SLCBmcmFtZV9iLlIpOwogIGZyYW1lX2IuciA9IGZyYW1lX2EuciArIHRyYW5zcG9zZShmcmFtZV9hLlIpKnI7CiAgZnJhbWVfYi5SID0gZnJhbWVfYS5SOwogIHplcm9zKDMpID0gZnJhbWVfYS5mICsgZnJhbWVfYi5mOwogIHplcm9zKDMpID0gZnJhbWVfYS50ICsgZnJhbWVfYi50ICsgY3Jvc3MociwgZnJhbWVfYi5mKTsKZW5kIEZpeGVkVHJhbnNsYXRpb247">⬇</a></div>
<div id="lstnumberx1939" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">model</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">FixedTranslation</span>
</div>
<div id="lstnumberx1940" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">parameter</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Modelica.SIunits.Position</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">r</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">[3];</span>
</div>
<div id="lstnumberx1941" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Frame</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">frame_a</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">frame_b</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1942" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">equation</span>
</div>
<div id="lstnumberx1943" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Connections.branch</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">frame_a.R</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">frame_b.R</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">);</span>
</div>
<div id="lstnumberx1944" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">frame_b.r</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">frame_a.r</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">+</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">transpose</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">frame_a.R</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">)*</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">r</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1945" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">frame_b.R</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">frame_a.R</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1946" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">zeros</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(3)</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">frame_a.f</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">+</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">frame_b.f</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1947" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">zeros</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(3)</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">frame_a.t</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">+</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">frame_b.t</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">+</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">cross</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">r</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">frame_b.f</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">);</span>
</div>
<div id="lstnumberx1948" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">FixedTranslation</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
</div>
<p class="ltx_p"><span class="ltx_text ltx_emph ltx_font_italic">Since the transformation matrix</span> <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">frame_a.R</span> <span class="ltx_text ltx_emph ltx_font_italic">is algebraically
coupled with</span> <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">frame_b.R</span><span class="ltx_text ltx_emph ltx_font_italic">, a branch in the virtual connection graph
has to be defined. At the inertial system, the orientation is
consistently initialized and therefore the orientation in the inertial
system connector has to be defined as root</span>:</p>
</div>
<div id="Ch9.S4.SS3.SSS2.p4" class="ltx_para">
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,bW9kZWwgSW5lcnRpYWxTeXN0ZW0KICBGcmFtZSBmcmFtZV9iOwplcXVhdGlvbgogIENvbm5lY3Rpb25zLnJvb3QoZnJhbWVfYi5SKTsKICBmcmFtZV9iLnIgPSB6ZXJvcygzKTsKICBmcmFtZV9iLlIgPSBpZGVudGl0eSgzKTsKZW5kIEluZXJ0aWFsU3lzdGVtOw==">⬇</a></div>
<div id="lstnumberx1949" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">model</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">InertialSystem</span>
</div>
<div id="lstnumberx1950" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Frame</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">frame_b</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
<div id="lstnumberx1951" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">equation</span>
</div>
<div id="lstnumberx1952" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Connections.root</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">frame_b.R</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">);</span>
</div>
<div id="lstnumberx1953" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">frame_b.r</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">zeros</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(3);</span>
</div>
<div id="lstnumberx1954" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">frame_b.R</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">identity</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(3);</span>
</div>
<div id="lstnumberx1955" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">InertialSystem</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
</div>
<p class="ltx_p">]</p>
</div>
</section>
</section>
</section>
</section>
</div>
<footer class="ltx_page_footer">
<div>
<a href="Ch8.html" title="Chapter 8 Equations ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref" rel="prev"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8 </span>Equations</span></a><a href="Ch10.html" title="Chapter 10 Arrays ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref" rel="next"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">10 </span>Arrays</span></a>
</div>
<div class="ltx_page_logo">Generated  on Sat May  1 09:01:01 2021 by <a href="http://dlmf.nist.gov/LaTeXML/">LaTeXML <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg==" alt="[LOGO]"></a>
</div></footer>
</div>
</body>
</html>
