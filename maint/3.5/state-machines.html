<!DOCTYPE html><html lang="en">
<head>
<title>17 State Machines‣ Modelica® Language Specification version 3.5</title>
<!--Generated on Sat May  1 09:04:16 2021 by LaTeXML (version 0.8.5) http://dlmf.nist.gov/LaTeXML/.-->
<!--Document created on February 18, 2021.-->

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="LaTeXML.css" type="text/css">
<link rel="stylesheet" href="ltx-report.css" type="text/css">
<link rel="stylesheet" href="ltx-listings.css" type="text/css">
<link rel="stylesheet" href="css/MLS.css" type="text/css">
<link rel="stylesheet" href="css/MLS-navbar-left.css" type="text/css">
<script src="LaTeXML-maybeMathjax.js" type="text/javascript"></script>
<link rel="up" href="MLS.html" title="Modelica® Language Specification version 3.5">
<link rel="start" href="MLS.html" title="Modelica® Language Specification version 3.5">
<link rel="prev" href="synchronous-language-elements.html" title="Chapter 16 Synchronous Language Elements ‣ Modelica® Language Specification version 3.5">
<link rel="next" href="annotations.html" title="Chapter 18 Annotations ‣ Modelica® Language Specification version 3.5">
<link rel="chapter" href="preface.html" title="Preface ‣ Modelica® Language Specification version 3.5">
<link rel="chapter" href="introduction1.html" title="Chapter 1 Introduction ‣ Modelica® Language Specification version 3.5">
<link rel="chapter" href="lexical-structure.html" title="Chapter 2 Lexical Structure ‣ Modelica® Language Specification version 3.5">
<link rel="chapter" href="operators-and-expressions.html" title="Chapter 3 Operators and Expressions ‣ Modelica® Language Specification version 3.5">
<link rel="chapter" href="class-predefined-types-and-declarations.html" title="Chapter 4 Classes, Predefined Types, and Declarations ‣ Modelica® Language Specification version 3.5">
<link rel="chapter" href="scoping-name-lookup-and-flattening.html" title="Chapter 5 Scoping, Name Lookup, and Flattening ‣ Modelica® Language Specification version 3.5">
<link rel="chapter" href="interface-or-type-relationships.html" title="Chapter 6 Interface or Type Relationships ‣ Modelica® Language Specification version 3.5">
<link rel="chapter" href="inheritance-modification-and-redeclaration.html" title="Chapter 7 Inheritance, Modification, and Redeclaration ‣ Modelica® Language Specification version 3.5">
<link rel="chapter" href="equations.html" title="Chapter 8 Equations ‣ Modelica® Language Specification version 3.5">
<link rel="chapter" href="connectors-and-connections.html" title="Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.5">
<link rel="chapter" href="arrays.html" title="Chapter 10 Arrays ‣ Modelica® Language Specification version 3.5">
<link rel="chapter" href="statements-and-algorithm-sections.html" title="Chapter 11 Statements and Algorithm Sections ‣ Modelica® Language Specification version 3.5">
<link rel="chapter" href="functions.html" title="Chapter 12 Functions ‣ Modelica® Language Specification version 3.5">
<link rel="chapter" href="packages.html" title="Chapter 13 Packages ‣ Modelica® Language Specification version 3.5">
<link rel="chapter" href="overloaded-operators.html" title="Chapter 14 Overloaded Operators ‣ Modelica® Language Specification version 3.5">
<link rel="chapter" href="stream-connectors.html" title="Chapter 15 Stream Connectors ‣ Modelica® Language Specification version 3.5">
<link rel="chapter" href="synchronous-language-elements.html" title="Chapter 16 Synchronous Language Elements ‣ Modelica® Language Specification version 3.5">
<link rel="chapter" href="annotations.html" title="Chapter 18 Annotations ‣ Modelica® Language Specification version 3.5">
<link rel="chapter" href="unit-expressions.html" title="Chapter 19 Unit Expressions ‣ Modelica® Language Specification version 3.5">
<link rel="chapter" href="the-modelica-standard-library.html" title="Chapter 20 The Modelica Standard Library ‣ Modelica® Language Specification version 3.5">
<link rel="appendix" href="modelica-concrete-syntax.html" title="Appendix A Modelica Concrete Syntax ‣ Modelica® Language Specification version 3.5">
<link rel="appendix" href="modelica-dae-representation.html" title="Appendix B Modelica DAE Representation ‣ Modelica® Language Specification version 3.5">
<link rel="appendix" href="derivation-of-stream-equations.html" title="Appendix C Derivation of Stream Equations ‣ Modelica® Language Specification version 3.5">
<link rel="appendix" href="modelica-revision-history.html" title="Appendix D Modelica Revision History ‣ Modelica® Language Specification version 3.5">
<link rel="bibliography" href="bib.html" title="References ‣ Modelica® Language Specification version 3.5">
<link rel="index" href="idx.html" title="Index ‣ Modelica® Language Specification version 3.5">
<meta name="keywords" lang="en" content=", , , , , delayed, delayed transition, immediate, immediate transition">
</head>
<body>
<nav class="ltx_page_navbar"><a href="MLS.html" title="Modelica® Language Specification version 3.5" class="ltx_ref" rel="start"><span class="ltx_text ltx_ref_title">Modelica<sup class="ltx_sup">®</sup> Language Specification version 3.5</span></a>
<div class="ltx_TOC">
<ul class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="preface.html" title="Preface ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_title">Preface</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="introduction1.html" title="Chapter 1 Introduction ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1 </span>Introduction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="lexical-structure.html" title="Chapter 2 Lexical Structure ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2 </span>Lexical Structure</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="operators-and-expressions.html" title="Chapter 3 Operators and Expressions ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3 </span>Operators and Expressions</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="class-predefined-types-and-declarations.html" title="Chapter 4 Classes, Predefined Types, and Declarations ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4 </span>Classes, Predefined Types, and Declarations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="scoping-name-lookup-and-flattening.html" title="Chapter 5 Scoping, Name Lookup, and Flattening ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5 </span>Scoping, Name Lookup, and Flattening</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="interface-or-type-relationships.html" title="Chapter 6 Interface or Type Relationships ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">6 </span>Interface or Type Relationships</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="inheritance-modification-and-redeclaration.html" title="Chapter 7 Inheritance, Modification, and Redeclaration ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7 </span>Inheritance, Modification, and Redeclaration</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="equations.html" title="Chapter 8 Equations ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8 </span>Equations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="connectors-and-connections.html" title="Chapter 9 Connectors and Connections ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9 </span>Connectors and Connections</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="arrays.html" title="Chapter 10 Arrays ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">10 </span>Arrays</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="statements-and-algorithm-sections.html" title="Chapter 11 Statements and Algorithm Sections ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">11 </span>Statements and Algorithm Sections</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="functions.html" title="Chapter 12 Functions ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">12 </span>Functions</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="packages.html" title="Chapter 13 Packages ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">13 </span>Packages</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="overloaded-operators.html" title="Chapter 14 Overloaded Operators ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">14 </span>Overloaded Operators</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="stream-connectors.html" title="Chapter 15 Stream Connectors ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">15 </span>Stream Connectors</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="synchronous-language-elements.html" title="Chapter 16 Synchronous Language Elements ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">16 </span>Synchronous Language Elements</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter ltx_ref_self">
<span class="ltx_ref ltx_ref_self"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">17 </span>State Machines</span></span>
<ul class="ltx_toclist ltx_toclist_chapter">
<li class="ltx_tocentry ltx_tocentry_section"><a href="#transitions" title="17.1 Transitions ‣ Chapter 17 State Machines ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">17.1 </span>Transitions</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a href="#state-machine-graphics" title="17.2 State Machine Graphics ‣ Chapter 17 State Machines ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">17.2 </span>State Machine Graphics</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a href="#state-machine-semantics" title="17.3 State Machine Semantics ‣ Chapter 17 State Machines ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">17.3 </span>State Machine Semantics</span></a>
<ul class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#state-activation" title="17.3.1 State Activation ‣ 17.3 State Machine Semantics ‣ Chapter 17 State Machines ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">17.3.1 </span>State Activation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#reset-handling" title="17.3.2 Reset Handling ‣ 17.3 State Machine Semantics ‣ Chapter 17 State Machines ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">17.3.2 </span>Reset Handling</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#activation-handling" title="17.3.3 Activation handling ‣ 17.3 State Machine Semantics ‣ Chapter 17 State Machines ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">17.3.3 </span>Activation handling</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#semantics-summary" title="17.3.4 Semantics Summary ‣ 17.3 State Machine Semantics ‣ Chapter 17 State Machines ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">17.3.4 </span>Semantics Summary</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#merging-variable-definitions" title="17.3.5 Merging Variable Definitions ‣ 17.3 State Machine Semantics ‣ Chapter 17 State Machines ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">17.3.5 </span>Merging Variable Definitions</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#merging-connections-to-multiple-outputs" title="17.3.6 Merging Connections to Multiple Outputs ‣ 17.3 State Machine Semantics ‣ Chapter 17 State Machines ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">17.3.6 </span>Merging Connections to Multiple Outputs</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#example" title="17.3.7 Example ‣ 17.3 State Machine Semantics ‣ Chapter 17 State Machines ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">17.3.7 </span>Example</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="annotations.html" title="Chapter 18 Annotations ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">18 </span>Annotations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="unit-expressions.html" title="Chapter 19 Unit Expressions ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">19 </span>Unit Expressions</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="the-modelica-standard-library.html" title="Chapter 20 The Modelica Standard Library ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">20 </span>The Modelica Standard Library</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="modelica-concrete-syntax.html" title="Appendix A Modelica Concrete Syntax ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A </span>Modelica Concrete Syntax</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="modelica-dae-representation.html" title="Appendix B Modelica DAE Representation ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">B </span>Modelica DAE Representation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="derivation-of-stream-equations.html" title="Appendix C Derivation of Stream Equations ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C </span>Derivation of Stream Equations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="modelica-revision-history.html" title="Appendix D Modelica Revision History ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">D </span>Modelica Revision History</span></a></li>
<li class="ltx_tocentry ltx_tocentry_bibliography"><a href="bib.html" title="References ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_title">References</span></a></li>
<li class="ltx_tocentry ltx_tocentry_index"><a href="idx.html" title="Index ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_title">Index</span></a></li>
</ul>
</div>
</nav>
<div class="ltx_page_main">
<header class="ltx_page_header">
<div>
<a href="MLS.html" title="Modelica® Language Specification version 3.5" class="ltx_ref" rel="up"><span class="ltx_text ltx_ref_title">Modelica<sup class="ltx_sup">®</sup> Language Specification version 3.5</span></a><a href="synchronous-language-elements.html" title="Chapter 16 Synchronous Language Elements ‣ Modelica® Language Specification version 3.5" class="ltx_ref" rel="prev"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">16 </span>Synchronous Language Elements</span></a><a href="annotations.html" title="Chapter 18 Annotations ‣ Modelica® Language Specification version 3.5" class="ltx_ref" rel="next"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">18 </span>Annotations</span></a>
</div></header>
<div class="ltx_page_content">
<section class="ltx_chapter" lang="en">
<h1 class="ltx_title ltx_title_chapter">
<span class="ltx_tag ltx_tag_chapter">Chapter 17 </span>State Machines</h1>
<div class="ltx_dates">(February 18, 2021)</div>

<div id="p1" class="ltx_para">
<p class="ltx_p">This chapter defines language elements to define clocked state machines.
These state machines have a similar modeling power as Statecharts <cite class="ltx_cite ltx_citemacro_citep">(Harel, <a href="bib.html#bib6" title="Statecharts: a visual formalism for complex systems" class="ltx_ref">1987</a>)</cite> and have the important feature that at one clock tick, there is only one assignment to every variable (for example, it is an error if state machines are executed in parallel and they assign to the same variable at the same clock tick; such errors are detected during translation).
Furthermore, it is possible to activate and deactivate clocked equations and blocks at a clock tick.
An efficient implementation will only evaluate the equations and blocks that are active at the current clock tick.
With other Modelica language elements, this important feature cannot be defined.</p>
</div>
<div id="p2" class="ltx_para">
<p class="ltx_p">The semantics of the state machines defined in this chapter is inspired by mode automata and is basically the one from Lucid Synchrone 3.0 <cite class="ltx_cite ltx_citemacro_citep">(Pouzet, <a href="bib.html#bib8" title="Lucid synchrone, version 3.0, tutorial and reference manual" class="ltx_ref">2006</a>)</cite>.
Note, safety critical control software in aircrafts is often defined with such kind of state machines.
The following properties are different to Lucid Synchrone 3.0:</p>
<ul id="S0.I1" class="ltx_itemize">
<li id="S0.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S0.I1.i1.p1" class="ltx_para">
<p class="ltx_p">Lucid Synchrone has two kinds of transitions: <em class="ltx_emph ltx_font_italic">strong</em> and
<em class="ltx_emph ltx_font_italic">weak</em> transitions. Strong transitions are executed before the
actions of a state are evaluated and weak transitions are executed
after the actions of a state are evaluated. This can lead to
surprising behavior, because the actions of a state are skipped if it
is activated by a weak transition and exited by a true strong
transition.</p>
</div>
<div id="S0.I1.i1.p2" class="ltx_para">
<p class="ltx_p">For this reason, the state machines in this chapter use <em class="ltx_emph ltx_font_italic">immediate</em>
(= the same as <em class="ltx_emph ltx_font_italic">strong</em>) and <em class="ltx_emph ltx_font_italic">delayed</em> transitions. Delayed
transitions are <em class="ltx_emph ltx_font_italic">immediate</em> transitions where the condition is
automatically delayed with an implicit <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="color:#543D08;background-color:#FFFFFF;">previous</span>.</p>
</div>
</li>
<li id="S0.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S0.I1.i2.p1" class="ltx_para">
<p class="ltx_p">Parallel state machines can be explicitly synchronized with a
language element (similarly as parallel branches in Sequential
Function Charts). This often occurring operation can also be defined
in Statecharts or in Lucid Synchrone state machines but only
indirectly with appropriate conditions on transitions.</p>
</div>
</li>
<li id="S0.I1.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S0.I1.i3.p1" class="ltx_para">
<p class="ltx_p">Modelica blocks can be used as states. They might contain
clocked or clocked discretized continuous-time equations (in the
latter case, the equations are integrated between the previous and the
next clock tick, if the corresponding state is active).</p>
</div>
</li>
</ul>
</div>
<section id="transitions" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">17.1 </span>Transitions</h2>

<div id="S1.p1" class="ltx_para">
<p class="ltx_p">Any Modelica block instance without continuous-time equations or
algorithms can potentially be a state of a state machine. A cluster of
instances which are coupled by <span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter ltx_font_bold" style="color:#003378;background-color:#FFFFFF;">transition</span> statements makes a
state machine. All parts of a state machine must have the same clock.
All transitions leaving one state must have different priorities. One
and only one instance in each state machine must be marked as initial by
appearing in an <span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter ltx_font_bold" style="color:#003378;background-color:#FFFFFF;">initialState</span> statement.</p>
</div>
<div id="S1.p2" class="ltx_para">
<p class="ltx_p">The special kinds of connect-equations listed below are used to define define a state machine.
</p>
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr class="ltx_tr">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_r ltx_border_t"><span class="ltx_text ltx_font_italic">Expression</span></th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_t"><span class="ltx_text ltx_font_italic">Description</span></th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_t"><span class="ltx_text ltx_font_italic">Details</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_tt"><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">transition</span><span class="ltx_text ltx_font_typewriter">(<math id="S1.p2.m1" class="ltx_Math" alttext="\mathit{from}" display="inline"><mi mathbackground="#FFFFFF">𝑓𝑟𝑜𝑚</mi></math>,<span class="ltx_text ltx_lst_space"> </span><math id="S1.p2.m2" class="ltx_Math" alttext="\mathit{to}" display="inline"><mi mathbackground="#FFFFFF">𝑡𝑜</mi></math>,<span class="ltx_text ltx_lst_space"> </span><math id="S1.p2.m3" class="ltx_Math" alttext="\mathit{condition}" display="inline"><mi mathbackground="#FFFFFF">𝑐𝑜𝑛𝑑𝑖𝑡𝑖𝑜𝑛</mi></math>,<span class="ltx_text ltx_lst_space"> </span><math id="S1.p2.m4" class="ltx_Math" alttext="\ldots" display="inline"><mi mathbackground="#FFFFFF" mathvariant="normal">…</mi></math>)</span></span></th>
<td class="ltx_td ltx_align_left ltx_border_tt">State machine transition between states</td>
<td class="ltx_td ltx_align_left ltx_border_tt"><a href="#modelica:transition" title="Operator 17.1 transition ‣ 17.1 Transitions ‣ Chapter 17 State Machines ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Operator</span> <span class="ltx_text ltx_ref_tag">17.1</span></a></td>
</tr>
<tr class="ltx_tr">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b ltx_border_r"><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">initialState</span><span class="ltx_text ltx_font_typewriter">(<math id="S1.p2.m5" class="ltx_Math" alttext="\mathit{state}" display="inline"><mi mathbackground="#FFFFFF">𝑠𝑡𝑎𝑡𝑒</mi></math>)</span></span></th>
<td class="ltx_td ltx_align_left ltx_border_b">State machine initial state</td>
<td class="ltx_td ltx_align_left ltx_border_b"><a href="#modelica:initialState" title="Operator 17.2 initialState ‣ 17.1 Transitions ‣ Chapter 17 State Machines ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Operator</span> <span class="ltx_text ltx_ref_tag">17.2</span></a></td>
</tr>
</tbody>
</table>
</div>
<div id="S1.p3" class="ltx_para">
<p class="ltx_p">The <span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter ltx_font_bold" style="color:#003378;background-color:#FFFFFF;">transition</span> and <span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter ltx_font_bold" style="color:#003378;background-color:#FFFFFF;">initialState</span> equations can only be used in equations, and cannot be used inside if-equations with conditions that are not parameter expressions, or in when-equations.</p>
</div>
<div id="S1.p4" class="ltx_para">
<p class="ltx_p">The operators listed below are used to query the status of the state machine.</p>
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr class="ltx_tr">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_r ltx_border_t"><span class="ltx_text ltx_font_italic">Expression</span></th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_t"><span class="ltx_text ltx_font_italic">Description</span></th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_t"><span class="ltx_text ltx_font_italic">Details</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr">
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_tt"><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">activeState</span><span class="ltx_text ltx_font_typewriter">(<math id="S1.p4.m1" class="ltx_Math" alttext="\mathit{state}" display="inline"><mi mathbackground="#FFFFFF">𝑠𝑡𝑎𝑡𝑒</mi></math>)</span></span></td>
<td class="ltx_td ltx_align_left ltx_border_tt">Predicate for active state</td>
<td class="ltx_td ltx_align_left ltx_border_tt"><a href="#modelica:activeState" title="Operator 17.3 activeState ‣ 17.1 Transitions ‣ Chapter 17 State Machines ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Operator</span> <span class="ltx_text ltx_ref_tag">17.3</span></a></td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_left ltx_border_r"><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">ticksInState</span><span class="ltx_text ltx_font_typewriter">()</span></span></td>
<td class="ltx_td ltx_align_left">Ticks since activation</td>
<td class="ltx_td ltx_align_left"><a href="#modelica:ticksInState" title="Operator 17.4 ticksInState ‣ 17.1 Transitions ‣ Chapter 17 State Machines ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Operator</span> <span class="ltx_text ltx_ref_tag">17.4</span></a></td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_left ltx_border_b ltx_border_r"><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">timeInState</span><span class="ltx_text ltx_font_typewriter">()</span></span></td>
<td class="ltx_td ltx_align_left ltx_border_b">Time since activation</td>
<td class="ltx_td ltx_align_left ltx_border_b"><a href="#modelica:timeInState" title="Operator 17.5 timeInState ‣ 17.1 Transitions ‣ Chapter 17 State Machines ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Operator</span> <span class="ltx_text ltx_ref_tag">17.5</span></a></td>
</tr>
</tbody>
</table>
</div>
<div id="modelica:transition" class="ltx_theorem ltx_theorem_operatordefinition">
<h6 class="ltx_title ltx_runin ltx_font_bold ltx_title_theorem">Operator 17.1 <span class="ltx_text ltx_font_typewriter">transition
<br class="ltx_break"></span>
</h6>
<div id="Thmoperatordefinition1.p1" class="ltx_para">
<div class="ltx_listing ltx_lst_language_modelica_synopsis ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,dHJhbnNpdGlvbigkXG1hdGhpdHtmcm9tfSQsICRcbWF0aGl0e3RvfSQsICRcbWF0aGl0e2NvbmRpdGlvbn0kLAogIGltbWVkaWF0ZT0kXG1hdGhpdHtpbW19JCwgcmVzZXQ9JFxtYXRoaXR7cmVzZXR9JCwgc3luY2hyb25pemU9JFxtYXRoaXR7c3luY2h9JCwgcHJpb3JpdHk9JFxtYXRoaXR7cHJpb30kKQ==">⬇</a></div>
<div id="lstnumberx4057" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">transition</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_font_typewriter"><math id="lstnumberx4057.m1" class="ltx_Math" alttext="\mathit{from}" display="inline"><mi mathbackground="#FFFFFF">𝑓𝑟𝑜𝑚</mi></math></span><span class="ltx_text ltx_font_typewriter">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter"><math id="lstnumberx4057.m2" class="ltx_Math" alttext="\mathit{to}" display="inline"><mi mathbackground="#FFFFFF">𝑡𝑜</mi></math></span><span class="ltx_text ltx_font_typewriter">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter"><math id="lstnumberx4057.m3" class="ltx_Math" alttext="\mathit{condition}" display="inline"><mi mathbackground="#FFFFFF">𝑐𝑜𝑛𝑑𝑖𝑡𝑖𝑜𝑛</mi></math></span><span class="ltx_text ltx_font_typewriter">,</span>
</div>
<div id="lstnumberx4058" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">immediate</span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_font_typewriter"><math id="lstnumberx4058.m1" class="ltx_Math" alttext="\mathit{imm}" display="inline"><mi mathbackground="#FFFFFF">𝑖𝑚𝑚</mi></math></span><span class="ltx_text ltx_font_typewriter">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">reset</span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_font_typewriter"><math id="lstnumberx4058.m2" class="ltx_Math" alttext="\mathit{reset}" display="inline"><mi mathbackground="#FFFFFF">𝑟𝑒𝑠𝑒𝑡</mi></math></span><span class="ltx_text ltx_font_typewriter">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">synchronize</span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_font_typewriter"><math id="lstnumberx4058.m3" class="ltx_Math" alttext="\mathit{synch}" display="inline"><mi mathbackground="#FFFFFF">𝑠𝑦𝑛𝑐ℎ</mi></math></span><span class="ltx_text ltx_font_typewriter">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">priority</span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_font_typewriter"><math id="lstnumberx4058.m4" class="ltx_Math" alttext="\mathit{prio}" display="inline"><mi mathbackground="#FFFFFF">𝑝𝑟𝑖𝑜</mi></math></span><span class="ltx_text ltx_font_typewriter">)</span>
</div>
</div>
<ul class="ltx_itemize">
<li id="S1.I1.ix1" class="ltx_item" style="list-style-type:none;">
<div id="S1.I1.ix1.p1" class="ltx_para">
<p class="ltx_p">Arguments <math id="S1.I1.ix1.p1.m1" class="ltx_Math" alttext="\mathit{from}" display="inline"><mi>𝑓𝑟𝑜𝑚</mi></math> and <math id="S1.I1.ix1.p1.m2" class="ltx_Math" alttext="\mathit{to}" display="inline"><mi>𝑡𝑜</mi></math> are block instances, and <math id="S1.I1.ix1.p1.m3" class="ltx_Math" alttext="\mathit{condition}" display="inline"><mi>𝑐𝑜𝑛𝑑𝑖𝑡𝑖𝑜𝑛</mi></math> is a <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="color:#543D08;background-color:#FFFFFF;">Boolean</span> argument.
The optional arguments <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">immediate</span>, <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">reset</span>, and <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">synchronize</span> are of type <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="color:#543D08;background-color:#FFFFFF;">Boolean</span>, have parameter variability and a default of <span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter ltx_font_bold" style="color:#003378;background-color:#FFFFFF;">true</span>, <span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter ltx_font_bold" style="color:#003378;background-color:#FFFFFF;">true</span>, <span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter ltx_font_bold" style="color:#003378;background-color:#FFFFFF;">false</span> respectively.
The optional argument <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">priority</span> is of type <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="color:#543D08;background-color:#FFFFFF;">Integer</span>, has parameter variability and a default of 1.</p>
</div>
<div id="S1.I1.ix1.p2" class="ltx_para">
<p class="ltx_p">This operator defines a transition from instance <math id="S1.I1.ix1.p2.m1" class="ltx_Math" alttext="\mathit{from}" display="inline"><mi>𝑓𝑟𝑜𝑚</mi></math> to instance <math id="S1.I1.ix1.p2.m2" class="ltx_Math" alttext="\mathit{to}" display="inline"><mi>𝑡𝑜</mi></math>.
The <math id="S1.I1.ix1.p2.m3" class="ltx_Math" alttext="\mathit{from}" display="inline"><mi>𝑓𝑟𝑜𝑚</mi></math> and <math id="S1.I1.ix1.p2.m4" class="ltx_Math" alttext="\mathit{to}" display="inline"><mi>𝑡𝑜</mi></math> instances become states of a state machine.
The transition fires when <math id="S1.I1.ix1.p2.m5" class="ltx_Math" alttext="{\mathit{condition}=\text{\lstinline{{\lst@@@set@language\lst@@@set@numbers%
\lst@@@set@frame\lst@@@set@rulecolor\lst@@@set@language\lst@@@set@language%
\lst@@@set@frame\normalsize{\@listingGroup{ltx_lst_keywords2}{\color[rgb]{%
0.00,0.20,0.47}true}}}}}}" display="inline"><mrow><mi>𝑐𝑜𝑛𝑑𝑖𝑡𝑖𝑜𝑛</mi><mo>=</mo><mtext class="ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting" mathbackground="#FFFFFF" mathcolor="#003378">𝚝𝚛𝚞𝚎</mtext></mrow></math> if <math id="S1.I1.ix1.p2.m6" class="ltx_Math" alttext="{\mathit{imm}=\text{\lstinline{{\lst@@@set@language\lst@@@set@numbers%
\lst@@@set@frame\lst@@@set@rulecolor\lst@@@set@language\lst@@@set@language%
\lst@@@set@frame\normalsize{\@listingGroup{ltx_lst_keywords2}{\color[rgb]{%
0.00,0.20,0.47}true}}}}}}" display="inline"><mrow><mi>𝑖𝑚𝑚</mi><mo>=</mo><mtext class="ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting" mathbackground="#FFFFFF" mathcolor="#003378">𝚝𝚛𝚞𝚎</mtext></mrow></math> (this is called an <em class="ltx_emph ltx_font_italic">immediate transition</em>) or <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">previous</span><span class="ltx_text ltx_font_typewriter">(<math id="S1.I1.ix1.p2.m7" class="ltx_Math" alttext="\mathit{condition}" display="inline"><mi mathbackground="#FFFFFF">𝑐𝑜𝑛𝑑𝑖𝑡𝑖𝑜𝑛</mi></math>)</span></span> when <math id="S1.I1.ix1.p2.m8" class="ltx_Math" alttext="{\mathit{imm}=\text{\lstinline{{\lst@@@set@language\lst@@@set@numbers%
\lst@@@set@frame\lst@@@set@rulecolor\lst@@@set@language\lst@@@set@language%
\lst@@@set@frame\normalsize{\@listingGroup{ltx_lst_keywords2}{\color[rgb]{%
0.00,0.20,0.47}false}}}}}}" display="inline"><mrow><mi>𝑖𝑚𝑚</mi><mo>=</mo><mtext class="ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting" mathbackground="#FFFFFF" mathcolor="#003378">𝚏𝚊𝚕𝚜𝚎</mtext></mrow></math> (this is called a <em class="ltx_emph ltx_font_italic">delayed transition</em>).
Argument <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">priority</span> defines the priority of firing when several transitions could fire.
In this case the transition with the smallest value of <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">priority</span> fires.
It is required that <math id="S1.I1.ix1.p2.m9" class="ltx_Math" alttext="\mathit{prio}\geq 1" display="inline"><mrow><mi>𝑝𝑟𝑖𝑜</mi><mo>≥</mo><mn>1</mn></mrow></math> and that for all transitions from the same state, the priorities are different. If <math id="S1.I1.ix1.p2.m10" class="ltx_Math" alttext="{\mathit{reset}=\text{\lstinline{{\lst@@@set@language\lst@@@set@numbers%
\lst@@@set@frame\lst@@@set@rulecolor\lst@@@set@language\lst@@@set@language%
\lst@@@set@frame\normalsize{\@listingGroup{ltx_lst_keywords2}{\color[rgb]{%
0.00,0.20,0.47}true}}}}}}" display="inline"><mrow><mi>𝑟𝑒𝑠𝑒𝑡</mi><mo>=</mo><mtext class="ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting" mathbackground="#FFFFFF" mathcolor="#003378">𝚝𝚛𝚞𝚎</mtext></mrow></math>, the states of the target state are reinitialized, i.e. state machines are restarted in initial state and state variables are reset to their start values.
If <math id="S1.I1.ix1.p2.m11" class="ltx_Math" alttext="{\mathit{synch}=\text{\lstinline{{\lst@@@set@language\lst@@@set@numbers%
\lst@@@set@frame\lst@@@set@rulecolor\lst@@@set@language\lst@@@set@language%
\lst@@@set@frame\normalsize{\@listingGroup{ltx_lst_keywords2}{\color[rgb]{%
0.00,0.20,0.47}true}}}}}}" display="inline"><mrow><mi>𝑠𝑦𝑛𝑐ℎ</mi><mo>=</mo><mtext class="ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting" mathbackground="#FFFFFF" mathcolor="#003378">𝚝𝚛𝚞𝚎</mtext></mrow></math>, any transition is disabled until all state machines of the from-state have reached final states, i.e. states without outgoing transitions.
For the precise details about firing a transition, see <a href="#state-machine-semantics" title="17.3 State Machine Semantics ‣ Chapter 17 State Machines ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">17.3</span></a>.</p>
</div>
</li>
</ul>
</div>
</div>
<div id="modelica:initialState" class="ltx_theorem ltx_theorem_operatordefinition">
<h6 class="ltx_title ltx_runin ltx_font_bold ltx_title_theorem">Operator 17.2 <span class="ltx_text ltx_font_typewriter">initialState
<br class="ltx_break"></span>
</h6>
<div id="Thmoperatordefinition2.p1" class="ltx_para">
<div class="ltx_listing ltx_lst_language_modelica_synopsis ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,aW5pdGlhbFN0YXRlKCRcbWF0aGl0e3N0YXRlfSQp">⬇</a></div>
<div id="lstnumberx4059" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">initialState</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_font_typewriter"><math id="lstnumberx4059.m1" class="ltx_Math" alttext="\mathit{state}" display="inline"><mi mathbackground="#FFFFFF">𝑠𝑡𝑎𝑡𝑒</mi></math></span><span class="ltx_text ltx_font_typewriter">)</span>
</div>
</div>
<ul class="ltx_itemize">
<li id="S1.I2.ix1" class="ltx_item" style="list-style-type:none;">
<div id="S1.I2.ix1.p1" class="ltx_para">
<p class="ltx_p">Argument <math id="S1.I2.ix1.p1.m1" class="ltx_Math" alttext="\mathit{state}" display="inline"><mi>𝑠𝑡𝑎𝑡𝑒</mi></math> is the block instance that is defined to be the initial state of a state machine. At the first clock tick of the state machine, this state becomes active.</p>
</div>
</li>
</ul>
</div>
</div>
<div id="modelica:activeState" class="ltx_theorem ltx_theorem_operatordefinition">
<h6 class="ltx_title ltx_runin ltx_font_bold ltx_title_theorem">Operator 17.3 <span class="ltx_text ltx_font_typewriter">activeState
<br class="ltx_break"></span>
</h6>
<div id="Thmoperatordefinition3.p1" class="ltx_para">
<div class="ltx_listing ltx_lst_language_modelica_synopsis ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,YWN0aXZlU3RhdGUoJFxtYXRoaXR7c3RhdGV9JCk=">⬇</a></div>
<div id="lstnumberx4060" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier ltx_font_typewriter">activeState</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_font_typewriter"><math id="lstnumberx4060.m1" class="ltx_Math" alttext="\mathit{state}" display="inline"><mi mathbackground="#FFFFFF">𝑠𝑡𝑎𝑡𝑒</mi></math></span><span class="ltx_text ltx_font_typewriter">)</span>
</div>
</div>
<ul class="ltx_itemize">
<li id="S1.I3.ix1" class="ltx_item" style="list-style-type:none;">
<div id="S1.I3.ix1.p1" class="ltx_para">
<p class="ltx_p">Argument <math id="S1.I3.ix1.p1.m1" class="ltx_Math" alttext="\mathit{state}" display="inline"><mi>𝑠𝑡𝑎𝑡𝑒</mi></math> is a block instance. The operator returns <span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter ltx_font_bold" style="color:#003378;background-color:#FFFFFF;">true</span> if this instance is a state of a state machine and this state is active at the actual clock tick. If it is not active, the operator returns <span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter ltx_font_bold" style="color:#003378;background-color:#FFFFFF;">false</span>.</p>
</div>
<div id="S1.I3.ix1.p2" class="ltx_para">
<p class="ltx_p">It is an error if the instance is not a state of a state machine.</p>
</div>
</li>
</ul>
</div>
</div>
<div id="modelica:ticksInState" class="ltx_theorem ltx_theorem_operatordefinition">
<h6 class="ltx_title ltx_runin ltx_font_bold ltx_title_theorem">Operator 17.4 <span class="ltx_text ltx_font_typewriter">ticksInState
<br class="ltx_break"></span>
</h6>
<div id="Thmoperatordefinition4.p1" class="ltx_para">
<div class="ltx_listing ltx_lst_language_modelica_synopsis ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,dGlja3NJblN0YXRlKCk=">⬇</a></div>
<div id="lstnumberx4061" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier ltx_font_typewriter">ticksInState</span><span class="ltx_text ltx_font_typewriter">()</span>
</div>
</div>
<ul class="ltx_itemize">
<li id="S1.I4.ix1" class="ltx_item" style="list-style-type:none;">
<div id="S1.I4.ix1.p1" class="ltx_para">
<p class="ltx_p">Returns the number of ticks of the clock of the state machine for which the currently active state has maintained its active state without interruption, i.e. without local or hierarchical transitions from this state. In the case of a self-transition to the currently active state or to an active enclosing state, the number is reset to one.</p>
</div>
<div id="S1.I4.ix1.p2" class="ltx_para">
<p class="ltx_p">This function can only be used in state machines.</p>
</div>
</li>
</ul>
</div>
</div>
<div id="modelica:timeInState" class="ltx_theorem ltx_theorem_operatordefinition">
<h6 class="ltx_title ltx_runin ltx_font_bold ltx_title_theorem">Operator 17.5 <span class="ltx_text ltx_font_typewriter">timeInState
<br class="ltx_break"></span>
</h6>
<div id="Thmoperatordefinition5.p1" class="ltx_para">
<div class="ltx_listing ltx_lst_language_modelica_synopsis ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,dGltZUluU3RhdGUoKQ==">⬇</a></div>
<div id="lstnumberx4062" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier ltx_font_typewriter">timeInState</span><span class="ltx_text ltx_font_typewriter">()</span>
</div>
</div>
<ul class="ltx_itemize">
<li id="S1.I5.ix1" class="ltx_item" style="list-style-type:none;">
<div id="S1.I5.ix1.p1" class="ltx_para">
<p class="ltx_p">Returns the time duration as <span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="color:#543D08;background-color:#FFFFFF;">Real</span> in [s] for which the currently active state has maintained its active state without interruption, i.e. without local or hierarchical transitions from this state. In the case of a self-transition to the currently active state or to an active enclosing state, the time is reset to zero.</p>
</div>
<div id="S1.I5.ix1.p2" class="ltx_para">
<p class="ltx_p">This function can only be used in state machines.</p>
</div>
</li>
</ul>
</div>
</div>
<div id="S1.p5" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Example:
If there is a transition with <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter ltx_font_upright">immediate</span><span class="ltx_text ltx_font_typewriter ltx_font_upright">=<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">false</span></span></span> from
state <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter ltx_font_upright" style="background-color:#FFFFFF;">A1</span> to <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter ltx_font_upright" style="background-color:#FFFFFF;">A2</span> and the condition is <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter ltx_font_upright">ticksInState</span><span class="ltx_text ltx_font_typewriter ltx_font_upright">()<span class="ltx_text ltx_lst_space"> </span>&gt;=<span class="ltx_text ltx_lst_space"> </span>5</span></span>, and <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter ltx_font_upright" style="background-color:#FFFFFF;">A1</span> became
active at 10ms, and the clock period is 1ms, then <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter ltx_font_upright" style="background-color:#FFFFFF;">A1</span> will be active at
10ms, 11ms, 12ms, 13ms, 14ms, and will be not active at 15 ms.</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ICBibG9jayBTdGF0ZSBlbmQgU3RhdGU7CiAgU3RhdGUgQTA7CiAgU3RhdGUgQTE7IC8vIEJlY29tZXMgYWN0aXZlIGF0IDEwbXMKICBTdGF0ZSBBMjsKZXF1YXRpb24KICBpbml0aWFsU3RhdGUoQTApOwogIHRyYW5zaXRpb24oQTAsIEExLCBzYW1wbGUodGltZSwgQ2xvY2soMSwgMTAwMCkpID4gMC4wMDk1KTsKICB0cmFuc2l0aW9uKEExLCBBMiwgdGlja3NJblN0YXRlKCkgPj0gNSwgaW1tZWRpYXRlPWZhbHNlKTs=">⬇</a></div>
<div id="lstnumberx4063" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">block</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">State</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">State</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4064" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">State</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">A0</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4065" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">State</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">A1</span><span class="ltx_text ltx_font_typewriter">;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>Becomes<span class="ltx_text ltx_lst_space"> </span>active<span class="ltx_text ltx_lst_space"> </span>at<span class="ltx_text ltx_lst_space"> </span>10ms</span>
</div>
<div id="lstnumberx4066" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">State</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">A2</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4067" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx4068" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">initialState</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">A0</span><span class="ltx_text ltx_font_typewriter">);</span>
</div>
<div id="lstnumberx4069" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">transition</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">A0</span><span class="ltx_text ltx_font_typewriter">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">A1</span><span class="ltx_text ltx_font_typewriter">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">sample</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">time</span><span class="ltx_text ltx_font_typewriter">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">Clock</span><span class="ltx_text ltx_font_typewriter">(1,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">1000))</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">&gt;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">0.0095);</span>
</div>
<div id="lstnumberx4070" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">transition</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">A1</span><span class="ltx_text ltx_font_typewriter">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">A2</span><span class="ltx_text ltx_font_typewriter">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">ticksInState</span><span class="ltx_text ltx_font_typewriter">()</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">&gt;=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">5,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">immediate</span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">false</span><span class="ltx_text ltx_font_typewriter">);</span>
</div>
</div>
<p class="ltx_p">]</p>
</div>
</section>
<section id="state-machine-graphics" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">17.2 </span>State Machine Graphics</h2>

<div id="S2.p1" class="ltx_para">
<p class="ltx_p">[<a href="#fig:state-machine-layout" title="Figure 17.1 ‣ 17.2 State Machine Graphics ‣ Chapter 17 State Machines ‣ Modelica® Language Specification version 3.5" class="ltx_ref ltx_font_italic"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">17.1</span></a><span class="ltx_text ltx_font_italic"> shows the recommended layout of a state machine.</span>]</p>
</div>
<figure id="fig:state-machine-layout" class="ltx_figure"><object type="image/svg+xml" data="media/statemachine.svg" id="F1.g1" class="ltx_graphics ltx_centering" alt="Recommended layout of a simple state machine. For the 5 transitions, the settings are as follows, from left to right: "></object>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure">Figure 17.1: </span>Recommended layout of a simple state machine. For the 5 transitions, the settings are as follows, from left to right: <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">immediate</span> = true, false, true, false, true; <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">reset</span> = true, true, false, false, true; <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">synchronize</span> = false, false, false, false, true; <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">priority</span> = 1, 2, 3, 4, 5.</figcaption>
</figure>
<div id="S2.p2" class="ltx_para">
<p class="ltx_p">The annotation for graphics of <span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter ltx_font_bold" style="color:#003378;background-color:#FFFFFF;">transition</span> has the following
structure: <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">annotation</span><span class="ltx_text ltx_font_typewriter">(<span class="ltx_text ltx_lst_identifier">Line</span>(<math id="S2.p2.m1" class="ltx_Math" alttext="\ldots" display="inline"><mi mathbackground="#FFFFFF" mathvariant="normal">…</mi></math>),<span class="ltx_text ltx_lst_space"> </span><span class="ltx_text ltx_lst_identifier">Text</span>(<math id="S2.p2.m2" class="ltx_Math" alttext="\ldots" display="inline"><mi mathbackground="#FFFFFF" mathvariant="normal">…</mi></math>))</span></span>; and for
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">initialState</span><span class="ltx_text ltx_font_typewriter">()</span></span>: <em class="ltx_emph ltx_font_italic">graphical-primitives</em><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">(<span class="ltx_text ltx_lst_identifier">Line</span>(<math id="S2.p2.m3" class="ltx_Math" alttext="\ldots" display="inline"><mi mathbackground="#FFFFFF" mathvariant="normal">…</mi></math>))</span>; with <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">Line</span>
and <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">Text</span> annotations defined in <a href="annotations.html" title="Chapter 18 Annotations ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_tag">chapter</span> <span class="ltx_text ltx_ref_tag">18</span></a>.</p>
</div>
<div id="S2.p3" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Example:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,dHJhbnNpdGlvbihzdGF0ZTIsIHN0YXRlMSwgeCA8IDEwLCBpbW1lZGlhdGU9dHJ1ZSwgcmVzZXQ9dHJ1ZSwgc3luY2hyb25pemU9ZmFsc2UsIHByaW9yaXR5PTEpCiAgYW5ub3RhdGlvbigKICAgIExpbmUoCiAgICAgIHBvaW50cyA9IHt7LTQwLC0xNn0sey0zNiwtNH0sey0zMiw4fSx7LTQwLDI2fSx7LTQwLDMyfSx7LTQ2LDUwfX0sCiAgICAgIGNvbG9yID0gezE3NSwgMTc1LCAxNzV9LAogICAgICB0aGlja25lc3MgPSAwLjI1LAogICAgICBzbW9vdGggPSBTbW9vdGguQmV6aWVyKSwKICAgIFRleHQoCiAgICAgIHN0cmluZyA9ICIlY29uZGl0aW9uIiwKICAgICAgZXh0ZW50ID0ge3s0LCAtNH0sIHs0LCAtMTB9fSwKICAgICAgZm9udFNpemUgPSAxMCwKICAgICAgdGV4dFN0eWxlID0ge1RleHRTdHlsZS5Cb2xkfSwKICAgICAgdGV4dENvbG9yID0gezk1LCA5NSwgOTV9LAogICAgICBob3Jpem9udGFsQWxpZ25tZW50ID0gVGV4dEFsaWdubWVudC5MZWZ0KSwKICApOw==">⬇</a></div>
<div id="lstnumberx4071" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">transition</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">state2</span><span class="ltx_text ltx_font_typewriter">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">state1</span><span class="ltx_text ltx_font_typewriter">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">x</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">&lt;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">10,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">immediate</span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">true</span><span class="ltx_text ltx_font_typewriter">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">reset</span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">true</span><span class="ltx_text ltx_font_typewriter">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">synchronize</span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">false</span><span class="ltx_text ltx_font_typewriter">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">priority</span><span class="ltx_text ltx_font_typewriter">=1)</span>
</div>
<div id="lstnumberx4072" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">annotation</span><span class="ltx_text ltx_font_typewriter">(</span>
</div>
<div id="lstnumberx4073" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">Line</span><span class="ltx_text ltx_font_typewriter">(</span>
</div>
<div id="lstnumberx4074" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">points</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">{{-40,-16},{-36,-4},{-32,8},{-40,26},{-40,32},{-46,50}},</span>
</div>
<div id="lstnumberx4075" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">color</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">{175,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">175,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">175},</span>
</div>
<div id="lstnumberx4076" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">thickness</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">0.25,</span>
</div>
<div id="lstnumberx4077" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">smooth</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">Smooth</span><span class="ltx_text ltx_font_typewriter">.</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">Bezier</span><span class="ltx_text ltx_font_typewriter">),</span>
</div>
<div id="lstnumberx4078" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">Text</span><span class="ltx_text ltx_font_typewriter">(</span>
</div>
<div id="lstnumberx4079" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">string</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_string ltx_font_typewriter" style="color:#000000;">"%condition"</span><span class="ltx_text ltx_font_typewriter">,</span>
</div>
<div id="lstnumberx4080" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">extent</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">{{4,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">-4},</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">{4,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">-10}},</span>
</div>
<div id="lstnumberx4081" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">fontSize</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">10,</span>
</div>
<div id="lstnumberx4082" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">textStyle</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">{</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">TextStyle</span><span class="ltx_text ltx_font_typewriter">.</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">Bold</span><span class="ltx_text ltx_font_typewriter">},</span>
</div>
<div id="lstnumberx4083" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">textColor</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">{95,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">95,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">95},</span>
</div>
<div id="lstnumberx4084" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">horizontalAlignment</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">TextAlignment</span><span class="ltx_text ltx_font_typewriter">.</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">Left</span><span class="ltx_text ltx_font_typewriter">),</span>
</div>
<div id="lstnumberx4085" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_font_typewriter">);</span>
</div>
</div>
<p class="ltx_p">]</p>
</div>
<div id="S2.p4" class="ltx_para">
<p class="ltx_p">The <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">Text</span> annotation representing the transition condition can use the notation <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">%<span class="ltx_text ltx_lst_identifier">condition</span></span> to refer to the condition expression.</p>
</div>
<div id="S2.p5" class="ltx_para">
<p class="ltx_p">The extent of the Text is interpreted relative to either the first point of the <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">Line</span>, in the case of <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">immediate</span><span class="ltx_text ltx_font_typewriter">=<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">false</span></span></span>, or the last point (<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">immediate</span><span class="ltx_text ltx_font_typewriter">=<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">true</span></span></span>).</p>
</div>
<div id="S2.p6" class="ltx_para">
<p class="ltx_p">In addition to the line defined by the points of the <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">Line</span> annotation, a perpendicular line is used to represent the transition. This line is closer to the first point if <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">immediate</span><span class="ltx_text ltx_font_typewriter">=<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">false</span></span></span> otherwise closer to the last point.</p>
</div>
<div id="S2.p7" class="ltx_para">
<p class="ltx_p">If the condition text is somewhat distant from the perpendicular line, a dimmed straight line joins the transition text and the perpendicular line. (See the rightmost transition above.)</p>
</div>
<div id="S2.p8" class="ltx_para">
<p class="ltx_p">If <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">reset</span><span class="ltx_text ltx_font_typewriter">=<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">true</span></span></span>, a filled arrow head is used otherwise an open arrow head.
For <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">synchronize</span><span class="ltx_text ltx_font_typewriter">=<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">true</span></span></span>, an inverse “fork” symbol is used in the
beginning of the arrow. (See the rightmost transition above.)</p>
</div>
<div id="S2.p9" class="ltx_para">
<p class="ltx_p">The value of the <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">priority</span> attribute is prefixing the condition text
followed by a colon if <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">priority</span> &gt; 1.</p>
</div>
<div id="S2.p10" class="ltx_para">
<p class="ltx_p">The <span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter ltx_font_bold" style="color:#003378;background-color:#FFFFFF;">initialState</span> line has a filled arrow head and a bullet at the
opposite end of the initial state (as shown above).</p>
</div>
</section>
<section id="state-machine-semantics" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">17.3 </span>State Machine Semantics</h2>

<div id="S3.p1" class="ltx_para">
<p class="ltx_p">For the purpose of defining the semantics of state machines, assume that
the data of all transitions are stored in an array of records:</p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,cmVjb3JkIFRyYW5zaXRpb24KICBJbnRlZ2VyIGZyb207CiAgSW50ZWdlciB0bzsKICBCb29sZWFuIGltbWVkaWF0ZSA9IHRydWU7CiAgQm9vbGVhbiByZXNldCA9IHRydWU7CiAgQm9vbGVhbiBzeW5jaHJvbml6ZSA9IGZhbHNlOwogIEludGVnZXIgcHJpb3JpdHkgPSAxOwplbmQgVHJhbnNpdGlvbjs=">⬇</a></div>
<div id="lstnumberx4086" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">record</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">Transition</span>
</div>
<div id="lstnumberx4087" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">from</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4088" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">to</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4089" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Boolean</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">immediate</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">true</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4090" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Boolean</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">reset</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">true</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4091" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Boolean</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">synchronize</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">false</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4092" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">priority</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">1;</span>
</div>
<div id="lstnumberx4093" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">Transition</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
</div>
</div>
<div id="S3.p2" class="ltx_para">
<p class="ltx_p">The transitions are sorted with lowest priority number last in the
array; and the priorities must be unique for each value of <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">from</span>. The
states are enumerated from 1 and up. The transition conditions are
stored in a separate array <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">c</span><span class="ltx_text ltx_font_typewriter">[:]</span></span> since they are time varying.</p>
</div>
<div id="S3.p3" class="ltx_para">
<p class="ltx_p">The semantics model is a discrete-time system with inputs {<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">c</span><span class="ltx_text ltx_font_typewriter">[:]</span></span>,
<span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">active</span>, <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">reset</span>} with <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">t</span> being an array corresponding to the inputs to the
transition operator, outputs {<span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">activeState</span>, <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">activeReset</span>,
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">activeResetStates</span><span class="ltx_text ltx_font_typewriter">[:]</span></span>} and states {<span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">nextState</span>, <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">nextReset</span>,
<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">nextResetStates</span><span class="ltx_text ltx_font_typewriter">[:]</span></span>}. For a top level state machine, active is
always true. For sub-state machines, active is true only when the parent
state is active. For a top level state machine, reset is true at the
first activation only. For sub-state machine, reset is propagated from
the state machines higher up.</p>
</div>
<section id="state-activation" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">17.3.1 </span>State Activation</h3>

<div id="S3.SS1.p1" class="ltx_para">
<p class="ltx_p">The state update starts from <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">nextState</span>, i.e., what has been determined to be the next state at the previous time.
<span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">selectedState</span> takes into account if a reset of the state machine is to be done.
</p>
</div>
<div id="S3.SS1.p2" class="ltx_para">
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,b3V0cHV0IEludGVnZXIgc2VsZWN0ZWRTdGF0ZSA9IGlmIHJlc2V0IHRoZW4gMSBlbHNlIHByZXZpb3VzKG5leHRTdGF0ZSk7">⬇</a></div>
<div id="lstnumberx4094" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">output</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">selectedState</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">reset</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">1</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">previous</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">nextState</span><span class="ltx_text ltx_font_typewriter">);</span>
</div>
</div>
<p class="ltx_p">The integer fired is calculated as the index of the transition to be fired by checking that <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">selectedState</span> is the from-state and the condition is true for an immediate transition or <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">previous</span><span class="ltx_text ltx_font_typewriter">(<math id="S3.SS1.p2.m1" class="ltx_Math" alttext="\mathit{condition}" display="inline"><mi mathbackground="#FFFFFF">𝑐𝑜𝑛𝑑𝑖𝑡𝑖𝑜𝑛</mi></math>)</span></span> is true for a delayed transition. The max function returns the index of the transition with highest priority or 0.</p>
</div>
<div id="S3.SS1.p3" class="ltx_para">
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,SW50ZWdlciBmaXJlZCA9CiAgbWF4KAogICAgaWYgKGlmIHRbaV0uZnJvbSA9PSBzZWxlY3RlZFN0YXRlCiAgICAgICAgdGhlbiAoaWYgdFtpXS5pbW1lZGlhdGUgdGhlbiBjW2ldIGVsc2UgcHJldmlvdXMoY1tpXSkpCiAgICAgICAgZWxzZSBmYWxzZSkKICAgICAgdGhlbiBpCiAgICAgIGVsc2UgMAogICAgZm9yIGkgaW4gMTpzaXplKHQsMSkpOw==">⬇</a></div>
<div id="lstnumberx4095" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">fired</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span>
</div>
<div id="lstnumberx4096" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">max</span><span class="ltx_text ltx_font_typewriter">(</span>
</div>
<div id="lstnumberx4097" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">t</span><span class="ltx_text ltx_font_typewriter">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_font_typewriter">].</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">from</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">==</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">selectedState</span>
</div>
<div id="lstnumberx4098" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">        </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">t</span><span class="ltx_text ltx_font_typewriter">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_font_typewriter">].</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">immediate</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">c</span><span class="ltx_text ltx_font_typewriter">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_font_typewriter">]</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">previous</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">c</span><span class="ltx_text ltx_font_typewriter">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_font_typewriter">]))</span>
</div>
<div id="lstnumberx4099" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">        </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">false</span><span class="ltx_text ltx_font_typewriter">)</span>
</div>
<div id="lstnumberx4100" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span>
</div>
<div id="lstnumberx4101" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">0</span>
</div>
<div id="lstnumberx4102" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">for</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">in</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">1:</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">size</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">t</span><span class="ltx_text ltx_font_typewriter">,1));</span>
</div>
</div>
<p class="ltx_p">The start value of c is false. This definition would require that the
previous value is recorded for all transitions conditions. Below is
described an equivalent semantics which just require to record the value
of one integer variable delayed.</p>
</div>
<div id="S3.SS1.p4" class="ltx_para">
<p class="ltx_p">The integer immediate is calculated as the index of the immediate
transition to potentially be fired by checking that <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">selectedState</span> is the
from-state and the condition is true. The max function returns the index
of the transition with true condition and highest priority or 0.
</p>
</div>
<div id="S3.SS1.p5" class="ltx_para">
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,SW50ZWdlciBpbW1lZGlhdGUgPQogIG1heCgKICAgIGlmIChpZiB0W2ldLmltbWVkaWF0ZSBhbmQgdFtpXS5mcm9tID09IHNlbGVjdGVkU3RhdGUKICAgICAgICB0aGVuIGNbaV0KICAgICAgICBlbHNlIGZhbHNlKQogICAgICB0aGVuIGkKICAgICAgZWxzZSAwCiAgICBmb3IgaSBpbiAxOnNpemUodCwxKSk7">⬇</a></div>
<div id="lstnumberx4103" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">immediate</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span>
</div>
<div id="lstnumberx4104" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">max</span><span class="ltx_text ltx_font_typewriter">(</span>
</div>
<div id="lstnumberx4105" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">t</span><span class="ltx_text ltx_font_typewriter">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_font_typewriter">].</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">immediate</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">and</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">t</span><span class="ltx_text ltx_font_typewriter">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_font_typewriter">].</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">from</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">==</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">selectedState</span>
</div>
<div id="lstnumberx4106" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">        </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">c</span><span class="ltx_text ltx_font_typewriter">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_font_typewriter">]</span>
</div>
<div id="lstnumberx4107" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">        </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">false</span><span class="ltx_text ltx_font_typewriter">)</span>
</div>
<div id="lstnumberx4108" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span>
</div>
<div id="lstnumberx4109" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">0</span>
</div>
<div id="lstnumberx4110" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">for</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">in</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">1:</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">size</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">t</span><span class="ltx_text ltx_font_typewriter">,1));</span>
</div>
</div>
</div>
<div id="S3.SS1.p6" class="ltx_para">
<p class="ltx_p">In a similar way, the <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">delayed</span></span> is calculated as the index for a
potentially delayed transition, i.e. a transition taking place at the
next clock tick. In this case the from-state needs to be equal to
<span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">nextState</span>:</p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,SW50ZWdlciBkZWxheWVkID0KICBtYXgoCiAgICBpZiAoaWYgbm90IHRbaV0uaW1tZWRpYXRlIGFuZCB0W2ldLmZyb20gPT0gbmV4dFN0YXRlCiAgICAgICAgdGhlbiBjW2ldCiAgICAgICAgZWxzZSBmYWxzZSkKICAgICAgdGhlbiBpCiAgICAgIGVsc2UgMAogICAgZm9yIGkgaW4gMTpzaXplKHQsMSkpOw==">⬇</a></div>
<div id="lstnumberx4111" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">delayed</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span>
</div>
<div id="lstnumberx4112" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">max</span><span class="ltx_text ltx_font_typewriter">(</span>
</div>
<div id="lstnumberx4113" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">not</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">t</span><span class="ltx_text ltx_font_typewriter">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_font_typewriter">].</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">immediate</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">and</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">t</span><span class="ltx_text ltx_font_typewriter">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_font_typewriter">].</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">from</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">==</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">nextState</span>
</div>
<div id="lstnumberx4114" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">        </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">c</span><span class="ltx_text ltx_font_typewriter">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_font_typewriter">]</span>
</div>
<div id="lstnumberx4115" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">        </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">false</span><span class="ltx_text ltx_font_typewriter">)</span>
</div>
<div id="lstnumberx4116" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span>
</div>
<div id="lstnumberx4117" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">0</span>
</div>
<div id="lstnumberx4118" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">for</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">in</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">1:</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">size</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">t</span><span class="ltx_text ltx_font_typewriter">,1));</span>
</div>
</div>
</div>
<div id="S3.SS1.p7" class="ltx_para">
<p class="ltx_p">The transition to be fired is determined as follows, taking into account
that a delayed transition might have higher priority than an immediate:</p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,SW50ZWdlciBmaXJlZCA9IG1heChwcmV2aW91cyhkZWxheWVkKSwgaW1tZWRpYXRlKTs=">⬇</a></div>
<div id="lstnumberx4119" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">fired</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">max</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">previous</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">delayed</span><span class="ltx_text ltx_font_typewriter">),</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">immediate</span><span class="ltx_text ltx_font_typewriter">);</span>
</div>
</div>
<p class="ltx_p"><span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">nextState</span> is set to the found transitions to-state:</p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,SW50ZWdlciBuZXh0U3RhdGUgPQogIGlmIGFjdGl2ZSB0aGVuCiAgICAoaWYgZmlyZWQgPiAwCiAgICAgIHRoZW4gdFtmaXJlZF0udG8KICAgICAgZWxzZSBzZWxlY3RlZFN0YXRlKQogIGVsc2UKICAgIHByZXZpb3VzKG5leHRTdGF0ZSk7">⬇</a></div>
<div id="lstnumberx4120" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">nextState</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span>
</div>
<div id="lstnumberx4121" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">active</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx4122" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">fired</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">&gt;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">0</span>
</div>
<div id="lstnumberx4123" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">t</span><span class="ltx_text ltx_font_typewriter">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">fired</span><span class="ltx_text ltx_font_typewriter">].</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">to</span>
</div>
<div id="lstnumberx4124" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">selectedState</span><span class="ltx_text ltx_font_typewriter">)</span>
</div>
<div id="lstnumberx4125" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span>
</div>
<div id="lstnumberx4126" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">previous</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">nextState</span><span class="ltx_text ltx_font_typewriter">);</span>
</div>
</div>
<p class="ltx_p">In order to define synchronize transitions, each state machine must
determine which are the final states, i.e. states without
from-transitions and to determine if the state machine is in a final
state currently:</p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,Qm9vbGVhbiBmaW5hbFN0YXRlc1tuU3RhdGVzXSA9IHsKICBtYXgoaWYgIHRbal0uZnJvbSA9PSBpIHRoZW4gMSBlbHNlIDAgZm9yIGogaW4gMTpzaXplKHQsMSkpID09IDAKICBmb3IgaSBpbiAxOm5TdGF0ZXN9OwpCb29sZWFuIHN0YXRlTWFjaGluZUluRmluYWxTdGF0ZSA9IGZpbmFsU3RhdGVzW2FjdGl2ZVN0YXRlXTs=">⬇</a></div>
<div id="lstnumberx4127" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Boolean</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">finalStates</span><span class="ltx_text ltx_font_typewriter">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">nStates</span><span class="ltx_text ltx_font_typewriter">]</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">{</span>
</div>
<div id="lstnumberx4128" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">max</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">t</span><span class="ltx_text ltx_font_typewriter">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">j</span><span class="ltx_text ltx_font_typewriter">].</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">from</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">==</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">1</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">0</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">for</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">j</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">in</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">1:</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">size</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">t</span><span class="ltx_text ltx_font_typewriter">,1))</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">==</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">0</span>
</div>
<div id="lstnumberx4129" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">for</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">in</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">1:</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">nStates</span><span class="ltx_text ltx_font_typewriter">};</span>
</div>
<div id="lstnumberx4130" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Boolean</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">stateMachineInFinalState</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">finalStates</span><span class="ltx_text ltx_font_typewriter">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">activeState</span><span class="ltx_text ltx_font_typewriter">];</span>
</div>
</div>
<p class="ltx_p">To enable a synchronize transition, all the <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">stateMachineInFinalState</span> conditions of all state machines within the meta state must be true. An example is given below in the semantic example model.</p>
</div>
</section>
<section id="reset-handling" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">17.3.2 </span>Reset Handling</h3>

<div id="S3.SS2.p1" class="ltx_para">
<p class="ltx_p">A state can be reset for two reasons:</p>
<ul id="S3.I1" class="ltx_itemize">
<li id="S3.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I1.i1.p1" class="ltx_para">
<p class="ltx_p">The whole state machine has been reset from its context.
<br class="ltx_break">In this case, all states must be reset, and the initial state becomes
active.</p>
</div>
</li>
<li id="S3.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I1.i2.p1" class="ltx_para">
<p class="ltx_p">A reset transition has been fired.
<br class="ltx_break">Then, its target state is reset, but not other states.</p>
</div>
</li>
</ul>
</div>
<div id="S3.SS2.p2" class="ltx_para">
<p class="ltx_p">The first reset mechanism is handled by the <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">activeResetStates</span> and <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">nextResetStates</span> vectors.</p>
</div>
<div id="S3.SS2.p3" class="ltx_para">
<p class="ltx_p">The state machine reset flag is propagated and maintained to each state individually:</p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,b3V0cHV0IEJvb2xlYW4gYWN0aXZlUmVzZXRTdGF0ZXNbblN0YXRlc10gPSB7aWYgcmVzZXQgdGhlbiB0cnVlIGVsc2UgcHJldmlvdXMobmV4dFJlc2V0U3RhdGVzW2ldKSBmb3IgaSBpbiAxOm5TdGF0ZXN9Ow==">⬇</a></div>
<div id="lstnumberx4131" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">output</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Boolean</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">activeResetStates</span><span class="ltx_text ltx_font_typewriter">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">nStates</span><span class="ltx_text ltx_font_typewriter">]</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">{</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">reset</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">true</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">previous</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">nextResetStates</span><span class="ltx_text ltx_font_typewriter">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_font_typewriter">])</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">for</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">in</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">1:</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">nStates</span><span class="ltx_text ltx_font_typewriter">};</span>
</div>
</div>
<p class="ltx_p">until a state is eventually executed, then its corresponding reset condition is set to false:</p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,Qm9vbGVhbiBuZXh0UmVzZXRTdGF0ZXNbblN0YXRlc10gPQogIGlmIGFjdGl2ZSB0aGVuCiAgICB7aWYgYWN0aXZlU3RhdGUgPT0gaSB0aGVuIGZhbHNlIGVsc2UgYWN0aXZlUmVzZXRTdGF0ZXNbaV0gZm9yIGkgaW4gMTpuU3RhdGVzfQogIGVsc2UKICAgIHByZXZpb3VzKG5leHRSZXNldFN0YXRlcyk=">⬇</a></div>
<div id="lstnumberx4132" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Boolean</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">nextResetStates</span><span class="ltx_text ltx_font_typewriter">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">nStates</span><span class="ltx_text ltx_font_typewriter">]</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span>
</div>
<div id="lstnumberx4133" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">active</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx4134" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_font_typewriter">{</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">activeState</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">==</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">false</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">activeResetStates</span><span class="ltx_text ltx_font_typewriter">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_font_typewriter">]</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">for</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">in</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">1:</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">nStates</span><span class="ltx_text ltx_font_typewriter">}</span>
</div>
<div id="lstnumberx4135" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span>
</div>
<div id="lstnumberx4136" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">previous</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">nextResetStates</span><span class="ltx_text ltx_font_typewriter">)</span>
</div>
</div>
<p class="ltx_p">The second reset mechanism is implemented with the <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">selectedReset</span> and <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">nextReset</span> variables. If no reset transition is fired, the <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">nextReset</span> is set to false for the next cycle.</p>
</div>
</section>
<section id="activation-handling" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">17.3.3 </span>Activation handling</h3>

<div id="S3.SS3.p1" class="ltx_para">
<p class="ltx_p">When a state is suspended its equations should not be executed, and its variables keep their values – including state-variables in clocked discretized continuous-time equations.</p>
</div>
<div id="S3.SS3.p2" class="ltx_para">
<p class="ltx_p">The execution of a sub-state machine has to be suspended when its
enclosing state is not active. This activation flag is given as a
<span class="ltx_text ltx_lst_keywords3 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="color:#543D08;background-color:#FFFFFF;">Boolean</span> input <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">active</span>. When this flag is true, the sub-state machine
maintains its previous state, by guarding the equations of the state
variables <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">nextState</span>, <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">nextReset</span> and <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">nextResetStates</span>.</p>
</div>
</section>
<section id="semantics-summary" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">17.3.4 </span>Semantics Summary</h3>

<div id="S3.SS4.p1" class="ltx_para">
<p class="ltx_p">The entire semantics model is given below:</p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,bW9kZWwgU3RhdGVNYWNoaW5lU2VtYW50aWNzICJTZW1hbnRpY3Mgb2Ygc3RhdGUgbWFjaGluZXMiCiAgcGFyYW1ldGVyIEludGVnZXIgblN0YXRlczsKICBwYXJhbWV0ZXIgVHJhbnNpdGlvbiB0WzpdICJBcnJheSBvZiB0cmFuc2l0aW9uIGRhdGEgc29ydGVkIGluIHByaW9yaXR5IjsKICBpbnB1dAogIEJvb2xlYW4gY1tzaXplKHQsMSldICJUcmFuc2l0aW9uIGNvbmRpdGlvbnMgc29ydGVkIGluIHByaW9yaXR5IjsKICBpbnB1dCBCb29sZWFuIGFjdGl2ZSAidHJ1ZSBpZiB0aGUgc3RhdGUgbWFjaGluZSBpcyBhY3RpdmUiOwogIGlucHV0IEJvb2xlYW4gcmVzZXQgInRydWUgd2hlbiB0aGUgc3RhdGUKbWFjaGluZSBzaG91bGQgYmUgcmVzZXQiOwogIEludGVnZXIgc2VsZWN0ZWRTdGF0ZSA9IGlmIHJlc2V0IHRoZW4gMSBlbHNlIHByZXZpb3VzKG5leHRTdGF0ZSk7CiAgQm9vbGVhbiBzZWxlY3RlZFJlc2V0ID0gaWYgcmVzZXQgdGhlbiB0cnVlIGVsc2UgcHJldmlvdXMobmV4dFJlc2V0KTsKICAvLyBGb3Igc3Ryb25nIChpbW1lZGlhdGUpIGFuZCB3ZWFrIChkZWxheWVkKSB0cmFuc2l0aW9ucwogIEludGVnZXIgaW1tZWRpYXRlID0gbWF4KGlmIChpZiB0W2ldLmltbWVkaWF0ZSBhbmQgdFtpXS5mcm9tID09IHNlbGVjdGVkU3RhdGUKICAgIHRoZW4gY1tpXSBlbHNlIGZhbHNlKSB0aGVuIGkgZWxzZSAwIGZvciBpIGluIDE6c2l6ZSh0LDEpKTsKICBJbnRlZ2VyIGRlbGF5ZWQgPSBtYXgoaWYgIChpZiBub3QgdFtpXS5pbW1lZGlhdGUgYW5kIHRbaV0uZnJvbSA9PSBuZXh0U3RhdGUKICAgIHRoZW4gY1tpXSBlbHNlIGZhbHNlKSB0aGVuIGkgZWxzZSAwIGZvciBpIGluIDE6c2l6ZSh0LDEpKTsKICBJbnRlZ2VyIGZpcmVkID0gbWF4KHByZXZpb3VzKGRlbGF5ZWQpLCBpbW1lZGlhdGUpOwogIG91dHB1dCBJbnRlZ2VyIGFjdGl2ZVN0YXRlID0gaWYgcmVzZXQgdGhlbiAxIGVsc2VpZiBmaXJlZCA+IDAgdGhlbiB0W2ZpcmVkXS50byBlbHNlIHNlbGVjdGVkU3RhdGU7CiAgb3V0cHV0IEJvb2xlYW4gYWN0aXZlUmVzZXQgPSBpZiByZXNldCB0aGVuIHRydWUgZWxzZWlmIGZpcmVkID4gMCB0aGVuIHRbZmlyZWRdLnJlc2V0IGVsc2Ugc2VsZWN0ZWRSZXNldDsKCiAgLy8gVXBkYXRlIHN0YXRlcwogIEludGVnZXIgbmV4dFN0YXRlID0gaWYgYWN0aXZlIHRoZW4gYWN0aXZlU3RhdGUgZWxzZSBwcmV2aW91cyhuZXh0U3RhdGUpOwogIEJvb2xlYW4gbmV4dFJlc2V0ID0gaWYgYWN0aXZlIHRoZW4gZmFsc2UgZWxzZSBwcmV2aW91cyhuZXh0UmVzZXQpOwogIC8vIERlbGF5ZWQgcmVzZXR0aW5nIG9mIGluZGl2aWR1YWwgc3RhdGVzCiAgb3V0cHV0IEJvb2xlYW4gYWN0aXZlUmVzZXRTdGF0ZXNbblN0YXRlc10gPSB7aWYgcmVzZXQgdGhlbiB0cnVlIGVsc2UKICAgIHByZXZpb3VzKG5leHRSZXNldFN0YXRlc1tpXSkgZm9yIGkgaW4gMTpuU3RhdGVzfTsKICBCb29sZWFuIG5leHRSZXNldFN0YXRlc1tuU3RhdGVzXSA9IGlmIGFjdGl2ZSB0aGVuIHtpZiBhY3RpdmVTdGF0ZSA9PSBpIHRoZW4gZmFsc2UKICAgIGVsc2UgYWN0aXZlUmVzZXRTdGF0ZXNbaV0gZm9yIGkgaW4gMTpuU3RhdGVzfSBlbHNlIHByZXZpb3VzKG5leHRSZXNldFN0YXRlcyk7CiAgQm9vbGVhbiBmaW5hbFN0YXRlc1tuU3RhdGVzXSA9IHttYXgoaWYgIHRbal0uZnJvbSA9PSBpIHRoZW4gMSBlbHNlIDAgZm9yIGogaW4gMTpzaXplKHQsMSkpPT0gMCBmb3IgaSBpbiAxOm5TdGF0ZXN9OwogIEJvb2xlYW4gc3RhdGVNYWNoaW5lSW5GaW5hbFN0YXRlID0gZmluYWxTdGF0ZXNbYWN0aXZlU3RhdGVdOwplbmQgU3RhdGVNYWNoaW5lU2VtYW50aWNzOw==">⬇</a></div>
<div id="lstnumberx4137" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">model</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">StateMachineSemantics</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_string ltx_font_typewriter" style="color:#000000;">"Semantics<span class="ltx_text ltx_lst_space"> </span>of<span class="ltx_text ltx_lst_space"> </span>state<span class="ltx_text ltx_lst_space"> </span>machines"</span>
</div>
<div id="lstnumberx4138" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">parameter</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">nStates</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4139" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">parameter</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">Transition</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">t</span><span class="ltx_text ltx_font_typewriter">[:]</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_string ltx_font_typewriter" style="color:#000000;">"Array<span class="ltx_text ltx_lst_space"> </span>of<span class="ltx_text ltx_lst_space"> </span>transition<span class="ltx_text ltx_lst_space"> </span>data<span class="ltx_text ltx_lst_space"> </span>sorted<span class="ltx_text ltx_lst_space"> </span>in<span class="ltx_text ltx_lst_space"> </span>priority"</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4140" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">input</span>
</div>
<div id="lstnumberx4141" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Boolean</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">c</span><span class="ltx_text ltx_font_typewriter">[</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">size</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">t</span><span class="ltx_text ltx_font_typewriter">,1)]</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_string ltx_font_typewriter" style="color:#000000;">"Transition<span class="ltx_text ltx_lst_space"> </span>conditions<span class="ltx_text ltx_lst_space"> </span>sorted<span class="ltx_text ltx_lst_space"> </span>in<span class="ltx_text ltx_lst_space"> </span>priority"</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4142" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">input</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Boolean</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">active</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_string ltx_font_typewriter" style="color:#000000;">"true<span class="ltx_text ltx_lst_space"> </span>if<span class="ltx_text ltx_lst_space"> </span>the<span class="ltx_text ltx_lst_space"> </span>state<span class="ltx_text ltx_lst_space"> </span>machine<span class="ltx_text ltx_lst_space"> </span>is<span class="ltx_text ltx_lst_space"> </span>active"</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4143" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">input</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Boolean</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">reset</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_string ltx_font_typewriter" style="color:#000000;">"true<span class="ltx_text ltx_lst_space"> </span>when<span class="ltx_text ltx_lst_space"> </span>the<span class="ltx_text ltx_lst_space"> </span>state</span>
</div>
<div id="lstnumberx4144" class="ltx_listingline">
<span class="ltx_text ltx_font_typewriter" style="color:#000000;">machine</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="color:#000000;"> </span><span class="ltx_text ltx_font_typewriter" style="color:#000000;">should</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="color:#000000;"> </span><span class="ltx_text ltx_font_typewriter" style="color:#000000;">be</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="color:#000000;"> </span><span class="ltx_text ltx_font_typewriter" style="color:#000000;">reset"</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4145" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">selectedState</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">reset</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">1</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">previous</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">nextState</span><span class="ltx_text ltx_font_typewriter">);</span>
</div>
<div id="lstnumberx4146" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Boolean</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">selectedReset</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">reset</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">true</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">previous</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">nextReset</span><span class="ltx_text ltx_font_typewriter">);</span>
</div>
<div id="lstnumberx4147" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>For<span class="ltx_text ltx_lst_space"> </span>strong<span class="ltx_text ltx_lst_space"> </span>(immediate)<span class="ltx_text ltx_lst_space"> </span>and<span class="ltx_text ltx_lst_space"> </span>weak<span class="ltx_text ltx_lst_space"> </span>(delayed)<span class="ltx_text ltx_lst_space"> </span>transitions</span>
</div>
<div id="lstnumberx4148" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">immediate</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">max</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">t</span><span class="ltx_text ltx_font_typewriter">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_font_typewriter">].</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">immediate</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">and</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">t</span><span class="ltx_text ltx_font_typewriter">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_font_typewriter">].</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">from</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">==</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">selectedState</span>
</div>
<div id="lstnumberx4149" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">c</span><span class="ltx_text ltx_font_typewriter">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_font_typewriter">]</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">false</span><span class="ltx_text ltx_font_typewriter">)</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">0</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">for</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">in</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">1:</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">size</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">t</span><span class="ltx_text ltx_font_typewriter">,1));</span>
</div>
<div id="lstnumberx4150" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">delayed</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">max</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">not</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">t</span><span class="ltx_text ltx_font_typewriter">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_font_typewriter">].</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">immediate</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">and</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">t</span><span class="ltx_text ltx_font_typewriter">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_font_typewriter">].</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">from</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">==</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">nextState</span>
</div>
<div id="lstnumberx4151" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">c</span><span class="ltx_text ltx_font_typewriter">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_font_typewriter">]</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">false</span><span class="ltx_text ltx_font_typewriter">)</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">0</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">for</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">in</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">1:</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">size</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">t</span><span class="ltx_text ltx_font_typewriter">,1));</span>
</div>
<div id="lstnumberx4152" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">fired</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">max</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">previous</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">delayed</span><span class="ltx_text ltx_font_typewriter">),</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">immediate</span><span class="ltx_text ltx_font_typewriter">);</span>
</div>
<div id="lstnumberx4153" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">output</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">activeState</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">reset</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">1</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">elseif</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">fired</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">&gt;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">0</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">t</span><span class="ltx_text ltx_font_typewriter">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">fired</span><span class="ltx_text ltx_font_typewriter">].</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">to</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">selectedState</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4154" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">output</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Boolean</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">activeReset</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">reset</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">true</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">elseif</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">fired</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">&gt;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">0</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">t</span><span class="ltx_text ltx_font_typewriter">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">fired</span><span class="ltx_text ltx_font_typewriter">].</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">reset</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">selectedReset</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4155" class="ltx_listingline">
</div>
<div id="lstnumberx4156" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>Update<span class="ltx_text ltx_lst_space"> </span>states</span>
</div>
<div id="lstnumberx4157" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">nextState</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">active</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">activeState</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">previous</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">nextState</span><span class="ltx_text ltx_font_typewriter">);</span>
</div>
<div id="lstnumberx4158" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Boolean</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">nextReset</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">active</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">false</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">previous</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">nextReset</span><span class="ltx_text ltx_font_typewriter">);</span>
</div>
<div id="lstnumberx4159" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>Delayed<span class="ltx_text ltx_lst_space"> </span>resetting<span class="ltx_text ltx_lst_space"> </span>of<span class="ltx_text ltx_lst_space"> </span>individual<span class="ltx_text ltx_lst_space"> </span>states</span>
</div>
<div id="lstnumberx4160" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">output</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Boolean</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">activeResetStates</span><span class="ltx_text ltx_font_typewriter">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">nStates</span><span class="ltx_text ltx_font_typewriter">]</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">{</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">reset</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">true</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span>
</div>
<div id="lstnumberx4161" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">previous</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">nextResetStates</span><span class="ltx_text ltx_font_typewriter">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_font_typewriter">])</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">for</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">in</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">1:</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">nStates</span><span class="ltx_text ltx_font_typewriter">};</span>
</div>
<div id="lstnumberx4162" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Boolean</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">nextResetStates</span><span class="ltx_text ltx_font_typewriter">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">nStates</span><span class="ltx_text ltx_font_typewriter">]</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">active</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">{</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">activeState</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">==</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">false</span>
</div>
<div id="lstnumberx4163" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">activeResetStates</span><span class="ltx_text ltx_font_typewriter">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_font_typewriter">]</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">for</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">in</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">1:</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">nStates</span><span class="ltx_text ltx_font_typewriter">}</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">previous</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">nextResetStates</span><span class="ltx_text ltx_font_typewriter">);</span>
</div>
<div id="lstnumberx4164" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Boolean</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">finalStates</span><span class="ltx_text ltx_font_typewriter">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">nStates</span><span class="ltx_text ltx_font_typewriter">]</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">{</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">max</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">t</span><span class="ltx_text ltx_font_typewriter">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">j</span><span class="ltx_text ltx_font_typewriter">].</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">from</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">==</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">1</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">0</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">for</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">j</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">in</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">1:</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">size</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">t</span><span class="ltx_text ltx_font_typewriter">,1))==</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">0</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">for</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">in</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">1:</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">nStates</span><span class="ltx_text ltx_font_typewriter">};</span>
</div>
<div id="lstnumberx4165" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Boolean</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">stateMachineInFinalState</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">finalStates</span><span class="ltx_text ltx_font_typewriter">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">activeState</span><span class="ltx_text ltx_font_typewriter">];</span>
</div>
<div id="lstnumberx4166" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">StateMachineSemantics</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
</div>
</div>
</section>
<section id="merging-variable-definitions" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">17.3.5 </span>Merging Variable Definitions</h3>

<div id="S3.SS5.p1" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">When a state class uses an <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold ltx_font_upright" style="color:#003378;">outer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter ltx_font_upright"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold ltx_font_upright" style="color:#003378;">output</span></span> declaration,
the equations have access to the corresponding variable declared
<span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter ltx_font_bold ltx_font_upright" style="color:#003378;background-color:#FFFFFF;">inner</span>. Special rules are then needed to maintain the single
assignment rule since multiple definitions of such outer variables in
different mutually exclusive states needs to be merged.</span>]</p>
</div>
<div id="S3.SS5.p2" class="ltx_para">
<p class="ltx_p">In each state, the outer output variables are solved for and for each
such variable a single definition is formed:</p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,diA6PSBpZiBhY3RpdmVTdGF0ZShzdGF0ZSFcdGV4dHN1YnNjcmlwdHsxfSEpIHRoZW4gZXhwcmUhXHRleHRzdWJzY3JpcHR7MX0hIGVsc2VpZiBhY3RpdmVTdGF0ZShzdGF0ZSFcdGV4dHN1YnNjcmlwdHsyfSEpIHRoZW4gZXhwcmUhXHRleHRzdWJzY3JpcHR7Mn0hIGVsc2VpZiAuLi4gZWxzZSBsYXN0KHYp">⬇</a></div>
<div id="lstnumberx4167" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">:=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">activeState</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">state</span><span class="ltx_text ltx_font_typewriter"><sub class="ltx_sub">1</sub></span><span class="ltx_text ltx_font_typewriter">)</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">expre</span><span class="ltx_text ltx_font_typewriter"><sub class="ltx_sub">1</sub></span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">elseif</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">activeState</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">state</span><span class="ltx_text ltx_font_typewriter"><sub class="ltx_sub">2</sub></span><span class="ltx_text ltx_font_typewriter">)</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">expre</span><span class="ltx_text ltx_font_typewriter"><sub class="ltx_sub">2</sub></span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">elseif</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">...</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">last</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_font_typewriter">)</span>
</div>
</div>
</div>
<div id="S3.SS5.p3" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">last</span> is special internal semantic operator returning its
input. It is just used to mark for the sorting that the incidence of its
argument should be ignored. A start value must be given to the variable
if not assigned in the initial state.</p>
</div>
<div id="S3.SS5.p4" class="ltx_para">
<p class="ltx_p">A new assignment equation is formed which might be merged on higher
levels in nested state machines.</p>
</div>
</section>
<section id="merging-connections-to-multiple-outputs" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">17.3.6 </span>Merging Connections to Multiple Outputs</h3>

<div id="S3.SS6.p1" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">The causal connection semantics of Modelica for non-state machines are generalized to states of state machines, using the fact that only one state is active at a time.</span>]</p>
</div>
<div id="S3.SS6.p2" class="ltx_para">
<p class="ltx_p">It is possible to connect outputs each coming from different states of state machines together – and connect this with other causal connectors.
These outputs are combined seen as one source of the signal, and give the following constraint equations,</p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,dSFcdGV4dHN1YnNjcmlwdHsxfSEgPSB1IVx0ZXh0c3Vic2NyaXB0ezJ9ISA9IC4uLiA9IHkhXHRleHRzdWJzY3JpcHR7MX0hID0geSFcdGV4dHN1YnNjcmlwdHsyfSEgPSAuLi4=">⬇</a></div>
<div id="lstnumberx4168" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier ltx_font_typewriter">u</span><span class="ltx_text ltx_font_typewriter"><sub class="ltx_sub">1</sub></span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">u</span><span class="ltx_text ltx_font_typewriter"><sub class="ltx_sub">2</sub></span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">...</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">y</span><span class="ltx_text ltx_font_typewriter"><sub class="ltx_sub">1</sub></span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">y</span><span class="ltx_text ltx_font_typewriter"><sub class="ltx_sub">2</sub></span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">...</span>
</div>
</div>
<p class="ltx_p">with <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">y</span><sub class="ltx_sub">i</sub> being outputs from different states of the state-machine and <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">u</span><sub class="ltx_sub">i</sub> being other causal variables.
The semantics is defined similarly to <a href="#merging-variable-definitions" title="17.3.5 Merging Variable Definitions ‣ 17.3 State Machine Semantics ‣ Chapter 17 State Machines ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_tag">section</span> <span class="ltx_text ltx_ref_tag">17.3.5</span></a>:</p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,diA9IGlmIGFjdGl2ZVN0YXRlKHN0YXRlIVx0ZXh0c3Vic2NyaXB0ezF9ISkgdGhlbgogICAgICB5IVx0ZXh0c3Vic2NyaXB0ezF9IQogICAgZWxzZWlmIGFjdGl2ZVN0YXRlKHN0YXRlIVx0ZXh0c3Vic2NyaXB0ezJ9ISkgdGhlbgogICAgICB5IVx0ZXh0c3Vic2NyaXB0ezJ9IQogICAgZWxzZWlmICRcbGRvdHMkCiAgICBlbHNlCiAgICAgIGxhc3Qodik7CnUhXHRleHRzdWJzY3JpcHR7MX0hID0gdgp1IVx0ZXh0c3Vic2NyaXB0ezJ9ISA9IHYKLi4u">⬇</a></div>
<div id="lstnumberx4169" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">activeState</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">state</span><span class="ltx_text ltx_font_typewriter"><sub class="ltx_sub">1</sub></span><span class="ltx_text ltx_font_typewriter">)</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx4170" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">y</span><span class="ltx_text ltx_font_typewriter"><sub class="ltx_sub">1</sub></span>
</div>
<div id="lstnumberx4171" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">elseif</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">activeState</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">state</span><span class="ltx_text ltx_font_typewriter"><sub class="ltx_sub">2</sub></span><span class="ltx_text ltx_font_typewriter">)</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx4172" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">y</span><span class="ltx_text ltx_font_typewriter"><sub class="ltx_sub">2</sub></span>
</div>
<div id="lstnumberx4173" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">elseif</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter"><math id="lstnumberx4173.m1" class="ltx_Math" alttext="\ldots" display="inline"><mi mathbackground="#FFFFFF" mathvariant="normal">…</mi></math></span>
</div>
<div id="lstnumberx4174" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span>
</div>
<div id="lstnumberx4175" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">last</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_font_typewriter">);</span>
</div>
<div id="lstnumberx4176" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier ltx_font_typewriter">u</span><span class="ltx_text ltx_font_typewriter"><sub class="ltx_sub">1</sub></span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span>
</div>
<div id="lstnumberx4177" class="ltx_listingline">
<span class="ltx_text ltx_lst_identifier ltx_font_typewriter">u</span><span class="ltx_text ltx_font_typewriter"><sub class="ltx_sub">2</sub></span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span>
</div>
<div id="lstnumberx4178" class="ltx_listingline">
<span class="ltx_text ltx_font_typewriter">...</span>
</div>
</div>
</div>
</section>
<section id="example" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">17.3.7 </span>Example</h3>

<figure id="fig:hierarchical-statemachine" class="ltx_figure"><object type="image/svg+xml" data="media/hierarchical-statemachine.svg" id="F2.g1" class="ltx_graphics ltx_centering" alt="Example of a hierarchical state machine."></object>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure">Figure 17.2: </span>Example of a hierarchical state machine.</figcaption>
</figure>
<div id="S3.SS7.p1" class="ltx_para">
<p class="ltx_p">[<span class="ltx_text ltx_font_italic">Example:
Consider the hierarchical state machine in <a href="#fig:hierarchical-statemachine" title="Figure 17.2 ‣ 17.3.7 Example ‣ 17.3 State Machine Semantics ‣ Chapter 17 State Machines ‣ Modelica® Language Specification version 3.5" class="ltx_ref"><span class="ltx_text ltx_ref_tag">figure</span> <span class="ltx_text ltx_ref_tag">17.2</span></a>. The model demonstrates the following properties:</span></p>
<ul id="S3.I2" class="ltx_itemize">
<li id="S3.I2.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I2.i1.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">state1</span><span class="ltx_text ltx_font_italic"> is a meta state with two parallel state machines in it.</span></p>
</div>
</li>
<li id="S3.I2.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I2.i2.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">stateA</span><span class="ltx_text ltx_font_italic"> declares </span><span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">v</span><span class="ltx_text ltx_font_italic"> as </span><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_font_italic" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold ltx_font_upright" style="color:#003378;">outer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter ltx_font_upright"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold ltx_font_upright" style="color:#003378;">output</span></span><span class="ltx_text ltx_font_italic">. </span><span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">state1</span><span class="ltx_text ltx_font_italic"> is on an intermediate
level and declares </span><span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">v</span><span class="ltx_text ltx_font_italic"> as </span><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_font_italic" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold ltx_font_upright" style="color:#003378;">inner</span><span class="ltx_text ltx_lst_space ltx_font_typewriter ltx_font_upright"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold ltx_font_upright" style="color:#003378;">outer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter ltx_font_upright"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold ltx_font_upright" style="color:#003378;">output</span></span><span class="ltx_text ltx_font_italic">, i.e. matches lower level
</span><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_font_italic" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold ltx_font_upright" style="color:#003378;">outer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter ltx_font_upright"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter ltx_font_upright">v</span></span><span class="ltx_text ltx_font_italic"> by being </span><span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter ltx_font_bold" style="color:#003378;background-color:#FFFFFF;">inner</span><span class="ltx_text ltx_font_italic"> and also matches higher level </span><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_font_italic" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold ltx_font_upright" style="color:#003378;">inner</span><span class="ltx_text ltx_lst_space ltx_font_typewriter ltx_font_upright"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter ltx_font_upright">v</span></span><span class="ltx_text ltx_font_italic"> by being
</span><span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter ltx_font_bold" style="color:#003378;background-color:#FFFFFF;">outer</span><span class="ltx_text ltx_font_italic">. The top level declares </span><span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">v</span><span class="ltx_text ltx_font_italic"> as </span><span class="ltx_text ltx_lst_keywords2 ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter ltx_font_bold" style="color:#003378;background-color:#FFFFFF;">inner</span><span class="ltx_text ltx_font_italic"> and gives the start value.</span></p>
</div>
</li>
<li id="S3.I2.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I2.i3.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">count</span><span class="ltx_text ltx_font_italic"> is defined with a start value in </span><span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">state1</span><span class="ltx_text ltx_font_italic">. It is reset when
</span><span class="ltx_text ltx_font_italic">a reset transition (</span><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_font_italic" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter ltx_font_upright">v</span><span class="ltx_text ltx_lst_space ltx_font_typewriter ltx_font_upright"> </span><span class="ltx_text ltx_font_typewriter ltx_font_upright">&gt;=<span class="ltx_text ltx_lst_space"> </span>20</span></span><span class="ltx_text ltx_font_italic">) is made to </span><span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">state1</span><span class="ltx_text ltx_font_italic">.</span></p>
</div>
</li>
<li id="S3.I2.i4" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I2.i4.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">stateX</span><span class="ltx_text ltx_font_italic"> declares the local variable </span><span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">w</span><span class="ltx_text ltx_font_italic"> to be equal to </span><span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">v</span><span class="ltx_text ltx_font_italic"> declared
as </span><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_font_italic" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold ltx_font_upright" style="color:#003378;">inner</span><span class="ltx_text ltx_lst_space ltx_font_typewriter ltx_font_upright"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold ltx_font_upright" style="color:#003378;">input</span></span><span class="ltx_text ltx_font_italic">.</span></p>
</div>
</li>
<li id="S3.I2.i5" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I2.i5.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">stateY</span><span class="ltx_text ltx_font_italic"> declares a local counter </span><span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">j</span><span class="ltx_text ltx_font_italic">. It is reset at start and as a
consequence of the reset transition (</span><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_font_italic" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter ltx_font_upright">v</span><span class="ltx_text ltx_lst_space ltx_font_typewriter ltx_font_upright"> </span><span class="ltx_text ltx_font_typewriter ltx_font_upright">&gt;=<span class="ltx_text ltx_lst_space"> </span>20</span></span><span class="ltx_text ltx_font_italic">) to </span><span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">state1</span><span class="ltx_text ltx_font_italic">:
When the reset transition (</span><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_font_italic" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter ltx_font_upright">v</span><span class="ltx_text ltx_lst_space ltx_font_typewriter ltx_font_upright"> </span><span class="ltx_text ltx_font_typewriter ltx_font_upright">&gt;=<span class="ltx_text ltx_lst_space"> </span>20</span></span><span class="ltx_text ltx_font_italic">) fires, then the variables of the
active states are reset immediately (so </span><span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">count</span><span class="ltx_text ltx_font_italic"> from </span><span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">state1</span><span class="ltx_text ltx_font_italic">, and </span><span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">i</span><span class="ltx_text ltx_font_italic">
from </span><span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">stateX</span><span class="ltx_text ltx_font_italic">). The variables of other states are only reset at the time
instants when these states become active. So </span><span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">j</span><span class="ltx_text ltx_font_italic"> in </span><span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">StateY</span><span class="ltx_text ltx_font_italic"> is reset to
0, when the transition </span><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_font_italic" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter ltx_font_upright">stateX</span><span class="ltx_text ltx_font_typewriter ltx_font_upright">.<span class="ltx_text ltx_lst_identifier">i</span><span class="ltx_text ltx_lst_space"> </span>&gt;<span class="ltx_text ltx_lst_space"> </span>20</span></span><span class="ltx_text ltx_font_italic"> fires (after </span><span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">state1</span><span class="ltx_text ltx_font_italic">
became active again, so after the reset transition </span><span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_font_italic" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter ltx_font_upright">v</span><span class="ltx_text ltx_lst_space ltx_font_typewriter ltx_font_upright"> </span><span class="ltx_text ltx_font_typewriter ltx_font_upright">&gt;=<span class="ltx_text ltx_lst_space"> </span>20</span></span><span class="ltx_text ltx_font_italic">).</span></p>
</div>
</li>
<li id="S3.I2.i6" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I2.i6.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">Synchronizing the exit from the two parallel state machines of
</span><span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">state1</span><span class="ltx_text ltx_font_italic"> is done by checking that </span><span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">stated</span><span class="ltx_text ltx_font_italic"> and </span><span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">stateY</span><span class="ltx_text ltx_font_italic"> are active using the
</span><span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter" style="background-color:#FFFFFF;">activeState</span><span class="ltx_text ltx_font_italic"> function.</span></p>
</div>
</li>
</ul>
</div>
<div id="S3.SS7.p2" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">The Modelica code (without annotations) is:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,YmxvY2sgSGllcmFyY2hpY2FsQW5kUGFyYWxsZWxTdGF0ZU1hY2hpbmUKICBpbm5lciBJbnRlZ2VyIHYoc3RhcnQ9MCk7CgogIFN0YXRlMSBzdGF0ZTE7CiAgU3RhdGUyIHN0YXRlMjsKZXF1YXRpb24KICBpbml0aWFsU3RhdGUoc3RhdGUxKTsKICB0cmFuc2l0aW9uKHN0YXRlMSxzdGF0ZTIsYWN0aXZlU3RhdGUoc3RhdGUxLnN0YXRlRCkgYW5kCiAgICBhY3RpdmVTdGF0ZShzdGF0ZTEuc3RhdGVZKSwgaW1tZWRpYXRlPWZhbHNlKTsKICB0cmFuc2l0aW9uKHN0YXRlMixzdGF0ZTEsdiA+PSAyMCwgaW1tZWRpYXRlPWZhbHNlKTsKCnB1YmxpYwogIGJsb2NrIFN0YXRlMQogICAgaW5uZXIgSW50ZWdlciBjb3VudChzdGFydD0wKTsKICAgIGlubmVyIG91dGVyIG91dHB1dCBJbnRlZ2VyIHY7CgogICAgYmxvY2sgU3RhdGVBCiAgICAgIG91dGVyIG91dHB1dCBJbnRlZ2VyIHY7CiAgICBlcXVhdGlvbgogICAgICB2ID0gcHJldmlvdXModikgKyAyOwogICAgZW5kIFN0YXRlQTsKICAgIFN0YXRlQSBzdGF0ZUE7CgogICAgYmxvY2sgU3RhdGVCCiAgICAgIG91dGVyIG91dHB1dCBJbnRlZ2VyIHY7CiAgICBlcXVhdGlvbgogICAgICB2ID0gcHJldmlvdXModikgLSAxOwogICAgZW5kIFN0YXRlQjsKICAgIFN0YXRlQiBzdGF0ZUI7CgogICAgYmxvY2sgU3RhdGVDCiAgICAgIG91dGVyIG91dHB1dCBJbnRlZ2VyIGNvdW50OwogICAgZXF1YXRpb24KICAgICAgY291bnQgPSBwcmV2aW91cyhjb3VudCkgKyAxOwogICAgZW5kIFN0YXRlQzsKICAgIFN0YXRlQyBzdGF0ZUM7CgogICAgYmxvY2sgU3RhdGVECiAgICBlbmQgU3RhdGVEOwogICAgU3RhdGVEIHN0YXRlRDsKCiAgZXF1YXRpb24KICAgIGluaXRpYWxTdGF0ZShzdGF0ZUEpOwogICAgdHJhbnNpdGlvbihzdGF0ZUEsIHN0YXRlQiwgdiA+PSA2LCBpbW1lZGlhdGU9ZmFsc2UpOwogICAgdHJhbnNpdGlvbihzdGF0ZUIsIHN0YXRlQywgdiA9PSAwLCBpbW1lZGlhdGU9ZmFsc2UpOwogICAgdHJhbnNpdGlvbihzdGF0ZUMsIHN0YXRlQSwgdHJ1ZSwgaW1tZWRpYXRlPWZhbHNlLCBwcmlvcml0eT0yKTsKICAgIHRyYW5zaXRpb24oc3RhdGVDLCBzdGF0ZUQsIGNvdW50ID49IDIsIGltbWVkaWF0ZT1mYWxzZSk7CgogIHB1YmxpYwogICAgYmxvY2sgU3RhdGVYCiAgICAgIG91dGVyIGlucHV0IEludGVnZXIgdjsKICAgICAgSW50ZWdlciBpKHN0YXJ0PTApOwogICAgICBJbnRlZ2VyIHc7IC8vID0gdjsKICAgIGVxdWF0aW9uCiAgICAgIGkgPSBwcmV2aW91cyhpKSArIDE7CiAgICAgIHcgPSB2OwogICAgZW5kIFN0YXRlWDsKICAgIFN0YXRlWCBzdGF0ZVg7CgogICAgYmxvY2sgU3RhdGVZCiAgICAgIEludGVnZXIgaihzdGFydD0wKTsKICAgIGVxdWF0aW9uCiAgICAgIGogPSBwcmV2aW91cyhqKSArIDE7CiAgICBlbmQgU3RhdGVZOwogICAgU3RhdGVZIHN0YXRlWTsKCiAgZXF1YXRpb24KICAgIGluaXRpYWxTdGF0ZShzdGF0ZVgpOwogICAgdHJhbnNpdGlvbihzdGF0ZVgsIHN0YXRlWSwgc3RhdGVYLmkgPiAyMCwgaW1tZWRpYXRlPWZhbHNlLAogICAgcmVzZXQ9ZmFsc2UpOwogIGVuZCBTdGF0ZTE7CgogIGJsb2NrIFN0YXRlMgogICAgb3V0ZXIgb3V0cHV0IEludGVnZXIgdjsKICBlcXVhdGlvbgogICAgdiA9IHByZXZpb3VzKHYpICsgNTsKICBlbmQgU3RhdGUyOwplbmQgSGllcmFyY2hpY2FsQW5kUGFyYWxsZWxTdGF0ZU1hY2hpbmU7">⬇</a></div>
<div id="lstnumberx4179" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">block</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">HierarchicalAndParallelStateMachine</span>
</div>
<div id="lstnumberx4180" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">inner</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">start</span><span class="ltx_text ltx_font_typewriter">=0);</span>
</div>
<div id="lstnumberx4181" class="ltx_listingline">
</div>
<div id="lstnumberx4182" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">State1</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">state1</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4183" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">State2</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">state2</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4184" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx4185" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">initialState</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">state1</span><span class="ltx_text ltx_font_typewriter">);</span>
</div>
<div id="lstnumberx4186" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">transition</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">state1</span><span class="ltx_text ltx_font_typewriter">,</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">state2</span><span class="ltx_text ltx_font_typewriter">,</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">activeState</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">state1</span><span class="ltx_text ltx_font_typewriter">.</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">stateD</span><span class="ltx_text ltx_font_typewriter">)</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">and</span>
</div>
<div id="lstnumberx4187" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">activeState</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">state1</span><span class="ltx_text ltx_font_typewriter">.</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">stateY</span><span class="ltx_text ltx_font_typewriter">),</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">immediate</span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">false</span><span class="ltx_text ltx_font_typewriter">);</span>
</div>
<div id="lstnumberx4188" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">transition</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">state2</span><span class="ltx_text ltx_font_typewriter">,</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">state1</span><span class="ltx_text ltx_font_typewriter">,</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">&gt;=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">20,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">immediate</span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">false</span><span class="ltx_text ltx_font_typewriter">);</span>
</div>
<div id="lstnumberx4189" class="ltx_listingline">
</div>
<div id="lstnumberx4190" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">public</span>
</div>
<div id="lstnumberx4191" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">block</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">State1</span>
</div>
<div id="lstnumberx4192" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">inner</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">count</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">start</span><span class="ltx_text ltx_font_typewriter">=0);</span>
</div>
<div id="lstnumberx4193" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">inner</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">outer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">output</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4194" class="ltx_listingline">
</div>
<div id="lstnumberx4195" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">block</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">StateA</span>
</div>
<div id="lstnumberx4196" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">outer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">output</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4197" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx4198" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">previous</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_font_typewriter">)</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">+</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">2;</span>
</div>
<div id="lstnumberx4199" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">StateA</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4200" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">StateA</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">stateA</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4201" class="ltx_listingline">
</div>
<div id="lstnumberx4202" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">block</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">StateB</span>
</div>
<div id="lstnumberx4203" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">outer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">output</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4204" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx4205" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">previous</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_font_typewriter">)</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">-</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">1;</span>
</div>
<div id="lstnumberx4206" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">StateB</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4207" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">StateB</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">stateB</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4208" class="ltx_listingline">
</div>
<div id="lstnumberx4209" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">block</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">StateC</span>
</div>
<div id="lstnumberx4210" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">outer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">output</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">count</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4211" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx4212" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">count</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">previous</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">count</span><span class="ltx_text ltx_font_typewriter">)</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">+</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">1;</span>
</div>
<div id="lstnumberx4213" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">StateC</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4214" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">StateC</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">stateC</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4215" class="ltx_listingline">
</div>
<div id="lstnumberx4216" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">block</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">StateD</span>
</div>
<div id="lstnumberx4217" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">StateD</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4218" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">StateD</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">stateD</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4219" class="ltx_listingline">
</div>
<div id="lstnumberx4220" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx4221" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">initialState</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">stateA</span><span class="ltx_text ltx_font_typewriter">);</span>
</div>
<div id="lstnumberx4222" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">transition</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">stateA</span><span class="ltx_text ltx_font_typewriter">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">stateB</span><span class="ltx_text ltx_font_typewriter">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">&gt;=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">6,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">immediate</span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">false</span><span class="ltx_text ltx_font_typewriter">);</span>
</div>
<div id="lstnumberx4223" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">transition</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">stateB</span><span class="ltx_text ltx_font_typewriter">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">stateC</span><span class="ltx_text ltx_font_typewriter">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">==</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">0,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">immediate</span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">false</span><span class="ltx_text ltx_font_typewriter">);</span>
</div>
<div id="lstnumberx4224" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">transition</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">stateC</span><span class="ltx_text ltx_font_typewriter">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">stateA</span><span class="ltx_text ltx_font_typewriter">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">true</span><span class="ltx_text ltx_font_typewriter">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">immediate</span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">false</span><span class="ltx_text ltx_font_typewriter">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">priority</span><span class="ltx_text ltx_font_typewriter">=2);</span>
</div>
<div id="lstnumberx4225" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">transition</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">stateC</span><span class="ltx_text ltx_font_typewriter">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">stateD</span><span class="ltx_text ltx_font_typewriter">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">count</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">&gt;=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">2,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">immediate</span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">false</span><span class="ltx_text ltx_font_typewriter">);</span>
</div>
<div id="lstnumberx4226" class="ltx_listingline">
</div>
<div id="lstnumberx4227" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">public</span>
</div>
<div id="lstnumberx4228" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">block</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">StateX</span>
</div>
<div id="lstnumberx4229" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">outer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">input</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4230" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">start</span><span class="ltx_text ltx_font_typewriter">=0);</span>
</div>
<div id="lstnumberx4231" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">w</span><span class="ltx_text ltx_font_typewriter">;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span>v;</span>
</div>
<div id="lstnumberx4232" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx4233" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">previous</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_font_typewriter">)</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">+</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">1;</span>
</div>
<div id="lstnumberx4234" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">w</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4235" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">StateX</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4236" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">StateX</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">stateX</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4237" class="ltx_listingline">
</div>
<div id="lstnumberx4238" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">block</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">StateY</span>
</div>
<div id="lstnumberx4239" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">j</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">start</span><span class="ltx_text ltx_font_typewriter">=0);</span>
</div>
<div id="lstnumberx4240" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx4241" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">j</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">previous</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">j</span><span class="ltx_text ltx_font_typewriter">)</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">+</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">1;</span>
</div>
<div id="lstnumberx4242" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">StateY</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4243" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">StateY</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">stateY</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4244" class="ltx_listingline">
</div>
<div id="lstnumberx4245" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx4246" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">initialState</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">stateX</span><span class="ltx_text ltx_font_typewriter">);</span>
</div>
<div id="lstnumberx4247" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">transition</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">stateX</span><span class="ltx_text ltx_font_typewriter">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">stateY</span><span class="ltx_text ltx_font_typewriter">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">stateX</span><span class="ltx_text ltx_font_typewriter">.</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">&gt;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">20,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">immediate</span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">false</span><span class="ltx_text ltx_font_typewriter">,</span>
</div>
<div id="lstnumberx4248" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">reset</span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">false</span><span class="ltx_text ltx_font_typewriter">);</span>
</div>
<div id="lstnumberx4249" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">State1</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4250" class="ltx_listingline">
</div>
<div id="lstnumberx4251" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">block</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">State2</span>
</div>
<div id="lstnumberx4252" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">outer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">output</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4253" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx4254" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">previous</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_font_typewriter">)</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">+</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">5;</span>
</div>
<div id="lstnumberx4255" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">State2</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4256" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">HierarchicalAndParallelStateMachine</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
</div>
</div>
<div id="S3.SS7.p3" class="ltx_para">
<p class="ltx_p"><a href="#fig:state-machine-behavior" title="Figure 17.3 ‣ 17.3.7 Example ‣ 17.3 State Machine Semantics ‣ Chapter 17 State Machines ‣ Modelica® Language Specification version 3.5" class="ltx_ref ltx_font_italic"><span class="ltx_text ltx_ref_tag"><span class="ltx_text ltx_font_italic">Figure</span></span> <span class="ltx_text ltx_ref_tag">17.3</span></a><span class="ltx_text ltx_font_italic"> shows the behavior of the state machine.</span></p>
</div>
<figure id="fig:state-machine-behavior" class="ltx_figure"><object type="image/svg+xml" data="media/statemachineplot.svg" id="F3.g1" class="ltx_graphics ltx_centering" alt="State machine behavior, as reflected by the variable "></object>
<figcaption class="ltx_caption ltx_font_italic"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text ltx_font_upright">Figure 17.3</span>: </span>State machine behavior, as reflected by the variable <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter ltx_font_upright" style="background-color:#FFFFFF;">v</span>.</figcaption>
</figure>
<div id="S3.SS7.p4" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_italic">The transition from <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter ltx_font_upright" style="background-color:#FFFFFF;">state1</span> to <span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter ltx_font_upright" style="background-color:#FFFFFF;">state2</span> could have been done with a
<span class="ltx_text ltx_lst_identifier ltx_lst_language_modelica_short ltx_lstlisting ltx_font_typewriter ltx_font_upright" style="background-color:#FFFFFF;">synchronize</span> transition with <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter ltx_font_upright">condition</span><span class="ltx_text ltx_font_typewriter ltx_font_upright">=<span class="ltx_text ltx_lst_keywords2 ltx_font_bold" style="color:#003378;">true</span></span></span> instead. The semantically
equivalent model is shown below:</span></p>
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,YmxvY2sgSGllcmFyY2hpY2FsQW5kUGFyYWxsZWxTdGF0ZU1hY2hpbmUKICBleHRlbmRzIFN0YXRlTWFjaGluZVNlbWFudGljcygKICAgIG5TdGF0ZXM9MiwKICAgIHQ9e1RyYW5zaXRpb24oZnJvbT0xLCB0bz0yLCBpbW1lZGlhdGU9ZmFsc2UsIHN5bmNocm9uaXplPXRydWUpLAogICAgICAgVHJhbnNpdGlvbihmcm9tPTIsIHRvPTEsIGltbWVkaWF0ZT1mYWxzZSl9LAogICAgYz17dHJ1ZSwgdiA+PSAyMH0pOwogIEJvb2xlYW4gaW5pdChzdGFydD10cnVlKSA9IHNhbXBsZShmYWxzZSk7CgogIGJsb2NrIFN0YXRlMQogICAgQm9vbGVhbiBhY3RpdmU7CiAgICBCb29sZWFuIHJlc2V0OwogICAgb3V0ZXIgaW5wdXQgSW50ZWdlciB2X3ByZXZpb3VzOwogICAgaW5uZXIgb3V0cHV0IEludGVnZXIgdjsKICAgIGlubmVyIEludGVnZXIgY291bnQoc3RhcnQ9MCk7CiAgICBpbm5lciBJbnRlZ2VyIGNvdW50X3ByZXZpb3VzID0gaWYgcmVzZXQgdGhlbiAwIGVsc2UgcHJldmlvdXMoY291bnQpOwoKICAgIGJsb2NrIFN0YXRlTWFjaGluZU9mX3N0YXRlQQogICAgICBleHRlbmRzIFN0YXRlTWFjaGluZVNlbWFudGljcygKICAgICAgICBuU3RhdGVzPTQsCiAgICAgICAgdD17VHJhbnNpdGlvbihmcm9tPTEsIHRvPTIsIGltbWVkaWF0ZT1mYWxzZSksCiAgICAgICAgICAgVHJhbnNpdGlvbihmcm9tPTIsIHRvPTMsIGltbWVkaWF0ZT1mYWxzZSksCiAgICAgICAgICAgVHJhbnNpdGlvbihmcm9tPTMsIHRvPTEsIGltbWVkaWF0ZT1mYWxzZSksCiAgICAgICAgICAgVHJhbnNpdGlvbihmcm9tPTMsIHRvPTQsIGltbWVkaWF0ZT1mYWxzZSl9LAogICAgICAgIGM9e3YgPj0gNiwgdj09MCwgdHJ1ZSwgY291bnQgPj0gMn0pOwogICAgICBvdXRlciBpbnB1dCBJbnRlZ2VyIHZfcHJldmlvdXM7CiAgICAgIG91dGVyIG91dHB1dCBJbnRlZ2VyIHY7CiAgICAgIG91dGVyIGlucHV0IEludGVnZXIgY291bnRfcHJldmlvdXM7CiAgICAgIG91dGVyIG91dHB1dCBJbnRlZ2VyIGNvdW50OwogICAgZXF1YXRpb24KICAgICAgaW5GaW5hbFN0YXRlID0gdHJ1ZTsgLy8gbm8gbWFjcm8gc3RhdGVzCiAgICAgIGlmIGFjdGl2ZVN0YXRlID09IDEgdGhlbgogICAgICAgIC8vIGVxdWF0aW9ucyBmb3Igc3RhdGVBCiAgICAgICAgdiA9IHZfcHJldmlvdXMgKyAyOwogICAgICAgIGNvdW50ID0gY291bnRfcHJldmlvdXM7CiAgICAgIGVsc2VpZiBhY3RpdmVTdGF0ZSA9PSAyIHRoZW4KICAgICAgICAvLyBlcXVhdGlvbnMgZm9yIHN0YXRlQgogICAgICAgIHYgPSB2X3ByZXZpb3VzIC0gMTsKICAgICAgICBjb3VudCA9IGNvdW50X3ByZXZpb3VzOwogICAgICBlbHNlaWYgYWN0aXZlU3RhdGUgPT0gMyB0aGVuCiAgICAgICAgLy8gZXF1YXRpb25zIGZvciBzdGF0ZUMKICAgICAgICB2ID0gdl9wcmV2aW91czsKICAgICAgICBjb3VudCA9IGNvdW50X3ByZXZpb3VzICsgMTsKICAgICAgZWxzZSAvLyBpZiBhY3RpdmVTdGF0ZSA9PSA0IHRoZW4KICAgICAgICAvLyBlcXVhdGlvbnMgZm9yIHN0YXRlRAogICAgICAgIHYgPSB2X3ByZXZpb3VzOwogICAgICAgIGNvdW50ID0gY291bnRfcHJldmlvdXM7CiAgICAgIGVuZCBpZjsKICAgIGVuZCBTdGF0ZU1hY2hpbmVPZl9zdGF0ZUE7CgogICAgU3RhdGVNYWNoaW5lT2Zfc3RhdGVBIHN0YXRlTWFjaGluZU9mX3N0YXRlQShhY3RpdmU9YWN0aXZlLAogICAgICByZXNldD1yZXNldCk7CgogICAgYmxvY2sgU3RhdGVNYWNoaW5lT2Zfc3RhdGVYCiAgICAgIGV4dGVuZHMgU3RhdGVNYWNoaW5lU2VtYW50aWNzKAogICAgICAgIG5TdGF0ZXM9MiwKICAgICAgICB0PXtUcmFuc2l0aW9uKGZyb209MSwgdG89MiwgaW1tZWRpYXRlPWZhbHNlLCByZXNldD1mYWxzZSl9LAogICAgICAgIGM9e2k+MjV9KTsKICAgICAgb3V0ZXIgaW5wdXQgSW50ZWdlciB2OwogICAgICBJbnRlZ2VyIGkoc3RhcnQ9MCk7CiAgICAgIEludGVnZXIgaV9wcmV2aW91czsKICAgICAgSW50ZWdlciBqKHN0YXJ0PTApOwogICAgICBJbnRlZ2VyIGpfcHJldmlvdXM7CiAgICAgIEludGVnZXIgdzsKICAgIGVxdWF0aW9uCiAgICAgIGluRmluYWxTdGF0ZSA9IHRydWU7IC8vIG5vIG1hY3JvIHN0YXRlcwogICAgICBpZiBhY3RpdmVTdGF0ZSA9PSAxIHRoZW4KICAgICAgICAvLyBlcXVhdGlvbnMgZm9yIHN0YXRlWAogICAgICAgIGlfcHJldmlvdXMgPSBpZiBhY3RpdmVSZXNldCBvcgogICAgICAgICAgYWN0aXZlUmVzZXRTdGF0ZXNbMV0gdGhlbiAwIGVsc2UgcHJldmlvdXMoaSk7CiAgICAgICAgal9wcmV2aW91cyA9IHByZXZpb3VzKGopOwogICAgICAgIGkgPSBpX3ByZXZpb3VzICsgMTsKICAgICAgICB3ID0gdjsKICAgICAgICBqID0gal9wcmV2aW91czsKICAgICAgZWxzZSAvLyBpZiBhY3RpdmVTdGF0ZSA9PSAyIHRoZW4KICAgICAgICAvLyBlcXVhdGlvbnMgZm9yIHN0YXRlWQogICAgICAgIGlfcHJldmlvdXMgPSBwcmV2aW91cyhpKTsKICAgICAgICBqX3ByZXZpb3VzID0gaWYgYWN0aXZlUmVzZXQgb3IgYWN0aXZlUmVzZXRTdGF0ZXNbMl0gdGhlbiAwIGVsc2UgcHJldmlvdXMoaik7CiAgICAgICAgaSA9IGlfcHJldmlvdXM7CiAgICAgICAgdyA9IHByZXZpb3VzKHcpOwogICAgICAgIGogPSBqX3ByZXZpb3VzICsgMTsKICAgICAgZW5kIGlmOwogICAgZW5kIFN0YXRlTWFjaGluZU9mX3N0YXRlWDsKCiAgICBTdGF0ZU1hY2hpbmVPZl9zdGF0ZVggc3RhdGVNYWNoaW5lT2Zfc3RhdGVYKGFjdGl2ZT1hY3RpdmUsCiAgICAgIHJlc2V0PXJlc2V0KTsKICAgIEJvb2xlYW4gaW5GaW5hbFN0YXRlID0gc3RhdGVNYWNoaW5lT2Zfc3RhdGVBLnN0YXRlTWFjaGluZUluRmluYWxTdGF0ZSBhbmQKICAgICAgc3RhdGVNYWNoaW5lT2Zfc3RhdGVYLnN0YXRlTWFjaGluZUluRmluYWxTdGF0ZTsKICBlbmQgU3RhdGUxOwoKICBTdGF0ZTEgc3RhdGUxOwogIEludGVnZXIgdihzdGFydD0wKTsKICBpbm5lciBJbnRlZ2VyIHZfcHJldmlvdXMgPSBpZiByZXNldCB0aGVuIDAgZWxzZSBwcmV2aW91cyh2KTsKZXF1YXRpb24KICBhY3RpdmUgPSB0cnVlOwogIHJlc2V0ID0gcHJldmlvdXMoaW5pdCk7CiAgaWYgYWN0aXZlU3RhdGUgPT0gMSB0aGVuCiAgICAvLyBlcXVhdGlvbnMgZm9yIHN0YXRlMQogICAgaW5GaW5hbFN0YXRlID0gc3RhdGUxLmluRmluYWxTdGF0ZTsKICAgIHN0YXRlMS5hY3RpdmUgPSB0cnVlOwogICAgc3RhdGUxLnJlc2V0ID0gYWN0aXZlUmVzZXQgb3IgYWN0aXZlUmVzZXRTdGF0ZXNbMV07CiAgICB2ID0gc3RhdGUxLnY7CiAgZWxzZSAvLyBpZiBhY3RpdmVTdGF0ZSA9PSAyIHRoZW4KICAgIC8vIGVxdWF0aW9ucyBmb3Igc3RhdGUyCiAgICBpbkZpbmFsU3RhdGUgPSB0cnVlOyAvLyBub3QgbWFjcm8gc3RhdGUKICAgIHN0YXRlMS5hY3RpdmUgPSBmYWxzZTsKICAgIHN0YXRlMS5yZXNldCA9IGZhbHNlOwogICAgdiA9IHByZXZpb3VzKHYpICsgNTsKICBlbmQgaWY7CmVuZCBIaWVyYXJjaGNpYWxBbmRQYXJhbGxlbFN0YXRlTWFjaGluZTs=">⬇</a></div>
<div id="lstnumberx4257" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">block</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">HierarchicalAndParallelStateMachine</span>
</div>
<div id="lstnumberx4258" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">extends</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">StateMachineSemantics</span><span class="ltx_text ltx_font_typewriter">(</span>
</div>
<div id="lstnumberx4259" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">nStates</span><span class="ltx_text ltx_font_typewriter">=2,</span>
</div>
<div id="lstnumberx4260" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">t</span><span class="ltx_text ltx_font_typewriter">={</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">Transition</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">from</span><span class="ltx_text ltx_font_typewriter">=1,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">to</span><span class="ltx_text ltx_font_typewriter">=2,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">immediate</span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">false</span><span class="ltx_text ltx_font_typewriter">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">synchronize</span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">true</span><span class="ltx_text ltx_font_typewriter">),</span>
</div>
<div id="lstnumberx4261" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">       </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">Transition</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">from</span><span class="ltx_text ltx_font_typewriter">=2,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">to</span><span class="ltx_text ltx_font_typewriter">=1,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">immediate</span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">false</span><span class="ltx_text ltx_font_typewriter">)},</span>
</div>
<div id="lstnumberx4262" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">c</span><span class="ltx_text ltx_font_typewriter">={</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">true</span><span class="ltx_text ltx_font_typewriter">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">&gt;=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">20});</span>
</div>
<div id="lstnumberx4263" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Boolean</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">init</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">start</span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">true</span><span class="ltx_text ltx_font_typewriter">)</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">sample</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">false</span><span class="ltx_text ltx_font_typewriter">);</span>
</div>
<div id="lstnumberx4264" class="ltx_listingline">
</div>
<div id="lstnumberx4265" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">block</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">State1</span>
</div>
<div id="lstnumberx4266" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Boolean</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">active</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4267" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Boolean</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">reset</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4268" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">outer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">input</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v_previous</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4269" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">inner</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">output</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4270" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">inner</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">count</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">start</span><span class="ltx_text ltx_font_typewriter">=0);</span>
</div>
<div id="lstnumberx4271" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">inner</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">count_previous</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">reset</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">0</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">previous</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">count</span><span class="ltx_text ltx_font_typewriter">);</span>
</div>
<div id="lstnumberx4272" class="ltx_listingline">
</div>
<div id="lstnumberx4273" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">block</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">StateMachineOf_stateA</span>
</div>
<div id="lstnumberx4274" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">extends</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">StateMachineSemantics</span><span class="ltx_text ltx_font_typewriter">(</span>
</div>
<div id="lstnumberx4275" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">        </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">nStates</span><span class="ltx_text ltx_font_typewriter">=4,</span>
</div>
<div id="lstnumberx4276" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">        </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">t</span><span class="ltx_text ltx_font_typewriter">={</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">Transition</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">from</span><span class="ltx_text ltx_font_typewriter">=1,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">to</span><span class="ltx_text ltx_font_typewriter">=2,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">immediate</span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">false</span><span class="ltx_text ltx_font_typewriter">),</span>
</div>
<div id="lstnumberx4277" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">           </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">Transition</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">from</span><span class="ltx_text ltx_font_typewriter">=2,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">to</span><span class="ltx_text ltx_font_typewriter">=3,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">immediate</span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">false</span><span class="ltx_text ltx_font_typewriter">),</span>
</div>
<div id="lstnumberx4278" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">           </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">Transition</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">from</span><span class="ltx_text ltx_font_typewriter">=3,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">to</span><span class="ltx_text ltx_font_typewriter">=1,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">immediate</span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">false</span><span class="ltx_text ltx_font_typewriter">),</span>
</div>
<div id="lstnumberx4279" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">           </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">Transition</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">from</span><span class="ltx_text ltx_font_typewriter">=3,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">to</span><span class="ltx_text ltx_font_typewriter">=4,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">immediate</span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">false</span><span class="ltx_text ltx_font_typewriter">)},</span>
</div>
<div id="lstnumberx4280" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">        </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">c</span><span class="ltx_text ltx_font_typewriter">={</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">&gt;=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">6,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_font_typewriter">==0,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">true</span><span class="ltx_text ltx_font_typewriter">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">count</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">&gt;=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">2});</span>
</div>
<div id="lstnumberx4281" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">outer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">input</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v_previous</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4282" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">outer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">output</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4283" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">outer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">input</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">count_previous</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4284" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">outer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">output</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">count</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4285" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx4286" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">inFinalState</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">true</span><span class="ltx_text ltx_font_typewriter">;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>no<span class="ltx_text ltx_lst_space"> </span>macro<span class="ltx_text ltx_lst_space"> </span>states</span>
</div>
<div id="lstnumberx4287" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">activeState</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">==</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">1</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx4288" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">        </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>equations<span class="ltx_text ltx_lst_space"> </span>for<span class="ltx_text ltx_lst_space"> </span>stateA</span>
</div>
<div id="lstnumberx4289" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">        </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v_previous</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">+</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">2;</span>
</div>
<div id="lstnumberx4290" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">        </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">count</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">count_previous</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4291" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">elseif</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">activeState</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">==</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">2</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx4292" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">        </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>equations<span class="ltx_text ltx_lst_space"> </span>for<span class="ltx_text ltx_lst_space"> </span>stateB</span>
</div>
<div id="lstnumberx4293" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">        </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v_previous</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">-</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">1;</span>
</div>
<div id="lstnumberx4294" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">        </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">count</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">count_previous</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4295" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">elseif</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">activeState</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">==</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">3</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx4296" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">        </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>equations<span class="ltx_text ltx_lst_space"> </span>for<span class="ltx_text ltx_lst_space"> </span>stateC</span>
</div>
<div id="lstnumberx4297" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">        </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v_previous</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4298" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">        </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">count</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">count_previous</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">+</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">1;</span>
</div>
<div id="lstnumberx4299" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>if<span class="ltx_text ltx_lst_space"> </span>activeState<span class="ltx_text ltx_lst_space"> </span>==<span class="ltx_text ltx_lst_space"> </span>4<span class="ltx_text ltx_lst_space"> </span>then</span>
</div>
<div id="lstnumberx4300" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">        </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>equations<span class="ltx_text ltx_lst_space"> </span>for<span class="ltx_text ltx_lst_space"> </span>stateD</span>
</div>
<div id="lstnumberx4301" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">        </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v_previous</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4302" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">        </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">count</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">count_previous</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4303" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4304" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">StateMachineOf_stateA</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4305" class="ltx_listingline">
</div>
<div id="lstnumberx4306" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">StateMachineOf_stateA</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">stateMachineOf_stateA</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">active</span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">active</span><span class="ltx_text ltx_font_typewriter">,</span>
</div>
<div id="lstnumberx4307" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">reset</span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">reset</span><span class="ltx_text ltx_font_typewriter">);</span>
</div>
<div id="lstnumberx4308" class="ltx_listingline">
</div>
<div id="lstnumberx4309" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">block</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">StateMachineOf_stateX</span>
</div>
<div id="lstnumberx4310" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">extends</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">StateMachineSemantics</span><span class="ltx_text ltx_font_typewriter">(</span>
</div>
<div id="lstnumberx4311" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">        </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">nStates</span><span class="ltx_text ltx_font_typewriter">=2,</span>
</div>
<div id="lstnumberx4312" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">        </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">t</span><span class="ltx_text ltx_font_typewriter">={</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">Transition</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">from</span><span class="ltx_text ltx_font_typewriter">=1,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">to</span><span class="ltx_text ltx_font_typewriter">=2,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">immediate</span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">false</span><span class="ltx_text ltx_font_typewriter">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">reset</span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">false</span><span class="ltx_text ltx_font_typewriter">)},</span>
</div>
<div id="lstnumberx4313" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">        </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">c</span><span class="ltx_text ltx_font_typewriter">={</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_font_typewriter">&gt;25});</span>
</div>
<div id="lstnumberx4314" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">outer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">input</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4315" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">start</span><span class="ltx_text ltx_font_typewriter">=0);</span>
</div>
<div id="lstnumberx4316" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i_previous</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4317" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">j</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">start</span><span class="ltx_text ltx_font_typewriter">=0);</span>
</div>
<div id="lstnumberx4318" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">j_previous</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4319" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">w</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4320" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx4321" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">inFinalState</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">true</span><span class="ltx_text ltx_font_typewriter">;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>no<span class="ltx_text ltx_lst_space"> </span>macro<span class="ltx_text ltx_lst_space"> </span>states</span>
</div>
<div id="lstnumberx4322" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">activeState</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">==</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">1</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx4323" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">        </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>equations<span class="ltx_text ltx_lst_space"> </span>for<span class="ltx_text ltx_lst_space"> </span>stateX</span>
</div>
<div id="lstnumberx4324" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">        </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i_previous</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">activeReset</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">or</span>
</div>
<div id="lstnumberx4325" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">          </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">activeResetStates</span><span class="ltx_text ltx_font_typewriter">[1]</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">0</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">previous</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_font_typewriter">);</span>
</div>
<div id="lstnumberx4326" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">        </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">j_previous</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">previous</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">j</span><span class="ltx_text ltx_font_typewriter">);</span>
</div>
<div id="lstnumberx4327" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">        </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i_previous</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">+</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">1;</span>
</div>
<div id="lstnumberx4328" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">        </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">w</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4329" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">        </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">j</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">j_previous</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4330" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>if<span class="ltx_text ltx_lst_space"> </span>activeState<span class="ltx_text ltx_lst_space"> </span>==<span class="ltx_text ltx_lst_space"> </span>2<span class="ltx_text ltx_lst_space"> </span>then</span>
</div>
<div id="lstnumberx4331" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">        </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>equations<span class="ltx_text ltx_lst_space"> </span>for<span class="ltx_text ltx_lst_space"> </span>stateY</span>
</div>
<div id="lstnumberx4332" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">        </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i_previous</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">previous</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_font_typewriter">);</span>
</div>
<div id="lstnumberx4333" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">        </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">j_previous</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">activeReset</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">or</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">activeResetStates</span><span class="ltx_text ltx_font_typewriter">[2]</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">0</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">previous</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">j</span><span class="ltx_text ltx_font_typewriter">);</span>
</div>
<div id="lstnumberx4334" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">        </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">i_previous</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4335" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">        </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">w</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">previous</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">w</span><span class="ltx_text ltx_font_typewriter">);</span>
</div>
<div id="lstnumberx4336" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">        </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">j</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">j_previous</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">+</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">1;</span>
</div>
<div id="lstnumberx4337" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4338" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">StateMachineOf_stateX</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4339" class="ltx_listingline">
</div>
<div id="lstnumberx4340" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">StateMachineOf_stateX</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">stateMachineOf_stateX</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">active</span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">active</span><span class="ltx_text ltx_font_typewriter">,</span>
</div>
<div id="lstnumberx4341" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">reset</span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">reset</span><span class="ltx_text ltx_font_typewriter">);</span>
</div>
<div id="lstnumberx4342" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Boolean</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">inFinalState</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">stateMachineOf_stateA</span><span class="ltx_text ltx_font_typewriter">.</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">stateMachineInFinalState</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">and</span>
</div>
<div id="lstnumberx4343" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">      </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">stateMachineOf_stateX</span><span class="ltx_text ltx_font_typewriter">.</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">stateMachineInFinalState</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4344" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">State1</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4345" class="ltx_listingline">
</div>
<div id="lstnumberx4346" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">State1</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">state1</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4347" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">start</span><span class="ltx_text ltx_font_typewriter">=0);</span>
</div>
<div id="lstnumberx4348" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">inner</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">Integer</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v_previous</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">reset</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">0</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">previous</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_font_typewriter">);</span>
</div>
<div id="lstnumberx4349" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">equation</span>
</div>
<div id="lstnumberx4350" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">active</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">true</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4351" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">reset</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">previous</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">init</span><span class="ltx_text ltx_font_typewriter">);</span>
</div>
<div id="lstnumberx4352" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">activeState</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">==</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">1</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">then</span>
</div>
<div id="lstnumberx4353" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>equations<span class="ltx_text ltx_lst_space"> </span>for<span class="ltx_text ltx_lst_space"> </span>state1</span>
</div>
<div id="lstnumberx4354" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">inFinalState</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">state1</span><span class="ltx_text ltx_font_typewriter">.</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">inFinalState</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4355" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">state1</span><span class="ltx_text ltx_font_typewriter">.</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">active</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">true</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4356" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">state1</span><span class="ltx_text ltx_font_typewriter">.</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">reset</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">activeReset</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">or</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">activeResetStates</span><span class="ltx_text ltx_font_typewriter">[1];</span>
</div>
<div id="lstnumberx4357" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">state1</span><span class="ltx_text ltx_font_typewriter">.</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4358" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">else</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>if<span class="ltx_text ltx_lst_space"> </span>activeState<span class="ltx_text ltx_lst_space"> </span>==<span class="ltx_text ltx_lst_space"> </span>2<span class="ltx_text ltx_lst_space"> </span>then</span>
</div>
<div id="lstnumberx4359" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>equations<span class="ltx_text ltx_lst_space"> </span>for<span class="ltx_text ltx_lst_space"> </span>state2</span>
</div>
<div id="lstnumberx4360" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">inFinalState</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">true</span><span class="ltx_text ltx_font_typewriter">;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="color:#127500;">//<span class="ltx_text ltx_lst_space"> </span>not<span class="ltx_text ltx_lst_space"> </span>macro<span class="ltx_text ltx_lst_space"> </span>state</span>
</div>
<div id="lstnumberx4361" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">state1</span><span class="ltx_text ltx_font_typewriter">.</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">active</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">false</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4362" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">state1</span><span class="ltx_text ltx_font_typewriter">.</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">reset</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">false</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4363" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">    </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="color:#543D08;">previous</span><span class="ltx_text ltx_font_typewriter">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">v</span><span class="ltx_text ltx_font_typewriter">)</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">+</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_font_typewriter">5;</span>
</div>
<div id="lstnumberx4364" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter">  </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">if</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
<div id="lstnumberx4365" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="color:#003378;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter">HierarchcialAndParallelStateMachine</span><span class="ltx_text ltx_font_typewriter">;</span>
</div>
</div>
<p class="ltx_p">]</p>
</div>
</section>
</section>
</section>
</div>
<footer class="ltx_page_footer">
<div>
<a href="synchronous-language-elements.html" title="Chapter 16 Synchronous Language Elements ‣ Modelica® Language Specification version 3.5" class="ltx_ref" rel="prev"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">16 </span>Synchronous Language Elements</span></a><a href="bib.html" title="References ‣ Modelica® Language Specification version 3.5" class="ltx_ref" rel="bibliography"><span class="ltx_text ltx_ref_title">References</span></a><a href="idx.html" title="Index ‣ Modelica® Language Specification version 3.5" class="ltx_ref" rel="index"><span class="ltx_text ltx_ref_title">Index</span></a><a href="annotations.html" title="Chapter 18 Annotations ‣ Modelica® Language Specification version 3.5" class="ltx_ref" rel="next"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">18 </span>Annotations</span></a>
</div>
<div class="ltx_page_logo">Generated  on Sat May  1 09:04:16 2021 by <a href="http://dlmf.nist.gov/LaTeXML/">LaTeXML <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg==" alt="[LOGO]"></a>
</div></footer>
</div>
</body>
</html>
