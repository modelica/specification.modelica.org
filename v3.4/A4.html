<!DOCTYPE html><html>
<head>
<title>D Derivation of Stream Equations‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4</title>
<!--Generated on Tue May 14 15:30:12 2019 by LaTeXML (version 0.8.3) http://dlmf.nist.gov/LaTeXML/.-->
<!--Document created on April 10, 2017.-->

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="LaTeXML.css" type="text/css">
<link rel="stylesheet" href="ltx-report.css" type="text/css">
<link rel="stylesheet" href="ltx-listings.css" type="text/css">
<link rel="stylesheet" href="css/LaTeXML-navbar-left.css" type="text/css">
<script src="css/LatexML-maybeMathJax.js" type="text/javascript"></script>
<link rel="up" href="MLS.html" title="Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="start" href="MLS.html" title="Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="prev" href="A3.html" title="Appendix C Modelica DAE Representation ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="next" href="A5.html" title="Appendix E Modelica Revision History ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Chx1.html" title="Preface ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch1.html" title="Chapter 1 Introduction ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch2.html" title="Chapter 2 Lexical Structure ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch3.html" title="Chapter 3 Operators and Expressions ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch4.html" title="Chapter 4 Classes, Predefined Types, and Declarations ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch5.html" title="Chapter 5 Scoping, Name Lookup, and Flattening ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch6.html" title="Chapter 6 Interface or Type Relationships ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch7.html" title="Chapter 7 Inheritance, Modification, and Redeclaration ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch8.html" title="Chapter 8 Equations ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch9.html" title="Chapter 9 Connectors and Connections ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch10.html" title="Chapter 10 Arrays ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch11.html" title="Chapter 11 Statements and Algorithm Sections ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch12.html" title="Chapter 12 Functions ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch13.html" title="Chapter 13 Packages ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch14.html" title="Chapter 14 Overloaded Operators ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch15.html" title="Chapter 15 Stream Connectors ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch16.html" title="Chapter 16 Synchronous Language Elements ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch17.html" title="Chapter 17 State Machines ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch18.html" title="Chapter 18 Annotations ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch19.html" title="Chapter 19 Unit Expressions ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="chapter" href="Ch20.html" title="Chapter 20 The Modelica Standard Library ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="appendix" href="A1.html" title="Appendix A Glossary ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="appendix" href="A2.html" title="Appendix B Modelica Concrete Syntax ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="appendix" href="A3.html" title="Appendix C Modelica DAE Representation ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="appendix" href="A5.html" title="Appendix E Modelica Revision History ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
<link rel="appendix" href="A6.html" title="Appendix F Literature ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4">
</head>
<body>
<nav class="ltx_page_navbar"><a href="MLS.html" title="Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref" rel="start"><span class="ltx_text ltx_ref_title">Modelica® - A Unified Object-Oriented Language for Systems
Modeling<span class="ltx_text"> </span>Language
Specification<span class="ltx_text"> </span>Version 3.4</span></a>
<div class="ltx_TOC">
<ul class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Chx1.html" title="Preface ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title">Preface</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch1.html" title="Chapter 1 Introduction ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1 </span>Introduction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch2.html" title="Chapter 2 Lexical Structure ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2 </span>Lexical Structure</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch3.html" title="Chapter 3 Operators and Expressions ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3 </span>Operators and Expressions</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch4.html" title="Chapter 4 Classes, Predefined Types, and Declarations ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4 </span>Classes, Predefined Types, and Declarations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch5.html" title="Chapter 5 Scoping, Name Lookup, and Flattening ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5 </span>Scoping, Name Lookup, and Flattening</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch6.html" title="Chapter 6 Interface or Type Relationships ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">6 </span>Interface or Type Relationships</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch7.html" title="Chapter 7 Inheritance, Modification, and Redeclaration ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7 </span>Inheritance, Modification, and Redeclaration</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch8.html" title="Chapter 8 Equations ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8 </span>Equations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch9.html" title="Chapter 9 Connectors and Connections ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9 </span>Connectors and Connections</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch10.html" title="Chapter 10 Arrays ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">10 </span>Arrays</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch11.html" title="Chapter 11 Statements and Algorithm Sections ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">11 </span>Statements and Algorithm Sections</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch12.html" title="Chapter 12 Functions ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">12 </span>Functions</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch13.html" title="Chapter 13 Packages ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">13 </span>Packages</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch14.html" title="Chapter 14 Overloaded Operators ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">14 </span>Overloaded Operators</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch15.html" title="Chapter 15 Stream Connectors ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">15 </span>Stream Connectors</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch16.html" title="Chapter 16 Synchronous Language Elements ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">16 </span>Synchronous Language Elements</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch17.html" title="Chapter 17 State Machines ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">17 </span>State Machines</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch18.html" title="Chapter 18 Annotations ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">18 </span>Annotations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch19.html" title="Chapter 19 Unit Expressions ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">19 </span>Unit Expressions</span></a></li>
<li class="ltx_tocentry ltx_tocentry_chapter"><a href="Ch20.html" title="Chapter 20 The Modelica Standard Library ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">20 </span>The Modelica Standard Library</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="A1.html" title="Appendix A Glossary ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A </span>Glossary</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="A2.html" title="Appendix B Modelica Concrete Syntax ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">B </span>Modelica Concrete Syntax</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="A3.html" title="Appendix C Modelica DAE Representation ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C </span>Modelica DAE Representation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix ltx_ref_self">
<span class="ltx_ref ltx_ref_self"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">D </span>Derivation of Stream Equations</span></span>
<ul class="ltx_toclist ltx_toclist_appendix">
<li class="ltx_tocentry ltx_tocentry_section"><a href="#reasons-for-avoiding-the-actual-mixing-enthalpy-in-connector-definitions" title="D.1 Reasons for avoiding the actual mixing enthalpy in connector definitions ‣ Appendix D Derivation of Stream Equations ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">D.1 </span>Reasons for avoiding the actual mixing enthalpy in connector definitions</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a href="#rationale-for-the-formulation-of-the-instream-operator" title="D.2 Rationale for the formulation of the inStream() operator ‣ Appendix D Derivation of Stream Equations ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">D.2 </span>Rationale for the formulation of the inStream() operator</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a href="#special-cases-covered-by-the-instream-operator-definition" title="D.3 Special cases covered by the inStream() operator definition ‣ Appendix D Derivation of Stream Equations ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">D.3 </span>Special cases covered by the inStream() operator definition</span></a>
<ul class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#stream-connector-is-not-connected-n-1" title="D.3.1 Stream connector is not connected (N=1): ‣ D.3 Special cases covered by the inStream() operator definition ‣ Appendix D Derivation of Stream Equations ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">D.3.1 </span>Stream connector is not connected (N=1):</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#connection-of-2-stream-connectors-one-to-one-connections-n-2" title="D.3.2 Connection of 2 stream connectors, one to one connections (N=2): ‣ D.3 Special cases covered by the inStream() operator definition ‣ Appendix D Derivation of Stream Equations ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">D.3.2 </span>Connection of 2 stream connectors, one to one connections (N=2):</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#connection-of-3-stream-connectors-where-one-mass-flow-rate-is-identical-to-zero-n-3-and" title="D.3.3 Connection of 3 stream connectors where one mass flow rate is identical to zero (N=3 and = ˙ m 3 0 ): ‣ D.3 Special cases covered by the inStream() operator definition ‣ Appendix D Derivation of Stream Equations ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">D.3.3 </span>Connection of 3 stream connectors where one mass flow rate is identical to zero (N=3 and <math class="ltx_Math" alttext="\dot{m}_{3}=0" display="inline"><mrow><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>3</mn></msub><mo>=</mo><mn>0</mn></mrow></math>):</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#connection-of-3-stream-connectors-where-two-mass-flow-rates-are-positive-ideal-splitting-junction-for-uni-directional-flow" title="D.3.4 Connection of 3 stream connectors where two mass flow rates are positive (ideal splitting junction for uni-directional flow) ‣ D.3 Special cases covered by the inStream() operator definition ‣ Appendix D Derivation of Stream Equations ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">D.3.4 </span>Connection of 3 stream connectors where two mass flow rates are positive (ideal splitting junction for uni-directional flow)</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="A5.html" title="Appendix E Modelica Revision History ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">E </span>Modelica Revision History</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="A6.html" title="Appendix F Literature ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">F </span>Literature</span></a></li>
</ul>
</div>
</nav>
<div class="ltx_page_main">
<header class="ltx_page_header">
<div>
<a href="MLS.html" title="Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref" rel="up"><span class="ltx_text ltx_ref_title">Modelica® - A Unified Object-Oriented Language for Systems
Modeling<span class="ltx_text"> </span>Language
Specification<span class="ltx_text"> </span>Version 3.4</span></a><a href="A3.html" title="Appendix C Modelica DAE Representation ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref" rel="prev"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C </span>Modelica DAE Representation</span></a><a href="A5.html" title="Appendix E Modelica Revision History ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref" rel="next"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">E </span>Modelica Revision History</span></a>
</div></header>
<div class="ltx_page_content">
<section class="ltx_appendix ltx_authors_1line">
<h1 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix D </span>Derivation of Stream Equations</h1>
<div class="ltx_date ltx_role_creation"></div>

<div id="A4.p1" class="ltx_para">
<p class="ltx_p">This appendix contains a derivation of the equation for stream
connectors from <a href="Ch15.html" title="Chapter 15 Stream Connectors ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">chapter 15</span></a>.</p>
</div>
<section id="reasons-for-avoiding-the-actual-mixing-enthalpy-in-connector-definitions" class="ltx_section">
<h1 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">D.1 </span>Reasons for avoiding the actual mixing enthalpy in connector definitions</h1>

<div id="A4.S1.p1" class="ltx_para">
<p class="ltx_p">Consider a connection set with <span class="ltx_text ltx_emph ltx_font_italic">n</span> connectors. The mixing enthalpy
is defined by the mass balance</p>
<table id="A4.Ex1" class="ltx_equation ltx_eqn_table">

<tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="A4.Ex1.m1" class="ltx_Math" alttext="0=\sum_{j=1}^{n}\dot{m}_{j}" display="block"><mrow><mn>0</mn><mo>=</mo><mrow><munderover><mo largeop="true" movablelimits="false" symmetric="true">∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mi>j</mi></msub></mrow></mrow></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr>
</table>
<p class="ltx_p">and the energy balance</p>
<table id="A4.Ex2" class="ltx_equation ltx_eqn_table">

<tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="A4.Ex2.m1" class="ltx_Math" alttext="0=\sum_{j=1}^{n}\dot{H}_{j}" display="block"><mrow><mn>0</mn><mo>=</mo><mrow><munderover><mo largeop="true" movablelimits="false" symmetric="true">∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><msub><mover accent="true"><mi>H</mi><mo>˙</mo></mover><mi>j</mi></msub></mrow></mrow></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr>
</table>
<p class="ltx_p">with</p>
<table id="A4.Ex3" class="ltx_equation ltx_eqn_table">

<tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="A4.Ex3.m1" class="ltx_Math" alttext="\dot{H}_{j}=\dot{m}_{j}\begin{cases}h_{mix}&amp;\text{if $\dot{m}_{j}&gt;0$}\\
h_{outflow,j}&amp;\text{if $\dot{m}_{j}&lt;=0$}\end{cases}" display="block"><mrow><msub><mover accent="true"><mi>H</mi><mo>˙</mo></mover><mi>j</mi></msub><mo>=</mo><mrow><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mi>j</mi></msub><mo>⁢</mo><mrow><mo>{</mo><mtable columnspacing="5pt" displaystyle="true" rowspacing="0pt"><mtr><mtd columnalign="left"><msub><mi>h</mi><mrow><mi>m</mi><mo>⁢</mo><mi>i</mi><mo>⁢</mo><mi>x</mi></mrow></msub></mtd><mtd columnalign="left"><mrow><mtext>if </mtext><mrow><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mi>j</mi></msub><mo>&gt;</mo><mn>0</mn></mrow></mrow></mtd></mtr><mtr><mtd columnalign="left"><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mi>j</mi></mrow></msub></mtd><mtd columnalign="left"><mrow><mtext>if </mtext><mrow><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mi>j</mi></msub><mo>≤</mo><mn>0</mn></mrow></mrow></mtd></mtr></mtable></mrow></mrow></mrow></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr>
</table>
<p class="ltx_p">Herein, mass flow rates are positive when entering models (exiting the
connection set). The specific enthalpy represents the specific enthalpy
inside the component, close to the connector, for the case of outflow.
Expressed with variables used in the balance equations we arrive at:</p>
<table id="A4.Ex4" class="ltx_equation ltx_eqn_table">

<tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="A4.Ex4.m1" class="ltx_Math" alttext="h_{outflow,j}=\begin{cases}\frac{\dot{H}_{j}}{\dot{m}_{j}}&amp;\text{if $\dot{m}_{%
j}&lt;0$}\\
\textrm{arbitrary}&amp;\text{if $\dot{m}_{j}&gt;=0$}\end{cases}" display="block"><mrow><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mi>j</mi></mrow></msub><mo>=</mo><mrow><mo>{</mo><mtable columnspacing="5pt" displaystyle="true" rowspacing="0pt"><mtr><mtd columnalign="left"><mstyle displaystyle="false"><mfrac><msub><mover accent="true"><mi>H</mi><mo>˙</mo></mover><mi>j</mi></msub><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mi>j</mi></msub></mfrac></mstyle></mtd><mtd columnalign="left"><mrow><mtext>if </mtext><mrow><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mi>j</mi></msub><mo>&lt;</mo><mn>0</mn></mrow></mrow></mtd></mtr><mtr><mtd columnalign="left"><mtext>arbitrary</mtext></mtd><mtd columnalign="left"><mrow><mtext>if </mtext><mrow><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mi>j</mi></msub><mo>≥</mo><mn>0</mn></mrow></mrow></mtd></mtr></mtable></mrow></mrow></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr>
</table>
<p class="ltx_p">While these equations are suitable for device-oriented modeling, the
straightforward usage of this definition leads to models with
discontinuous residual equations, which violates the prerequisites of
several solvers for nonlinear equation systems. This is the reason why
the actual mixing enthalpy is not modelled directly in the model
equations. The stream connectors provide a suitable alternative.</p>
</div>
<figure id="A4.F1" class="ltx_figure">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure">Figure D.1: </span>Exemplary connection set with three connected components and a common mixing enthalpy</figcaption><img src="media/fluidmix.png" id="A4.F1.g1" class="ltx_graphics ltx_centering" width="271" height="271" alt="">
</figure>
</section>
<section id="rationale-for-the-formulation-of-the-instream-operator" class="ltx_section">
<h1 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">D.2 </span>Rationale for the formulation of the inStream() operator</h1>

<div id="A4.S2.p1" class="ltx_para">
<p class="ltx_p">For simplicity, the derivation of the inStream() operator is shown at
hand of 3 model components that are connected together. The case for N
connections follows correspondingly.</p>
</div>
<div id="A4.S2.p2" class="ltx_para">
<p class="ltx_p">The energy and mass balance equations for the connection set for 3
components are (see above):</p>
<table id="eq:D1" class="ltx_equationgroup ltx_eqn_table">

<tbody id="eq:D1a"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="A4.E1.1.m1" class="ltx_Math" alttext="\begin{split}\displaystyle 0=&amp;\displaystyle\dot{m}_{1}\cdot\begin{cases}h_{mix%
}&amp;\text{if $\dot{m}_{1}&gt;0$}\\
h_{outflow,1}&amp;\text{if $\dot{m}_{1}&lt;=0$}\end{cases}\\
\displaystyle+&amp;\displaystyle\dot{m}_{2}\cdot\begin{cases}h_{mix}&amp;\text{if $%
\dot{m}_{2}&gt;0$}\\
h_{outflow,2}&amp;\text{if $\dot{m}_{2}&lt;=0$}\end{cases}\\
\displaystyle+&amp;\displaystyle\dot{m}_{3}\cdot\begin{cases}h_{mix}&amp;\text{if $%
\dot{m}_{3}&gt;0$}\\
h_{outflow,3}&amp;\text{if $\dot{m}_{3}&lt;=0$}\end{cases}\end{split}" display="block"><mtable columnspacing="0pt" displaystyle="true" rowspacing="0pt"><mtr><mtd columnalign="right"><mrow><mn>0</mn><mo>=</mo><mi></mi></mrow></mtd><mtd columnalign="left"><mrow><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>1</mn></msub><mo>⋅</mo><mrow><mo>{</mo><mtable columnspacing="5pt" displaystyle="true" rowspacing="0pt"><mtr><mtd columnalign="left"><msub><mi>h</mi><mrow><mi>m</mi><mo>⁢</mo><mi>i</mi><mo>⁢</mo><mi>x</mi></mrow></msub></mtd><mtd columnalign="left"><mrow><mtext>if </mtext><mrow><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>1</mn></msub><mo>&gt;</mo><mn>0</mn></mrow></mrow></mtd></mtr><mtr><mtd columnalign="left"><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>1</mn></mrow></msub></mtd><mtd columnalign="left"><mrow><mtext>if </mtext><mrow><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>1</mn></msub><mo>≤</mo><mn>0</mn></mrow></mrow></mtd></mtr></mtable></mrow></mrow></mtd></mtr><mtr><mtd columnalign="right"><mo>+</mo></mtd><mtd columnalign="left"><mrow><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>2</mn></msub><mo>⋅</mo><mrow><mo>{</mo><mtable columnspacing="5pt" displaystyle="true" rowspacing="0pt"><mtr><mtd columnalign="left"><msub><mi>h</mi><mrow><mi>m</mi><mo>⁢</mo><mi>i</mi><mo>⁢</mo><mi>x</mi></mrow></msub></mtd><mtd columnalign="left"><mrow><mtext>if </mtext><mrow><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>2</mn></msub><mo>&gt;</mo><mn>0</mn></mrow></mrow></mtd></mtr><mtr><mtd columnalign="left"><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>2</mn></mrow></msub></mtd><mtd columnalign="left"><mrow><mtext>if </mtext><mrow><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>2</mn></msub><mo>≤</mo><mn>0</mn></mrow></mrow></mtd></mtr></mtable></mrow></mrow></mtd></mtr><mtr><mtd columnalign="right"><mo>+</mo></mtd><mtd columnalign="left"><mrow><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>3</mn></msub><mo>⋅</mo><mrow><mo>{</mo><mtable columnspacing="5pt" displaystyle="true" rowspacing="0pt"><mtr><mtd columnalign="left"><msub><mi>h</mi><mrow><mi>m</mi><mo>⁢</mo><mi>i</mi><mo>⁢</mo><mi>x</mi></mrow></msub></mtd><mtd columnalign="left"><mrow><mtext>if </mtext><mrow><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>3</mn></msub><mo>&gt;</mo><mn>0</mn></mrow></mrow></mtd></mtr><mtr><mtd columnalign="left"><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>3</mn></mrow></msub></mtd><mtd columnalign="left"><mrow><mtext>if </mtext><mrow><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>3</mn></msub><mo>≤</mo><mn>0</mn></mrow></mrow></mtd></mtr></mtable></mrow></mrow></mtd></mtr></mtable></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(D.1a)</span></td>
</tr></tbody>
<tbody id="eq:D1b"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="A4.E1.2.m1" class="ltx_Math" alttext="0=\dot{m}_{1}+\dot{m}_{2}+\dot{m}_{3}" display="block"><mrow><mn>0</mn><mo>=</mo><mrow><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>1</mn></msub><mo>+</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>2</mn></msub><mo>+</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>3</mn></msub></mrow></mrow></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(D.1b)</span></td>
</tr></tbody>
</table>
</div>
<div id="A4.S2.p3" class="ltx_para">
<p class="ltx_p">The balance equations are implemented using a max() operator in place of
the piecewise expressions, taking care of the different flow directions:</p>
<table id="eq:D2" class="ltx_equationgroup ltx_eqn_table">

<tbody id="eq:D2a"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="A4.E2.1.m1" class="ltx_Math" alttext="\begin{split}\displaystyle 0=&amp;\displaystyle\text{max}(\dot{m}_{1},0)h_{mix}-%
\text{max}(-\dot{m}_{1},0)h_{outflow,1}\\
\displaystyle+&amp;\displaystyle\text{max}(\dot{m}_{2},0)h_{mix}-\text{max}(-\dot{%
m}_{2},0)h_{outflow,2}\\
\displaystyle+&amp;\displaystyle\text{max}(\dot{m}_{3},0)h_{mix}-\text{max}(-\dot{%
m}_{3},0)h_{outflow,3}\end{split}" display="block"><mtable columnspacing="0pt" displaystyle="true" rowspacing="0pt"><mtr><mtd columnalign="right"><mrow><mn>0</mn><mo>=</mo><mi></mi></mrow></mtd><mtd columnalign="left"><mrow><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>1</mn></msub><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mo>⁢</mo><msub><mi>h</mi><mrow><mi>m</mi><mo>⁢</mo><mi>i</mi><mo>⁢</mo><mi>x</mi></mrow></msub></mrow><mo>-</mo><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>1</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mo>⁢</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>1</mn></mrow></msub></mrow></mrow></mtd></mtr><mtr><mtd columnalign="right"><mo>+</mo></mtd><mtd columnalign="left"><mrow><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>2</mn></msub><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mo>⁢</mo><msub><mi>h</mi><mrow><mi>m</mi><mo>⁢</mo><mi>i</mi><mo>⁢</mo><mi>x</mi></mrow></msub></mrow><mo>-</mo><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>2</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mo>⁢</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>2</mn></mrow></msub></mrow></mrow></mtd></mtr><mtr><mtd columnalign="right"><mo>+</mo></mtd><mtd columnalign="left"><mrow><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>3</mn></msub><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mo>⁢</mo><msub><mi>h</mi><mrow><mi>m</mi><mo>⁢</mo><mi>i</mi><mo>⁢</mo><mi>x</mi></mrow></msub></mrow><mo>-</mo><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>3</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mo>⁢</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>3</mn></mrow></msub></mrow></mrow></mtd></mtr></mtable></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(D.2a)</span></td>
</tr></tbody>
<tbody id="eq:D2b"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="A4.E2.2.m1" class="ltx_Math" alttext="\begin{split}\displaystyle 0=&amp;\displaystyle\text{max}(\dot{m}_{1},0)-\text{max%
}(-\dot{m}_{1},0)\\
\displaystyle+&amp;\displaystyle\text{max}(\dot{m}_{2},0)-\text{max}(-\dot{m}_{2},%
0)\\
\displaystyle+&amp;\displaystyle\text{max}(\dot{m}_{3},0)-\text{max}(-\dot{m}_{3},%
0)\end{split}" display="block"><mtable columnspacing="0pt" displaystyle="true" rowspacing="0pt"><mtr><mtd columnalign="right"><mrow><mn>0</mn><mo>=</mo><mi></mi></mrow></mtd><mtd columnalign="left"><mrow><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>1</mn></msub><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow><mo>-</mo><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>1</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow></mrow></mtd></mtr><mtr><mtd columnalign="right"><mo>+</mo></mtd><mtd columnalign="left"><mrow><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>2</mn></msub><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow><mo>-</mo><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>2</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow></mrow></mtd></mtr><mtr><mtd columnalign="right"><mo>+</mo></mtd><mtd columnalign="left"><mrow><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>3</mn></msub><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow><mo>-</mo><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>3</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow></mrow></mtd></mtr></mtable></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(D.2b)</span></td>
</tr></tbody>
</table>
</div>
<div id="A4.S2.p4" class="ltx_para">
<p class="ltx_p">Equation (<a href="#eq:D2a" title="(D.2a) ‣ (D.2) ‣ D.2 Rationale for the formulation of the inStream() operator ‣ Appendix D Derivation of Stream Equations ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_tag">D.2a</span></a>) is solved for <math id="A4.S2.p4.m1" class="ltx_Math" alttext="h_{mix}" display="inline"><msub><mi>h</mi><mrow><mi>m</mi><mo>⁢</mo><mi>i</mi><mo>⁢</mo><mi>x</mi></mrow></msub></math></p>
<table id="A4.Ex5" class="ltx_equation ltx_eqn_table">

<tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="A4.Ex5.m1" class="ltx_Math" alttext="h_{mix}=\frac{\text{max}(-\dot{m}_{1},0)h_{outflow,1}+\text{max}(-\dot{m}_{2},%
0)h_{outflow,2}+\text{max}(-\dot{m}_{3},0)h_{outflow,3}}{\text{max}(\dot{m}_{1%
},0)+\text{max}(\dot{m}_{2},0)+\text{max}(\dot{m}_{3},0)}" display="block"><mrow><msub><mi>h</mi><mrow><mi>m</mi><mo>⁢</mo><mi>i</mi><mo>⁢</mo><mi>x</mi></mrow></msub><mo>=</mo><mfrac><mrow><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>1</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mo>⁢</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>1</mn></mrow></msub></mrow><mo>+</mo><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>2</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mo>⁢</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>2</mn></mrow></msub></mrow><mo>+</mo><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>3</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mo>⁢</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>3</mn></mrow></msub></mrow></mrow><mrow><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>1</mn></msub><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow><mo>+</mo><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>2</mn></msub><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow><mo>+</mo><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>3</mn></msub><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow></mrow></mfrac></mrow></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr>
</table>
<p class="ltx_p">Using (<a href="#eq:D2b" title="(D.2b) ‣ (D.2) ‣ D.2 Rationale for the formulation of the inStream() operator ‣ Appendix D Derivation of Stream Equations ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_tag">D.2b</span></a>), the denominator can be changed to:</p>
<table id="A4.Ex6" class="ltx_equation ltx_eqn_table">

<tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="A4.Ex6.m1" class="ltx_Math" alttext="h_{mix}=\frac{\text{max}(-\dot{m}_{1},0)h_{outflow,1}+\text{max}(-\dot{m}_{2},%
0)h_{outflow,2}+\text{max}(-\dot{m}_{3},0)h_{outflow,3}}{\text{max}(-\dot{m}_{%
1},0)+\text{max}(-\dot{m}_{2},0)+\text{max}(-\dot{m}_{3},0)}" display="block"><mrow><msub><mi>h</mi><mrow><mi>m</mi><mo>⁢</mo><mi>i</mi><mo>⁢</mo><mi>x</mi></mrow></msub><mo>=</mo><mfrac><mrow><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>1</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mo>⁢</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>1</mn></mrow></msub></mrow><mo>+</mo><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>2</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mo>⁢</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>2</mn></mrow></msub></mrow><mo>+</mo><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>3</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mo>⁢</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>3</mn></mrow></msub></mrow></mrow><mrow><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>1</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow><mo>+</mo><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>2</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow><mo>+</mo><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>3</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow></mrow></mfrac></mrow></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr>
</table>
<p class="ltx_p">Above it was shown that an equation of this type does not yield properly
formulated model equations. In the streams concept we therefore decide
to split the energy balance, which consists of different branches
depending on the mass flow direction. Consequently, separate energy
balances are the result; each valid for specific flow directions.</p>
</div>
<div id="A4.S2.p5" class="ltx_para">
<p class="ltx_p">In a model governing equations have to establish the specific enthalpy
of fluid leaving the model based on the specific enthalpy of fluid
flowing into it. Whenever the mixing enthalpy is <span class="ltx_text ltx_emph ltx_font_italic">used</span> in a model
it is therefore the mixing enthalpy under the assumption of fluid
flowing into said model.</p>
</div>
<div id="A4.S2.p6" class="ltx_para">
<p class="ltx_p">We establish this quantity using a dedicated operator <math id="A4.S2.p6.m1" class="ltx_Math" alttext="inStream(h_{outflow,i})=h_{mix}" display="inline"><mrow><mrow><mi>i</mi><mo>⁢</mo><mi>n</mi><mo>⁢</mo><mi>S</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>r</mi><mo>⁢</mo><mi>e</mi><mo>⁢</mo><mi>a</mi><mo>⁢</mo><mi>m</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mi>i</mi></mrow></msub><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><msub><mi>h</mi><mrow><mi>m</mi><mo>⁢</mo><mi>i</mi><mo>⁢</mo><mi>x</mi></mrow></msub></mrow></math> <math id="A4.S2.p6.m2" class="ltx_Math" alttext="(\dot{m}_{i}&gt;=0)" display="inline"><mrow><mo stretchy="false">(</mo><mrow><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mi>i</mi></msub><mo>≥</mo><mn>0</mn></mrow><mo stretchy="false">)</mo></mrow></math>. This leads to
three different incarnations of (n in the general case). This is
illustrated in the figure below. For the present example of three
components in a connection set, this means the following.</p>
<table id="A6.S0.EGx5" class="ltx_equationgroup ltx_eqn_eqnarray ltx_eqn_table">

<tr id="A4.Ex7" class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="A4.Ex7.m1" class="ltx_Math" alttext="\displaystyle inStream(h_{outflow,1})" display="inline"><mrow><mi>i</mi><mo>⁢</mo><mi>n</mi><mo>⁢</mo><mi>S</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>r</mi><mo>⁢</mo><mi>e</mi><mo>⁢</mo><mi>a</mi><mo>⁢</mo><mi>m</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo></mrow></mrow></math></td>
<td class="ltx_td ltx_align_center ltx_eqn_cell"><math id="A4.Ex7.m2" class="ltx_Math" alttext="\displaystyle=" display="inline"><mo>=</mo></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="A4.Ex7.m3" class="ltx_Math" alttext="\displaystyle\frac{\text{max}(-\dot{m}_{2},0)h_{outflow,2}+\text{max}(-\dot{m}%
_{3},0)h_{outflow,3}}{\text{max}(-\dot{m}_{2},0)+\text{max}(-\dot{m}_{3},0)}" display="inline"><mstyle displaystyle="true"><mfrac><mrow><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>2</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mo>⁢</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>2</mn></mrow></msub></mrow><mo>+</mo><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>3</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mo>⁢</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>3</mn></mrow></msub></mrow></mrow><mrow><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>2</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow><mo>+</mo><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>3</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow></mrow></mfrac></mstyle></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr>
<tr id="A4.Ex8" class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="A4.Ex8.m1" class="ltx_Math" alttext="\displaystyle inStream(h_{outflow,2})" display="inline"><mrow><mi>i</mi><mo>⁢</mo><mi>n</mi><mo>⁢</mo><mi>S</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>r</mi><mo>⁢</mo><mi>e</mi><mo>⁢</mo><mi>a</mi><mo>⁢</mo><mi>m</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>2</mn></mrow></msub><mo stretchy="false">)</mo></mrow></mrow></math></td>
<td class="ltx_td ltx_align_center ltx_eqn_cell"><math id="A4.Ex8.m2" class="ltx_Math" alttext="\displaystyle=" display="inline"><mo>=</mo></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="A4.Ex8.m3" class="ltx_Math" alttext="\displaystyle\frac{\text{max}(-\dot{m}_{1},0)h_{outflow,1}+\text{max}(-\dot{m}%
_{3},0)h_{outflow,3}}{\text{max}(-\dot{m}_{1},0)+\text{max}(-\dot{m}_{3},0)}" display="inline"><mstyle displaystyle="true"><mfrac><mrow><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>1</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mo>⁢</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>1</mn></mrow></msub></mrow><mo>+</mo><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>3</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mo>⁢</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>3</mn></mrow></msub></mrow></mrow><mrow><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>1</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow><mo>+</mo><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>3</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow></mrow></mfrac></mstyle></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr>
<tr id="A4.Ex9" class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="A4.Ex9.m1" class="ltx_Math" alttext="\displaystyle inStream(h_{outflow,3})" display="inline"><mrow><mi>i</mi><mo>⁢</mo><mi>n</mi><mo>⁢</mo><mi>S</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>r</mi><mo>⁢</mo><mi>e</mi><mo>⁢</mo><mi>a</mi><mo>⁢</mo><mi>m</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>3</mn></mrow></msub><mo stretchy="false">)</mo></mrow></mrow></math></td>
<td class="ltx_td ltx_align_center ltx_eqn_cell"><math id="A4.Ex9.m2" class="ltx_Math" alttext="\displaystyle=" display="inline"><mo>=</mo></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="A4.Ex9.m3" class="ltx_Math" alttext="\displaystyle\frac{\text{max}(-\dot{m}_{1},0)h_{outflow,1}+\text{max}(-\dot{m}%
_{2},0)h_{outflow,2}}{\text{max}(-\dot{m}_{1},0)+\text{max}(-\dot{m}_{2},0)}" display="inline"><mstyle displaystyle="true"><mfrac><mrow><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>1</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mo>⁢</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>1</mn></mrow></msub></mrow><mo>+</mo><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>2</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mo>⁢</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>2</mn></mrow></msub></mrow></mrow><mrow><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>1</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow><mo>+</mo><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>2</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow></mrow></mfrac></mstyle></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr>
</table>
</div>
<figure id="A4.F2" class="ltx_figure">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure">Figure D.2: </span>Exemplary connection set with three connected components</figcaption><img src="media/fluidmix3.png" id="A4.F2.g1" class="ltx_graphics ltx_centering" width="271" height="271" alt="">
</figure>
<div id="A4.S2.p7" class="ltx_para">
<p class="ltx_p">In the general case of a connection set with <span class="ltx_text ltx_emph ltx_font_italic">n</span> components,
similar considerations lead to the following.</p>
<table id="A4.Ex10" class="ltx_equation ltx_eqn_table">

<tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="A4.Ex10.m1" class="ltx_Math" alttext="inStream(h_{outflow,i})=\frac{\sum_{j=1,...,n;j\neq i}\text{max}(-\dot{m}_{j},%
0)h_{outflow,j}}{\sum_{j=1,...,n;j\neq i}\text{max}(-\dot{m}_{j},0)}" display="block"><mrow><mrow><mi>i</mi><mo>⁢</mo><mi>n</mi><mo>⁢</mo><mi>S</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>r</mi><mo>⁢</mo><mi>e</mi><mo>⁢</mo><mi>a</mi><mo>⁢</mo><mi>m</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mi>i</mi></mrow></msub><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mfrac><mrow><msub><mo largeop="true" symmetric="true">∑</mo><mrow><mrow><mi>j</mi><mo>=</mo><mrow><mn>1</mn><mo>,</mo><mi mathvariant="normal">…</mi><mo>,</mo><mi>n</mi></mrow></mrow><mo>;</mo><mrow><mi>j</mi><mo>≠</mo><mi>i</mi></mrow></mrow></msub><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mi>j</mi></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mo>⁢</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mi>j</mi></mrow></msub></mrow></mrow><mrow><msub><mo largeop="true" symmetric="true">∑</mo><mrow><mrow><mi>j</mi><mo>=</mo><mrow><mn>1</mn><mo>,</mo><mi mathvariant="normal">…</mi><mo>,</mo><mi>n</mi></mrow></mrow><mo>;</mo><mrow><mi>j</mi><mo>≠</mo><mi>i</mi></mrow></mrow></msub><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mi>j</mi></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow></mrow></mfrac></mrow></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr>
</table>
</div>
</section>
<section id="special-cases-covered-by-the-instream-operator-definition" class="ltx_section">
<h1 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">D.3 </span>Special cases covered by the inStream() operator definition</h1>

<section id="stream-connector-is-not-connected-n-1" class="ltx_subsection">
<h2 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">D.3.1 </span>Stream connector is not connected (N=1):</h2>

<div id="A4.S3.SS1.p1" class="ltx_para">
<p class="ltx_p">For this case, the return value of the <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">inStream</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">()</span></span> operator is arbitrary.
Therefore, it is set to the outflow value.</p>
</div>
</section>
<section id="connection-of-2-stream-connectors-one-to-one-connections-n-2" class="ltx_subsection">
<h2 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">D.3.2 </span>Connection of 2 stream connectors, one to one connections (N=2):</h2>

<div id="A4.S3.SS2.p1" class="ltx_para">
<table id="A6.S0.EGx6" class="ltx_equationgroup ltx_eqn_eqnarray ltx_eqn_table">

<tr id="A4.Ex11" class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="A4.Ex11.m1" class="ltx_Math" alttext="\displaystyle inStream(h_{outflow,1})" display="inline"><mrow><mi>i</mi><mo>⁢</mo><mi>n</mi><mo>⁢</mo><mi>S</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>r</mi><mo>⁢</mo><mi>e</mi><mo>⁢</mo><mi>a</mi><mo>⁢</mo><mi>m</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo></mrow></mrow></math></td>
<td class="ltx_td ltx_align_center ltx_eqn_cell"><math id="A4.Ex11.m2" class="ltx_Math" alttext="\displaystyle=" display="inline"><mo>=</mo></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="A4.Ex11.m3" class="ltx_Math" alttext="\displaystyle\frac{\text{max}(-\dot{m}_{2},0)h_{outflow,2}}{\text{max}(-\dot{m%
}_{2},0)}=h_{outflow,2}" display="inline"><mrow><mstyle displaystyle="true"><mfrac><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>2</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mo>⁢</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>2</mn></mrow></msub></mrow><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>2</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow></mfrac></mstyle><mo>=</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>2</mn></mrow></msub></mrow></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr>
<tr id="A4.Ex12" class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="A4.Ex12.m1" class="ltx_Math" alttext="\displaystyle inStream(h_{outflow,2})" display="inline"><mrow><mi>i</mi><mo>⁢</mo><mi>n</mi><mo>⁢</mo><mi>S</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>r</mi><mo>⁢</mo><mi>e</mi><mo>⁢</mo><mi>a</mi><mo>⁢</mo><mi>m</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>2</mn></mrow></msub><mo stretchy="false">)</mo></mrow></mrow></math></td>
<td class="ltx_td ltx_align_center ltx_eqn_cell"><math id="A4.Ex12.m2" class="ltx_Math" alttext="\displaystyle=" display="inline"><mo>=</mo></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="A4.Ex12.m3" class="ltx_Math" alttext="\displaystyle\frac{\text{max}(-\dot{m}_{1},0)h_{outflow,1}}{\text{max}(-\dot{m%
}_{1},0)}=h_{outflow,1}" display="inline"><mrow><mstyle displaystyle="true"><mfrac><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>1</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mo>⁢</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>1</mn></mrow></msub></mrow><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>1</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow></mfrac></mstyle><mo>=</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>1</mn></mrow></msub></mrow></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr>
</table>
</div>
<div id="A4.S3.SS2.p2" class="ltx_para">
<p class="ltx_p">In this case, <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">inStream</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">()</span></span> is continuous (contrary to <math id="A4.S3.SS2.p2.m1" class="ltx_Math" alttext="h_{mix}" display="inline"><msub><mi>h</mi><mrow><mi>m</mi><mo>⁢</mo><mi>i</mi><mo>⁢</mo><mi>x</mi></mrow></msub></math>) and does not
depend on flow rates. The latter result means that this transformation
may remove nonlinear systems of equations, which requires that either
simplifications of the form “a*b/a = b” must be provided, or that this
case is treated directly.</p>
</div>
</section>
<section id="connection-of-3-stream-connectors-where-one-mass-flow-rate-is-identical-to-zero-n-3-and" class="ltx_subsection">
<h2 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">D.3.3 </span>Connection of 3 stream connectors where one mass flow rate is identical to zero (N=3 and <math id="A4.S3.SS3.m1" class="ltx_Math" alttext="\dot{m}_{3}=0" display="inline"><mrow><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>3</mn></msub><mo>=</mo><mn>0</mn></mrow></math>):</h2>

<div id="A4.S3.SS3.p1" class="ltx_para">
<p class="ltx_p">This case occurs, when a one-port sensor (like a temperature sensor) is
connected to two connected components. For the sensor, the min attribute
of the mass flow rate has to be set to zero (no fluid exiting the
component via this connector). The suggested implementation results in
the following equations, and as indicated the last formula can be
simplified further by using <math id="A4.S3.SS3.p1.m1" class="ltx_Math" alttext="\dot{m}_{3}=0" display="inline"><mrow><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>3</mn></msub><mo>=</mo><mn>0</mn></mrow></math>:</p>
<table id="A6.S0.EGx7" class="ltx_equationgroup ltx_eqn_eqnarray ltx_eqn_table">

<tr id="A4.Ex13" class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="A4.Ex13.m1" class="ltx_Math" alttext="\displaystyle inStream(h_{outflow,1})" display="inline"><mrow><mi>i</mi><mo>⁢</mo><mi>n</mi><mo>⁢</mo><mi>S</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>r</mi><mo>⁢</mo><mi>e</mi><mo>⁢</mo><mi>a</mi><mo>⁢</mo><mi>m</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo></mrow></mrow></math></td>
<td class="ltx_td ltx_align_center ltx_eqn_cell"><math id="A4.Ex13.m2" class="ltx_Math" alttext="\displaystyle=" display="inline"><mo>=</mo></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="A4.Ex13.m3" class="ltx_Math" alttext="\displaystyle h_{outflow,2}" display="inline"><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>2</mn></mrow></msub></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr>
<tr id="A4.Ex14" class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="A4.Ex14.m1" class="ltx_Math" alttext="\displaystyle inStream(h_{outflow,2})" display="inline"><mrow><mi>i</mi><mo>⁢</mo><mi>n</mi><mo>⁢</mo><mi>S</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>r</mi><mo>⁢</mo><mi>e</mi><mo>⁢</mo><mi>a</mi><mo>⁢</mo><mi>m</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>2</mn></mrow></msub><mo stretchy="false">)</mo></mrow></mrow></math></td>
<td class="ltx_td ltx_align_center ltx_eqn_cell"><math id="A4.Ex14.m2" class="ltx_Math" alttext="\displaystyle=" display="inline"><mo>=</mo></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="A4.Ex14.m3" class="ltx_Math" alttext="\displaystyle h_{outflow,1}" display="inline"><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>1</mn></mrow></msub></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr>
<tr id="A4.Ex16" class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="A4.Ex15.m1" class="ltx_Math" alttext="\displaystyle inStream(h_{outflow,3})" display="inline"><mrow><mi>i</mi><mo>⁢</mo><mi>n</mi><mo>⁢</mo><mi>S</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>r</mi><mo>⁢</mo><mi>e</mi><mo>⁢</mo><mi>a</mi><mo>⁢</mo><mi>m</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>3</mn></mrow></msub><mo stretchy="false">)</mo></mrow></mrow></math></td>
<td class="ltx_td ltx_align_center ltx_eqn_cell"><math id="A4.Ex15.m2" class="ltx_Math" alttext="\displaystyle=" display="inline"><mo>=</mo></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="A4.Ex15.m3" class="ltx_Math" alttext="\displaystyle\frac{\text{max}(-\dot{m}_{1},0)h_{outflow,1}+\text{max}(-\dot{m}%
_{2},0)h_{outflow,2}}{\text{max}(-\dot{m}_{1},0)+\text{max}(-\dot{m}_{2},0)}" display="inline"><mstyle displaystyle="true"><mfrac><mrow><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>1</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mo>⁢</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>1</mn></mrow></msub></mrow><mo>+</mo><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>2</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mo>⁢</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>2</mn></mrow></msub></mrow></mrow><mrow><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>1</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow><mo>+</mo><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>2</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow></mrow></mfrac></mstyle></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr>
<tr class="ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"></td>
<td class="ltx_td ltx_align_center ltx_eqn_cell"><math id="A4.Ex16.m2" class="ltx_Math" alttext="\displaystyle=" display="inline"><mo>=</mo></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="A4.Ex16.m3" class="ltx_Math" alttext="\displaystyle\begin{cases}h_{outflow,2}&amp;\text{if $\dot{m}_{1}&gt;=0$}\\
h_{outflow,1}&amp;\text{if $\dot{m}_{1}&lt;0$ and $\dot{m}_{3}=0$}\end{cases}" display="inline"><mrow><mo>{</mo><mtable columnspacing="5pt" rowspacing="0pt"><mtr><mtd columnalign="left"><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>2</mn></mrow></msub></mtd><mtd columnalign="left"><mrow><mtext>if </mtext><mrow><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>1</mn></msub><mo>≥</mo><mn>0</mn></mrow></mrow></mtd></mtr><mtr><mtd columnalign="left"><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>1</mn></mrow></msub></mtd><mtd columnalign="left"><mrow><mtext>if </mtext><mrow><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>1</mn></msub><mo>&lt;</mo><mn>0</mn></mrow><mtext> and </mtext><mrow><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>3</mn></msub><mo>=</mo><mn>0</mn></mrow></mrow></mtd></mtr></mtable></mrow></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr>
</table>
</div>
<figure id="A4.F3" class="ltx_figure">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure">Figure D.3: </span>Example series connection of multiple models with stream connectors </figcaption><img src="media/fluidmix4.png" id="A4.F3.g1" class="ltx_graphics ltx_centering" width="541" height="271" alt="">
</figure>
<div id="A4.S3.SS3.p2" class="ltx_para">
<p class="ltx_p">For the two components with finite mass flow rates (not the sensor), the
properties discussed for two connected components still hold. The
connection set equations reflect that the sensor does not any influence
by discarding the flow rate of the latter. In several cases a non-linear
equation system is removed by this transformation. However, <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">inStream</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(<span class="ltx_text ltx_lst_identifier">..</span>)</span></span>
results in a discontinuous equation for the sensor, which is consistent
with modeling the convective phenomena only. The discontinuous equation
is uncritical, if the sensor variable is not used in a feedback loop
with direct feedthrough, since the discontinuous equation is then not
part of an algebraic loop. Otherwise, it is advisable to regularize or
filter the sensor signal.</p>
</div>
</section>
<section id="connection-of-3-stream-connectors-where-two-mass-flow-rates-are-positive-ideal-splitting-junction-for-uni-directional-flow" class="ltx_subsection">
<h2 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">D.3.4 </span>Connection of 3 stream connectors where two mass flow rates are positive (ideal splitting junction for uni-directional flow)</h2>

<div id="A4.S3.SS4.p1" class="ltx_para">
<p class="ltx_p">If uni-directional flow is present and an ideal splitter is modelled,
the required flow direction should be defined in the connector instance
with the “<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">min</span>” attribute (the “<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">max</span>” attribute could be also defined,
however it does not lead to simplifications):</p>
</div>
<div id="A4.S3.SS4.p2" class="ltx_para">
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,bW9kZWwgbTIKICBGbHVpZHBvcnQgYyhtX2Zsb3cobWluPTApKTsKICAuLi4KZW5kIG0yOw==">⬇</a></div>
<div id="lstnumberx4858" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">model</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">m2</span>
</div>
<div id="lstnumberx4859" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">Fluidport</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">c</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">m_flow</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">min</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=0));</span>
</div>
<div id="lstnumberx4860" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">...</span>
</div>
<div id="lstnumberx4861" class="ltx_listingline">
<span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" style="font-size:90%;color:#000066;">end</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">m2</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">;</span>
</div>
</div>
</div>
<div id="A4.S3.SS4.p3" class="ltx_para">
<p class="ltx_p">Consider the case of and all other mass flow rates positive (with the
min attribute set accordingly). Connecting <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">m1.c</span> with <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">m2.c</span> and <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">m3.c</span>, such
that</p>
</div>
<div id="A4.S3.SS4.p4" class="ltx_para">
<div class="ltx_listing ltx_lst_language_modelica ltx_lstlisting ltx_listing" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ICBtMi5jLm1fZmxvdy5taW4gPSAwOyAvLyBtYXgoLW0yLmMubV9mbG93LDApID0gMAogIG0zLmMubV9mbG93Lm1pbiA9IDA7IC8vIG1heCgtbTMuYy5tX2Zsb3csMCkgPSAw">⬇</a></div>
<div id="lstnumberx4862" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">m2.c.m_flow.min</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">0;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>max(-m2.c.m_flow,0)<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span>0</span>
</div>
<div id="lstnumberx4863" class="ltx_listingline">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;">  </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;">m3.c.m_flow.min</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">0;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" style="font-size:90%;"> </span><span class="ltx_text ltx_lst_comment ltx_font_sansserif" style="font-size:90%;color:#006600;">//<span class="ltx_text ltx_lst_space"> </span>max(-m3.c.m_flow,0)<span class="ltx_text ltx_lst_space"> </span>=<span class="ltx_text ltx_lst_space"> </span></span>
</div>
</div>
<p class="ltx_p">results in the following equation:</p>
<table id="A4.Ex17" class="ltx_equation ltx_eqn_table">

<tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="A4.Ex17.m1" class="ltx_Math" alttext="inStream(h_{outflow,1})=\frac{\text{max}(-\dot{m}_{2},0)h_{outflow,2}+\text{%
max}(-\dot{m}_{3},0)h_{outflow,3}}{\text{max}(-\dot{m}_{2},0)+\text{max}(-\dot%
{m}_{3},0)}=\frac{0}{0}" display="block"><mrow><mrow><mi>i</mi><mo>⁢</mo><mi>n</mi><mo>⁢</mo><mi>S</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>r</mi><mo>⁢</mo><mi>e</mi><mo>⁢</mo><mi>a</mi><mo>⁢</mo><mi>m</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo></mrow></mrow><mo>=</mo><mfrac><mrow><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>2</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mo>⁢</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>2</mn></mrow></msub></mrow><mo>+</mo><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>3</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mo>⁢</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>3</mn></mrow></msub></mrow></mrow><mrow><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>2</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow><mo>+</mo><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>3</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow></mrow></mfrac><mo>=</mo><mfrac><mn>0</mn><mn>0</mn></mfrac></mrow></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr>
</table>
</div>
<div id="A4.S3.SS4.p5" class="ltx_para">
<p class="ltx_p">The <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting" style="background-color:#FFFFFF;"><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;">inStream</span><span class="ltx_text ltx_font_typewriter" style="font-size:90%;">()</span></span> operator cannot be evaluated for a connector, on which
the mass flow rate has to be negative by definition. The reason is that
the value is arbitrary, which is why it is defined as follows.</p>
<table id="A4.Ex18" class="ltx_equation ltx_eqn_table">

<tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="A4.Ex18.m1" class="ltx_Math" alttext="inStream(h_{outflow,1}):=h_{outflow,1}" display="block"><mrow><mrow><mi>i</mi><mo>⁢</mo><mi>n</mi><mo>⁢</mo><mi>S</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>r</mi><mo>⁢</mo><mi>e</mi><mo>⁢</mo><mi>a</mi><mo>⁢</mo><mi>m</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo></mrow></mrow><mo>:=</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>1</mn></mrow></msub></mrow></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr>
</table>
<p class="ltx_p">For the remaining connectors the inStream() operator reduces to a simple
result.</p>
<table id="A6.S0.EGx8" class="ltx_equationgroup ltx_eqn_eqnarray ltx_eqn_table">

<tr id="A4.Ex19" class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="A4.Ex19.m1" class="ltx_Math" alttext="\displaystyle inStream(h_{outflow,2})" display="inline"><mrow><mi>i</mi><mo>⁢</mo><mi>n</mi><mo>⁢</mo><mi>S</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>r</mi><mo>⁢</mo><mi>e</mi><mo>⁢</mo><mi>a</mi><mo>⁢</mo><mi>m</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>2</mn></mrow></msub><mo stretchy="false">)</mo></mrow></mrow></math></td>
<td class="ltx_td ltx_align_center ltx_eqn_cell"><math id="A4.Ex19.m2" class="ltx_Math" alttext="\displaystyle=\frac{\text{max}(-\dot{m}_{1},0)h_{outflow,1}+\text{max}(-\dot{m%
}_{3},0)h_{outflow,3}}{\text{max}(-\dot{m}_{1},0)+\text{max}(-\dot{m}_{3},0)}=%
h_{outflow,1}" display="inline"><mrow><mi></mi><mo>=</mo><mstyle displaystyle="true"><mfrac><mrow><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>1</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mo>⁢</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>1</mn></mrow></msub></mrow><mo>+</mo><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>3</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mo>⁢</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>3</mn></mrow></msub></mrow></mrow><mrow><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>1</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow><mo>+</mo><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>3</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow></mrow></mfrac></mstyle><mo>=</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>1</mn></mrow></msub></mrow></math></td>
<td class="ltx_td ltx_eqn_cell"></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr>
<tr id="A4.Ex20" class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="A4.Ex20.m1" class="ltx_Math" alttext="\displaystyle inStream(h_{outflow,3})" display="inline"><mrow><mi>i</mi><mo>⁢</mo><mi>n</mi><mo>⁢</mo><mi>S</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>r</mi><mo>⁢</mo><mi>e</mi><mo>⁢</mo><mi>a</mi><mo>⁢</mo><mi>m</mi><mo>⁢</mo><mrow><mo stretchy="false">(</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>3</mn></mrow></msub><mo stretchy="false">)</mo></mrow></mrow></math></td>
<td class="ltx_td ltx_align_center ltx_eqn_cell"><math id="A4.Ex20.m2" class="ltx_Math" alttext="\displaystyle=\frac{\text{max}(-\dot{m}_{1},0)h_{outflow,1}+\text{max}(-\dot{m%
}_{2},0)h_{outflow,2}}{\text{max}(-\dot{m}_{1},0)+\text{max}(-\dot{m}_{2},0)}=%
h_{outflow,1}" display="inline"><mrow><mi></mi><mo>=</mo><mstyle displaystyle="true"><mfrac><mrow><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>1</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mo>⁢</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>1</mn></mrow></msub></mrow><mo>+</mo><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>2</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><mo>⁢</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>2</mn></mrow></msub></mrow></mrow><mrow><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>1</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow><mo>+</mo><mrow><mtext>max</mtext><mo>⁢</mo><mrow><mo stretchy="false">(</mo><mrow><mo>-</mo><msub><mover accent="true"><mi>m</mi><mo>˙</mo></mover><mn>2</mn></msub></mrow><mo>,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mrow></mrow></mfrac></mstyle><mo>=</mo><msub><mi>h</mi><mrow><mrow><mi>o</mi><mo>⁢</mo><mi>u</mi><mo>⁢</mo><mi>t</mi><mo>⁢</mo><mi>f</mi><mo>⁢</mo><mi>l</mi><mo>⁢</mo><mi>o</mi><mo>⁢</mo><mi>w</mi></mrow><mo>,</mo><mn>1</mn></mrow></msub></mrow></math></td>
<td class="ltx_td ltx_eqn_cell"></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr>
</table>
<p class="ltx_p">Again, the previous non-linear algebraic system of equations is removed.
This means that utilizing the information about uni-directional flow is
very important.</p>
</div>
<div id="A4.S3.SS4.p6" class="ltx_para">
<p class="ltx_p">To summarize, if all mass flow rates are zero, the balance equations for
stream variables (<a href="#eq:D1" title="(D.1) ‣ D.2 Rationale for the formulation of the inStream() operator ‣ Appendix D Derivation of Stream Equations ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_tag">D.1</span></a>) and for flows (<a href="#eq:D2" title="(D.2) ‣ D.2 Rationale for the formulation of the inStream() operator ‣ Appendix D Derivation of Stream Equations ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_tag">D.2</span></a>) are identically fulfilled. In
such a case, any value of h_mix fulfills (<a href="#eq:D1" title="(D.1) ‣ D.2 Rationale for the formulation of the inStream() operator ‣ Appendix D Derivation of Stream Equations ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref"><span class="ltx_text ltx_ref_tag">D.1</span></a>), i.e., a unique
mathematical solution does not exist. This specification only requires
that a solution fulfills the balance equations. Additionally, a
recommendation is given to compute all unknowns in a unique way, by
providing an explicit formula for the <span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_keywords3 ltx_font_typewriter" style="font-size:90%;color:#E60000;background-color:#FFFFFF;">inStream</span> operator. Due to the
definition, that only flows where the corresponding “min” attribute is
neither zero nor positive enter this formula, a meaningful physcial
result is always obtained, even in case of zero mass flow rate. As a
side effect, non-linear equation systems are automatically removed in
special cases, like sensors or uni-directional flow, without any
symbolic transformations (no equation must be analyzed; only the
“<span class="ltx_text ltx_lst_language_modelica_short ltx_lstlisting ltx_lst_identifier ltx_font_typewriter" style="font-size:90%;background-color:#FFFFFF;">min</span>”-attributes of the corresponding flow variables).</p>
</div>
</section>
</section>
</section>
</div>
<footer class="ltx_page_footer">
<div>
<a href="A3.html" title="Appendix C Modelica DAE Representation ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref" rel="prev"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C </span>Modelica DAE Representation</span></a><a href="A5.html" title="Appendix E Modelica Revision History ‣ Modelica® - A Unified Object-Oriented Language for Systems Modeling Language Specification Version 3.4" class="ltx_ref" rel="next"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">E </span>Modelica Revision History</span></a>
</div>
<div class="ltx_page_logo">Generated  on Tue May 14 15:30:12 2019 by <a href="http://dlmf.nist.gov/LaTeXML/">LaTeXML <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg==" alt="[LOGO]"></a>
</div></footer>
</div>
</body>
</html>
